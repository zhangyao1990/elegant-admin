
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{_ as F}from"./index-qeCTDZwl.js";import G from"./index-DCl_rd1q.js";import{_ as J}from"./AssigneePanel.vue_vue_type_script_setup_true_lang-DK6I14do.js";import K from"./TaskListeners-DUaA8Id2.js";import{j as O}from"./element-plus-iUOJk6xm.js";import{d as Q,bM as W,i as Z,r as j,j as w,b as C,g as h,ai as s,a as z,S as D,U as l,_ as t,k as b,Y as d,X as R,E as y,f as i}from"./@vue-B5ZJ3lyG.js";import{_ as ee}from"./vue-esign-CYl9_Ryz.js";import"./vite-plugin-fake-server-4rIte7rE.js";import"./mockjs-CyY_Wk_H.js";import"./@imengyu-CEcZjhxx.js";import"./vue-DvVlWPqX.js";import"./floating-vue-AocVffS4.js";import"./@floating-ui-DiM7Jq06.js";import"./vue-m-message-CaZYo5LC.js";import"./overlayscrollbars-DIcyBJd7.js";import"./@iconify-BcJ8VpTk.js";import"./overlayscrollbars-vue-CwvYLriB.js";import"./@headlessui-Cgia3ZxR.js";import"./mitt-DJ65BbbF.js";import"./crypto-js-0jcLrwUI.js";import"./lodash-es-Cgwu3vQX.js";import"./pinia-C6gN_FJk.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-B53joON4.js";import"./hotkeys-js-BfWqkGRU.js";import"./vue-i18n-BoS7Exf_.js";import"./@intlify-CEEhciFb.js";import"./colord-CrBFWQzZ.js";import"./monaco-editor-1i8roCpp.js";import"./path-browserify-CaPOtSVJ.js";import"./axios-CRnBnh7r.js";import"./@vueuse-D9pgrdqz.js";import"./nprogress-CK9xi7fq.js";import"./@element-plus-DlsPF3Ud.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DHZ_rfNz.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./UserTag-wJe9SfQr.js";import"./UserPicker-xx7XSXa5.js";import"./sys_user-rXWpRg4F.js";import"./index-bQqCd7I9.js";import"./RoleTag-BaAFCPzf.js";import"./RolePicker-CL6w3CbS.js";import"./sys_role-CiNVMn25.js";const te={class:"opt-item"},le={class:"opt-item__content"},oe={class:"opt-item"},ae={class:"opt-item__content"},ne={class:"opt-item"},ie={class:"opt-item__content"},de={class:"opt-item"},se={class:"opt-item__content"},ue={class:"opt-item"},re={class:"opt-item__content"},me={class:"opt-item"},pe={class:"opt-item__content"},fe={class:"opt-item"},ve={class:"opt-item__content"},_e=Q({__name:"ApprovalPanel",props:{activeData:{},activeDataModifiers:{}},emits:["update:activeData"],setup(N){const a=W(N,"activeData"),{fields:E}=Z("flowDesign",{fields:j([]),admin:[]}),$=w(O),P=j("properties"),c=C({get(){return a.value.formProperties.every(n=>n.readonly)},set(n){a.value.formProperties.forEach(e=>e.readonly=n),n&&(g.value=!1,U.value=!1)}}),g=C({get(){return a.value.formProperties.every(n=>n.hidden)},set(n){a.value.formProperties.forEach(e=>e.hidden=n),n&&(U.value=!1,c.value=!1)}}),U=C({get(){return a.value.formProperties.every(n=>n.required)},set(n){a.value.formProperties.forEach(e=>e.required=n),n&&(c.value=!1,g.value=!1)}});function B(n){n.readonly&&(n.required=!1,n.hidden=!1)}function A(n){n.required&&(n.readonly=!1,n.hidden=!1)}function H(n){n.hidden&&(n.readonly=!1,n.required=!1)}return h(()=>{const n=a.value.formProperties;a.value.formProperties=E.value.map(e=>({id:e.id,name:e.label,readonly:e.readonly||!1,hidden:e.hidden,required:e.required||!1})),a.value.formProperties.forEach(e=>{const u=n.find(p=>p.id===e.id);u&&(e.readonly=u.readonly,e.hidden=u.hidden,e.required=u.required)})}),(n,e)=>{const u=s("el-radio"),p=s("el-col"),M=s("el-radio-group"),L=s("el-input-number"),r=s("el-text"),q=s("el-form-item"),S=s("el-row"),T=s("el-form"),k=s("el-tab-pane"),x=s("el-table-column"),V=s("el-checkbox"),I=s("el-table"),f=F,v=s("el-icon"),_=s("el-switch"),X=s("el-space"),Y=s("el-tabs");return z(),D(Y,{modelValue:b(P),"onUpdate:modelValue":e[16]||(e[16]=o=>y(P)?P.value=o:null),stretch:"",class:"tab-segmented"},{default:l(()=>[t(k,{label:"审批人",name:"properties"},{default:l(()=>[t(T,{"label-position":"top","label-width":"90px"},{default:l(()=>[t(J,{"active-data":a.value,"onUpdate:activeData":e[0]||(e[0]=o=>a.value=o),fields:b(E),type:"审批"},{default:l(()=>[t(p,{span:8},{default:l(()=>[t(u,{value:"autoRefuse"},{default:l(()=>e[17]||(e[17]=[d(" 自动拒绝 ")])),_:1})]),_:1})]),_:1},8,["active-data","fields"]),t(q,{prop:"method",label:"多人审批方式"},{default:l(()=>[t(M,{modelValue:a.value.multi,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.multi=o),class:"flex-col important-items-start"},{default:l(()=>[t(u,{value:"sequential"},{default:l(()=>e[18]||(e[18]=[d(" 依次审批（按顺序审批） ")])),_:1}),t(u,{value:"joint"},{default:l(()=>e[19]||(e[19]=[d(" 会签（需要所有审批人都通过） ")])),_:1}),t(u,{value:"single"},{default:l(()=>e[20]||(e[20]=[d(" 或签（其中一名审批人通过即可） ")])),_:1})]),_:1},8,["modelValue"]),a.value.multi==="joint"?(z(),D(r,{key:0},{default:l(()=>[e[21]||(e[21]=d(" 需要 ")),t(L,{modelValue:a.value.multiPercent,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.multiPercent=o),min:1,max:100},null,8,["modelValue"]),e[22]||(e[22]=d(" %人员通过 "))]),_:1})):R("",!0)]),_:1}),t(q,{prop:"nobody",label:"审批人为空"},{default:l(()=>[t(M,{modelValue:a.value.nobody,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.nobody=o),class:"w-full"},{default:l(()=>[t(S,null,{default:l(()=>[t(p,{span:12},{default:l(()=>[t(u,{value:"pass"},{default:l(()=>e[23]||(e[23]=[d(" 自动通过 ")])),_:1})]),_:1}),t(p,{span:12},{default:l(()=>[t(u,{value:"assign"},{default:l(()=>e[24]||(e[24]=[d(" 指定人员 ")])),_:1})]),_:1}),t(p,{span:12},{default:l(()=>[t(u,{value:"reject"},{default:l(()=>e[25]||(e[25]=[d(" 自动拒绝 ")])),_:1})]),_:1}),t(p,{span:12},{default:l(()=>[t(u,{value:"admin"},{default:l(()=>e[26]||(e[26]=[d(" 转交流程管理员 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a.value.nobody==="assign"?(z(),D(G,{key:0,modelValue:a.value.nobodyUsers,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.nobodyUsers=o),multiple:"",placeholder:"指定人员"},null,8,["modelValue"])):R("",!0)]),_:1}),t(q,{prop:"taskListeners",label:"任务监听器"},{default:l(()=>[t(K,{"active-data":a.value,"onUpdate:activeData":e[5]||(e[5]=o=>a.value=o)},null,8,["active-data"])]),_:1})]),_:1})]),_:1}),t(k,{label:"表单权限",name:"formPermissions"},{default:l(()=>[t(I,{data:a.value.formProperties},{default:l(()=>[t(x,{prop:"name",label:"字段"}),t(x,{prop:"readonly"},{header:l(()=>[t(V,{modelValue:b(c),"onUpdate:modelValue":e[6]||(e[6]=o=>y(c)?c.value=o:null),label:"只读"},null,8,["modelValue"])]),default:l(({row:o})=>[t(V,{modelValue:o.readonly,"onUpdate:modelValue":m=>o.readonly=m,onChange:m=>B(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(x,{prop:"required"},{header:l(()=>[t(V,{modelValue:b(U),"onUpdate:modelValue":e[7]||(e[7]=o=>y(U)?U.value=o:null),label:"必填"},null,8,["modelValue"])]),default:l(({row:o})=>[t(V,{modelValue:o.required,"onUpdate:modelValue":m=>o.required=m,onChange:m=>A(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(x,{prop:"hidden"},{header:l(()=>[t(V,{modelValue:b(g),"onUpdate:modelValue":e[8]||(e[8]=o=>y(g)?g.value=o:null),label:"隐藏"},null,8,["modelValue"])]),default:l(({row:o})=>[t(V,{modelValue:o.hidden,"onUpdate:modelValue":m=>o.hidden=m,onChange:m=>H(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])]),_:1}),t(k,{label:"操作权限",name:"operationPermissions"},{default:l(()=>[t(X,{fill:"",size:0,direction:"horizontal",spacer:b($)},{default:l(()=>[i("div",te,[t(v,{size:32},{default:l(()=>[t(f,{class:"opt-item__icon",name:"ep:circle-check"})]),_:1}),i("div",le,[t(r,{tag:"b"},{default:l(()=>e[27]||(e[27]=[d(" 同意 ")])),_:1}),e[28]||(e[28]=i("div",{class:"opt-item__second"}," 审批通过，流转到下一个节点 ",-1))]),t(_,{modelValue:a.value.operations.complete,"onUpdate:modelValue":e[9]||(e[9]=o=>a.value.operations.complete=o),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),i("div",oe,[t(v,{size:32},{default:l(()=>[t(f,{class:"opt-item__icon",name:"ep:circle-close"})]),_:1}),i("div",ae,[t(r,{tag:"b"},{default:l(()=>e[29]||(e[29]=[d(" 拒绝 ")])),_:1}),e[30]||(e[30]=i("div",{class:"opt-item__second"}," 当拒绝任务时，当前任务被终止，并结束整个流程 ",-1))]),t(_,{modelValue:a.value.operations.refuse,"onUpdate:modelValue":e[10]||(e[10]=o=>a.value.operations.refuse=o),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),i("div",ne,[t(v,{size:32},{default:l(()=>[t(f,{class:"opt-item__icon",name:"ep:back"})]),_:1}),i("div",ie,[t(r,{tag:"b"},{default:l(()=>e[31]||(e[31]=[d(" 退回 ")])),_:1}),e[32]||(e[32]=i("div",{class:"opt-item__second"}," 若审批内容存在问题，当前任务将中止并回退至特定历史任务节点 ",-1))]),t(_,{modelValue:a.value.operations.back,"onUpdate:modelValue":e[11]||(e[11]=o=>a.value.operations.back=o),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),i("div",de,[t(v,{size:32},{default:l(()=>[t(f,{class:"opt-item__icon",name:"ep:switch"})]),_:1}),i("div",se,[t(r,{tag:"b"},{default:l(()=>e[33]||(e[33]=[d(" 转交 ")])),_:1}),e[34]||(e[34]=i("div",{class:"opt-item__second"}," 将当前任务移交给其他人处理，以便他们继续执行所需的操作 ",-1))]),t(_,{modelValue:a.value.operations.transfer,"onUpdate:modelValue":e[12]||(e[12]=o=>a.value.operations.transfer=o),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),i("div",ue,[t(v,{size:32},{default:l(()=>[t(f,{class:"opt-item__icon",name:"ep:user-filled"})]),_:1}),i("div",re,[t(r,{tag:"b"},{default:l(()=>e[35]||(e[35]=[d(" 委派 ")])),_:1}),e[36]||(e[36]=i("div",{class:"opt-item__second"}," 将当前任务暂时交由他人处理，待其完成后再交回自己处理 ",-1))]),t(_,{modelValue:a.value.operations.delegate,"onUpdate:modelValue":e[13]||(e[13]=o=>a.value.operations.delegate=o),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),i("div",me,[t(v,{size:32},{default:l(()=>[t(f,{class:"opt-item__icon",name:"ant-design:usergroup-add-outlined"})]),_:1}),i("div",pe,[t(r,{tag:"b"},{default:l(()=>e[37]||(e[37]=[d(" 加签 ")])),_:1}),e[38]||(e[38]=i("div",{class:"opt-item__second"}," 在当前任务上额外添加新人员，以处理相关事项或提供必要的审批或意见 ",-1))]),t(_,{modelValue:a.value.operations.addMulti,"onUpdate:modelValue":e[14]||(e[14]=o=>a.value.operations.addMulti=o),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),i("div",fe,[t(v,{size:32},{default:l(()=>[t(f,{class:"opt-item__icon",name:"ant-design:usergroup-delete-outlined"})]),_:1}),i("div",ve,[t(r,{tag:"b"},{default:l(()=>e[39]||(e[39]=[d(" 减签 ")])),_:1}),e[40]||(e[40]=i("div",{class:"opt-item__second"}," 在当前任务中减少处理人员数量，以简化流程或重新分配责任 ",-1))]),t(_,{modelValue:a.value.operations.minusMulti,"onUpdate:modelValue":e[15]||(e[15]=o=>a.value.operations.minusMulti=o),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])])]),_:1},8,["spacer"])]),_:1})]),_:1},8,["modelValue"])}}}),ut=ee(_e,[["__scopeId","data-v-82328794"]]);export{ut as default};
