
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{r as ct}from"./vue-DvVlWPqX.js";var dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mt(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}function pt(E){if(E.__esModule)return E;var G=E.default;if(typeof G=="function"){var j=function e(){return this instanceof e?Reflect.construct(G,arguments,this.constructor):G.apply(this,arguments)};j.prototype=G.prototype}else j={};return Object.defineProperty(j,"__esModule",{value:!0}),Object.keys(E).forEach(function(e){var A=Object.getOwnPropertyDescriptor(E,e);Object.defineProperty(j,e,A.get?A:{enumerable:!0,get:function(){return E[e]}})}),j}var me={exports:{}};(function(E,G){(function(j,e){e(G,ct)})(dt,function(j,e){let A=null;function Me(){return A!==null}function Se(t){A&&ve(),A=t}function fe(t){t===A&&(A=null)}function ve(){A&&(A.closeMenu(),A=null)}const R={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultZoom:1,defaultAdjustPadding:{x:0,y:10}};function _(t,n){let r=t.offsetTop;return t.offsetParent!=null&&t.offsetParent!=n&&(r-=t.offsetParent.scrollTop,r+=_(t.offsetParent,n)),r}function D(t,n){let r=t.offsetLeft;return t.offsetParent!=null&&t.offsetParent!=n&&(r-=t.offsetParent.scrollLeft,r+=D(t.offsetParent,n)),r}function Be(t,n,r,a){return{x:D(t,a)+n,y:_(t,a)+r}}const re="mx-menu-default-container",we="mx-menu-container-";let Pe=0;function pe(t){const{getContainer:n,zIndex:r}=t;if(n){const d=typeof n=="function"?n():n;if(d){let m=d.getAttribute("id");return m||(m=we+Pe++,d.setAttribute("id",m)),{eleId:m,container:d,isNew:!1}}}let a=document.getElementById(re);return a||(a=document.createElement("div"),a.setAttribute("id",re),a.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(a)),a.style.zIndex=(r==null?void 0:r.toString())||R.defaultZindex.toString(),{eleId:re,container:a,isNew:!0}}function We(t){return typeof t=="number"?`${t}px`:t}const z=e.defineComponent({props:{vnode:{type:null},data:{type:null,default:null}},setup(t){const{vnode:n,data:r}=e.toRefs(t);return()=>typeof n.value=="function"?n.value(r.value):n.value}}),q=(t,n)=>{const r=t.__vccOpts||t;for(const[a,d]of n)r[a]=d;return r},Ie={},Oe={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},je=[e.createElementVNode("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1)];function Ee(t,n){return e.openBlock(),e.createElementBlock("svg",Oe,je)}const Ne=q(Ie,[["render",Ee]]),Re={},He={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},Ve=[e.createElementVNode("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1)];function Fe(t,n){return e.openBlock(),e.createElementBlock("svg",He,Ve)}const he=q(Re,[["render",Fe]]),Ae={class:"mx-item-row"},Le=["xlink:href"],ze={key:1,class:"label"},Te={class:"mx-item-row"},_e={class:"mx-shortcut"},te=e.defineComponent({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(t,{expose:n,emit:r}){const a=t,d=r,{clickHandler:m,clickClose:x,clickableWhenHasChildren:i,disabled:v,hidden:h,label:o,icon:b,iconFontClass:w,showRightArrow:M,shortcut:H,hasChildren:N}=e.toRefs(a),C=e.ref(!1),l=e.ref(!1),s=e.ref(),p=e.inject("globalOptions"),g=e.inject("globalHasSlot"),P=e.inject("globalRenderSlot"),c=e.inject("globalCloseMenu"),k=e.inject("menuContext"),B={getSubMenuInstance:()=>{},showSubMenu:()=>C.value?(k.markActiveMenuItem(B,!0),!0):N.value?(L(),!0):!1,hideSubMenu:()=>{k.closeOtherSubMenu()},isDisabledOrHidden:()=>v.value||h.value,getElement:()=>s.value,focus:()=>l.value=!0,blur:()=>l.value=!1,click:V};e.provide("menuItemInstance",B),e.onMounted(()=>{k.isMenuItemDataCollectedFlag()?e.nextTick(()=>{let f=0;const W=k.getElement();if(W){let T=0;for(let $=0;$<W.children.length;$++){const Y=W.children[$];if(Y.getAttribute("data-type")==="ContextMenuItem"){if(Y===s.value){f=T;break}T++}}}k.addChildMenuItem(B,f)}):k.addChildMenuItem(B)}),e.onBeforeUnmount(()=>{k.removeChildMenuItem(B)});function V(f){if(!v.value){if(f){const W=f.target;if(W.classList.contains("mx-context-no-clickable")||p.value.ignoreClickClassName&&W.classList.contains(p.value.ignoreClickClassName))return;if(p.value.clickCloseClassName&&W.classList.contains(p.value.clickCloseClassName)){f.stopPropagation(),c(a.rawMenuItem);return}}N.value?i.value?(typeof m.value=="function"&&m.value(f),d("click",f)):C.value||L():(typeof m.value=="function"&&m.value(f),d("click",f),x.value&&c(a.rawMenuItem))}}function L(f){l.value=!1,k.checkCloseOtherSubMenuTimeOut()||k.closeOtherSubMenu(),v.value||(k.markActiveMenuItem(B),N.value&&(f||k.markThisOpenedByKeyBoard(),k.addOpenedSubMenu(Z),C.value=!0,e.nextTick(()=>d("subMenuOpen",B))))}function Z(){l.value=!1,C.value=!1,d("subMenuClose",B)}function I(){return{disabled:v.value,label:o.value,icon:b.value,iconFontClass:w.value,showRightArrow:M.value,clickClose:x.value,clickableWhenHasChildren:i.value,shortcut:H.value,theme:p.value.theme,isOpen:C,hasChildren:N,onClick:V,onMouseEnter:L,closeMenu:c}}return n(B),(f,W)=>e.unref(h)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:s,"data-type":"ContextMenuItem"},[e.unref(g)("itemRender")?(e.openBlock(),e.createBlock(e.unref(z),{key:0,vnode:()=>e.unref(P)("itemRender",I())},null,8,["vnode"])):t.customRender?(e.openBlock(),e.createBlock(e.unref(z),{key:1,vnode:t.customRender,data:I()},null,8,["vnode","data"])):(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(["mx-context-menu-item",e.unref(v)?"disabled":"",l.value?"keyboard-focus":"",t.customClass?" "+t.customClass:"",C.value?"open":""]),onClick:V,onMouseenter:L},[e.renderSlot(f.$slots,"default",{},()=>[e.createElementVNode("div",Ae,[e.createElementVNode("div",{class:e.normalizeClass(["mx-icon-placeholder",t.preserveIconWidth?"preserve-width":""])},[e.renderSlot(f.$slots,"icon",{},()=>[e.unref(g)("itemIconRender")?(e.openBlock(),e.createBlock(e.unref(z),{key:0,vnode:()=>e.unref(P)("itemIconRender",I())},null,8,["vnode"])):typeof t.svgIcon=="string"&&t.svgIcon?(e.openBlock(),e.createElementBlock("svg",e.mergeProps({key:1,class:"icon svg"},t.svgProps),[e.createElementVNode("use",{"xlink:href":t.svgIcon},null,8,Le)],16)):typeof e.unref(b)!="string"?(e.openBlock(),e.createBlock(e.unref(z),{key:2,vnode:e.unref(b),data:e.unref(b)},null,8,["vnode","data"])):typeof e.unref(b)=="string"&&e.unref(b)!==""?(e.openBlock(),e.createElementBlock("i",{key:3,class:e.normalizeClass(e.unref(b)+" icon "+e.unref(w)+" "+e.unref(p).iconFontClass)},null,2)):e.createCommentVNode("",!0)]),t.checked?e.renderSlot(f.$slots,"check",{key:0},()=>[e.unref(g)("itemCheckRender")?(e.openBlock(),e.createBlock(e.unref(z),{key:0,vnode:()=>e.unref(P)("itemCheckRender",I())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createVNode(Ne)]):e.createCommentVNode("",!0)],2),e.renderSlot(f.$slots,"label",{},()=>[e.unref(g)("itemLabelRender")?(e.openBlock(),e.createBlock(e.unref(z),{key:0,vnode:()=>e.unref(P)("itemLabelRender",I())},null,8,["vnode"])):typeof e.unref(o)=="string"?(e.openBlock(),e.createElementBlock("span",ze,e.toDisplayString(e.unref(o)),1)):(e.openBlock(),e.createBlock(e.unref(z),{key:2,vnode:e.unref(o),data:e.unref(o)},null,8,["vnode","data"]))])]),e.createElementVNode("div",Te,[e.unref(H)?e.renderSlot(f.$slots,"shortcut",{key:0},()=>[e.unref(g)("itemShortcutRender")?(e.openBlock(),e.createBlock(e.unref(z),{key:0,vnode:()=>e.unref(P)("itemShortcutRender",I())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createElementVNode("span",_e,e.toDisplayString(e.unref(H)),1)]):e.createCommentVNode("",!0),e.unref(M)?e.renderSlot(f.$slots,"rightArrow",{key:1},()=>[e.unref(g)("itemRightArrowRender")?(e.openBlock(),e.createBlock(e.unref(z),{key:0,vnode:()=>e.unref(P)("itemRightArrowRender",I())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createVNode(he)]):e.createCommentVNode("",!0)])])],34)),e.unref(p).menuTransitionProps?(e.openBlock(),e.createBlock(e.Transition,e.normalizeProps(e.mergeProps({key:3},e.unref(p).menuTransitionProps)),{default:e.withCtx(()=>[C.value?e.renderSlot(f.$slots,"submenu",{key:0}):e.createCommentVNode("",!0)]),_:3},16)):C.value?e.renderSlot(f.$slots,"submenu",{key:4}):e.createCommentVNode("",!0)],512))}}),De=e.defineComponent({name:"ContextMenuSperator",components:{VNodeRender:z},setup(){const t=e.inject("globalHasSlot"),n=e.inject("globalRenderSlot");return{globalHasSlot:t,globalRenderSlot:n}}}),$e={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function Ke(t,n,r,a,d,m){const x=e.resolveComponent("VNodeRender");return t.globalHasSlot("separatorRender")?(e.openBlock(),e.createBlock(x,{key:0,vnode:()=>t.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(e.openBlock(),e.createElementBlock("div",$e))}const ne=q(De,[["render",Ke]]),Ze=e.defineComponent({name:"ContextSubMenu",components:{ContextMenuItem:te,ContextMenuSeparator:ne,ContextMenuIconRight:he},props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"}},setup(t){const n=e.inject("menuContext"),r=e.inject("globalOptions"),a=e.inject("globalHasSlot"),d=e.inject("globalRenderSlot"),{zIndex:m,getParentWidth:x,getParentHeight:i,getZoom:v}=n,{adjustPosition:h}=e.toRefs(t),o=e.ref(),b=e.ref(),w=e.ref(),M=e.ref(),H=[],N=e.inject("globalSetCurrentSubMenu"),C=[];let l=null,s=0;function p(){l&&l.blur()}function g(u,S){if(u){for(let F=S!==void 0?S:0;F<C.length;F++)if(!C[F].isDisabledOrHidden()){P(F);break}}else for(let F=S!==void 0?S:C.length-1;F>=0;F--)if(!C[F].isDisabledOrHidden()){P(F);break}}function P(u){if(l&&p(),u!==void 0&&(l=C[Math.max(0,Math.min(u,C.length-1))]),!!l&&(l.focus(),U.value)){const S=l.getElement();S&&(f.value=Math.min(Math.max(-W.value,-S.offsetTop-S.offsetHeight+K.value),0))}}function c(){N(k)}const k={isTopLevel:()=>n.getParentContext()===null,closeSelfAndActiveParent:()=>{const u=L.getParentContext();if(u){u.closeOtherSubMenu();const S=u.getSubMenuInstanceContext();if(S)return S.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var u;return(u=L.getParentContext())==null?void 0:u.closeOtherSubMenu()},moveCurrentItemFirst:()=>g(!0),moveCurrentItemLast:()=>g(!1),moveCurrentItemDown:()=>g(!0,l?C.indexOf(l)+1:0),moveCurrentItemUp:()=>g(!1,l?C.indexOf(l)-1:0),focusCurrentItem:()=>P(),openCurrentItemSubMenu:()=>l?l==null?void 0:l.showSubMenu():!1,triggerCurrentItemClick:u=>l==null?void 0:l.click(u)};let B=!1,V=!1;const L={zIndex:m+1,container:n.container,adjustPadding:r.value.adjustPadding||R.defaultAdjustPadding,getParentWidth:()=>{var u;return((u=b.value)==null?void 0:u.offsetWidth)||0},getParentHeight:()=>{var u;return((u=b.value)==null?void 0:u.offsetHeight)||0},getParentX:()=>y.value.x,getParentY:()=>y.value.y,getParentAbsX:()=>b.value?D(b.value,n.container):0,getParentAbsY:()=>b.value?_(b.value,n.container):0,getPositon:()=>[0,0],getZoom:()=>r.value.zoom||R.defaultZoom,addOpenedSubMenu(u){H.push(u)},closeOtherSubMenu(){H.forEach(u=>u()),H.splice(0,H.length),N(k)},checkCloseOtherSubMenuTimeOut(){return s?(clearTimeout(s),s=0,!0):!1},closeOtherSubMenuWithTimeOut(){s=setTimeout(()=>{s=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(u,S)=>{S===void 0?C.push(u):C.splice(S,0,u)},removeChildMenuItem:u=>{C.splice(C.indexOf(u),1),u.getSubMenuInstance=()=>{}},markActiveMenuItem:(u,S=!1)=>{p(),l=u,S&&P()},markThisOpenedByKeyBoard:()=>{B=!0},isOpenedByKeyBoardFlag:()=>B?(B=!1,!0):!1,isMenuItemDataCollectedFlag:()=>V,getElement:()=>b.value||null,getParentContext:()=>n,getSubMenuInstanceContext:()=>k};e.provide("menuContext",L);const Z={getChildItem:u=>C[u],getMenuDimensions:()=>o.value?{width:o.value.offsetWidth,height:o.value.offsetHeight}:{width:0,height:0},getSubmenuRoot:()=>o.value,getMenu:()=>b.value,getScrollValue:()=>f.value,setScrollValue:u=>f.value=u,getScrollHeight:()=>W.value,getMaxHeight:()=>K.value,getPosition:()=>y.value,setPosition:(u,S)=>{y.value.x=u,y.value.y=S}},I=e.inject("menuItemInstance",void 0);I&&(I.getSubMenuInstance=()=>Z);const f=e.ref(0),W=e.ref(0);function T(u){u?f.value=Math.min(Math.max(f.value-50,-W.value),0):f.value=Math.min(f.value+50,0)}function $(u){u.preventDefault(),u.stopPropagation(),T(u.deltaY>0)}function Y(u){r.value.mouseScroll&&(u.preventDefault(),u.stopPropagation(),T(u.deltaY>0))}const U=e.ref(!1),y=e.ref({x:0,y:0}),K=e.ref(0);return e.onMounted(()=>{const u=n.getPositon();y.value={x:(u[0]??r.value.xOffset??0)/v(),y:(u[1]??r.value.yOffset??0)/v()},N(k),e.nextTick(()=>{var S,F;const O=b.value;if(O&&w.value){const{container:X}=n,ae=(x==null?void 0:x())??0,xe=(i==null?void 0:i())??0,le=typeof n.adjustPadding=="number"?n.adjustPadding:((S=n.adjustPadding)==null?void 0:S.x)??0,ue=typeof n.adjustPadding=="number"?n.adjustPadding:((F=n.adjustPadding)==null?void 0:F.y)??0,J=xe>0?ue:0,rt=document.documentElement.scrollHeight/v(),it=document.documentElement.scrollWidth/v(),at=Math.min(it,X.offsetWidth),se=Math.min(rt,X.offsetHeight);let ce=D(O,X),de=_(O,X);t.direction.includes("l")?y.value.x-=O.offsetWidth+le:t.direction.includes("r")?y.value.x+=ae+le:(y.value.x+=ae/2,y.value.x-=(O.offsetWidth+le)/2),t.direction.includes("t")?y.value.y-=(O.offsetHeight+ue*2)/v():t.direction.includes("b")?y.value.y-=ue/v():(y.value.y+=xe/2/v(),y.value.y-=(O.offsetHeight+ue)/2/v()),h.value&&e.nextTick(()=>{ce=D(O,X),de=_(O,X);const st=ce+O.offsetWidth-at,ye=de+O.offsetHeight+J*2-se;if(U.value=ye>0,W.value=O.offsetHeight-se+J*2,st>0){const Q=ae+O.offsetWidth-le,ee=ce;Q>ee?y.value.x-=ee:y.value.x-=Q}if(U.value){const Q=ye,ee=de;Q>ee?y.value.y-=ee-J:y.value.y-=Q-J,K.value=se-J*2}else K.value=0})}O==null||O.focus({preventScroll:!0}),n.isOpenedByKeyBoardFlag()&&g(!0),V=!0})}),e.onBeforeUnmount(()=>{I&&(I.getSubMenuInstance=()=>{})}),{submenuRoot:o,menu:b,scroll:w,options:r,zIndex:m,constOptions:R,scrollValue:f,upScrollButton:M,overflow:U,position:y,scrollHeight:W,maxHeight:K,...Z,globalHasSlot:a,globalRenderSlot:d,onScroll:T,onSubMenuBodyClick:c,onMouseWhell:Y,onMouseWhellMx:$,solveNumberOrStringSize:We}}}),Ye={key:0,class:"mx-context-menu-updown placeholder"},Ue={key:1,class:"mx-context-menu-updown placeholder"},Ge={class:"mx-context-menu-scroll",ref:"scroll"};function Xe(t,n,r,a,d,m){const x=e.resolveComponent("ContextMenuSeparator"),i=e.resolveComponent("ContextSubMenu",!0),v=e.resolveComponent("ContextMenuItem"),h=e.resolveComponent("ContextMenuIconRight");return e.openBlock(),e.createElementBlock("div",{ref:"submenuRoot",class:e.normalizeClass(["mx-context-menu",t.options.customClass?t.options.customClass:"",t.options.theme??""]),style:e.normalizeStyle({maxWidth:t.maxWidth?t.solveNumberOrStringSize(t.maxWidth):`${t.constOptions.defaultMaxWidth}px`,minWidth:t.minWidth?t.solveNumberOrStringSize(t.minWidth):`${t.constOptions.defaultMinWidth}px`,maxHeight:t.overflow&&t.maxHeight>0?`${t.maxHeight}px`:void 0,zIndex:t.zIndex,left:`${t.position.x}px`,top:`${t.position.y}px`}),"data-type":"ContextSubMenu",onClick:n[4]||(n[4]=(...o)=>t.onSubMenuBodyClick&&t.onSubMenuBodyClick(...o)),onWheel:n[5]||(n[5]=(...o)=>t.onMouseWhell&&t.onMouseWhell(...o))},[e.createElementVNode("div",{class:e.normalizeClass(["mx-context-menu-items"]),ref:"menu",style:e.normalizeStyle({top:`${t.scrollValue}px`})},[e.renderSlot(t.$slots,"default",{},()=>[t.overflow&&t.options.updownButtonSpaceholder?(e.openBlock(),e.createElementBlock("div",Ye)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.items,(o,b)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:b},[o.hidden!==!0&&o.divided==="up"?(e.openBlock(),e.createBlock(x,{key:0})):e.createCommentVNode("",!0),o.hidden!==!0&&o.divided==="self"?(e.openBlock(),e.createBlock(x,{key:1})):(e.openBlock(),e.createBlock(v,{key:2,clickHandler:o.onClick?w=>o.onClick(w):void 0,disabled:o.disabled,hidden:o.hidden,icon:o.icon,iconFontClass:o.iconFontClass,svgIcon:o.svgIcon,svgProps:o.svgProps,label:o.label,customRender:o.customRender,customClass:o.customClass,checked:o.checked,shortcut:o.shortcut,clickClose:o.clickClose,clickableWhenHasChildren:o.clickableWhenHasChildren,preserveIconWidth:o.preserveIconWidth!==void 0?o.preserveIconWidth:t.options.preserveIconWidth,showRightArrow:o.children&&o.children.length>0,hasChildren:o.children&&o.children.length>0,rawMenuItem:o,onSubMenuOpen:w=>{var M;return(M=o.onSubMenuOpen)==null?void 0:M.call(o,w)},onSubMenuClose:w=>{var M;return(M=o.onSubMenuClose)==null?void 0:M.call(o,w)}},e.createSlots({_:2},[o.children&&o.children.length>0?{name:"submenu",fn:e.withCtx(()=>[e.createVNode(i,{items:o.children,maxWidth:o.maxWidth,minWidth:o.minWidth,adjustPosition:o.adjustSubMenuPosition!==void 0?o.adjustSubMenuPosition:t.options.adjustPosition,direction:o.direction!==void 0?o.direction:t.options.direction},null,8,["items","maxWidth","minWidth","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),o.hidden!==!0&&(o.divided==="down"||o.divided===!0)?(e.openBlock(),e.createBlock(x,{key:3})):e.createCommentVNode("",!0)],64))),128)),t.overflow&&t.options.updownButtonSpaceholder?(e.openBlock(),e.createElementBlock("div",Ue)):e.createCommentVNode("",!0)])],4),e.createElementVNode("div",Ge,[e.withDirectives(e.createElementVNode("div",{ref:"upScrollButton",class:e.normalizeClass("mx-context-menu-updown mx-context-no-clickable up"+(t.overflow&&t.scrollValue<0?"":" disabled")),onClick:n[0]||(n[0]=o=>t.onScroll(!1)),onWheel:n[1]||(n[1]=(...o)=>t.onMouseWhellMx&&t.onMouseWhellMx(...o))},[e.createVNode(h)],34),[[e.vShow,t.overflow]]),e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass("mx-context-menu-updown mx-context-no-clickable down"+(t.overflow&&t.scrollValue>-t.scrollHeight?"":" disabled")),onClick:n[2]||(n[2]=o=>t.onScroll(!0)),onWheel:n[3]||(n[3]=(...o)=>t.onMouseWhellMx&&t.onMouseWhellMx(...o))},[e.createVNode(h)],34),[[e.vShow,t.overflow]])],512)],38)}const oe=q(Ze,[["render",Xe]]),qe={class:"mx-menu-ghost-host"},ge=e.defineComponent({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:Object,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(t,{expose:n,emit:r}){const a=t,d=r,m=e.useSlots(),x=e.ref(),{options:i,show:v,container:h}=e.toRefs(a);e.onMounted(()=>{v.value&&w()}),e.onBeforeUnmount(()=>{C()}),e.watch(v,c=>{c?w():(fe(o),C())});const o={closeMenu:M,isClosed:H,getMenuRef:()=>x.value,getMenuDimensions:()=>{var c;return((c=x.value)==null?void 0:c.getMenuDimensions())??{width:0,height:0}}};let b=!1;function w(){N(),Se(o)}function M(c){b=!0,d("close",c),i.value.menuTransitionProps||d("closeAnimFinished"),fe(o)}function H(){return b}function N(){setTimeout(()=>{document.addEventListener("click",g,!0),document.addEventListener("contextmenu",g,!0),document.addEventListener("scroll",p,!0),!a.isFullScreenContainer&&h.value&&h.value.addEventListener("scroll",p,!0),i.value.keyboardControl!==!1&&document.addEventListener("keydown",s)},50)}function C(){document.removeEventListener("contextmenu",g,!0),document.removeEventListener("click",g,!0),document.removeEventListener("scroll",p,!0),!a.isFullScreenContainer&&h.value&&h.value.removeEventListener("scroll",p,!0),i.value.keyboardControl!==!1&&document.removeEventListener("keydown",s)}const l=e.ref();e.provide("globalSetCurrentSubMenu",c=>l.value=c);function s(c){var k,B,V,L,Z,I,f,W,T,$,Y,U,y;let K=!0;switch(c.key){case"Escape":{((k=l.value)==null?void 0:k.isTopLevel())===!1?(B=l.value)==null||B.closeCurrentSubMenu():M();break}case"ArrowDown":(V=l.value)==null||V.moveCurrentItemDown();break;case"ArrowUp":(L=l.value)==null||L.moveCurrentItemUp();break;case"Home":(Z=l.value)==null||Z.moveCurrentItemFirst();break;case"End":(I=l.value)==null||I.moveCurrentItemLast();break;case"ArrowLeft":{(f=l.value)!=null&&f.closeSelfAndActiveParent()||(T=(W=i.value).onKeyFocusMoveLeft)==null||T.call(W);break}case"ArrowRight":($=l.value)!=null&&$.openCurrentItemSubMenu()||(U=(Y=i.value).onKeyFocusMoveRight)==null||U.call(Y);break;case"Enter":(y=l.value)==null||y.triggerCurrentItemClick(c);break;default:K=!1;break}K&&l.value&&(c.stopPropagation(),c.preventDefault())}function p(){i.value.closeWhenScroll!==!1&&M()}function g(c){P(c.target,c)}function P(c,k){for(var B,V;c;){if(c.classList&&c.classList.contains("mx-menu-host"))return;c=c.parentNode}i.value.clickCloseOnOutside!==!1?(C(),M()):(V=(B=i.value).onClickOnOutside)==null||V.call(B,k)}return e.provide("globalOptions",i),e.provide("globalCloseMenu",M),e.provide("globalIsFullScreenContainer",a.isFullScreenContainer),e.provide("globalHasSlot",c=>m[c]!==void 0),e.provide("globalRenderSlot",(c,k)=>e.renderSlot(m,c,{...k},()=>[e.h("span","Render slot failed")],!1)),e.provide("menuContext",{zIndex:i.value.zIndex||R.defaultZindex,container:h.value,adjustPadding:{x:0,y:0},getParentAbsY:()=>i.value.x,getParentAbsX:()=>i.value.y,getZoom:()=>i.value.zoom||R.defaultZoom,getParentX:()=>0,getParentY:()=>0,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[i.value.x,i.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),n(o),(c,k)=>(e.openBlock(),e.createElementBlock("div",qe,[e.unref(i).menuTransitionProps?(e.openBlock(),e.createBlock(e.Transition,e.mergeProps({key:0,appear:""},e.unref(i).menuTransitionProps,{onAfterLeave:k[0]||(k[0]=B=>d("closeAnimFinished"))}),{default:e.withCtx(()=>[e.unref(v)?(e.openBlock(),e.createBlock(oe,{key:0,ref_key:"submenuInstance",ref:x,class:"mx-menu-host",items:e.unref(i).items,adjustPosition:e.unref(i).adjustPosition,maxWidth:e.unref(i).maxWidth||e.unref(R).defaultMaxWidth,minWidth:e.unref(i).minWidth||e.unref(R).defaultMinWidth,direction:e.unref(i).direction||e.unref(R).defaultDirection},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):e.createCommentVNode("",!0)]),_:3},16)):e.unref(v)?(e.openBlock(),e.createBlock(oe,{key:1,ref_key:"submenuInstance",ref:x,class:"mx-menu-host",items:e.unref(i).items,adjustPosition:e.unref(i).adjustPosition,maxWidth:e.unref(i).maxWidth||e.unref(R).defaultMaxWidth,minWidth:e.unref(i).minWidth||e.unref(R).defaultMinWidth,direction:e.unref(i).direction||e.unref(R).defaultDirection},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):e.createCommentVNode("",!0)]))}}),Ce=e.defineComponent({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},setup(t,n){const{options:r,show:a}=e.toRefs(t),d=e.ref(null);return n.expose({closeMenu:()=>n.emit("update:show",!1),isClosed:()=>!a.value,getMenuRef:()=>{var m;return(m=d.value)==null?void 0:m.getMenuRef()},getMenuDimensions:()=>{var m;return((m=d.value)==null?void 0:m.getMenuDimensions())??{width:0,height:0}}}),()=>{const{isNew:m,container:x,eleId:i}=pe(r.value);return[e.h(e.Teleport,{to:`#${i}`},[e.h(ge,{ref:d,options:r,show:a,container:x,isFullScreenContainer:!m,onClose:v=>{var h,o;n.emit("update:show",!1),n.emit("close"),(o=(h=r.value).onClose)==null||o.call(h,v)}},n.slots)])]}}}),ke=e.defineComponent({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(t,n){const r=e.inject("globalOptions"),{adjustSubMenuPosition:a,maxWidth:d,minWidth:m}=e.toRefs(t),x=typeof a.value<"u"?a.value:r.value.adjustPosition,i=e.ref(),v=e.ref();return n.expose({getSubMenuRef:()=>i.value,getMenuItemRef:()=>v.value}),()=>e.h(te,{...t,ref:v,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof n.slots.default!==void 0},n.slots.default?{submenu:()=>e.h(oe,{ref:i,maxWidth:d.value,minWidth:m.value,adjustPosition:x},{default:n.slots.default})}:void 0)}});function Je(t,n,r,a){const d=e.ref(!0),m=e.h(ge,{options:t,show:d,container:n,isFullScreenContainer:!r,onCloseAnimFinished:()=>{e.render(null,n)},onClose:x=>{var i;(i=t.onClose)==null||i.call(t,x),d.value=!1}},a);return e.render(m,n),m.component}function be(t,n){const r=pe(t);return Je(t,r.container,r.isNew,n).exposed}const ie={install(t){t.config.globalProperties.$contextmenu=be,t.component("ContextMenu",Ce),t.component("ContextMenuItem",te),t.component("ContextMenuGroup",ke),t.component("ContextMenuSperator",ne),t.component("ContextMenuSeparator",ne),t.component("ContextSubMenu",oe)},showContextMenu(t,n){return be(t,n)},isAnyContextMenuOpen(){return Me()},closeContextMenu:ve,transformMenuPosition:Be},Qe={},et={class:"mx-menu-bar-icon-menu",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},tt=[e.createElementVNode("path",{d:"M133.310936 296.552327l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949 0-19.781623-15.997312-35.950949-35.950949-35.950949L133.310936 224.650428c-19.781623 0-35.950949 16.169326-35.950949 35.950949C97.359987 280.383 113.529313 296.552327 133.310936 296.552327z"},null,-1),e.createElementVNode("path",{d:"M890.51705 476.135058 133.310936 476.135058c-19.781623 0-35.950949 16.169326-35.950949 35.950949 0 19.781623 16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949C926.467999 492.304384 910.298673 476.135058 890.51705 476.135058z"},null,-1),e.createElementVNode("path",{d:"M890.51705 727.447673 133.310936 727.447673c-19.781623 0-35.950949 15.997312-35.950949 35.950949s16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-15.997312 35.950949-35.950949S910.298673 727.447673 890.51705 727.447673z"},null,-1)];function nt(t,n){return e.openBlock(),e.createElementBlock("svg",et,tt)}const ot=q(Qe,[["render",nt]]),lt=["onClick","onMouseenter"],ut=e.defineComponent({__name:"MenuBar",props:{options:{type:Object,default:null}},setup(t){const n=t,r=e.ref(),a=e.ref(!1),d=e.ref([]),m=e.ref(null);function x(){a.value=!0}function i(){a.value=!1}e.onMounted(()=>{d.value=n.options.items||[]}),e.watch(()=>n.options,()=>{d.value=n.options.items||[]});let v=null,h=-1;function o(){h<d.value.length-1?h++:h=0,M(h,d.value[h])}function b(){h>0?h--:h=d.value.length-1,M(h,d.value[h])}function w(l){const s=n.options.barPopDirection??"bl";let p=0,g=0;return s.startsWith("b")?g=_(l)+l.offsetHeight:s.startsWith("t")?g=_(l):g=_(l)+l.offsetHeight/2,s.endsWith("l")?p=D(l):s.startsWith("r")?p=D(l)+l.offsetWidth:p=D(l)+l.offsetWidth/2,{x:p,y:g}}function M(l,s){var p;if(h=l,!s.children)return;v&&(v.closeMenu(),v=null,a.value=!0),m.value=s;const g=(p=r.value)==null?void 0:p.children[l];if(g){const{x:P,y:c}=w(g);v=ie.showContextMenu({...n.options,items:s.children,x:P,y:c,onKeyFocusMoveLeft(){b()},onKeyFocusMoveRight(){o()},onClose(){m.value==s&&(a.value=!1,m.value=null)}})}}function H(){h=0;const l=r.value;if(l){const{x:s,y:p}=w(l);v=ie.showContextMenu({...n.options,x:s,y:p})}}function N(l,s){s?(a.value=!0,M(l,s),s.onClick&&(s.clickableWhenHasChildren===!0&&s.children&&s.children.length>0||!s.children||s.children.length===0)&&s.onClick()):H()}function C(l,s){a.value&&M(l,s)}return(l,s)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["mx-menu-bar",t.options.theme??"",t.options.mini?"mini":""]),onFocus:x,onBlur:i},[e.renderSlot(l.$slots,"prefix"),t.options.mini?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"menuBarContent",ref:r,class:"mx-menu-bar-content"},[e.createElementVNode("div",{class:"mx-menu-bar-item",onClick:s[0]||(s[0]=p=>N(0,null))},[e.createVNode(ot)])],512)):(e.openBlock(),e.createElementBlock("div",{key:1,ref_key:"menuBarContent",ref:r,class:"mx-menu-bar-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,(p,g)=>(e.openBlock(),e.createElementBlock("div",{key:g,class:e.normalizeClass(["mx-menu-bar-item",p==m.value?"active":""]),onClick:P=>N(g,p),onMouseenter:P=>C(g,p)},e.toDisplayString(p.label),43,lt))),128))],512)),e.renderSlot(l.$slots,"suffix")],34))}});j.ContextMenu=Ce,j.ContextMenuGroup=ke,j.ContextMenuItem=te,j.ContextMenuSeparator=ne,j.MenuBar=ut,j.default=ie,Object.defineProperties(j,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(me,me.exports);var ft=me.exports;const ht=mt(ft);export{ht as C,mt as a,dt as c,pt as g};
