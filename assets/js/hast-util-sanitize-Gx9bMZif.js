
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

const S={strip:["script"],clobberPrefix:"user-content-",clobber:["name","id"],ancestors:{tbody:["table"],tfoot:["table"],thead:["table"],td:["table"],th:["table"],tr:["table"]},protocols:{href:["http","https","mailto","xmpp","irc","ircs"],cite:["http","https"],src:["http","https"],longDesc:["http","https"]},tagNames:["h1","h2","h3","h4","h5","h6","br","b","i","strong","em","a","pre","code","img","tt","div","ins","del","sup","sub","p","ol","ul","table","thead","tbody","tfoot","blockquote","dl","dt","dd","kbd","q","samp","var","hr","ruby","rt","rp","li","tr","td","th","s","strike","summary","details","caption","figure","figcaption","abbr","bdo","cite","dfn","mark","small","span","time","wbr","input"],attributes:{a:["href"],img:["src","longDesc"],input:[["type","checkbox"],["disabled",!0]],li:[["className","task-list-item"]],div:["itemScope","itemType"],blockquote:["cite"],del:["cite"],ins:["cite"],q:["cite"],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","ariaDescribedBy","ariaHidden","ariaLabel","ariaLabelledBy","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","cols","colSpan","color","compact","coords","dateTime","dir","disabled","encType","htmlFor","frame","headers","height","hrefLang","hSpace","isMap","id","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rel","rev","rows","rowSpan","rules","scope","selected","shape","size","span","start","summary","tabIndex","target","title","type","useMap","vAlign","value","vSpace","width","itemProp"]},required:{input:{type:"checkbox",disabled:!0}}},f={}.hasOwnProperty,h={root:{children:b},doctype:A,comment:O,element:{tagName:x,properties:P,children:b},text:{value:q},"*":{data:y,position:y}};function L(e,t){let i={type:"root",children:[]};if(e&&typeof e=="object"&&e.type){const r=m(Object.assign({},S,t||{}),e,[]);r&&(Array.isArray(r)?r.length===1?i=r[0]:i.children=r:i=r)}return i}function m(e,t,i){const r=t&&t.type,n={type:t.type};let o;if(f.call(h,r)){let l=h[r];if(typeof l=="function"&&(l=l(e,t)),l){const u=Object.assign({},l,h["*"]);let a;o=!0;for(a in u)if(f.call(u,a)){const s=u[a](e,t[a],t,i);s===!1?(o=void 0,n[a]=t[a]):s!=null&&(n[a]=s)}}}return o?n:n.type==="element"&&e.strip&&!e.strip.includes(n.tagName)?n.children:void 0}function b(e,t,i,r){const n=[];if(Array.isArray(t)){let o=-1;for(i.type==="element"&&r.push(i.tagName);++o<t.length;){const l=m(e,t[o],r);l&&(Array.isArray(l)?n.push(...l):n.push(l))}i.type==="element"&&r.pop()}return n}function A(e){return e.allowDoctypes?{name:k}:void 0}function O(e){return e.allowComments?{value:N}:void 0}function P(e,t,i,r){const n=x(e,i.tagName,i,r),o=e.attributes||{},l=e.required||{},u=t||{},a=Object.assign({},g(o["*"]),g(n&&f.call(o,n)?o[n]:[])),s={};let c;for(c in u)if(f.call(u,c)){let p=u[c],d;if(f.call(a,c))d=a[c];else if(C(c)&&f.call(a,"data*"))d=a["data*"];else continue;p=Array.isArray(p)?D(e,p,c,d):w(e,p,c,d),p!=null&&(s[c]=p)}if(n&&f.call(l,n))for(c in l[n])f.call(s,c)||(s[c]=l[n][c]);return s}function k(){return"html"}function x(e,t,i,r){const n=typeof t=="string"?t:"";let o=-1;if(!n||n==="*"||e.tagNames&&!e.tagNames.includes(n))return!1;if(e.ancestors&&f.call(e.ancestors,n)){for(;++o<e.ancestors[n].length;)if(r.includes(e.ancestors[n][o]))return n;return!1}return n}function N(e,t){const i=typeof t=="string"?t:"",r=i.indexOf("-->");return r<0?i:i.slice(0,r)}function q(e,t){return typeof t=="string"?t:""}function y(e,t){return t}function D(e,t,i,r){let n=-1;const o=[];for(;++n<t.length;){const l=w(e,t[n],i,r);l!=null&&o.push(l)}return o}function w(e,t,i,r){if((typeof t=="boolean"||typeof t=="number"||typeof t=="string")&&j(e,t,i)&&(r.length===0||r.some(n=>n&&typeof n=="object"&&"flags"in n?n.test(String(t)):n===t)))return e.clobberPrefix&&e.clobber&&e.clobber.includes(i)?e.clobberPrefix+t:t}function j(e,t,i){const r=String(t),n=r.indexOf(":"),o=r.indexOf("?"),l=r.indexOf("#"),u=r.indexOf("/"),a=e.protocols&&f.call(e.protocols,i)?e.protocols[i].concat():[];let s=-1;if(a.length===0||n<0||u>-1&&n>u||o>-1&&n>o||l>-1&&n>l)return!0;for(;++s<a.length;)if(n===a[s].length&&r.slice(0,a[s].length)===a[s])return!0;return!1}function g(e){const t={};let i=-1;for(;++i<e.length;){const r=e[i];Array.isArray(r)?t[r[0]]=r.slice(1):t[r]=[]}return t}function C(e){return e.length>4&&e.slice(0,4).toLowerCase()==="data"}export{S as d,L as s};
