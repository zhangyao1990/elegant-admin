
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{l as te,o as oe,t as re,d as X,r as p,a as Y,c as Z,f as s,k as o,O as A,V as I,$ as q,_ as t,U as r,ai as C,Z as le,a9 as D,Y as y,a3 as N,X as ae}from"./@vue-B5ZJ3lyG.js";import{u as se,a as ne,g as z,_ as ie,s as de,r as ue,b as pe}from"./index-qeCTDZwl.js";import{C as me}from"./index-aP0MEcjp.js";import"./crypto-js-0jcLrwUI.js";import{b as ce,u as ge}from"./vue-router-B53joON4.js";import{d as fe,a as K}from"./element-plus-iUOJk6xm.js";import{_ as we}from"./vue-esign-CYl9_Ryz.js";import"./vite-plugin-fake-server-4rIte7rE.js";import"./mockjs-CyY_Wk_H.js";import"./@imengyu-CEcZjhxx.js";import"./vue-DvVlWPqX.js";import"./floating-vue-AocVffS4.js";import"./@floating-ui-DiM7Jq06.js";import"./vue-m-message-CaZYo5LC.js";import"./overlayscrollbars-DIcyBJd7.js";import"./@iconify-BcJ8VpTk.js";import"./overlayscrollbars-vue-CwvYLriB.js";import"./@headlessui-Cgia3ZxR.js";import"./mitt-DJ65BbbF.js";import"./lodash-es-Cgwu3vQX.js";import"./pinia-C6gN_FJk.js";import"./vue-demi-Dq6ymT-8.js";import"./hotkeys-js-BfWqkGRU.js";import"./vue-i18n-BoS7Exf_.js";import"./@intlify-CEEhciFb.js";import"./colord-CrBFWQzZ.js";import"./monaco-editor-1i8roCpp.js";import"./path-browserify-CaPOtSVJ.js";import"./axios-CRnBnh7r.js";import"./@vueuse-D9pgrdqz.js";import"./nprogress-CK9xi7fq.js";import"./@element-plus-DlsPF3Ud.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DHZ_rfNz.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";function he(E){const n=te({pool:"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",width:130,height:46,imgCode:""}),i=(l,f)=>Number.parseInt(Math.random()*(f-l+1)+l),b=(l,f)=>{const d=i(l,f),m=i(l,f),w=i(l,f);return`rgb(${d},${m},${w})`},_=()=>{const l=E.value.getContext("2d");l.fillStyle="#ffffff",l.fillRect(0,0,n.width,n.height);let f="";for(let d=0;d<4;d++){const m=n.pool[i(0,n.pool.length-1)],w=i(18,40),U=i(-30,30);l.font=`${w}px Simhei`,l.textBaseline="middle",l.textAlign="center",l.fillStyle=b(80,150),l.save(),l.translate(30*d+15,15),l.rotate(U*Math.PI/180),l.fillText(m,5,10),l.restore(),f+=m}for(let d=0;d<5;d++)l.beginPath(),l.moveTo(i(0,n.width),i(0,n.height)),l.lineTo(i(0,n.width),i(0,n.height)),l.strokeStyle=b(180,230),l.closePath(),l.stroke();for(let d=0;d<40;d++)l.beginPath(),l.arc(i(0,n.width),i(0,n.height),1,0,2*Math.PI),l.closePath(),l.fillStyle=b(150,200),l.fill();return f};oe(()=>{_(),n.imgCode=_()});const V=()=>{_(),n.imgCode=_()};return{...re(n),handleDraw:V,verify:E}}const ve=["width","height"],_e=X({name:"ImgVerify",__name:"index",setup(E,{expose:n}){const i=p(null),{width:b,height:_,handleDraw:V,imgCode:l}=he(i);return n({imgCode:l}),(f,d)=>(Y(),Z("div",{style:A({width:"131px",height:`${o(_)}px`,cursor:"pointer"})},[s("canvas",{ref_key:"verify",ref:i,width:o(b),height:o(_),onClick:d[0]||(d[0]=(...m)=>o(V)&&o(V)(...m))},null,8,ve)],4))}}),ye={class:"login-container"},be=["src"],xe={id:"login-box"},Ve={class:"title-container"},ke=["src"],Ce={class:"title"},Re={class:"verify-img"},Ee={class:"flex-bar"};const Ue={class:"sub-link"},Se={class:"sub-link"},Pe=X({__name:"index",setup(E){var M;const n=ce(),i=ge(),b=se(),_=ne(),V=new URL(""+new URL("../png/login-bg-BXj9mcoZ.png",import.meta.url).href,import.meta.url).href,l=new URL(""+new URL("../png/login-banner-BXBHY6Bw.png",import.meta.url).href,import.meta.url).href,f=new URL(""+new URL("../png/logo-BDKWVG5T.png",import.meta.url).href,import.meta.url).href,d="Elegant-admin 管理系统",m=p("login"),w=p(!1),U=p(((M=n.query.redirect)==null?void 0:M.toString())??b.settings.home.fullPath),S=p(),g=p({account:z("login_account")||"admin",password:"123456",verifyCode:"",remember:!!z("login_account")}),T=p(null);function G(k,e,u){var c;e?e!==((c=T.value)==null?void 0:c.imgCode)?u(new Error("请输入正确的验证码")):u():u(new Error("请输入验证码"))}const H=p({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],verifyCode:[{required:!0,trigger:"blur",validator:G}]});function P(){S.value&&S.value.validate(k=>{k&&(w.value=!0,_.login(g.value).then(()=>{w.value=!1,g.value.remember?de("login_account",g.value.account):ue("login_account"),i.push(U.value),fe({title:pe(),message:`欢迎登录 ${d}`,type:"success",duration:3e3})}).catch(()=>{w.value=!1}))})}const B=p(),h=p({account:"",captcha:"",password:"",checkPassword:""}),O=p({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:(k,e,u)=>{e!==h.value.password?u(new Error("两次输入的密码不一致")):u()}}]});function W(){K({message:"注册模块仅提供界面演示，无实际功能，需开发者自行扩展",type:"warning"}),B.value&&B.value.validate(k=>{})}const $=p(),x=p({account:localStorage.login_account,captcha:"",newPassword:""}),j=p({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function J(){K({message:"重置密码仅提供界面演示，无实际功能，需开发者自行扩展",type:"info"}),$.value&&$.value.validate(k=>{})}return(k,e)=>{const u=ie,c=C("ElInput"),v=C("ElFormItem"),Q=_e,ee=C("ElCheckbox"),F=C("ElLink"),R=C("ElButton"),L=C("ElForm");return Y(),Z("div",ye,[s("div",{class:"bg-banner",style:A({backgroundImage:`url(${o(V)})`})},[s("img",{class:"login-banner",src:o(l),alt:""},null,8,be)],4),s("div",xe,[I(t(L,{ref_key:"loginFormRef",ref:S,model:o(g),rules:o(H),class:"login-form"},{default:r(()=>[s("div",Ve,[s("img",{src:o(f),class:"logo",alt:""},null,8,ke),s("h3",Ce," 欢迎来到 "+le(o(d))+" ! 👋🏻 ",1)]),s("div",null,[t(v,{prop:"account"},{default:r(()=>[t(c,{modelValue:o(g).account,"onUpdate:modelValue":e[0]||(e[0]=a=>o(g).account=a),placeholder:"用户名",clearable:"",type:"text",tabindex:"1"},{prefix:r(()=>[t(u,{name:"ep:user"})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"password"},{default:r(()=>[t(c,{modelValue:o(g).password,"onUpdate:modelValue":e[1]||(e[1]=a=>o(g).password=a),type:"password",clearable:"",placeholder:"密码",tabindex:"2",autocomplete:"new-password","show-password":"",onKeyup:D(P,["enter"])},{prefix:r(()=>[t(u,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"verifyCode"},{default:r(()=>[t(c,{modelValue:o(g).verifyCode,"onUpdate:modelValue":e[2]||(e[2]=a=>o(g).verifyCode=a),class:"verify-code",type:"text",clearable:"",maxlength:"4",placeholder:"验证码",tabindex:"3",onKeyup:D(P,["enter"])},{prefix:r(()=>[t(u,{name:"lucide:shield-check"})]),append:r(()=>[s("div",Re,[t(Q,{ref_key:"imgVerifyRef",ref:T},null,512)])]),_:1},8,["modelValue"])]),_:1})]),s("div",Ee,[t(ee,{modelValue:o(g).remember,"onUpdate:modelValue":e[3]||(e[3]=a=>o(g).remember=a)},{default:r(()=>e[15]||(e[15]=[y(" 记住我 ")])),_:1},8,["modelValue"]),t(F,{type:"primary",underline:!1,onClick:e[4]||(e[4]=a=>m.value="reset")},{default:r(()=>e[16]||(e[16]=[y(" 忘记密码了? ")])),_:1})]),t(R,{loading:o(w),type:"primary",round:"",size:"large",style:{width:"100%"},onClick:N(P,["prevent"])},{default:r(()=>e[17]||(e[17]=[y(" 登录 ")])),_:1},8,["loading"]),ae("",!0)]),_:1},8,["model","rules"]),[[q,o(m)==="login"]]),I(t(L,{ref_key:"registerFormRef",ref:B,model:o(h),rules:o(O),class:"login-form","auto-complete":"on"},{default:r(()=>[e[24]||(e[24]=s("div",{class:"title-container"},[s("h3",{class:"title"}," 探索从这里开始! 🚀 ")],-1)),s("div",null,[t(v,{prop:"account"},{default:r(()=>[t(c,{modelValue:o(h).account,"onUpdate:modelValue":e[6]||(e[6]=a=>o(h).account=a),clearable:"",placeholder:"用户名",tabindex:"1"},{prefix:r(()=>[t(u,{name:"ep:user"})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"captcha"},{default:r(()=>[t(c,{modelValue:o(h).captcha,"onUpdate:modelValue":e[7]||(e[7]=a=>o(h).captcha=a),clearable:"",placeholder:"验证码",tabindex:"2"},{prefix:r(()=>[t(u,{name:"lucide:shield-check"})]),append:r(()=>[t(R,null,{default:r(()=>e[20]||(e[20]=[y("发送验证码")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"password"},{default:r(()=>[t(c,{modelValue:o(h).password,"onUpdate:modelValue":e[8]||(e[8]=a=>o(h).password=a),clearable:"",type:"password",placeholder:"密码",tabindex:"3","show-password":""},{prefix:r(()=>[t(u,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"checkPassword"},{default:r(()=>[t(c,{modelValue:o(h).checkPassword,"onUpdate:modelValue":e[9]||(e[9]=a=>o(h).checkPassword=a),clearable:"",type:"password",placeholder:"确认密码",tabindex:"4","show-password":""},{prefix:r(()=>[t(u,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1})]),t(R,{loading:o(w),type:"primary",round:"",size:"large",style:{width:"100%","margin-top":"20px"},onClick:N(W,["prevent"])},{default:r(()=>e[21]||(e[21]=[y(" 注册 ")])),_:1},8,["loading"]),s("div",Ue,[e[23]||(e[23]=s("span",{class:"text"},"已经有帐号?",-1)),t(F,{type:"primary",underline:!1,onClick:e[10]||(e[10]=a=>m.value="login")},{default:r(()=>e[22]||(e[22]=[y(" 去登录 ")])),_:1})])]),_:1},8,["model","rules"]),[[q,o(m)==="register"]]),I(t(L,{ref_key:"resetFormRef",ref:$,model:o(x),rules:o(j),class:"login-form"},{default:r(()=>[e[28]||(e[28]=s("div",{class:"title-container"},[s("h3",{class:"title"}," 忘记密码了? 🔒 ")],-1)),s("div",null,[t(v,{prop:"account"},{default:r(()=>[t(c,{modelValue:o(x).account,"onUpdate:modelValue":e[11]||(e[11]=a=>o(x).account=a),clearable:"",placeholder:"用户名",type:"text",tabindex:"1"},{prefix:r(()=>[t(u,{name:"ep:user"})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"captcha"},{default:r(()=>[t(c,{modelValue:o(x).captcha,"onUpdate:modelValue":e[12]||(e[12]=a=>o(x).captcha=a),clearable:"",placeholder:"验证码",type:"text",tabindex:"2"},{prefix:r(()=>[t(u,{name:"lucide:shield-check"})]),append:r(()=>[t(R,null,{default:r(()=>e[25]||(e[25]=[y("发送验证码")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"newPassword"},{default:r(()=>[t(c,{modelValue:o(x).newPassword,"onUpdate:modelValue":e[13]||(e[13]=a=>o(x).newPassword=a),clearable:"",type:"password",placeholder:"新密码",tabindex:"3","show-password":""},{prefix:r(()=>[t(u,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1})]),t(R,{loading:o(w),type:"primary",round:"",size:"large",style:{width:"100%","margin-top":"20px"},onClick:N(J,["prevent"])},{default:r(()=>e[26]||(e[26]=[y(" 确认 ")])),_:1},8,["loading"]),s("div",Se,[t(F,{type:"primary",underline:!1,onClick:e[14]||(e[14]=a=>m.value="login")},{default:r(()=>e[27]||(e[27]=[y(" 去登录 ")])),_:1})])]),_:1},8,["model","rules"]),[[q,o(m)==="reset"]])]),t(me,{color:o(b).mode==="mobile"?"#333333":"#ffffff"},null,8,["color"])])}}}),ft=we(Pe,[["__scopeId","data-v-59ddac24"]]);export{ft as default};
