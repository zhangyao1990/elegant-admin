
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{f as It,u as jt,a as Ot,b as Pt,c as Rt,d as Nt,e as zt,g as Ft,h as qt}from"./codemirror-ssr-6OyHonEd.js";import{s as at}from"./select-files-C0KkWx53.js";import{w as Vt}from"./word-count-LZwFUbZk.js";import{d as Wt}from"./tippy.js-PHSjKok5.js";import{r as Zt}from"./rehype-raw-DH7QOT9n.js";import{r as Dt}from"./rehype-sanitize-BNEkgzIC.js";import{d as Kt}from"./hast-util-sanitize-Gx9bMZif.js";import{u as xt}from"./unified-5HRJNm3y.js";import{r as Ut}from"./remark-parse-DjontGV4.js";import{r as Gt}from"./remark-rehype-DW3wJLvP.js";import{r as Qt}from"./rehype-stringify-B32JBXMr.js";import{d as Jt,t as Yt}from"./lodash-es-Cgwu3vQX.js";import{v as Xt}from"./unist-util-visit-SwKB2sUE.js";function Q(){}function dt(e){return e()}function De(){return Object.create(null)}function te(e){e.forEach(dt)}function ht(e){return typeof e=="function"}function ut(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ae(e,t){return e!=e?t==t:e!==t}function $t(e){return Object.keys(e).length===0}function k(e,t){e.appendChild(t)}function N(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function ye(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function P(e){return document.createTextNode(e)}function Te(){return P("")}function G(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function we(e){return function(t){t.target===this&&e.call(this,t)}}function C(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function en(e){return Array.from(e.childNodes)}function F(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function R(e,t,n){e.classList[n?"add":"remove"](t)}function tn(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,n,i,t),l}let Me;function be(e){Me=e}function Be(){if(!Me)throw new Error("Function called outside component initialization");return Me}function Ne(e){Be().$$.on_mount.push(e)}function nn(e){Be().$$.after_update.push(e)}function ft(e){Be().$$.on_destroy.push(e)}function Ce(){const e=Be();return(t,n,{cancelable:i=!1}={})=>{const l=e.$$.callbacks[t];if(l){const o=tn(t,n,{cancelable:i});return l.slice().forEach(s=>{s.call(e,o)}),!o.defaultPrevented}return!0}}const fe=[],de=[];let ve=[];const Ke=[],mt=Promise.resolve();let Pe=!1;function gt(){Pe||(Pe=!0,mt.then(vt))}function He(){return gt(),mt}function Re(e){ve.push(e)}const Ie=new Set;let ue=0;function vt(){if(ue!==0)return;const e=Me;do{try{for(;ue<fe.length;){const t=fe[ue];ue++,be(t),ln(t.$$)}}catch(t){throw fe.length=0,ue=0,t}for(be(null),fe.length=0,ue=0;de.length;)de.pop()();for(let t=0;t<ve.length;t+=1){const n=ve[t];Ie.has(n)||(Ie.add(n),n())}ve.length=0}while(fe.length);for(;Ke.length;)Ke.pop()();Pe=!1,Ie.clear(),be(e)}function ln(e){if(e.fragment!==null){e.update(),te(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Re)}}function on(e){const t=[],n=[];ve.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),ve=t}const Le=new Set;let ae;function rn(){ae={r:0,c:[],p:ae}}function sn(){ae.r||te(ae.c),ae=ae.p}function ie(e,t){e&&e.i&&(Le.delete(e),e.i(t))}function ce(e,t,n,i){if(e&&e.o){if(Le.has(e))return;Le.add(e),ae.c.push(()=>{Le.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function _e(e){e&&e.c()}function me(e,t,n,i){const{fragment:l,after_update:o}=e.$$;l&&l.m(t,n),i||Re(()=>{const s=e.$$.on_mount.map(dt).filter(ht);e.$$.on_destroy?e.$$.on_destroy.push(...s):te(s),e.$$.on_mount=[]}),o.forEach(Re)}function ge(e,t){const n=e.$$;n.fragment!==null&&(on(n.after_update),te(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function cn(e,t){e.$$.dirty[0]===-1&&(fe.push(e),gt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function pe(e,t,n,i,l,o,s,c=[-1]){const r=Me;be(e);const a=e.$$={fragment:null,ctx:[],props:o,update:Q,not_equal:l,bound:De(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:De(),dirty:c,skip_bound:!1,root:t.target||r.$$.root};s&&s(a.root);let d=!1;if(a.ctx=n?n(e,t.props||{},(h,p,...g)=>{const u=g.length?g[0]:p;return a.ctx&&l(a.ctx[h],a.ctx[h]=u)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](u),d&&cn(e,h)),p}):[],a.update(),d=!0,te(a.before_update),a.fragment=i?i(a.ctx):!1,t.target){if(t.hydrate){const h=en(t.target);a.fragment&&a.fragment.l(h),h.forEach(O)}else a.fragment&&a.fragment.c();t.intro&&ie(e.$$.fragment),me(e,t.target,t.anchor,t.customElement),vt()}be(r)}class ke{$destroy(){ge(this,1),this.$destroy=Q}$on(t,n){if(!ht(n))return Q;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(t){this.$$set&&!$t(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const an="Bold",dn="bold text",hn="Markdown Cheatsheet",un="Close help",fn="Close table of contents",mn="Code",gn="Code block",vn="lang",wn="code",pn="Exit fullscreen",kn="Exit preview only",_n="Exit write only",bn="Fullscreen",yn="Heading 1",Mn="Heading 2",Tn="Heading 3",Cn="Heading 4",Hn="Heading 5",Ln="Heading 6",En="heading",Sn="Help",An="Horizontal rule",Bn="Image",In="alt",jn="title",On="Italic",Pn="italic text",Rn="The maximum character limit has been reached",Nn="Lines",zn="Link",Fn="link text",qn="Ordered list",Vn="item",Wn="Preview",Zn="Preview only",Dn="Quote",Kn="quoted text",xn="Shortcuts",Un="Source code",Gn="Scroll sync",Qn="Table of contents",Jn="Scroll to top",Yn="Unordered list",Xn="item",$n="Words",ei="Write",ti="Write only",ni={bold:an,boldText:dn,cheatsheet:hn,closeHelp:un,closeToc:fn,code:mn,codeBlock:gn,codeLang:vn,codeText:wn,exitFullscreen:pn,exitPreviewOnly:kn,exitWriteOnly:_n,fullscreen:bn,h1:yn,h2:Mn,h3:Tn,h4:Cn,h5:Hn,h6:Ln,headingText:En,help:Sn,hr:An,image:Bn,imageAlt:In,imageTitle:jn,italic:On,italicText:Pn,limited:Rn,lines:Nn,link:zn,linkText:Fn,ol:qn,olItem:Vn,preview:Wn,previewOnly:Zn,quote:Dn,quotedText:Kn,shortcuts:xn,source:Un,sync:Gn,toc:Qn,top:Jn,ul:Yn,ulItem:Xn,words:$n,write:ei,writeOnly:ti},S={Close:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="m8 8 32 32M8 40 40 8"/></svg>',H:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M12 5v38M36 5v38M12 24h24"/></svg>',H1:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M6 8v32M25 8v32M6 24h19M34.226 24 39 19.017V40"/></svg>',H2:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M6 8v32M24 8v32M7 24h16M32 25c0-3.167 2.667-5 5-5s5 1.833 5 5c0 5.7-10 9.933-10 15h10"/></svg>',H3:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M6 8v32M24 8v32M7 24h16M32 20h10l-7 9c4 0 7 2 7 6s-3 5-5 5c-2.381 0-4-1-5-2.1"/></svg>',LevelFourTitle:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M6 8v32M24 8v32M7 24h16M39.977 40V20L31 32.997v2.023h12"/></svg>',LevelFiveTitle:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M6 8v32M24 8v32M7 24h16M40 21.01h-8v7.024C32 28 34 27 37 27s4 2.534 4 6.5-1 6.5-5 6.5c-3 0-4-2-4-3.992"/></svg>',LevelSixTitle:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M6 8v32M24 8v32M7 24h16"/><path stroke="currentColor" stroke-width="4" d="M36.5 40a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M41.596 24.74C40.778 22.545 38.804 21 36.5 21c-3.038 0-5.5 2.686-5.5 6v7"/></svg>',TextBold:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M24 24c5.506 0 9.969-4.477 9.969-10S29.506 4 24 4H11v20h13ZM28.031 44C33.537 44 38 39.523 38 34s-4.463-10-9.969-10H11v20h17.031Z" clip-rule="evenodd"/></svg>',TextItalic:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M20 6h16M12 42h16M29 5.952 19 42"/></svg>',Quote:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path fill="currentColor" fill-rule="evenodd" d="M18.853 9.116C11.323 13.952 7.14 19.58 6.303 26.003 5 36 13.94 40.893 18.47 36.497 23 32.1 20.285 26.52 17.005 24.994c-3.28-1.525-5.286-.994-4.936-3.033.35-2.038 5.016-7.69 9.116-10.322a.749.749 0 0 0 .114-1.02L20.285 9.3c-.44-.572-.862-.55-1.432-.185ZM38.679 9.116c-7.53 4.836-11.714 10.465-12.55 16.887-1.303 9.997 7.637 14.89 12.167 10.494 4.53-4.397 1.815-9.977-1.466-11.503-3.28-1.525-5.286-.994-4.936-3.033.35-2.038 5.017-7.69 9.117-10.322a.749.749 0 0 0 .113-1.02L40.11 9.3c-.44-.572-.862-.55-1.431-.185Z" clip-rule="evenodd"/></svg>',LinkOne:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="m26.24 16.373-9.14-9.14c-2.661-2.661-7.035-2.603-9.768.131-2.734 2.734-2.793 7.107-.131 9.768l7.935 7.936M32.903 23.003l7.935 7.935c2.661 2.662 2.603 7.035-.13 9.769-2.735 2.734-7.108 2.792-9.77.13l-9.14-9.14"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M26.11 26.142c2.733-2.734 2.792-7.108.13-9.769M21.799 21.798c-2.734 2.734-2.792 7.108-.131 9.769"/></svg>',Pic:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 10a2 2 0 0 1 2-2h34a2 2 0 0 1 2 2v28a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V10Z" clip-rule="evenodd"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M14.5 18a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" clip-rule="evenodd"/><path stroke="currentColor" stroke-linejoin="round" stroke-width="4" d="m15 24 5 4 6-7 17 13v4a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-4l10-10Z"/></svg>',Code:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M16 13 4 25.432 16 37M32 13l12 12.432L32 37"/><path stroke="currentColor" stroke-linecap="round" stroke-width="4" d="m28 4-7 40"/></svg>',CodeBrackets:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M16 4c-2 0-5 1-5 5v9c0 3-5 5-5 5s5 2 5 5v11c0 4 3 5 5 5M32 4c2 0 5 1 5 5v9c0 3 5 5 5 5s-5 2-5 5v11c0 4-3 5-5 5"/></svg>',ListTwo:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linejoin="round" stroke-width="4" d="M9 42a4 4 0 1 0 0-8 4 4 0 0 0 0 8ZM9 14a4 4 0 1 0 0-8 4 4 0 0 0 0 8ZM9 28a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M21 24h22M21 38h22M21 10h22"/></svg>',OrderedList:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M9 4v9M12 13H6M12 27H6M6 20s3-3 5 0-5 7-5 7M6 34.5s2-3 5-1 0 4.5 0 4.5 3 2.5 0 4.5-5-1-5-1M11 38H9M9 4 6 6M21 24h22M21 38h22M21 10h22"/></svg>',DividingLine:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 24h38M21 38h6M37 38h6M21 10h6M5 38h6M5 10h6M37 10h6"/></svg>',AlignTextLeftOne:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linejoin="round" stroke-width="4" d="M39 6H9a3 3 0 0 0-3 3v30a3 3 0 0 0 3 3h30a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M26 24H14M34 15H14M32 33H14"/></svg>',Helpcenter:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linejoin="round" stroke-width="4" d="M39 6H9a3 3 0 0 0-3 3v30a3 3 0 0 0 3 3h30a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M24 28.625v-4a6 6 0 1 0-6-6"/><path fill="currentColor" fill-rule="evenodd" d="M24 37.625a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z" clip-rule="evenodd"/></svg>',LeftExpand:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><rect width="28" height="36" x="6" y="6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" rx="2"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M42 6v36"/></svg>',RightExpand:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><rect width="28" height="36" x="14" y="6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" rx="2"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M6 6v36"/></svg>',OffScreen:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M33 6v9h9M15 6v9H6M15 42v-9H6M33 42v-9h8.9"/></svg>',FullScreen:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M33 6h9v9M42 33v9h-9M15 42H6v-9M6 15V6h9"/></svg>',GithubOne:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 48 48"><path stroke="currentColor" stroke-linecap="round" stroke-width="4" d="M29.344 30.477c2.404-.5 4.585-1.366 6.28-2.638C38.52 25.668 40 22.314 40 19c0-2.324-.881-4.494-2.407-6.332-.85-1.024 1.636-8.667-.573-7.638-2.21 1.03-5.45 3.308-7.147 2.805A20.712 20.712 0 0 0 24 7c-1.8 0-3.532.223-5.147.634C16.505 8.232 14.259 6 12 5.03c-2.26-.97-1.026 6.934-1.697 7.765C8.84 14.605 8 16.73 8 19c0 3.314 1.79 6.668 4.686 8.84 1.93 1.446 4.348 2.368 7.054 2.822M19.74 30.662c-1.159 1.275-1.738 2.486-1.738 3.632v8.717M29.345 30.477c1.097 1.44 1.646 2.734 1.646 3.88v8.654M6 31.215c.899.11 1.566.524 2 1.24.652 1.075 3.074 5.063 5.825 5.063h4.177"/></svg>'};function ii(){const e=It();return jt(e),Ot(e),Pt(e),Rt(e),Nt(e),zt(e),Ft(e),qt(e),e}function li(e,t){return{wrapText(n,i=n){const l=t.somethingSelected()?t.listSelections()[0]:t.findWordAt(t.getCursor()),o=l.from(),s=l.to(),c=t.getRange(o,s),r=e.Pos(o.line,o.ch-n.length),a=e.Pos(s.line,s.ch+i.length);if(t.getRange(r,o)===n&&t.getRange(s,a)===i)t.replaceRange(c,r,a),t.setSelection(r,e.Pos(r.line,r.ch+c.length));else{t.replaceRange(n+c+i,o,s);const d=t.getCursor();t.setSelection(e.Pos(d.line,d.ch-i.length-c.length),e.Pos(d.line,d.ch-i.length))}},replaceLines(n){const[i]=t.listSelections(),l=[e.Pos(i.from().line,0),e.Pos(i.to().line)],o=t.getRange(...l).split(`
`);t.replaceRange(o.map(n).join(`
`),...l),t.setSelection(...l)},appendBlock(n){const i=t.getCursor();let l=-1;for(let o=i.line;o<t.lineCount();o++)if(!t.getLine(o).trim()){l=o;break}return l===-1&&(t.replaceRange(`
`,e.Pos(t.lineCount())),l=t.lineCount()),t.replaceRange(`
`+n,e.Pos(l)),e.Pos(l+1,0)},selectFiles:at}}function je(e,t){let n=t.length-2;for(let i=0;i<t.length;i++)if(e<t[i]){n=i-1;break}return n=Math.max(n,0),n}const re=(e,t=!1)=>{const n=t?"Shift-":"",i=typeof navigator<"u"&&/Mac/.test(navigator.platform)?"Cmd-":"Ctrl-";return n+i+e};async function wt({editor:e,appendBlock:t,codemirror:n},i,l){const o=await i(l),s=t(o.map(({url:c,alt:r,title:a},d)=>(r=r??l[d].name,`![${r}](${c}${a?` "${a}"`:""})`)).join(`

`));e.setSelection(s,n.Pos(s.line+o.length*2-2)),e.focus()}function oi(e,t,n){const i=[{icon:S.H,handler:{type:"dropdown",actions:[1,2,3,4,5,6].map(o=>({title:e[`h${o}`],icon:[S.H1,S.H2,S.H3,S.LevelFourTitle,S.LevelFiveTitle,S.LevelSixTitle][o-1],cheatsheet:o<=3?`${"#".repeat(o)} ${e.headingText}`:void 0,handler:{type:"action",click({replaceLines:s,editor:c}){s(r=>(r=r.trim().replace(/^#*/,"").trim(),r="#".repeat(o)+" "+r,r)),c.focus()}}}))}},{title:e.bold,icon:S.TextBold,cheatsheet:`**${e.boldText}**`,handler:{type:"action",shortcut:re("B"),click({wrapText:o,editor:s}){o("**"),s.focus()}}},{title:e.italic,icon:S.TextItalic,cheatsheet:`*${e.italicText}*`,handler:{type:"action",shortcut:re("I"),click({wrapText:o,editor:s}){o("*"),s.focus()}}},{title:e.quote,icon:S.Quote,cheatsheet:`> ${e.quotedText}`,handler:{type:"action",click({replaceLines:o,editor:s}){o(c=>"> "+c),s.focus()}}},{title:e.link,icon:S.LinkOne,cheatsheet:`[${e.linkText}](url)`,handler:{type:"action",shortcut:re("K"),click({editor:o,wrapText:s,codemirror:c}){s("[","](url)");const r=o.getCursor();o.setSelection(c.Pos(r.line,r.ch+2),c.Pos(r.line,r.ch+5)),o.focus()}}},{title:e.image,icon:S.Pic,cheatsheet:`![${e.imageAlt}](url "${e.imageTitle}")`,handler:n?{type:"action",shortcut:re("I",!0),async click(o){const s=await at({accept:"image/*",multiple:!0});s!=null&&s.length&&await wt(o,n,Array.from(s))}}:void 0},{title:e.code,icon:S.Code,cheatsheet:"`"+e.codeText+"`",handler:{type:"action",shortcut:re("K",!0),click({wrapText:o,editor:s}){o("`"),s.focus()}}},{title:e.codeBlock,icon:S.CodeBrackets,cheatsheet:"```"+e.codeLang+"↵",handler:{type:"action",shortcut:re("C",!0),click({editor:o,appendBlock:s,codemirror:c}){const r=s("```js\n```");o.setSelection(c.Pos(r.line,3),c.Pos(r.line,5)),o.focus()}}},{title:e.ul,icon:S.ListTwo,cheatsheet:`- ${e.ulItem}`,handler:{type:"action",shortcut:re("U",!0),click({replaceLines:o,editor:s}){o(c=>"- "+c),s.focus()}}},{title:e.ol,icon:S.OrderedList,cheatsheet:`1. ${e.olItem}`,handler:{type:"action",shortcut:re("O",!0),click({replaceLines:o,editor:s}){o((c,r)=>`${r+1}. ${c}`),s.focus()}}},{title:e.hr,icon:S.DividingLine,cheatsheet:"---"}],l=[];return t.forEach(({actions:o})=>{o&&o.forEach(s=>{!s.position||s.position!=="right"?i.push(s):l.unshift(s)})}),{leftActions:i,rightActions:l}}function xe(e,t,n){const i=e.slice();return i[5]=t[n],i}function Ue(e,t,n){const i=e.slice();return i[5]=t[n],i}function Ge(e){let t,n,i=e[5].icon+"",l,o=e[5].title+"",s,c,r,a=e[5].cheatsheet+"",d;return{c(){t=y("li"),n=y("div"),l=y("div"),s=P(o),c=y("div"),r=y("code"),d=P(a),C(n,"class","bytemd-help-icon"),C(l,"class","bytemd-help-title"),C(c,"class","bytemd-help-content")},m(h,p){N(h,t,p),k(t,n),n.innerHTML=i,k(t,l),k(l,s),k(t,c),k(c,r),k(r,d)},p(h,p){p&4&&i!==(i=h[5].icon+"")&&(n.innerHTML=i),p&4&&o!==(o=h[5].title+"")&&F(s,o),p&4&&a!==(a=h[5].cheatsheet+"")&&F(d,a)},d(h){h&&O(t)}}}function Qe(e){let t,n=e[5].cheatsheet&&Ge(e);return{c(){n&&n.c(),t=Te()},m(i,l){n&&n.m(i,l),N(i,t,l)},p(i,l){i[5].cheatsheet?n?n.p(i,l):(n=Ge(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&O(t)}}}function Je(e){let t,n,i=e[5].icon+"",l,o=e[5].title+"",s,c,r,a=e[5].handler.shortcut+"",d;return{c(){t=y("li"),n=y("div"),l=y("div"),s=P(o),c=y("div"),r=y("kbd"),d=P(a),C(n,"class","bytemd-help-icon"),C(l,"class","bytemd-help-title"),C(c,"class","bytemd-help-content")},m(h,p){N(h,t,p),k(t,n),n.innerHTML=i,k(t,l),k(l,s),k(t,c),k(c,r),k(r,d)},p(h,p){p&4&&i!==(i=h[5].icon+"")&&(n.innerHTML=i),p&4&&o!==(o=h[5].title+"")&&F(s,o),p&4&&a!==(a=h[5].handler.shortcut+"")&&F(d,a)},d(h){h&&O(t)}}}function Ye(e){let t,n=e[5].handler&&e[5].handler.type==="action"&&e[5].handler.shortcut&&Je(e);return{c(){n&&n.c(),t=Te()},m(i,l){n&&n.m(i,l),N(i,t,l)},p(i,l){i[5].handler&&i[5].handler.type==="action"&&i[5].handler.shortcut?n?n.p(i,l):(n=Je(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&O(t)}}}function ri(e){let t,n,i=e[0].cheatsheet+"",l,o,s,c=e[0].shortcuts+"",r,a,d=e[2],h=[];for(let u=0;u<d.length;u+=1)h[u]=Qe(Ue(e,d,u));let p=e[2],g=[];for(let u=0;u<p.length;u+=1)g[u]=Ye(xe(e,p,u));return{c(){t=y("div"),n=y("h2"),l=P(i),o=y("ul");for(let u=0;u<h.length;u+=1)h[u].c();s=y("h2"),r=P(c),a=y("ul");for(let u=0;u<g.length;u+=1)g[u].c();C(t,"class","bytemd-help"),R(t,"bytemd-hidden",!e[1])},m(u,_){N(u,t,_),k(t,n),k(n,l),k(t,o);for(let w=0;w<h.length;w+=1)h[w]&&h[w].m(o,null);k(t,s),k(s,r),k(t,a);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(a,null)},p(u,[_]){if(_&1&&i!==(i=u[0].cheatsheet+"")&&F(l,i),_&4){d=u[2];let w;for(w=0;w<d.length;w+=1){const v=Ue(u,d,w);h[w]?h[w].p(v,_):(h[w]=Qe(v),h[w].c(),h[w].m(o,null))}for(;w<h.length;w+=1)h[w].d(1);h.length=d.length}if(_&1&&c!==(c=u[0].shortcuts+"")&&F(r,c),_&4){p=u[2];let w;for(w=0;w<p.length;w+=1){const v=xe(u,p,w);g[w]?g[w].p(v,_):(g[w]=Ye(v),g[w].c(),g[w].m(a,null))}for(;w<g.length;w+=1)g[w].d(1);g.length=p.length}_&2&&R(t,"bytemd-hidden",!u[1])},i:Q,o:Q,d(u){u&&O(t),ye(h,u),ye(g,u)}}}function si(e,t,n){let i,{actions:l}=t,{locale:o}=t,{visible:s}=t;function c(r){let a=[];return r.forEach(d=>{const{handler:h,cheatsheet:p}=d;(h==null?void 0:h.type)==="dropdown"&&a.push(...c(h.actions)),p&&a.push(d)}),a}return e.$$set=r=>{"actions"in r&&n(3,l=r.actions),"locale"in r&&n(0,o=r.locale),"visible"in r&&n(1,s=r.visible)},e.$$.update=()=>{e.$$.dirty&8&&n(2,i=c(l))},[o,s,i,l]}class ci extends ke{constructor(t){super(),pe(this,t,si,ri,ut,{actions:3,locale:0,visible:1})}}function Xe(e){let t,n=e[2].limited+"",i;return{c(){t=y("span"),i=P(n),C(t,"class","bytemd-status-error")},m(l,o){N(l,t,o),k(t,i)},p(l,o){o&4&&n!==(n=l[2].limited+"")&&F(i,n)},d(l){l&&O(t)}}}function $e(e){let t,n,i=e[2].sync+"",l,o,s;return{c(){t=y("label"),n=y("input"),l=P(i),C(n,"type","checkbox"),n.checked=e[1]},m(c,r){N(c,t,r),k(t,n),k(t,l),o||(s=G(n,"change",e[8]),o=!0)},p(c,r){r&2&&(n.checked=c[1]),r&4&&i!==(i=c[2].sync+"")&&F(l,i)},d(c){c&&O(t),o=!1,s()}}}function ai(e){let t,n,i,l=e[2].words+"",o,s,c,r,a,d=e[2].lines+"",h,p,g,u,_,w,v=e[2].top+"",m,M,B,L=e[3]&&Xe(e),E=e[0]&&$e(e);return{c(){t=y("div"),n=y("div"),i=y("span"),o=P(l),s=P(": "),c=y("strong"),r=P(e[5]),a=y("span"),h=P(d),p=P(": "),g=y("strong"),u=P(e[4]),L&&L.c(),_=y("div"),E&&E.c(),w=y("span"),m=P(v),C(n,"class","bytemd-status-left"),C(_,"class","bytemd-status-right"),C(t,"class","bytemd-status")},m(b,V){N(b,t,V),k(t,n),k(n,i),k(i,o),k(i,s),k(i,c),k(c,r),k(n,a),k(a,h),k(a,p),k(a,g),k(g,u),L&&L.m(n,null),k(t,_),E&&E.m(_,null),k(_,w),k(w,m),M||(B=[G(w,"click",e[9]),G(w,"keydown",we(e[10]))],M=!0)},p(b,[V]){V&4&&l!==(l=b[2].words+"")&&F(o,l),V&32&&F(r,b[5]),V&4&&d!==(d=b[2].lines+"")&&F(h,d),V&16&&F(u,b[4]),b[3]?L?L.p(b,V):(L=Xe(b),L.c(),L.m(n,null)):L&&(L.d(1),L=null),b[0]?E?E.p(b,V):(E=$e(b),E.c(),E.m(_,w)):E&&(E.d(1),E=null),V&4&&v!==(v=b[2].top+"")&&F(m,v)},i:Q,o:Q,d(b){b&&O(t),L&&L.d(),E&&E.d(),M=!1,te(B)}}}function di(e,t,n){let i,l,{showSync:o}=t,{value:s}=t,{syncEnabled:c}=t,{locale:r}=t,{islimited:a}=t;const d=Ce(),h=()=>d("sync",!c),p=()=>d("top"),g=u=>["Enter","Space"].includes(u.code)&&d("top");return e.$$set=u=>{"showSync"in u&&n(0,o=u.showSync),"value"in u&&n(7,s=u.value),"syncEnabled"in u&&n(1,c=u.syncEnabled),"locale"in u&&n(2,r=u.locale),"islimited"in u&&n(3,a=u.islimited)},e.$$.update=()=>{e.$$.dirty&128&&n(5,i=Vt(s)),e.$$.dirty&128&&n(4,l=s.split(`
`).length)},[o,c,r,a,l,i,d,s,h,p,g]}class hi extends ke{constructor(t){super(),pe(this,t,di,ai,ut,{showSync:0,value:7,syncEnabled:1,locale:2,islimited:3})}}function et(e,t,n){const i=e.slice();return i[11]=t[n],i[13]=n,i}function tt(e){let t,n=e[11].text+"",i,l,o,s,c;function r(){return e[8](e[13])}function a(...d){return e[9](e[13],...d)}return{c(){t=y("li"),i=P(n),C(t,"class",l=`bytemd-toc-${e[11].level}`),C(t,"style",o=`padding-left:${(e[11].level-e[3])*16+8}px`),R(t,"bytemd-toc-active",e[4]===e[13]),R(t,"bytemd-toc-first",e[11].level===e[3])},m(d,h){N(d,t,h),k(t,i),s||(c=[G(t,"click",r),G(t,"keydown",we(a))],s=!0)},p(d,h){e=d,h&4&&n!==(n=e[11].text+"")&&F(i,n),h&4&&l!==(l=`bytemd-toc-${e[11].level}`)&&C(t,"class",l),h&12&&o!==(o=`padding-left:${(e[11].level-e[3])*16+8}px`)&&C(t,"style",o),h&20&&R(t,"bytemd-toc-active",e[4]===e[13]),h&12&&R(t,"bytemd-toc-first",e[11].level===e[3])},d(d){d&&O(t),s=!1,te(c)}}}function ui(e){let t,n,i=e[0].toc+"",l,o,s=e[2],c=[];for(let r=0;r<s.length;r+=1)c[r]=tt(et(e,s,r));return{c(){t=y("div"),n=y("h2"),l=P(i),o=y("ul");for(let r=0;r<c.length;r+=1)c[r].c();C(t,"class","bytemd-toc"),R(t,"bytemd-hidden",!e[1])},m(r,a){N(r,t,a),k(t,n),k(n,l),k(t,o);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(o,null)},p(r,[a]){if(a&1&&i!==(i=r[0].toc+"")&&F(l,i),a&60){s=r[2];let d;for(d=0;d<s.length;d+=1){const h=et(r,s,d);c[d]?c[d].p(h,a):(c[d]=tt(h),c[d].c(),c[d].m(o,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=s.length}a&2&&R(t,"bytemd-hidden",!r[1])},i:Q,o:Q,d(r){r&&O(t),ye(c,r)}}}function fi(e,t,n){let{hast:i}=t,{currentBlockIndex:l}=t,{locale:o}=t,{visible:s}=t;const c=Ce();let r,a=6,d=0;function h(u){let _="";return Xt(u,w=>{w.type==="text"&&(_+=w.value)}),_}const p=u=>{c("click",u)},g=(u,_)=>{["Enter","Space"].includes(_.code)&&c("click",u)};return e.$$set=u=>{"hast"in u&&n(6,i=u.hast),"currentBlockIndex"in u&&n(7,l=u.currentBlockIndex),"locale"in u&&n(0,o=u.locale),"visible"in u&&n(1,s=u.visible)},e.$$.update=()=>{e.$$.dirty&204&&(n(2,r=[]),n(4,d=0),i.children.filter(u=>u.type==="element").forEach((u,_)=>{if(u.tagName[0]==="h"&&u.children.length){const w=Number(u.tagName[1]);n(3,a=Math.min(a,w)),r.push({level:w,text:h(u)})}l>=_&&n(4,d=r.length-1)}))},[o,s,r,a,d,c,i,l,p,g]}class mi extends ke{constructor(t){super(),pe(this,t,fi,ui,Ae,{hast:6,currentBlockIndex:7,locale:0,visible:1})}}function nt(e,t,n){const i=e.slice();return i[25]=t[n],i[27]=n,i}function it(e,t,n){const i=e.slice();return i[25]=t[n],i[27]=n,i}function gi(e){let t,n=e[2].write+"",i,l,o=e[2].preview+"",s,c,r;return{c(){t=y("div"),i=P(n),l=y("div"),s=P(o),C(t,"class","bytemd-toolbar-tab"),R(t,"bytemd-toolbar-tab-active",e[1]!=="preview"),C(l,"class","bytemd-toolbar-tab"),R(l,"bytemd-toolbar-tab-active",e[1]==="preview")},m(a,d){N(a,t,d),k(t,i),N(a,l,d),k(l,s),c||(r=[G(t,"click",e[16]),G(t,"keydown",we(e[17])),G(l,"click",e[18]),G(l,"keydown",we(e[19]))],c=!0)},p(a,d){d&4&&n!==(n=a[2].write+"")&&F(i,n),d&2&&R(t,"bytemd-toolbar-tab-active",a[1]!=="preview"),d&4&&o!==(o=a[2].preview+"")&&F(s,o),d&2&&R(l,"bytemd-toolbar-tab-active",a[1]==="preview")},d(a){a&&O(t),a&&O(l),c=!1,te(r)}}}function vi(e){let t,n=e[3],i=[];for(let l=0;l<n.length;l+=1)i[l]=ot(it(e,n,l));return{c(){for(let l=0;l<i.length;l+=1)i[l].c();t=Te()},m(l,o){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(l,o);N(l,t,o)},p(l,o){if(o&8){n=l[3];let s;for(s=0;s<n.length;s+=1){const c=it(l,n,s);i[s]?i[s].p(c,o):(i[s]=ot(c),i[s].c(),i[s].m(t.parentNode,t))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(l){ye(i,l),l&&O(t)}}}function lt(e){let t,n=e[25].icon+"";return{c(){t=y("div"),C(t,"class",["bytemd-toolbar-icon",Se].join(" ")),C(t,"bytemd-tippy-path",e[27])},m(i,l){N(i,t,l),t.innerHTML=n},p(i,l){l&8&&n!==(n=i[25].icon+"")&&(t.innerHTML=n)},d(i){i&&O(t)}}}function ot(e){let t,n=e[25].handler&&lt(e);return{c(){n&&n.c(),t=Te()},m(i,l){n&&n.m(i,l),N(i,t,l)},p(i,l){i[25].handler?n?n.p(i,l):(n=lt(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&O(t)}}}function rt(e){let t,n=e[25].icon+"";return{c(){t=y("div"),C(t,"class",["bytemd-toolbar-icon",Se,Ee].join(" ")),C(t,"bytemd-tippy-path",e[27]),R(t,"bytemd-toolbar-icon-active",e[25].active)},m(i,l){N(i,t,l),t.innerHTML=n},p(i,l){l&32&&n!==(n=i[25].icon+"")&&(t.innerHTML=n),l&32&&R(t,"bytemd-toolbar-icon-active",i[25].active)},d(i){i&&O(t)}}}function st(e){let t,n=!e[25].hidden&&rt(e);return{c(){n&&n.c(),t=Te()},m(i,l){n&&n.m(i,l),N(i,t,l)},p(i,l){i[25].hidden?n&&(n.d(1),n=null):n?n.p(i,l):(n=rt(i),n.c(),n.m(t.parentNode,t))},d(i){n&&n.d(i),i&&O(t)}}}function wi(e){let t,n,i,l,o;function s(h,p){return h[0]?vi:gi}let c=s(e),r=c(e),a=e[5],d=[];for(let h=0;h<a.length;h+=1)d[h]=st(nt(e,a,h));return{c(){t=y("div"),n=y("div"),r.c(),i=y("div");for(let h=0;h<d.length;h+=1)d[h].c();C(n,"class","bytemd-toolbar-left"),C(i,"class","bytemd-toolbar-right"),C(t,"class","bytemd-toolbar")},m(h,p){N(h,t,p),k(t,n),r.m(n,null),k(t,i);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(i,null);e[20](t),l||(o=[G(t,"click",e[7]),G(t,"keydown",we(e[21]))],l=!0)},p(h,[p]){if(c===(c=s(h))&&r?r.p(h,p):(r.d(1),r=c(h),r&&(r.c(),r.m(n,null))),p&32){a=h[5];let g;for(g=0;g<a.length;g+=1){const u=nt(h,a,g);d[g]?d[g].p(u,p):(d[g]=st(u),d[g].c(),d[g].m(i,null))}for(;g<d.length;g+=1)d[g].d(1);d.length=a.length}},i:Q,o:Q,d(h){h&&O(t),r.d(),ye(d,h),e[20](null),l=!1,te(o)}}}const Se="bytemd-tippy",Ee="bytemd-tippy-right",Oe="bytemd-tippy-path";function pi(e,t,n){let i,l,o,s,c;const r=Ce();let a,{context:d}=t,{split:h}=t,{activeTab:p}=t,{fullscreen:g}=t,{sidebar:u}=t,{locale:_}=t,{actions:w}=t,{rightAfferentActions:v}=t;function m(T){var I,X;const z=(X=(I=T.getAttribute(Oe))==null?void 0:I.split("-"))==null?void 0:X.map(Y=>parseInt(Y,10));if(!z)return;let J={title:"",handler:{type:"dropdown",actions:T.classList.contains(Ee)?c:w}};return z==null||z.forEach(Y=>{var x;((x=J.handler)==null?void 0:x.type)==="dropdown"&&(J=J.handler.actions[Y])}),{paths:z,item:J}}let M;function B(){M=Wt(a,{target:`.${Se}`,onCreate({setProps:T,reference:I}){const X=m(I);if(!X)return;const{item:z,paths:J}=X,{handler:Y}=z;if(Y){if(Y.type==="action")T({content:z.title,onHidden(x){x.destroy()}});else if(Y.type==="dropdown"){const x=document.createElement("div");if(x.classList.add("bytemd-dropdown"),z.title){const Z=document.createElement("div");Z.classList.add("bytemd-dropdown-title"),Z.appendChild(document.createTextNode(z.title)),x.appendChild(Z)}Y.actions.forEach((Z,ne)=>{var le;const U=document.createElement("div");U.classList.add("bytemd-dropdown-item"),U.setAttribute(Oe,[...J,ne].join("-")),((le=Z.handler)==null?void 0:le.type)==="dropdown"&&U.classList.add(Se),I.classList.contains(Ee)&&U.classList.add(Ee),U.innerHTML=`${Z.icon?`<div class="bytemd-dropdown-item-icon">${Z.icon}</div>`:""}<div class="bytemd-dropdown-item-title">${Z.title}</div>`,x.appendChild(U)}),T({allowHTML:!0,showOnCreate:!0,theme:"light-border",placement:"bottom-start",interactive:!0,interactiveDebounce:50,arrow:!1,offset:[0,4],content:x.outerHTML,onHidden(Z){Z.destroy()},onCreate(Z){[...Z.popper.querySelectorAll(".bytemd-dropdown-item")].forEach((ne,le)=>{var U;const D=(U=Y.actions[le])==null?void 0:U.handler;if((D==null?void 0:D.type)==="action"){const{mouseenter:K,mouseleave:he}=D;K&&ne.addEventListener("mouseenter",()=>{K(d)}),he&&ne.addEventListener("mouseleave",()=>{he(d)})}})}})}}}})}Ne(()=>{B()});function L(T){var I,X;const z=T.target.closest(`[${Oe}]`);if(!z)return;const J=(X=(I=m(z))==null?void 0:I.item)==null?void 0:X.handler;(J==null?void 0:J.type)==="action"&&J.click(d),M==null||M.destroy(),B()}const E=()=>r("tab","write"),b=T=>["Enter","Space"].includes(T.code)&&r("tab","write"),V=()=>r("tab","preview"),se=T=>["Enter","Space"].includes(T.code)&&r("tab","preview");function H(T){de[T?"unshift":"push"](()=>{a=T,n(4,a)})}const ee=T=>["Enter","Space"].includes(T.code)&&L(T);return e.$$set=T=>{"context"in T&&n(8,d=T.context),"split"in T&&n(0,h=T.split),"activeTab"in T&&n(1,p=T.activeTab),"fullscreen"in T&&n(9,g=T.fullscreen),"sidebar"in T&&n(10,u=T.sidebar),"locale"in T&&n(2,_=T.locale),"actions"in T&&n(3,w=T.actions),"rightAfferentActions"in T&&n(11,v=T.rightAfferentActions)},e.$$.update=()=>{e.$$.dirty&1024&&n(15,i=u==="toc"),e.$$.dirty&1024&&n(14,l=u==="help"),e.$$.dirty&2&&n(13,o=p==="write"),e.$$.dirty&2&&n(12,s=p==="preview"),e.$$.dirty&64005&&n(5,c=[{title:i?_.closeToc:_.toc,icon:S.AlignTextLeftOne,handler:{type:"action",click(){r("click","toc")}},active:i},{title:l?_.closeHelp:_.help,icon:S.Helpcenter,handler:{type:"action",click(){r("click","help")}},active:l},{title:o?_.exitWriteOnly:_.writeOnly,icon:S.LeftExpand,handler:{type:"action",click(){r("tab","write")}},active:o,hidden:!h},{title:s?_.exitPreviewOnly:_.previewOnly,icon:S.RightExpand,handler:{type:"action",click(){r("tab","preview")}},active:s,hidden:!h},{title:g?_.exitFullscreen:_.fullscreen,icon:g?S.OffScreen:S.FullScreen,handler:{type:"action",click(){r("click","fullscreen")}}},{title:_.source,icon:S.GithubOne,handler:{type:"action",click(){window.open("https://github.com/bytedance/bytemd")}}},...v])},[h,p,_,w,a,c,r,L,d,g,u,v,s,o,l,i,E,b,V,se,H,ee]}class ki extends ke{constructor(t){super(),pe(this,t,pi,wi,Ae,{context:8,split:0,activeTab:1,fullscreen:9,sidebar:10,locale:2,actions:3,rightAfferentActions:11})}}const _i=JSON.stringify(Kt);function bi({sanitize:e,plugins:t,remarkRehype:n={}}){let i=xt().use(Ut);t==null||t.forEach(({remark:o})=>{o&&(i=o(i))}),i=i.use(Gt,{allowDangerousHtml:!0,...n}).use(Zt);let l=JSON.parse(_i);return l.attributes["*"].push("className"),typeof e=="function"&&(l=e(l)),i=i.use(Dt,l),t==null||t.forEach(({rehype:o})=>{o&&(i=o(i))}),i.use(Qt)}function yi(e){let t;return{c(){t=y("div"),C(t,"class","markdown-body")},m(n,i){N(n,t,i),t.innerHTML=e[1],e[8](t)},p(n,[i]){i&2&&(t.innerHTML=n[1])},i:Q,o:Q,d(n){n&&O(t),e[8](null)}}}function Mi(e,t,n){let i;const l=Ce();let{value:o=""}=t,{plugins:s=[]}=t,{sanitize:c=void 0}=t,{remarkRehype:r=void 0}=t,a,d=[];function h(){d=s.map(v=>{var m;return(m=v.viewerEffect)==null?void 0:m.call(v,{markdownBody:a,file:g})})}function p(){d.forEach(v=>v==null?void 0:v())}Ne(()=>{a.addEventListener("click",v=>{var m;const M=v.target;if(M.tagName!=="A")return;const B=M.getAttribute("href");B!=null&&B.startsWith("#")&&((m=a.querySelector("#user-content-"+B.slice(1)))==null||m.scrollIntoView())})}),ft(p);let g,u=0;const _=()=>(v,m)=>{He().then(()=>{l("hast",{hast:v,file:m})})};nn(()=>{p(),h()});function w(v){de[v?"unshift":"push"](()=>{a=v,n(0,a)})}return e.$$set=v=>{"value"in v&&n(2,o=v.value),"plugins"in v&&n(3,s=v.plugins),"sanitize"in v&&n(4,c=v.sanitize),"remarkRehype"in v&&n(5,r=v.remarkRehype)},e.$$.update=()=>{if(e.$$.dirty&188)try{n(6,g=bi({sanitize:c,plugins:[...s,{rehype:v=>v.use(_)}],remarkRehype:r}).processSync(o)),n(7,u++,u)}catch{}e.$$.dirty&192&&n(1,i=`${g}<!--${u}-->`)},[a,i,o,s,c,r,g,u,w]}class Ti extends ke{constructor(t){super(),pe(this,t,Mi,yi,Ae,{value:2,plugins:3,sanitize:4,remarkRehype:5})}}function ct(e){let t,n;return t=new Ti({props:{value:e[16],plugins:e[1],sanitize:e[2],remarkRehype:e[3]}}),t.$on("hast",e[35]),{c(){_e(t.$$.fragment)},m(i,l){me(t,i,l),n=!0},p(i,l){const o={};l[0]&65536&&(o.value=i[16]),l[0]&2&&(o.plugins=i[1]),l[0]&4&&(o.sanitize=i[2]),l[0]&8&&(o.remarkRehype=i[3]),t.$set(o)},i(i){n||(ie(t.$$.fragment,i),n=!0)},o(i){ce(t.$$.fragment,i),n=!1},d(i){ge(t,i)}}}function Ci(e){let t,n,i,l,o,s,c,r,a,d=S.Close+"",h,p,g,u,_,w;n=new ki({props:{context:e[10],split:e[11],activeTab:e[8],sidebar:e[9],fullscreen:e[15],rightAfferentActions:e[21].rightActions,locale:e[12],actions:e[21].leftActions}}),n.$on("key",e[31]),n.$on("tab",e[32]),n.$on("click",e[33]);let v=!e[4]&&(e[11]||e[8]==="preview")&&ct(e);return h=new ci({props:{locale:e[12],actions:e[21].leftActions,visible:e[9]==="help"}}),p=new mi({props:{hast:e[18],locale:e[12],currentBlockIndex:e[20],visible:e[9]==="toc"}}),p.$on("click",e[39]),g=new hi({props:{locale:e[12],showSync:!e[4]&&e[11],value:e[16],syncEnabled:e[17],islimited:e[0].length>e[5]}}),g.$on("sync",e[40]),g.$on("top",e[41]),{c(){t=y("div"),_e(n.$$.fragment),i=y("div"),l=y("div"),s=y("div"),v&&v.c(),r=y("div"),a=y("div"),_e(h.$$.fragment),_e(p.$$.fragment),_e(g.$$.fragment),C(l,"class","bytemd-editor"),C(l,"style",o=e[22].edit),C(s,"class","bytemd-preview"),C(s,"style",c=e[22].preview),C(a,"class","bytemd-sidebar-close"),C(r,"class","bytemd-sidebar"),R(r,"bytemd-hidden",e[9]===!1),C(i,"class","bytemd-body"),C(t,"class","bytemd"),R(t,"bytemd-split",e[11]&&e[8]===!1),R(t,"bytemd-fullscreen",e[15])},m(m,M){N(m,t,M),me(n,t,null),k(t,i),k(i,l),e[34](l),k(i,s),v&&v.m(s,null),e[36](s),k(i,r),k(r,a),a.innerHTML=d,me(h,r,null),me(p,r,null),me(g,t,null),e[42](t),u=!0,_||(w=[G(a,"click",e[37]),G(a,"keydown",we(e[38]))],_=!0)},p(m,M){const B={};M[0]&1024&&(B.context=m[10]),M[0]&2048&&(B.split=m[11]),M[0]&256&&(B.activeTab=m[8]),M[0]&512&&(B.sidebar=m[9]),M[0]&32768&&(B.fullscreen=m[15]),M[0]&2097152&&(B.rightAfferentActions=m[21].rightActions),M[0]&4096&&(B.locale=m[12]),M[0]&2097152&&(B.actions=m[21].leftActions),n.$set(B),(!u||M[0]&4194304&&o!==(o=m[22].edit))&&C(l,"style",o),!m[4]&&(m[11]||m[8]==="preview")?v?(v.p(m,M),M[0]&2320&&ie(v,1)):(v=ct(m),v.c(),ie(v,1),v.m(s,null)):v&&(rn(),ce(v,1,1,()=>{v=null}),sn()),(!u||M[0]&4194304&&c!==(c=m[22].preview))&&C(s,"style",c);const L={};M[0]&4096&&(L.locale=m[12]),M[0]&2097152&&(L.actions=m[21].leftActions),M[0]&512&&(L.visible=m[9]==="help"),h.$set(L);const E={};M[0]&262144&&(E.hast=m[18]),M[0]&4096&&(E.locale=m[12]),M[0]&1048576&&(E.currentBlockIndex=m[20]),M[0]&512&&(E.visible=m[9]==="toc"),p.$set(E),(!u||M[0]&512)&&R(r,"bytemd-hidden",m[9]===!1);const b={};M[0]&4096&&(b.locale=m[12]),M[0]&2064&&(b.showSync=!m[4]&&m[11]),M[0]&65536&&(b.value=m[16]),M[0]&131072&&(b.syncEnabled=m[17]),M[0]&33&&(b.islimited=m[0].length>m[5]),g.$set(b),(!u||M[0]&2304)&&R(t,"bytemd-split",m[11]&&m[8]===!1),(!u||M[0]&32768)&&R(t,"bytemd-fullscreen",m[15])},i(m){u||(ie(n.$$.fragment,m),ie(v),ie(h.$$.fragment,m),ie(p.$$.fragment,m),ie(g.$$.fragment,m),u=!0)},o(m){ce(n.$$.fragment,m),ce(v),ce(h.$$.fragment,m),ce(p.$$.fragment,m),ce(g.$$.fragment,m),u=!1},d(m){m&&O(t),ge(n),e[34](null),v&&v.d(),e[36](null),ge(h),ge(p),ge(g),e[42](null),_=!1,te(w)}}}function Hi(e,t,n){let i,l,o,s,c,{value:r=""}=t,{plugins:a=[]}=t,{sanitize:d=void 0}=t,{remarkRehype:h=void 0}=t,{mode:p="auto"}=t,{previewDebounce:g=300}=t,{placeholder:u=void 0}=t,{editorConfig:_=void 0}=t,{locale:w=void 0}=t,{uploadImages:v=void 0}=t,{overridePreview:m=void 0}=t,{maxLength:M=1/0}=t;const B=Ce();let L,E,b,V=1/0,se,H,ee,T=!1,I=!1,X=[],z={};function J(){X=a.map(f=>{var q;return(q=f.editorEffect)==null?void 0:q.call(f,c)}),z={},l.leftActions.forEach(({handler:f})=>{(f==null?void 0:f.type)==="action"&&f.shortcut&&(z[f.shortcut]=()=>{f.click(c)})}),H.addKeyMap(z)}function Y(){X.forEach(f=>f&&f()),H==null||H.removeKeyMap(z)}let x=r;const Z=Jt(f=>{n(16,x=f),m==null||m(b,{value:x,plugins:a,sanitize:d,remarkRehype:h})},g);let ne=!0,le=!1,U=!1,D,K,he={type:"root",children:[]},ze,Fe=0;Ne(async()=>{n(30,se=ii()),n(7,H=se(E,{value:r,mode:"yaml-frontmatter",lineWrapping:!0,tabSize:8,indentUnit:4,extraKeys:{Enter:"newlineAndIndentContinueMarkdownList"},..._,placeholder:u})),H.addKeyMap({Tab:"indentMore","Shift-Tab":"indentLess"}),H.on("change",()=>{B("change",{value:H.getValue()})});const f=Yt(()=>{D=[],K=[];const W=H.getScrollInfo(),A=b.childNodes[0];if(!(A instanceof HTMLElement))return;const j=he.children.filter(oe=>oe.type==="element"),$=[...A.childNodes].filter(oe=>oe instanceof HTMLElement);for(let oe=0;oe<j.length;oe++){const Ve=j[oe],Bt=$[oe];if(!Ve.position)continue;const We=H.heightAtLine(Ve.position.start.line-1,"local")/(W.height-W.clientHeight),Ze=(Bt.offsetTop-A.offsetTop)/(b.scrollHeight-b.clientHeight);if(We>=1||Ze>=1)break;D.push(We),K.push(Ze)}D.push(1),K.push(1)},1e3),q=()=>{if(m||!ne)return;if(U){U=!1;return}f();const W=H.getScrollInfo(),A=W.top/(W.height-W.clientHeight),j=je(A,D),$=(A-D[j])*(K[j+1]-K[j])/(D[j+1]-D[j])+K[j];b.scrollTo(0,$*(b.scrollHeight-b.clientHeight)),le=!0},At=()=>{if(m||(f(),n(20,Fe=je(b.scrollTop/(b.scrollHeight-b.offsetHeight),K)),!ne))return;if(le){le=!1;return}const W=b.scrollTop/(b.scrollHeight-b.clientHeight),A=je(W,K),j=(W-K[A])*(D[A+1]-D[A])/(K[A+1]-K[A])+D[A];if(isNaN(j))return;const $=H.getScrollInfo();H.scrollTo(0,j*($.height-$.clientHeight)),U=!0};H.on("scroll",q),b.addEventListener("scroll",At,{passive:!0});const qe=async(W,A)=>{if(!v)return;const j=Array.from(A??[]).map($=>{if($.type.startsWith("image/"))return $.getAsFile()}).filter($=>$!=null);j.length&&(W.preventDefault(),await wt(c,v,j))};H.on("drop",async(W,A)=>{var j;qe(A,(j=A.dataTransfer)==null?void 0:j.items)}),H.on("paste",async(W,A)=>{var j;qe(A,(j=A.clipboardData)==null?void 0:j.items)}),new ResizeObserver(W=>{n(29,V=W[0].contentRect.width)}).observe(L,{box:"border-box"})}),ft(Y);const pt=f=>{H.setOption("keyMap",f.detail),H.focus()},kt=f=>{const q=f.detail;o?n(8,ee=ee===q?!1:q):n(8,ee=q),ee==="write"&&He().then(()=>{H&&H.focus()}),q==="write"&&He().then(()=>{H&&H.setSize(null,null)})},_t=f=>{switch(f.detail){case"fullscreen":n(15,T=!T);break;case"help":n(9,I=I==="help"?!1:"help");break;case"toc":n(9,I=I==="toc"?!1:"toc");break}};function bt(f){de[f?"unshift":"push"](()=>{E=f,n(13,E)})}const yt=f=>{n(18,he=f.detail.hast),n(19,ze=f.detail.file)};function Mt(f){de[f?"unshift":"push"](()=>{b=f,n(14,b)})}const Tt=()=>{n(9,I=!1)},Ct=f=>{["Enter","Space"].includes(f.code)&&n(9,I=!1)},Ht=f=>{b.querySelectorAll("h1,h2,h3,h4,h5,h6")[f.detail].scrollIntoView()},Lt=f=>{n(17,ne=f.detail)},Et=()=>{H.scrollTo(null,0),b.scrollTo({top:0})};function St(f){de[f?"unshift":"push"](()=>{L=f,n(6,L)})}return e.$$set=f=>{"value"in f&&n(0,r=f.value),"plugins"in f&&n(1,a=f.plugins),"sanitize"in f&&n(2,d=f.sanitize),"remarkRehype"in f&&n(3,h=f.remarkRehype),"mode"in f&&n(23,p=f.mode),"previewDebounce"in f&&n(24,g=f.previewDebounce),"placeholder"in f&&n(25,u=f.placeholder),"editorConfig"in f&&n(26,_=f.editorConfig),"locale"in f&&n(27,w=f.locale),"uploadImages"in f&&n(28,v=f.uploadImages),"overridePreview"in f&&n(4,m=f.overridePreview),"maxLength"in f&&n(5,M=f.maxLength)},e.$$.update=()=>{e.$$.dirty[0]&134217728&&n(12,i={...ni,...w}),e.$$.dirty[0]&268439554&&n(21,l=oi(i,a,v)),e.$$.dirty[0]&545259520&&n(11,o=p==="split"||p==="auto"&&V>=800),e.$$.dirty[0]&2048&&(f=>{o&&n(8,ee=!1)})(),e.$$.dirty[0]&2816&&n(22,s=(()=>{let f,q;return o&&ee===!1?I?(f=`width:calc(50% - ${I?140:0}px)`,q=`width:calc(50% - ${I?140:0}px)`):(f="width:50%",q="width:50%"):ee==="preview"?(f="display:none",q=`width:calc(100% - ${I?280:0}px)`):(f=`width:calc(100% - ${I?280:0}px)`,q="display:none"),{edit:f,preview:q}})()),e.$$.dirty[0]&1073742016&&n(10,c={codemirror:se,editor:H,root:L,...li(se,H)}),e.$$.dirty[0]&1&&Z(r),e.$$.dirty[0]&129&&H&&r!==H.getValue()&&H.setValue(r),e.$$.dirty[0]&130&&H&&a&&(Y(),He().then(()=>{J()}))},[r,a,d,h,m,M,L,H,ee,I,c,o,i,E,b,T,x,ne,he,ze,Fe,l,s,p,g,u,_,w,v,V,se,pt,kt,_t,bt,yt,Mt,Tt,Ct,Ht,Lt,Et,St]}class jl extends ke{constructor(t){super(),pe(this,t,Hi,Ci,Ae,{value:0,plugins:1,sanitize:2,remarkRehype:3,mode:23,previewDebounce:24,placeholder:25,editorConfig:26,locale:27,uploadImages:28,overridePreview:4,maxLength:5},null,[-1,-1])}}const Li="粗体",Ei="粗体文本",Si="Markdown 语法",Ai="关闭帮助",Bi="关闭目录",Ii="代码",ji="代码块",Oi="编程语言",Pi="代码",Ri="退出全屏",Ni="恢复默认",zi="恢复默认",Fi="全屏",qi="一级标题",Vi="二级标题",Wi="三级标题",Zi="四级标题",Di="五级标题",Ki="六级标题",xi="标题",Ui="帮助",Gi="分割线",Qi="图片",Ji="alt",Yi="图片描述",Xi="斜体",$i="斜体文本",el="已达最大字符数限制",tl="行数",nl="链接",il="链接描述",ll="有序列表",ol="项目",rl="预览",sl="仅预览区",cl="引用",al="引用文本",dl="快捷键",hl="源代码",ul="同步滚动",fl="目录",ml="回到顶部",gl="无序列表",vl="项目",wl="字数",pl="编辑",kl="仅编辑区",Ol={bold:Li,boldText:Ei,cheatsheet:Si,closeHelp:Ai,closeToc:Bi,code:Ii,codeBlock:ji,codeLang:Oi,codeText:Pi,exitFullscreen:Ri,exitPreviewOnly:Ni,exitWriteOnly:zi,fullscreen:Fi,h1:qi,h2:Vi,h3:Wi,h4:Zi,h5:Di,h6:Ki,headingText:xi,help:Ui,hr:Gi,image:Qi,imageAlt:Ji,imageTitle:Yi,italic:Xi,italicText:$i,limited:el,lines:tl,link:nl,linkText:il,ol:ll,olItem:ol,preview:rl,previewOnly:sl,quote:cl,quotedText:al,shortcuts:dl,source:hl,sync:ul,toc:fl,top:ml,ul:gl,ulItem:vl,words:wl,write:pl,writeOnly:kl};export{jl as E,bi as g,Ol as z};
