
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{s as h,h as v,f as b}from"./property-information-CayEAvHG.js";import{w}from"./web-namespaces-bsVAaBS1.js";import{l as x}from"./vfile-location-C9EgA9Ru.js";import{s as L,h as C}from"./hastscript-Dtv_uOQk.js";const y={}.hasOwnProperty,N=Object.prototype;function M(e,n){const t=n||{};let s,o;return P(t)?(o=t,s={}):(o=t.file||void 0,s=t),u({schema:s.space==="svg"?h:v,file:o,verbose:s.verbose,location:!1},e)}function u(e,n){let t;switch(n.nodeName){case"#comment":{const s=n;return t={type:"comment",value:s.data},l(e,s,t),t}case"#document":case"#document-fragment":{const s=n,o="mode"in s?s.mode==="quirks"||s.mode==="limited-quirks":!1;if(t={type:"root",children:T(e,n.childNodes),data:{quirksMode:o}},e.file&&e.location){const a=String(e.file),r=x(a),c=r.toPoint(0),i=r.toPoint(a.length);t.position={start:c,end:i}}return t}case"#documentType":{const s=n;return t={type:"doctype"},l(e,s,t),t}case"#text":{const s=n;return t={type:"text",value:s.value},l(e,s,t),t}default:return t=O(e,n),t}}function T(e,n){let t=-1;const s=[];for(;++t<n.length;)s[t]=u(e,n[t]);return s}function O(e,n){const t=e.schema;e.schema=n.namespaceURI===w.svg?h:v;let s=-1;const o={};for(;++s<n.attrs.length;){const c=n.attrs[s],i=(c.prefix?c.prefix+":":"")+c.name;y.call(N,i)||(o[i]=c.value)}const r=(e.schema.space==="svg"?L:C)(n.tagName,o,T(e,n.childNodes));if(l(e,n,r),r.tagName==="template"){const c=n,i=c.sourceCodeLocation,p=i&&i.startTag&&f(i.startTag),m=i&&i.endTag&&f(i.endTag),d=u(e,c.content);p&&m&&e.file&&(d.position={start:p.end,end:m.start}),r.content=d}return e.schema=t,r}function l(e,n,t){if("sourceCodeLocation"in n&&n.sourceCodeLocation&&e.file){const s=k(e,t,n.sourceCodeLocation);s&&(e.location=!0,t.position=s)}}function k(e,n,t){const s=f(t);if(n.type==="element"){const o=n.children[n.children.length-1];if(s&&!t.endTag&&o&&o.position&&o.position.end&&(s.end=Object.assign({},o.position.end)),e.verbose){const a={};let r;if(t.attrs)for(r in t.attrs)y.call(t.attrs,r)&&(a[b(e.schema,r).property]=f(t.attrs[r]));n.data={position:{opening:f(t.startTag),closing:t.endTag?f(t.endTag):null,properties:a}}}}return s}function f(e){const n=g({line:e.startLine,column:e.startCol,offset:e.startOffset}),t=g({line:e.endLine,column:e.endCol,offset:e.endOffset});return n||t?{start:n,end:t}:void 0}function g(e){return e.line&&e.column?e:void 0}function P(e){return"messages"in e}export{M as f};
