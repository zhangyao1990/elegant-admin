
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{_ as E}from"./index-qeCTDZwl.js";import{B as F}from"./@vueuse-D9pgrdqz.js";import{g as b}from"./sys_user-rXWpRg4F.js";import{d as K,r as u,l as M,w as Y,ai as i,a as v,S as y,U as r,_ as a,Y as c,k as d,f as C,Z as w,E as Z}from"./@vue-B5ZJ3lyG.js";import{_ as G}from"./vue-esign-CYl9_Ryz.js";import"./vite-plugin-fake-server-4rIte7rE.js";import"./mockjs-CyY_Wk_H.js";import"./@imengyu-CEcZjhxx.js";import"./vue-DvVlWPqX.js";import"./floating-vue-AocVffS4.js";import"./@floating-ui-DiM7Jq06.js";import"./vue-m-message-CaZYo5LC.js";import"./overlayscrollbars-DIcyBJd7.js";import"./@iconify-BcJ8VpTk.js";import"./overlayscrollbars-vue-CwvYLriB.js";import"./@headlessui-Cgia3ZxR.js";import"./mitt-DJ65BbbF.js";import"./crypto-js-0jcLrwUI.js";import"./lodash-es-Cgwu3vQX.js";import"./pinia-C6gN_FJk.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-B53joON4.js";import"./hotkeys-js-BfWqkGRU.js";import"./element-plus-iUOJk6xm.js";import"./@element-plus-DlsPF3Ud.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DHZ_rfNz.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./vue-i18n-BoS7Exf_.js";import"./@intlify-CEEhciFb.js";import"./colord-CrBFWQzZ.js";import"./monaco-editor-1i8roCpp.js";import"./path-browserify-CaPOtSVJ.js";import"./axios-CRnBnh7r.js";import"./nprogress-CK9xi7fq.js";const H={class:"flex flex-1 flex-justify-between flex-items-center"},J={class:"flex-center"},Q=K({__name:"UserPicker",props:{modelValue:{},multiple:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(U,{expose:B,emit:N}){const f=U,A=N,I={label:"name",children:"children",isLeaf:"leaf",class:t=>$(t)},s=F(f,"modelValue",A),l=u([]),g=u([]),x=u(),O=u([]);function $(t){return l.value.find(o=>o.id===t.id)?"is-active":""}function P(t){if(t.type==="user")if(f.multiple){const e=l.value.findIndex(o=>o.id===t.id);e===-1?(l.value.push(t),l.value.sort((o,m)=>o.id.localeCompare(m.id))):l.value.splice(e,1)}else{const e=l.value.findIndex(o=>o.id===t.id);e===-1?l.value=[t]:l.value.splice(e,1)}}const p=u(!1),_=M({name:null});Y(()=>_.name,t=>{var e;(e=x.value)==null||e.filter(t)});function R(t,e){return t?e.name.includes(t):!0}function S(){p.value=!0}function T(){b({}).then(e=>{g.value=e.data.records.map(o=>({id:o.name,name:o.name,type:"user",leaf:!0}))});let t=[];Array.isArray(s.value)?t.push(...s.value):s.value&&t.push(s.value),t.length>0?b(t).then(e=>{l.value=e.data.records.map(o=>({id:o.name,name:o.name,type:"user",leaf:!0})),l.value.sort((o,m)=>o.id.localeCompare(m.id))}):l.value=[]}function z(){f.multiple?s.value=l.value.map(t=>t.id):l.value.length>0?s.value=l.value[0].id:s.value=null,p.value=!1}return B({open:S}),(t,e)=>{const o=i("el-input"),m=i("el-avatar"),h=E,k=i("el-icon"),L=i("el-tree"),j=i("el-scrollbar"),q=i("el-card"),V=i("el-button"),D=i("el-dialog");return v(),y(D,{modelValue:d(p),"onUpdate:modelValue":e[2]||(e[2]=n=>Z(p)?p.value=n:null),"align-center":"",draggable:"",title:"选择用户",width:"30%",onOpen:T},{footer:r(()=>[a(V,{onClick:e[1]||(e[1]=n=>p.value=!1)},{default:r(()=>e[3]||(e[3]=[c(" 取消 ")])),_:1}),a(V,{type:"primary",onClick:z},{default:r(()=>e[4]||(e[4]=[c(" 确认 ")])),_:1})]),default:r(()=>[a(q,{shadow:"never",class:"org-card"},{header:r(()=>[a(o,{modelValue:d(_).name,"onUpdate:modelValue":e[0]||(e[0]=n=>d(_).name=n),placeholder:"输入关键字进行查询",style:{width:"100%"},"suffix-icon":"search",clearable:""},null,8,["modelValue"])]),default:r(()=>[a(j,{tag:"div",class:"org-tree"},{default:r(()=>[a(L,{ref_key:"orgTreeRef",ref:x,"node-key":"id",data:d(g),"default-expanded-keys":d(O),props:I,"filter-node-method":R,onNodeClick:P},{default:r(({data:n})=>[C("div",H,[C("div",J,[n.type==="user"?(v(),y(m,{key:0,bgv:"red",size:25},{default:r(()=>[c(w(n.name.charAt(0)),1)]),_:2},1024)):(v(),y(k,{key:1,size:16},{default:r(()=>[a(h,{name:"ep:school"})]),_:1})),c("  "+w(n.name),1)]),a(k,{class:"is-selected"},{default:r(()=>[a(h,{name:"ep:check"})]),_:1})])]),_:1},8,["data","default-expanded-keys"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Te=G(Q,[["__scopeId","data-v-f7085d80"]]);export{Te as default};
