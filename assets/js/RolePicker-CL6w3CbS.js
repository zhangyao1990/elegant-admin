
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{_ as E}from"./index-qeCTDZwl.js";import{B as L}from"./@vueuse-D9pgrdqz.js";import{g as h}from"./sys_role-CiNVMn25.js";import{f as j}from"./element-plus-iUOJk6xm.js";import{d as q,r as u,l as z,w as D,ai as m,a as F,S as K,U as a,_ as i,Y as _,k as p,f as V,Z as M,E as Y}from"./@vue-B5ZJ3lyG.js";import{_ as Z}from"./vue-esign-CYl9_Ryz.js";import"./vite-plugin-fake-server-4rIte7rE.js";import"./mockjs-CyY_Wk_H.js";import"./@imengyu-CEcZjhxx.js";import"./vue-DvVlWPqX.js";import"./floating-vue-AocVffS4.js";import"./@floating-ui-DiM7Jq06.js";import"./vue-m-message-CaZYo5LC.js";import"./overlayscrollbars-DIcyBJd7.js";import"./@iconify-BcJ8VpTk.js";import"./overlayscrollbars-vue-CwvYLriB.js";import"./@headlessui-Cgia3ZxR.js";import"./mitt-DJ65BbbF.js";import"./crypto-js-0jcLrwUI.js";import"./lodash-es-Cgwu3vQX.js";import"./pinia-C6gN_FJk.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-B53joON4.js";import"./hotkeys-js-BfWqkGRU.js";import"./vue-i18n-BoS7Exf_.js";import"./@intlify-CEEhciFb.js";import"./colord-CrBFWQzZ.js";import"./monaco-editor-1i8roCpp.js";import"./path-browserify-CaPOtSVJ.js";import"./axios-CRnBnh7r.js";import"./@element-plus-DlsPF3Ud.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DHZ_rfNz.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./nprogress-CK9xi7fq.js";const G={class:"flex flex-1 flex-justify-between flex-items-center"},H={class:"flex-center"},J=q({__name:"RolePicker",props:{modelValue:{},multiple:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(k,{expose:C,emit:b}){const f=k,w=b,N={label:"name",children:"children",isLeaf:"leaf",class:o=>B(o)},n=L(f,"modelValue",w),l=u([]),x=u([]),g=u(),R=u([]);function B(o){return l.value.find(t=>t.id===o.id)?"is-active":""}function I(o){if(f.multiple){const e=l.value.findIndex(t=>t.id===o.id);e===-1?(l.value.push(o),l.value.sort((t,r)=>t.id.localeCompare(r.id))):l.value.splice(e,1)}else{const e=l.value.findIndex(t=>t.id===o.id);e===-1?l.value=[o]:l.value.splice(e,1)}}const s=u(!1),v=z({name:null});D(()=>v.name,o=>{var e;(e=g.value)==null||e.filter(o)});function O(o,e){return o?e.name.includes(o):!0}function T(){s.value=!0}function $(){h({}).then(e=>{x.value=e.data.records.map(t=>({id:t.id,name:t.roleName}))});let o=[];Array.isArray(n.value)?o.push(...n.value):n.value&&o.push(n.value),o.length>0?h(o).then(e=>{var t;l.value=(t=e.data.records)==null?void 0:t.map(r=>({id:r.id,name:r.roleName})),l.value.sort((r,c)=>r.id.localeCompare(c.id))}):l.value=[]}function A(){f.multiple?n.value=l.value.map(o=>o.id):l.value.length>0?n.value=l.value[0].id:n.value=null,s.value=!1}return C({open:T}),(o,e)=>{const t=m("el-input"),r=E,c=m("el-icon"),P=m("el-scrollbar"),S=m("el-card"),y=m("el-button"),U=m("el-dialog");return F(),K(U,{modelValue:p(s),"onUpdate:modelValue":e[2]||(e[2]=d=>Y(s)?s.value=d:null),"align-center":"",draggable:"",title:"选择角色",width:"30%",onOpen:$},{footer:a(()=>[i(y,{onClick:e[1]||(e[1]=d=>s.value=!1)},{default:a(()=>e[3]||(e[3]=[_(" 取消 ")])),_:1}),i(y,{type:"primary",onClick:A},{default:a(()=>e[4]||(e[4]=[_(" 确认 ")])),_:1})]),default:a(()=>[i(S,{shadow:"never",class:"org-card"},{header:a(()=>[i(t,{modelValue:p(v).name,"onUpdate:modelValue":e[0]||(e[0]=d=>p(v).name=d),placeholder:"输入关键字进行查询",style:{width:"100%"},"suffix-icon":"search",clearable:""},null,8,["modelValue"])]),default:a(()=>[i(P,{tag:"div",class:"org-tree"},{default:a(()=>[i(p(j),{ref_key:"orgTreeRef",ref:g,"node-key":"id",data:p(x),"default-expanded-keys":p(R),props:N,"filter-node-method":O,onNodeClick:I},{default:a(({data:d})=>[V("div",G,[V("div",H,[i(c,{size:16},{default:a(()=>[i(r,{name:"ep:school"})]),_:1}),_("  "+M(d.name),1)]),i(c,{class:"is-selected"},{default:a(()=>[i(r,{name:"ep:check"})]),_:1})])]),_:1},8,["data","default-expanded-keys"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Se=Z(J,[["__scopeId","data-v-fdc6a55e"]]);export{Se as default};
