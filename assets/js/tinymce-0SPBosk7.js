
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{a as oq}from"./@imengyu-CEcZjhxx.js";var ZG={exports:{}};(function(Sr){(function(){var js=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},ws=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},us=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},Ko=function(e,n){return ps(function(o,r){return e.eq(n(o),n(r))})},ps=function(e){return{eq:e}},So=ps(function(e,n){return e===n}),rt=So,Hn=function(e){return ps(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e.eq(n[a],o[a]))return!1;return!0})},Ho=function(e,n){return Ko(Hn(e),function(o){return us(o,n)})},mo=function(e){return ps(function(n,o){var r=Object.keys(n),a=Object.keys(o);if(!Ho(rt).eq(r,a))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},Uo=ps(function(e,n){if(e===n)return!0;var o=js(e),r=js(n);return o!==r?!1:ws(o)?e===n:o==="array"?Hn(Uo).eq(e,n):o==="object"?mo(Uo).eq(e,n):!1});const Wo=Object.getPrototypeOf,zn=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Go=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&zn(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Xn=e=>n=>Go(n)===e,Ot=e=>n=>typeof n===e,Zn=e=>n=>e===n,nt=(e,n)=>ut(e)&&zn(e,n,(o,r)=>Wo(o)===r),oe=Xn("string"),ut=Xn("object"),oo=e=>nt(e,Object),dt=Xn("array"),W=Zn(null),Rt=Ot("boolean"),sn=Zn(void 0),Xt=e=>e==null,Ne=e=>!Xt(e),le=Ot("function"),Bo=Ot("number"),gt=(e,n)=>{if(dt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},$e=()=>{},A=(e,n)=>(...o)=>e(n.apply(null,o)),kn=(e,n)=>o=>e(n(o)),Ke=e=>()=>e,Vn=e=>e,jt=(e,n)=>e===n;function je(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const Jn=e=>n=>!e(n),bs=e=>()=>{throw new Error(e)},bt=e=>e(),mn=e=>{e()},Pe=Ke(!1),et=Ke(!0);class F{constructor(n,o){this.tag=n,this.value=o}static some(n){return new F(!0,n)}static none(){return F.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?F.some(n(this.value)):F.none()}bind(n){return this.tag?n(this.value):F.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:F.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Ne(n)?F.some(n):F.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}F.singletonNone=new F(!1);const Ss=Array.prototype.slice,io=Array.prototype.indexOf,To=Array.prototype.push,it=(e,n)=>io.call(e,n),Mt=(e,n)=>{const o=it(e,n);return o===-1?F.none():F.some(o)},xe=(e,n)=>it(e,n)>-1,Re=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return!0}return!1},Fe=(e,n)=>{const o=e.length,r=new Array(o);for(let a=0;a<o;a++){const u=e[a];r[a]=n(u,a)}return r},ie=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];n(a,o)}},_n=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Un=(e,n)=>{const o=[],r=[];for(let a=0,u=e.length;a<u;a++){const f=e[a];(n(f,a)?o:r).push(f)}return{pass:o,fail:r}},Bt=(e,n)=>{const o=[];for(let r=0,a=e.length;r<a;r++){const u=e[r];n(u,r)&&o.push(u)}return o},rs=(e,n,o)=>(_n(e,(r,a)=>{o=n(o,r,a)}),o),ro=(e,n,o)=>(ie(e,(r,a)=>{o=n(o,r,a)}),o),ir=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++){const u=e[r];if(n(u,r))return F.some(u);if(o(u,r))break}return F.none()},Po=(e,n)=>ir(e,n,Pe),Ms=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return F.some(o)}return F.none()},ra=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!dt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);To.apply(n,e[o])}return n},zs=(e,n)=>ra(Fe(e,n)),As=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const a=e[o];if(n(a,o)!==!0)return!1}return!0},gs=e=>{const n=Ss.call(e,0);return n.reverse(),n},Hr=(e,n)=>Bt(e,o=>!xe(n,o)),xs=(e,n)=>{const o={};for(let r=0,a=e.length;r<a;r++){const u=e[r];o[String(u)]=n(u,r)}return o},bo=(e,n)=>{const o=Ss.call(e,0);return o.sort(n),o},xa=(e,n)=>n>=0&&n<e.length?F.some(e[n]):F.none(),vo=e=>xa(e,0),ds=e=>xa(e,e.length-1),xr=le(Array.from)?Array.from:e=>Ss.call(e),ec=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return F.none()},ca=(e,n)=>{const o=[],r=le(n)?a=>Re(o,u=>n(u,a)):a=>xe(o,a);for(let a=0,u=e.length;a<u;a++){const f=e[a];r(f)||o.push(f)}return o},yo=Object.keys,Ta=Object.hasOwnProperty,xt=(e,n)=>{const o=yo(e);for(let r=0,a=o.length;r<a;r++){const u=o[r],f=e[u];n(f,u)}},Eo=(e,n)=>Pr(e,(o,r)=>({k:r,v:n(o,r)})),Pr=(e,n)=>{const o={};return xt(e,(r,a)=>{const u=n(r,a);o[u.k]=u.v}),o},br=e=>(n,o)=>{e[o]=n},uc=(e,n,o,r)=>{xt(e,(a,u)=>{(n(a,u)?o:r)(a,u)})},vc=(e,n)=>{const o={},r={};return uc(e,n,br(o),br(r)),{t:o,f:r}},Qo=(e,n)=>{const o={};return uc(e,n,br(o),$e),o},Fc=(e,n)=>{const o=[];return xt(e,(r,a)=>{o.push(n(r,a))}),o},dc=e=>Fc(e,Vn),Yo=(e,n)=>fn(e,n)?F.from(e[n]):F.none(),fn=(e,n)=>Ta.call(e,n),Bs=(e,n)=>fn(e,n)&&e[n]!==void 0&&e[n]!==null,qr=(e,n,o=Uo)=>mo(o).eq(e,n),Ga=e=>{const n={};return ie(e,o=>{n[o]={}}),yo(n)},rl=e=>e.length!==void 0,ms=Array.isArray,rr=e=>{if(ms(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Ps=(e,n,o)=>{if(!e)return!1;if(o=o||e,rl(e)){for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(fn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},tc=(e,n)=>{const o=[];return Ps(e,(r,a)=>{o.push(n(r,a,e))}),o},Ic=(e,n)=>{const o=[];return Ps(e,(r,a)=>{(!n||n(r,a,e))&&o.push(r)}),o},cr=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},ue=(e,n,o,r)=>{let a=sn(o)?e[0]:o;for(let u=0;u<e.length;u++)a=n.call(r,a,e[u],u);return a},se=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e))return r;return-1},Be=e=>e[e.length-1],Ve=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},un=(e,n,o,r)=>{const a=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!a,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=a||!u&&f&&r("(min-device-width:768px)"),E=u||f&&!y,N=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,M=!E&&!y&&!N;return{isiPad:Ke(a),isiPhone:Ke(u),isTablet:Ke(y),isPhone:Ke(E),isTouch:Ke(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Ke(N),isDesktop:Ke(M)}},Rn=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},jn=(e,n)=>{const o=Rn(e,n);if(!o)return{major:0,minor:0};const r=a=>Number(n.replace(o,"$"+a));return Gn(r(1),r(2))},qs=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?ve():jn(e,o)},ve=()=>Gn(0,0),Gn=(e,n)=>({major:e,minor:n}),de={nu:Gn,detect:qs,unknown:ve},pe=(e,n)=>ec(n.brands,o=>{const r=o.brand.toLowerCase();return Po(e,a=>{var u;return r===((u=a.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(a=>({current:a.name,version:de.nu(parseInt(o.version,10),0)}))}),at=(e,n)=>{const o=String(n).toLowerCase();return Po(e,r=>r.search(o))},ft=(e,n)=>at(e,n).map(o=>{const r=de.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Vt=(e,n)=>at(e,n).map(o=>{const r=de.detect(o.versionRegexes,n);return{current:o.name,version:r}}),nn=(e,n)=>e.substring(n),rn=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,en=(e,n)=>Nn(e,n)?nn(e,n.length):e,Cn=(e,n,o=0,r)=>{const a=e.indexOf(n,o);return a!==-1?sn(r)?!0:a+n.length<=r:!1},Nn=(e,n)=>rn(e,n,0),zo=(e,n)=>rn(e,n,e.length-n.length),cs=e=>n=>n.replace(e,""),Os=cs(/^\s+|\s+$/g),_c=cs(/^\s+/g),Lc=cs(/\s+$/g),Dn=e=>e.length>0,No=e=>!Dn(e),$o=(e,n)=>n<=0?"":new Array(n+1).join(e),Kr=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?F.none():F.some(o)},Yr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,$r=e=>n=>Cn(n,e),Ks=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Cn(e,"edge/")&&Cn(e,"chrome")&&Cn(e,"safari")&&Cn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Yr],search:e=>Cn(e,"chrome")&&!Cn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Cn(e,"msie")||Cn(e,"trident")},{name:"Opera",versionRegexes:[Yr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:$r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:$r("firefox")},{name:"Safari",versionRegexes:[Yr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Cn(e,"safari")||Cn(e,"mobile/"))&&Cn(e,"applewebkit")}],od=[{name:"Windows",search:$r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Cn(e,"iphone")||Cn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:$r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:$r("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:$r("linux"),versionRegexes:[]},{name:"Solaris",search:$r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:$r("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:$r("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ea={browsers:Ke(Ks),oses:Ke(od)},es="Edge",yc="Chromium",mc="IE",Dr="Opera",Ml="Firefox",Cc="Safari",Ac=()=>Ba({current:void 0,version:de.unknown()}),Ba=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isEdge:r(es),isChromium:r(yc),isIE:r(mc),isOpera:r(Dr),isFirefox:r(Ml),isSafari:r(Cc)}},aa={unknown:Ac,nu:Ba,edge:Ke(es),chromium:Ke(yc),ie:Ke(mc),opera:Ke(Dr),firefox:Ke(Ml),safari:Ke(Cc)},bi="Windows",hl="iOS",cl="Android",la="Linux",zr="macOS",vi="Solaris",yi="FreeBSD",Ci="ChromeOS",Jl=()=>Fr({current:void 0,version:de.unknown()}),Fr=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isWindows:r(bi),isiOS:r(hl),isAndroid:r(cl),isMacOS:r(zr),isLinux:r(la),isSolaris:r(vi),isFreeBSD:r(yi),isChromeOS:r(Ci)}},ia={unknown:Jl,nu:Fr,windows:Ke(bi),ios:Ke(hl),android:Ke(cl),linux:Ke(la),macos:Ke(zr),solaris:Ke(vi),freebsd:Ke(yi),chromeos:Ke(Ci)},re={detect:(e,n,o)=>{const r=Ea.browsers(),a=Ea.oses(),u=n.bind(y=>pe(r,y)).orThunk(()=>ft(r,e)).fold(aa.unknown,aa.nu),f=Vt(a,e).fold(ia.unknown,ia.nu),b=un(f,u,e,o);return{browser:u,os:f,deviceType:b}}},Te=e=>window.matchMedia(e).matches;let Xe=Ve(()=>re.detect(window.navigator.userAgent,F.from(window.navigator.userAgentData),Te));const wt=()=>Xe(),Yt=window.navigator.userAgent,Co=wt(),Ts=Co.browser,Do=Co.os,Ut=Co.deviceType,vr=Yt.indexOf("Windows Phone")!==-1,gn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ts.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ts.isIE(),windowsPhone:vr,browser:{current:Ts.current,version:Ts.version,isChromium:Ts.isChromium,isEdge:Ts.isEdge,isFirefox:Ts.isFirefox,isIE:Ts.isIE,isOpera:Ts.isOpera,isSafari:Ts.isSafari},os:{current:Do.current,version:Do.version,isAndroid:Do.isAndroid,isChromeOS:Do.isChromeOS,isFreeBSD:Do.isFreeBSD,isiOS:Do.isiOS,isLinux:Do.isLinux,isMacOS:Do.isMacOS,isSolaris:Do.isSolaris,isWindows:Do.isWindows},deviceType:{isDesktop:Ut.isDesktop,isiPad:Ut.isiPad,isiPhone:Ut.isiPhone,isPhone:Ut.isPhone,isTablet:Ut.isTablet,isTouch:Ut.isTouch,isWebView:Ut.isWebView}},Vr=/^\s*|\s*$/g,al=e=>Xt(e)?"":(""+e).replace(Vr,""),P=(e,n)=>n?n==="array"&&ms(e)?!0:typeof e===n:e!==void 0,Y=(e,n,o={})=>{const r=oe(e)?e.split(n||","):e||[];let a=r.length;for(;a--;)o[r[a]]={};return o},fe=fn,Oe=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const a in r)if(fn(r,a)){const u=r[a];u!==void 0&&(e[a]=u)}}return e},ot=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Ps(e,(a,u)=>n.call(r,a,u,o)===!1?!1:(ot(a,n,o,r),!0)))},yt={trim:al,isArray:ms,is:P,toArray:rr,makeMap:Y,each:Ps,map:tc,grep:Ic,inArray:cr,hasOwn:fe,extend:Oe,walk:ot,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,a=o.length;r<a&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>dt(e)?e:e===""?[]:tc(e.split(n||","),al),_addCacheSuffix:e=>{const n=gn.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Us=(e,n,o=jt)=>e.exists(r=>o(r,n)),fc=(e,n,o=jt)=>co(e,n,o).getOr(e.isNone()&&n.isNone()),Xc=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},co=(e,n,o)=>e.isSome()&&n.isSome()?F.some(o(e.getOrDie(),n.getOrDie())):F.none(),Jc=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?F.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):F.none(),Tr=(e,n)=>e?F.some(n):F.none(),Zi=typeof window<"u"?window:Function("return this;")(),$s=(e,n)=>{let o=n??Zi;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Bl=(e,n)=>{const o=e.split(".");return $s(o,n)},Ld=(e,n)=>Bl(e,n),mf=(e,n)=>{const o=Ld(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},ar=Object.getPrototypeOf,Hd=e=>mf("HTMLElement",e),Ir=e=>{const n=Bl("ownerDocument.defaultView",e);return ut(e)&&(Hd(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ar(e).constructor.name))},wc=8,ll=9,il=11,hu=1,q=3,J=e=>e.dom.nodeName.toLowerCase(),Ae=e=>e.dom.nodeType,Ye=e=>n=>Ae(n)===e,Tn=e=>Ae(e)===wc||J(e)==="#comment",Wn=e=>ts(e)&&Ir(e.dom),ts=Ye(hu),Ds=Ye(q),Sc=Ye(ll),Qc=Ye(il),Lr=e=>n=>ts(n)&&J(n)===e,ea=(e,n,o)=>{if(oe(o)||Rt(o)||Bo(o))e.setAttribute(n,o+"");else throw new Error("Attribute value was not simple")},Fs=(e,n,o)=>{ea(e.dom,n,o)},ua=(e,n)=>{const o=e.dom;xt(n,(r,a)=>{ea(o,a,r)})},Hc=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Er=(e,n)=>F.from(Hc(e,n)),ur=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Ys=(e,n)=>{e.dom.removeAttribute(n)},pu=e=>{const n=e.dom.attributes;return n==null||n.length===0},bu=e=>ro(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),vu=(e,n)=>{const o=Hc(e,n);return o===void 0||o===""?[]:o.split(" ")},Cm=(e,n,o)=>{const a=vu(e,n).concat([o]);return Fs(e,n,a.join(" ")),!0},yu=(e,n,o)=>{const r=Bt(vu(e,n),a=>a!==o);return r.length>0?Fs(e,n,r.join(" ")):Ys(e,n),!1},Pl=e=>e.dom.classList!==void 0,wm=e=>vu(e,"class"),Xr=(e,n)=>Cm(e,"class",n),Sm=(e,n)=>yu(e,"class",n),yg=(e,n)=>xe(wm(e),n)?Sm(e,n):Xr(e,n),wi=(e,n)=>{Pl(e)?e.dom.classList.add(n):Xr(e,n)},Cg=e=>{(Pl(e)?e.dom.classList:wm(e)).length===0&&Ys(e,"class")},Cu=(e,n)=>{Pl(e)?e.dom.classList.remove(n):Sm(e,n),Cg(e)},wg=(e,n)=>{const o=Pl(e)?e.dom.classList.toggle(n):yg(e,n);return Cg(e),o},ji=(e,n)=>Pl(e)&&e.dom.classList.contains(n),Sg=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const a="HTML does not have a single root node";throw new Error(a)}return wu(r.childNodes[0])},xm=(e,n)=>{const r=(n||document).createElement(e);return wu(r)},ff=(e,n)=>{const r=(n||document).createTextNode(e);return wu(r)},wu=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},me={fromHtml:Sg,fromTag:xm,fromText:ff,fromDom:wu,fromPoint:(e,n,o)=>F.from(e.dom.elementFromPoint(n,o)).map(wu)},Gi=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let a=n(e);do a=a.bind(r);while(a.isSome());return o},Si=(e,n)=>{const o=e.dom;if(o.nodeType!==hu)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},xg=e=>e.nodeType!==hu&&e.nodeType!==ll&&e.nodeType!==il||e.childElementCount===0,Yp=(e,n)=>{const o=n===void 0?document:n.dom;return xg(o)?[]:Fe(o.querySelectorAll(e),me.fromDom)},Su=(e,n)=>{const o=n===void 0?document:n.dom;return xg(o)?F.none():F.from(o.querySelector(e)).map(me.fromDom)},wo=(e,n)=>e.dom===n.dom,nc=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},$l=e=>me.fromDom(e.dom.ownerDocument),xu=e=>Sc(e)?e:$l(e),Tm=e=>me.fromDom(xu(e).dom.documentElement),zd=e=>me.fromDom(xu(e).dom.defaultView),da=e=>F.from(e.dom.parentNode).map(me.fromDom),Em=e=>F.from(e.dom.parentElement).map(me.fromDom),qi=(e,n)=>{const o=le(n)?n:Pe;let r=e.dom;const a=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=me.fromDom(u);if(a.push(f),o(f)===!0)break;r=u}return a},km=e=>{const n=o=>Bt(o,r=>!wo(e,r));return da(e).map(Oc).map(n).getOr([])},Ki=e=>F.from(e.dom.previousSibling).map(me.fromDom),Pa=e=>F.from(e.dom.nextSibling).map(me.fromDom),Tg=e=>gs(Gi(e,Ki)),Vd=e=>Gi(e,Pa),Oc=e=>Fe(e.dom.childNodes,me.fromDom),qa=(e,n)=>{const o=e.dom.childNodes;return F.from(o[n]).map(me.fromDom)},ka=e=>qa(e,0),sd=e=>qa(e,e.dom.childNodes.length-1),Ud=e=>e.dom.childNodes.length,Eg=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return me.fromDom(n)},Wd=e=>Qc(e)&&Ne(e.dom.host),Ql=e=>me.fromDom(e.dom.getRootNode()),_m=e=>Wd(e)?e:Eg(xu(e)),Oh=e=>Wd(e)?e:me.fromDom(xu(e).dom.body),kg=e=>{const n=Ql(e);return Wd(n)?F.some(n):F.none()},Db=e=>me.fromDom(e.dom.host),hf=e=>{if(Ne(e.target)){const n=me.fromDom(e.target);if(ts(n)&&Zd(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return vo(o)}}return F.from(e.target)},Zd=e=>Ne(e.dom.shadowRoot),rd=e=>{const n=Ds(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return kg(me.fromDom(n)).fold(()=>o.body.contains(n),kn(rd,Db))};var jd=(e,n,o,r,a)=>e(o,r)?F.some(o):le(a)&&a(o)?F.none():n(o,r,a);const yr=(e,n,o)=>{let r=e.dom;const a=le(o)?o:Pe;for(;r.parentNode;){r=r.parentNode;const u=me.fromDom(r);if(n(u))return F.some(u);if(a(u))break}return F.none()},kr=(e,n,o)=>jd((a,u)=>u(a),yr,e,n,o),pl=(e,n)=>{const o=e.dom;return o.parentNode?cd(me.fromDom(o.parentNode),r=>!wo(e,r)&&n(r)):F.none()},cd=(e,n)=>{const o=a=>n(me.fromDom(a));return Po(e.dom.childNodes,o).map(me.fromDom)},_g=(e,n)=>{const o=r=>{for(let a=0;a<r.childNodes.length;a++){const u=me.fromDom(r.childNodes[a]);if(n(u))return F.some(u);const f=o(r.childNodes[a]);if(f.isSome())return f}return F.none()};return o(e.dom)},gc=(e,n,o)=>yr(e,r=>Si(r,n),o),hn=(e,n)=>Su(n,e),Yi=(e,n,o)=>jd((a,u)=>Si(a,u),gc,e,n,o),pf=e=>Yi(e,"[contenteditable]"),zc=(e,n=!1)=>rd(e)?e.dom.isContentEditable:pf(e).fold(Ke(n),o=>Es(o)==="true"),Es=e=>e.dom.contentEditable,Tu=e=>e.style!==void 0&&le(e.style.getPropertyValue),Ag=(e,n,o)=>{if(!oe(o))throw new Error("CSS value must be a string: "+o);Tu(e)&&e.style.setProperty(n,o)},Gd=(e,n)=>{Tu(e)&&e.style.removeProperty(n)},Dh=(e,n,o)=>{const r=e.dom;Ag(r,n,o)},uo=(e,n)=>{const o=e.dom;xt(n,(r,a)=>{Ag(o,a,r)})},hc=(e,n)=>{const o=e.dom,a=window.getComputedStyle(o).getPropertyValue(n);return a===""&&!rd(e)?ad(o,n):a},ad=(e,n)=>Tu(e)?e.style.getPropertyValue(n):"",ta=(e,n)=>{const o=e.dom,r=ad(o,n);return F.from(r).filter(a=>a.length>0)},$a=e=>{const n={},o=e.dom;if(Tu(o))for(let r=0;r<o.style.length;r++){const a=o.style.item(r);n[a]=o.style[a]}return n},bl=(e,n)=>{const o=e.dom;Gd(o,n),Us(Er(e,"style").map(Os),"")&&Ys(e,"style")},Dc=e=>e.dom.offsetWidth,_a=(e,n)=>{da(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},ul=(e,n)=>{Pa(e).fold(()=>{da(e).each(a=>{Rr(a,n)})},r=>{_a(r,n)})},bf=(e,n)=>{ka(e).fold(()=>{Rr(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Rr=(e,n)=>{e.dom.appendChild(n.dom)},ld=(e,n)=>{_a(e,n),Rr(n,e)},Ur=(e,n)=>{ie(n,(o,r)=>{const a=r===0?e:n[r-1];ul(a,o)})},Eu=(e,n)=>{ie(n,o=>{Rr(e,o)})},id=e=>{e.dom.textContent="",ie(Oc(e),n=>{Ws(n)})},Ws=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Fl=e=>{const n=Oc(e);n.length>0&&Ur(e,n),Ws(e)},Rh=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Oc(me.fromDom(r))},Xi=e=>Fe(e,me.fromDom),tr=e=>e.dom.innerHTML,ku=(e,n)=>{const r=$l(e).dom,a=me.fromDom(r.createDocumentFragment()),u=Rh(n,r);Eu(a,u),id(e),Rr(e,a)},Ka=e=>{const n=me.fromTag("div"),o=me.fromDom(e.dom.cloneNode(!0));return Rr(n,o),tr(n)},ko=(e,n,o,r,a,u,f)=>({target:e,x:n,y:o,stop:r,prevent:a,kill:u,raw:f}),ud=e=>{const n=me.fromDom(hf(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),a=A(r,o);return ko(n,e.clientX,e.clientY,o,r,a,e)},Am=(e,n)=>o=>{e(o)&&n(ud(o))},vf=(e,n,o,r,a)=>{const u=Am(o,r);return e.dom.addEventListener(n,u,a),{unbind:je(R,e,n,u,a)}},x=(e,n,o,r)=>vf(e,n,o,r,!1),R=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},H=(e,n)=>({left:e,top:n,translate:(r,a)=>H(e+r,n+a)}),ce=H,be=e=>{const n=e.getBoundingClientRect();return ce(n.left,n.top)},mt=(e,n)=>e!==void 0?e:n!==void 0?n:0,Mn=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,a=n.documentElement;if(o===e.dom)return ce(o.offsetLeft,o.offsetTop);const u=mt(r==null?void 0:r.pageYOffset,a.scrollTop),f=mt(r==null?void 0:r.pageXOffset,a.scrollLeft),b=mt(a.clientTop,o.clientTop),y=mt(a.clientLeft,o.clientLeft);return fo(e).translate(f-y,u-b)},fo=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?ce(r.offsetLeft,r.offsetTop):rd(e)?be(n):ce(0,0)},$n=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return ce(o,r)},Bn=(e,n,o)=>{const a=(o!==void 0?o.dom:document).defaultView;a&&a.scrollTo(e,n)},nr=(e,n)=>{wt().browser.isSafari()&&le(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Jr=e=>{const n=e===void 0?window:e;return wt().browser.isFirefox()?F.none():F.from(n.visualViewport)},vl=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Ji=e=>{const n=e===void 0?window:e,o=n.document,r=$n(me.fromDom(o));return Jr(n).fold(()=>{const a=n.document.documentElement,u=a.clientWidth,f=a.clientHeight;return vl(r.left,r.top,u,f)},a=>vl(Math.max(a.pageLeft,r.left),Math.max(a.pageTop,r.top),a.width,a.height))},Om=(e,n)=>Bt(Oc(e),n),Og=(e,n)=>{let o=[];return ie(Oc(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Og(r,n))}),o},Aa=(e,n)=>Yp(n,e),Dg=(e,n,o)=>yr(e,n,o).isSome(),Rb=(e,n)=>pl(e,n).isSome(),Nh=(e,n)=>_g(e,n).isSome();class ma{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,a){if(n){if(!a&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const a=n.parentNode;if(a&&a!==this.rootNode)return a}}}const Mh="\uFEFF",xc=" ",Nb=e=>e===Mh,Ya=e=>e.replace(/\uFEFF/g,""),Pn=/^[ \t\r\n]*$/,Il=e=>Pn.test(e),yf=e=>{for(const n of e)if(!Nb(n))return!1;return!0},Rg=e=>" \f	\v".indexOf(e)!==-1,Bh=e=>e===`
`||e==="\r",Xp=(e,n)=>n<e.length&&n>=0?Bh(e[n]):!1,xi=(e,n=4,o=!0,r=!0)=>{const a=$o(" ",n),u=e.replace(/\t/g,a);return ro(u,(b,y)=>Rg(y)||y===xc?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||Xp(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+xc}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:Bh(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},_u=e=>n=>!!n&&n.nodeType===e,qd=e=>!!e&&!Object.getPrototypeOf(e),Wt=_u(1),ei=e=>Wt(e)&&Wn(me.fromDom(e)),Ph=e=>Wt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Dm=e=>{const n=e.toLowerCase();return o=>Ne(o)&&o.nodeName.toLowerCase()===n},Ti=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return xe(n,r)}return!1}},Ng=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Wt(r)){const a=r.ownerDocument.defaultView;if(a)for(let u=0;u<o.length;u++){const f=a.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},Kd=e=>n=>Wt(n)&&n.hasAttribute(e),Rm=e=>Wt(e)&&e.hasAttribute("data-mce-bogus"),Mg=e=>Wt(e)&&e.getAttribute("data-mce-bogus")==="all",Qi=e=>Wt(e)&&e.tagName==="TABLE",Mb=e=>n=>!!(ei(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Nr=Ti(["textarea","input"]),vt=_u(3),Fa=_u(4),Au=_u(7),Vc=_u(8),Cf=_u(9),Rc=_u(11),as=Dm("br"),$h=Dm("img"),tt=Mb("true"),ls=Mb("false"),Bg=Ti(["td","th"]),Tc=Ti(["td","th","caption"]),Ia=Ti(["video","audio","object","embed"]),Bb=Dm("li"),Ll=Dm("details"),my=Dm("summary"),dd={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Pb=(e,n,o)=>{const r=me.fromDom(n),a=me.fromDom(e),u=o.getWhitespaceElements();return Dg(a,b=>fn(u,J(b)),je(wo,r))},Hl=e=>Wt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),os=(e,n)=>Wt(e)&&fn(n.getNonEmptyElements(),e.nodeName),Ou=Kd("data-mce-bookmark"),Nm=e=>Em(me.fromDom(e)).exists(n=>!zc(n)),Nc=(e,n,o)=>Il(e.data)&&!Pb(e,n,o),Fh=(e,n,o,r)=>vt(e)&&!Nc(e,n,o)&&(!r.includeZwsp||!yf(e.data)),Du=(e,n,o,r)=>le(r.isContent)&&r.isContent(n)||os(n,e)||Ou(n)||Hl(n)||Fh(n,o,e,r)||ls(n)||tt(n)&&Nm(n),Ru=(e,n,o)=>{const r={...dd,...o};if(r.checkRootAsContent&&Du(e,n,n,r))return!1;let a=n.firstChild,u=0;if(!a)return!0;const f=new ma(a,n);do{if(r.skipBogus&&Wt(a)){const b=a.getAttribute("data-mce-bogus");if(b){a=f.next(b==="all");continue}}if(Vc(a)){a=f.next(!0);continue}if(as(a)){u++,a=f.next();continue}if(Du(e,a,n,r))return!1;a=f.next()}while(a);return u<=1},lr=(e,n,o)=>Ru(e,n.dom,{checkRootAsContent:!0,...o}),wf=(e,n,o)=>Du(e,n,n,{includeZwsp:dd.includeZwsp,...o}),_e=e=>{let n=e;return{get:()=>n,set:a=>{n=a}}},zl=e=>{const n=_e(F.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(F.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(F.some(b))}}},Sf=e=>{const n=_e(F.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(F.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(F.some(setInterval(b,e)))}}},La=()=>{const e=zl($e);return{...e,on:o=>e.get().each(o)}},Vl=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},oc=e=>Vl(e)!=="html",Wr=e=>oc(e.nodeName),fy=e=>Vl(e.nodeName),w=["svg","math"],_=()=>{const e=La(),n=()=>e.get().map(fy).getOr("html");return{track:a=>(Wr(a)?e.set(a):e.get().exists(u=>!u.contains(a))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},L="data-mce-block",K=e=>Bt(yo(e),n=>!/[A-Z]/.test(n)),ye=e=>Fe(K(e),n=>{const o=CSS.escape(n);return`${o}:`+Fe(w,r=>`not(${r} ${o})`).join(":")}).join(","),Je=(e,n)=>Ne(n.querySelector(e))?(n.setAttribute(L,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(L),!1),_t=(e,n)=>{const o=ye(e.getTransparentElements()),r=ye(e.getBlockElements());return Bt(n.querySelectorAll(o),a=>Je(r,a))},tn=(e,n,o)=>{var r;const a=o?"lastChild":"firstChild";for(let u=n[a];u;u=u[a])if(Ru(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},ao=(e,n,o)=>{const r=document.createRange(),a=n.parentNode;if(a){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();tn(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();tn(e,f,!1),Ru(e,u,{checkRootAsContent:!0})||a.insertBefore(u,n),Ru(e,o,{checkRootAsContent:!0})||a.insertBefore(o,n),Ru(e,f,{checkRootAsContent:!0})||a.insertBefore(f,n),a.removeChild(n)}},po=(e,n,o)=>{const r=e.getBlockElements(),a=me.fromDom(n),u=b=>J(b)in r,f=b=>wo(b,a);ie(Xi(o),b=>{yr(b,u,f).each(y=>{const E=Om(b,N=>u(N)&&!e.isValidChild(J(y),J(N)));if(E.length>0){const N=Em(y);ie(E,M=>{yr(M,u,f).each($=>{ao(e,$.dom,M.dom)})}),N.each(M=>_t(e,M.dom))}})})},vs=(e,n,o)=>{ie([...o,...Nu(e,n)?[n]:[]],r=>ie(Aa(me.fromDom(r),r.nodeName.toLowerCase()),a=>{Pg(e,a.dom)&&Fl(a)}))},ks=(e,n)=>{const o=_t(e,n);po(e,n,o),vs(e,n,o)},_r=(e,n)=>{if(Ei(e,n)){const o=ye(e.getBlockElements());Je(o,n)}},Ul=(e,n,o)=>{const r=u=>wo(u,me.fromDom(n)),a=qi(me.fromDom(o),r);xa(a,a.length-2).filter(ts).fold(()=>ks(e,n),u=>ks(e,u.dom))},fa=e=>e.hasAttribute(L),eu=(e,n)=>fn(e.getTransparentElements(),n),Ei=(e,n)=>Wt(n)&&eu(e,n.nodeName),Nu=(e,n)=>Ei(e,n)&&fa(n),Pg=(e,n)=>Ei(e,n)&&!fa(n),ti=(e,n)=>n.type===1&&eu(e,n.name)&&oe(n.attr(L)),xf=wt().browser,Ih=e=>Po(e,ts),Lh=e=>xf.isFirefox()&&J(e)==="table"?Ih(Oc(e)).filter(n=>J(n)==="caption").bind(n=>Ih(Vd(n)).map(o=>{const r=o.dom.offsetTop,a=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=a?-u:0})).getOr(0):0,Mm=(e,n)=>e.children&&xe(e.children,n),Uc=(e,n,o)=>{let r=0,a=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&hc(me.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,a=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:a}}let f=n;for(;f&&f!==o&&f.nodeType&&!Mm(f,o);){const b=f;r+=b.offsetLeft||0,a+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!Mm(f,o);)r-=f.scrollLeft||0,a-=f.scrollTop||0,f=f.parentNode;a+=Lh(me.fromDom(n))}return{x:r,y:a}},tu=(e,n={})=>{let o=0;const r={},a=me.fromDom(e),u=xu(a),f=ge=>{n.referrerPolicy=ge},b=ge=>{n.contentCssCors=ge},y=ge=>{Rr(_m(a),ge)},E=ge=>{const Ee=_m(a);hn(Ee,"#"+ge).each(Ws)},N=ge=>Yo(r,ge).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),M=ge=>new Promise((Ee,Se)=>{let Me;const lt=yt._addCacheSuffix(ge),At=N(lt);r[lt]=At,At.count++;const Gt=(on,wn)=>{ie(on,mn),At.status=wn,At.passed=[],At.failed=[],Me&&(Me.onload=null,Me.onerror=null,Me=null)},Ge=()=>Gt(At.passed,2),Le=()=>Gt(At.failed,3);if(Ee&&At.passed.push(Ee),Se&&At.failed.push(Se),At.status===1)return;if(At.status===2){Ge();return}if(At.status===3){Le();return}At.status=1;const ct=me.fromTag("link",u.dom);ua(ct,{rel:"stylesheet",type:"text/css",id:At.id}),n.contentCssCors&&Fs(ct,"crossOrigin","anonymous"),n.referrerPolicy&&Fs(ct,"referrerpolicy",n.referrerPolicy),Me=ct.dom,Me.onload=Ge,Me.onerror=Le,y(ct),Fs(ct,"href",lt)}),$=(ge,Ee)=>{const Se=N(ge);r[ge]=Se,Se.count++;const Me=me.fromTag("style",u.dom);ua(Me,{rel:"stylesheet",type:"text/css",id:Se.id}),Me.dom.innerHTML=Ee,y(Me)},j=ge=>Promise.allSettled(Fe(ge,Se=>M(Se).then(Ke(Se)))).then(Se=>{const Me=Un(Se,lt=>lt.status==="fulfilled");return Me.fail.length>0?Promise.reject(Fe(Me.fail,lt=>lt.reason)):Fe(Me.pass,lt=>lt.value)}),ee=ge=>{const Ee=yt._addCacheSuffix(ge);Yo(r,Ee).each(Se=>{--Se.count===0&&(delete r[Ee],E(Se.id))})};return{load:M,loadRawCss:$,loadAll:j,unload:ee,unloadRawCss:ge=>{Yo(r,ge).each(Ee=>{--Ee.count===0&&(delete r[ge],E(Ee.id))})},unloadAll:ge=>{ie(ge,Ee=>{ee(Ee)})},_setReferrerPolicy:f,_setContentCssCors:b}},or=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Ql(o).dom;return F.from(e.get(u)).getOrThunk(()=>{const f=tu(u,r);return e.set(u,f),f})}}})(),Xa=e=>e.nodeName.toLowerCase()==="span",Qr=(e,n)=>Ne(e)&&(wf(n,e)||n.isInline(e.nodeName.toLowerCase())),Hh=(e,n,o)=>{const r=new ma(e,n).prev(!1),a=new ma(e,n).next(!1),u=sn(r)||Qr(r,o),f=sn(a)||Qr(a,o);return u&&f},Bm=e=>Xa(e)&&e.getAttribute("data-mce-type")==="bookmark",Pm=(e,n,o)=>vt(e)&&e.data.length>0&&Hh(e,n,o),ni=e=>Wt(e)?e.childNodes.length>0:!1,md=e=>Rc(e)||Cf(e),Yd=(e,n,o,r)=>{var a;const u=r||n;if(Wt(n)&&Bm(n))return n;const f=n.childNodes;for(let b=f.length-1;b>=0;b--)Yd(e,f[b],o,u);if(Wt(n)){const b=n.childNodes;b.length===1&&Bm(b[0])&&((a=n.parentNode)===null||a===void 0||a.insertBefore(b[0],n))}return!md(n)&&!wf(o,n)&&!ni(n)&&!Pm(n,u,o)&&e.remove(n),n},Mu=yt.makeMap,Jp=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Xd=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zh=/[<>&\"\']/g,$g=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,tS={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},fd={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},nS={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},gy=e=>{const n=me.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},sc=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let a=0;a<r.length;a+=2){const u=String.fromCharCode(parseInt(r[a],n));if(!fd[u]){const f="&"+r[a+1]+";";o[u]=f,o[f]=u}}return o}else return},$b=sc("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),$m=(e,n)=>e.replace(n?Jp:Xd,o=>fd[o]||o),Tf=e=>(""+e).replace(zh,n=>fd[n]||n),Fm=(e,n)=>e.replace(n?Jp:Xd,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":fd[o]||"&#"+o.charCodeAt(0)+";"),nu=(e,n,o)=>{const r=o||$b;return e.replace(n?Jp:Xd,a=>fd[a]||r[a]||a)},gd={encodeRaw:$m,encodeAllRaw:Tf,encodeNumeric:Fm,encodeNamed:nu,getEncodeFunc:(e,n)=>{const o=sc(n)||$b,r=(f,b)=>f.replace(b?Jp:Xd,y=>fd[y]!==void 0?fd[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),a=(f,b)=>nu(f,b,o),u=Mu(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?a:nu:u.numeric?Fm:$m},decode:e=>e.replace($g,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):tS[o]||String.fromCharCode(o)):nS[n]||$b[n]||gy(n))},Ja=(e,n)=>(e=yt.trim(e),e?e.split(n||" "):[]),e1=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),hy=e=>ut(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",t1=e=>{const n=o=>dt(o)?Fe(o,n):hy(o)?new RegExp(o.source,o.flags):ut(o)?Eo(o,n):o;return n(e)},n1=e=>{const n=/^(~)?(.+)$/;return zs(Ja(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},py=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),Fg=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},hd=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=Fg(e),a=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:a(n),phrasingContent:a(o),flowContent:a(r)})},yl={html4:Ve(()=>hd("html4")),html5:Ve(()=>hd("html5")),"html5-strict":Ve(()=>hd("html5-strict"))},su=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:a}=yl[e]();return n==="blocks"?F.some(o):n==="phrasing"?F.some(r):n==="flow"?F.some(a):F.none()},Ef=e=>{const n=py(e),{phrasingContent:o,flowContent:r}=Fg(e),a={},u=(y,E,N)=>{a[y]={attributes:xs(E,Ke({})),attributesOrder:E,children:xs(N,Ke({}))}},f=(y,E="",N="")=>{const M=Ja(N),$=Ja(y);let j=$.length;const ee=[...n,...Ja(E)];for(;j--;)u($[j],ee.slice(),M)},b=(y,E)=>{const N=Ja(y),M=Ja(E);let $=N.length;for(;$--;){const j=a[N[$]];for(let ee=0,G=M.length;ee<G;ee++)j.attributes[M[ee]]={},j.attributesOrder.push(M[ee])}};return e!=="html5-strict"&&(ie(Ja("acronym applet basefont big font strike tt"),N=>{f(N,"",o)}),ie(Ja("center dir isindex noframes"),N=>{f(N,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&ie([a.video,a.audio],y=>{delete y.children.audio,delete y.children.video}),ie(Ja("a form meter progress dfn"),y=>{a[y]&&delete a[y].children[y]}),delete a.caption.children.table,delete a.script,a},by=e=>e==="-"?"remove":"add",Ig=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return F.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},vy=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return zs(Ja(e,","),o=>{const r=n.exec(o);if(r){const a=r[1],u=a?by(a):"replace",f=r[2],b=zs(Ja(r[3],"|"),y=>Ig(y).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},oS=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:a,attributesOrder:u}=n;return ie(Ja(e,"|"),f=>{const b=o.exec(f);if(b){const y={},E=b[1],N=b[2].replace(/[\\:]:/g,":"),M=b[3],$=b[4];if(E==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(N),y.required=!0),E==="-"){delete a[N],u.splice(yt.inArray(u,N),1);return}if(M&&(M==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:N,value:$}),y.defaultValue=$):M==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:N,value:$}),y.forcedValue=$):M==="<"&&(y.validValues=yt.makeMap($,"?"))),r.test(N)){const j=y;n.attributePatterns=n.attributePatterns||[],j.pattern=e1(N),n.attributePatterns.push(j)}else a[N]||u.push(N),a[N]=y}})},sS=(e,n)=>{xt(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},rS=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return zs(Ja(n,","),r=>{const a=o.exec(r);if(a){const u=a[1],f=a[2],b=a[3],y=a[4],E=a[5],N={attributes:{},attributesOrder:[]};if(e.each(M=>sS(M,N)),u==="#"?N.paddEmpty=!0:u==="-"&&(N.removeEmpty=!0),y==="!"&&(N.removeEmptyAttrs=!0),E&&oS(E,N),b&&(N.outputName=f),f==="@")if(e.isNone())e=F.some(N);else return[];return[b?{name:f,element:N,aliasName:b}:{name:f,element:N}]}else return[]})},kf={},Lg=yt.makeMap,xo=yt.each,An=yt.extend,_f=yt.explode,o1=(e,n={})=>{const o=Lg(e," ",Lg(e.toUpperCase()," "));return An(o,n)},Fb=e=>o1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),yy=(e,n)=>{if(e){const o={};return oe(e)&&(e={"*":e}),xo(e,(r,a)=>{o[a]=o[a.toUpperCase()]=n==="map"?Lg(r,/[, ]/):_f(r,/[, ]/)}),o}else return},Jd=(e={})=>{var n;const o={},r={};let a=[];const u={},f={},b=(Sn,qo,Br)=>{const ic=e[Sn];if(ic)return Lg(ic,/[, ]/,Lg(ic.toUpperCase(),/[, ]/));{let Bc=kf[Sn];return Bc||(Bc=o1(qo,Br),kf[Sn]=Bc),Bc}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",E=Ef(y);e.verify_html===!1&&(e.valid_elements="*[*]");const N=yy(e.valid_styles),M=yy(e.invalid_styles,"map"),$=yy(e.valid_classes,"map"),j=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),ee=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),G=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ne=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ge="td th iframe video audio object script code",Ee=b("non_empty_elements",ge+" pre svg textarea summary",G),Se=b("move_caret_before_on_enter_elements",ge+" table",G),Me="h1 h2 h3 h4 h5 h6",lt=b("text_block_elements",Me+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),At=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",lt),Gt=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ge=b("transparent_elements","a ins del canvas map"),Le=b("wrap_block_elements","pre "+Me);xo("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Sn=>{f[Sn]=new RegExp("</"+Sn+"[^>]*>","gi")});const ct=Sn=>{const qo=F.from(o["@"]),Br=/[*?+]/;ie(rS(qo,Sn??""),({name:ic,element:Bc,aliasName:Ma})=>{if(Ma&&(o[Ma]=Bc),Br.test(ic)){const Pc=Bc;Pc.pattern=e1(ic),a.push(Pc)}else o[ic]=Bc})},on=Sn=>{a=[],ie(yo(o),qo=>{delete o[qo]}),ct(Sn)},wn=(Sn,qo)=>{var Br,ic;delete kf.text_block_elements,delete kf.block_elements;const Bc=qo.extends?!Hi(qo.extends):!1,Ma=qo.extends;if(r[Sn]=Ma?r[Ma]:{},u[Sn]=Ma??Sn,Ee[Sn.toUpperCase()]={},Ee[Sn]={},Bc||(At[Sn.toUpperCase()]={},At[Sn]={}),Ma&&!o[Sn]&&o[Ma]){const Pc=t1(o[Ma]);delete Pc.removeEmptyAttrs,delete Pc.removeEmpty,o[Sn]=Pc}else o[Sn]={attributesOrder:[],attributes:{}};if(dt(qo.attributes)){const Pc=Rl=>{$c.attributesOrder.push(Rl),$c.attributes[Rl]={}},$c=(Br=o[Sn])!==null&&Br!==void 0?Br:{};delete $c.attributesDefault,delete $c.attributesForced,delete $c.attributePatterns,delete $c.attributesRequired,$c.attributesOrder=[],$c.attributes={},ie(qo.attributes,Rl=>{const Bd=py(y);Ig(Rl).each(({preset:Pd,name:$d})=>{Pd?$d==="global"&&ie(Bd,Pc):Pc($d)})}),o[Sn]=$c}if(Rt(qo.padEmpty)){const Pc=(ic=o[Sn])!==null&&ic!==void 0?ic:{};Pc.paddEmpty=qo.padEmpty,o[Sn]=Pc}if(dt(qo.children)){const Pc={},$c=Bd=>{Pc[Bd]={}},Rl=Bd=>{su(y,Bd).each(Pd=>{ie(Pd,$c)})};ie(qo.children,Bd=>{Ig(Bd).each(({preset:Pd,name:$d})=>{Pd?Rl($d):$c($d)})}),r[Sn]=Pc}Ma&&xt(r,(Pc,$c)=>{Pc[Ma]&&(r[$c]=Pc=An({},r[$c]),Pc[Sn]=Pc[Ma])})},Ro=Sn=>{ie(n1(Sn??""),({name:qo,cloneName:Br})=>{wn(qo,{extends:Br})})},Fo=Sn=>{ut(Sn)?xt(Sn,(qo,Br)=>wn(Br,qo)):oe(Sn)&&Ro(Sn)},_s=Sn=>{ie(vy(Sn??""),({operation:qo,name:Br,validChildren:ic})=>{const Bc=qo==="replace"?{"#comment":{}}:r[Br],Ma=$c=>{qo==="remove"?delete Bc[$c]:Bc[$c]={}},Pc=$c=>{su(y,$c).each(Rl=>{ie(Rl,Ma)})};ie(ic,({preset:$c,name:Rl})=>{$c?Pc(Rl):Ma(Rl)}),r[Br]=Bc})},Zs=Sn=>{const qo=o[Sn];if(qo)return qo;let Br=a.length;for(;Br--;){const ic=a[Br];if(ic.pattern.test(Sn))return ic}},lc=()=>{e.valid_elements?(on(e.valid_elements),xo(E,(Sn,qo)=>{r[qo]=Sn.children})):(xo(E,(Sn,qo)=>{o[qo]={attributes:Sn.attributes,attributesOrder:Sn.attributesOrder},r[qo]=Sn.children}),xo(Ja("strong/b em/i"),Sn=>{const qo=Ja(Sn,"/");o[qo[1]].outputName=qo[0]}),xo(Gt,(Sn,qo)=>{o[qo]&&(e.padd_empty_block_inline_children&&(o[qo].paddInEmptyBlock=!0),o[qo].removeEmpty=!0)}),xo(Ja("ol ul blockquote a table tbody"),Sn=>{o[Sn]&&(o[Sn].removeEmpty=!0)}),xo(Ja("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Sn=>{o[Sn]&&(o[Sn].paddEmpty=!0)}),xo(Ja("span"),Sn=>{o[Sn].removeEmptyAttrs=!0})),delete o.svg,Fo(e.custom_elements),_s(e.valid_children),ct(e.extended_valid_elements),_s("+ol[ul|ol],+ul[ul|ol]"),xo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Sn,qo)=>{o[qo]&&(o[qo].parentsRequired=Ja(Sn))}),e.invalid_elements&&xo(_f(e.invalid_elements),Sn=>{o[Sn]&&delete o[Sn]}),Zs("span")||ct("span[!data-mce-type|*]")},Kc=Ke(N),Qs=Ke(M),Pt=Ke($),vn=Ke(ne),is=Ke(At),zt=Ke(lt),On=Ke(Gt),Ao=Ke(Object.seal(G)),Zt=Ke(ee),Oo=Ke(Ee),Io=Ke(Se),Sa=Ke(j),Ns=Ke(Ge),sa=Ke(Le),Md=Ke(Object.seal(f)),uf=(Sn,qo)=>{const Br=r[Sn.toLowerCase()];return!!(Br&&Br[qo.toLowerCase()])},Yl=(Sn,qo)=>{const Br=Zs(Sn);if(Br)if(qo){if(Br.attributes[qo])return!0;const ic=Br.attributePatterns;if(ic){let Bc=ic.length;for(;Bc--;)if(ic[Bc].pattern.test(qo))return!0}}else return!0;return!1},Hi=Sn=>fn(is(),Sn),Qu=Sn=>!Nn(Sn,"#")&&Yl(Sn)&&!Hi(Sn),zi=Sn=>fn(sa(),Sn)||Qu(Sn),ed=Ke(u);return lc(),{type:y,children:r,elements:o,getValidStyles:Kc,getValidClasses:Pt,getBlockElements:is,getInvalidStyles:Qs,getVoidElements:Ao,getTextBlockElements:zt,getTextInlineElements:On,getBoolAttrs:vn,getElementRule:Zs,getSelfClosingElements:Zt,getNonEmptyElements:Oo,getMoveCaretBeforeOnEnterElements:Io,getWhitespaceElements:Sa,getTransparentElements:Ns,getSpecialElements:Md,isValidChild:uf,isValid:Yl,isBlock:Hi,isInline:Qu,isWrapper:zi,getCustomElements:ed,addValidElements:ct,setValidElements:on,addCustomElements:Fo,addValidChildren:_s}},dr=e=>({value:cS(e)}),cS=e=>en(e,"#").toUpperCase(),Cy=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},wy=e=>{const n=Cy(e.red)+Cy(e.green)+Cy(e.blue);return dr(n)},st=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Hg=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Tk=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Af=(e,n,o,r)=>{const a=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return Tk(a,u,f,b)},Ek=e=>st.test(e)?"rgb":Hg.test(e)?"rgba":"other",zg=e=>{const n=st.exec(e);if(n!==null)return F.some(Af(n[1],n[2],n[3],"1"));const o=Hg.exec(e);return o!==null?F.some(Af(o[1],o[2],o[3],o[4])):F.none()},Sy=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,pd=e=>zg(e).map(wy).map(n=>"#"+n.value).getOr(e),xy=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,u={};let f,b;const y=Mh;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const E=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let M=0;M<E.length;M++)u[E[M]]=y+M,u[y+M]=E[M];const N={parse:M=>{const $={};let j=!1;const ee=e.url_converter,G=e.url_converter_scope||N,ne=(Ge,Le,ct)=>{const on=$[Ge+"-top"+Le];if(!on)return;const wn=$[Ge+"-right"+Le];if(!wn)return;const Ro=$[Ge+"-bottom"+Le];if(!Ro)return;const Fo=$[Ge+"-left"+Le];if(!Fo)return;const _s=[on,wn,Ro,Fo];let Zs=_s.length-1;for(;Zs--&&_s[Zs]===_s[Zs+1];);Zs>-1&&ct||($[Ge+Le]=Zs===-1?_s[0]:_s.join(" "),delete $[Ge+"-top"+Le],delete $[Ge+"-right"+Le],delete $[Ge+"-bottom"+Le],delete $[Ge+"-left"+Le])},ge=Ge=>{const Le=$[Ge];if(!Le)return;const ct=Le.indexOf(",")>-1?[Le]:Le.split(" ");let on=ct.length;for(;on--;)if(ct[on]!==ct[0])return!1;return $[Ge]=ct[0],!0},Ee=(Ge,Le,ct,on)=>{ge(Le)&&ge(ct)&&ge(on)&&($[Ge]=$[Le]+" "+$[ct]+" "+$[on],delete $[Le],delete $[ct],delete $[on])},Se=Ge=>(j=!0,u[Ge]),Me=(Ge,Le)=>(j&&(Ge=Ge.replace(/\uFEFF[0-9]/g,ct=>u[ct])),Le||(Ge=Ge.replace(/\\([\'\";:])/g,"$1")),Ge),lt=Ge=>String.fromCharCode(parseInt(Ge.slice(1),16)),At=Ge=>Ge.replace(/\\[0-9a-f]+/gi,lt),Gt=(Ge,Le,ct,on,wn,Ro)=>{if(wn=wn||Ro,wn)return wn=Me(wn),"'"+wn.replace(/\'/g,"\\'")+"'";if(Le=Me(Le||ct||on||""),!e.allow_script_urls){const Fo=Le.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Fo)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Fo))return""}return ee&&(Le=ee.call(G,Le,"style")),"url('"+Le.replace(/\'/g,"\\'")+"')"};if(M){M=M.replace(/[\u0000-\u001F]/g,""),M=M.replace(/\\[\"\';:\uFEFF]/g,Se).replace(/\"[^\"]+\"|\'[^\']+\'/g,Le=>Le.replace(/[;:]/g,Se));let Ge;for(;Ge=r.exec(M);){r.lastIndex=Ge.index+Ge[0].length;let Le=Ge[1].replace(a,"").toLowerCase(),ct=Ge[2].replace(a,"");if(Le&&ct){if(Le=At(Le),ct=At(ct),Le.indexOf(y)!==-1||Le.indexOf('"')!==-1||!e.allow_script_urls&&(Le==="behavior"||/expression\s*\(|\/\*|\*\//.test(ct)))continue;Le==="font-weight"&&ct==="700"?ct="bold":(Le==="color"||Le==="background-color")&&(ct=ct.toLowerCase()),Ek(ct)==="rgb"&&zg(ct).each(on=>{ct=pd(Sy(on)).toLowerCase()}),ct=ct.replace(o,Gt),$[Le]=j?Me(ct,!0):ct}}ne("border","",!0),ne("border","-width"),ne("border","-color"),ne("border","-style"),ne("padding",""),ne("margin",""),Ee("border","border-width","border-style","border-color"),$.border==="medium none"&&delete $.border,$["border-image"]==="none"&&delete $["border-image"]}return $},serialize:(M,$)=>{let j="";const ee=(ne,ge)=>{const Ee=ge[ne];if(Ee)for(let Se=0,Me=Ee.length;Se<Me;Se++){const lt=Ee[Se],At=M[lt];At&&(j+=(j.length>0?" ":"")+lt+": "+At+";")}},G=(ne,ge)=>{if(!b||!ge)return!0;let Ee=b["*"];return Ee&&Ee[ne]?!1:(Ee=b[ge],!(Ee&&Ee[ne]))};return $&&f?(ee("*",f),ee($,f)):xt(M,(ne,ge)=>{ne&&G(ge,$)&&(j+=(j.length>0?" ":"")+ge+": "+ne+";")}),j}};return N},Vh={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Cr=e=>e instanceof Event||le(e.initEvent),Qd=e=>e.isDefaultPrevented===et||e.isDefaultPrevented===Pe,Ty=e=>Xt(e.preventDefault)||Cr(e),Bu=(e,n)=>{const o=n??{};for(const r in e)fn(Vh,r)||(o[r]=e[r]);return Ne(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Ne(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Ne(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},Ey=(e,n,o,r)=>{var a;const u=Bu(n,r);return u.type=e,Xt(u.target)&&(u.target=(a=u.srcElement)!==null&&a!==void 0?a:o),Ty(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=et,le(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=et,le(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=et,u.stopPropagation()},Qd(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?et:Pe,u.isPropagationStopped=u.cancelBubble===!0?et:Pe,u.isImmediatePropagationStopped=Pe)),u},s1="mce-data-",Uh=/^(?:mouse|contextmenu)|click/,r1=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},oi=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},aS=e=>Ne(e)&&Uh.test(e.type),c1=(e,n)=>{const o=Ey(e.type,e,document,n);if(aS(e)&&sn(e.pageX)&&!sn(e.clientX)){const r=o.target.ownerDocument||document,a=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(a&&a.scrollLeft||u&&u.scrollLeft||0)-(a&&a.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(a&&a.scrollTop||u&&u.scrollTop||0)-(a&&a.clientTop||u&&u.clientTop||0)}return o},ky=(e,n,o)=>{const r=e.document,a={type:"ready"};if(o.domLoaded){n(a);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{oi(e,"DOMContentLoaded",f),oi(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(a)),e=null};u()?f():r1(e,"DOMContentLoaded",f),o.domLoaded||r1(e,"load",f)};class Of{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=s1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,a){const u=this;let f;const b=window,y=$=>{u.executeHandlers(c1($||b.event),E)};if(!n||vt(n)||Vc(n))return r;let E;n[u.expando]?E=n[u.expando]:(E=u.count++,n[u.expando]=E,u.events[E]={}),a=a||n;const N=o.split(" ");let M=N.length;for(;M--;){let $=N[M],j=y,ee=!1,G=!1;if($==="DOMContentLoaded"&&($="ready"),u.domLoaded&&$==="ready"&&n.readyState==="complete"){r.call(a,c1({type:$}));continue}!u.hasFocusIn&&($==="focusin"||$==="focusout")&&(ee=!0,G=$==="focusin"?"focus":"blur",j=ne=>{const ge=c1(ne||b.event);ge.type=ge.type==="focus"?"focusin":"focusout",u.executeHandlers(ge,E)}),f=u.events[E][$],f?$==="ready"&&u.domLoaded?r(c1({type:$})):f.push({func:r,scope:a}):(u.events[E][$]=f=[{func:r,scope:a}],f.fakeName=G,f.capture=ee,f.nativeHandler=j,$==="ready"?ky(n,j,u):r1(n,G||$,j,ee))}return n=f=null,r}unbind(n,o,r){if(!n||vt(n)||Vc(n))return this;const a=n[this.expando];if(a){let u=this.events[a];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],E=u[y];if(E){if(r){let N=E.length;for(;N--;)if(E[N].func===r){const M=E.nativeHandler,$=E.fakeName,j=E.capture,ee=E.slice(0,N).concat(E.slice(N+1));ee.nativeHandler=M,ee.fakeName=$,ee.capture=j,u[y]=ee}}(!r||E.length===0)&&(delete u[y],oi(n,E.fakeName||y,E.nativeHandler,E.capture))}}}else xt(u,(f,b)=>{oi(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(fn(u,f))return this;delete this.events[a];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||vt(n)||Vc(n))return this;const a=c1({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(a,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!a.isPropagationStopped());return this}clean(n){if(!n||vt(n)||Vc(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],a=r&&r[n.type];if(a)for(let u=0,f=a.length;u<f;u++){const b=a[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Of.Event=new Of;const _y=yt.each,lS=yt.grep,Ay="data-mce-style",iS=yt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),dl=(e,n,o)=>{Xt(o)||o===""?Ys(e,n):Fs(e,n,o)},si=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Tt=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,a=e.previousSibling;a;a=a.previousSibling){const u=a.nodeType;n&&vt(a)&&(u===r||!a.data.length)||(o++,r=u)}return o},Ib=(e,n)=>{const o=Hc(n,"style"),r=e.serialize(e.parse(o),J(n));dl(n,Ay,r)},Oa=(e,n)=>Bo(e)?fn(iS,n)?e+"":e+"px":e,Lb=(e,n,o)=>{const r=si(n);Xt(o)||o===""?bl(e,r):Dh(e,r,Oa(o,r))},uS=(e,n,o)=>{const r=n.keep_values,a={set:(f,b,y)=>{const E=me.fromDom(f);le(n.url_converter)&&Ne(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const N="data-mce-"+y;dl(E,N,b),dl(E,y,b)},get:(f,b)=>{const y=me.fromDom(f);return Hc(y,"data-mce-"+b)||Hc(y,b)}},u={style:{set:(f,b)=>{const y=me.fromDom(f);r&&dl(y,Ay,b),Ys(y,"style"),oe(b)&&uo(y,e.parse(b))},get:f=>{const b=me.fromDom(f),y=Hc(b,Ay)||Hc(b,"style");return e.serialize(e.parse(y),J(b))}}};return r&&(u.href=u.src=a),u},wr=(e,n={})=>{const o={},r=window,a={};let u=0;const f=!0,b=!0,y=or.forElement(me.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),E=[],N=n.schema?n.schema:Jd({}),M=xy({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),$=n.ownEvents?new Of:Of.Event,j=N.getBlockElements(),ee=Ie=>oe(Ie)?fn(j,Ie):Wt(Ie)&&(fn(j,Ie.nodeName)||Nu(N,Ie)),G=Ie=>Ie&&e&&oe(Ie)?e.getElementById(Ie):Ie,ne=Ie=>{const He=G(Ie);return Ne(He)?me.fromDom(He):null},ge=(Ie,He,Nt="")=>{let Et;const Ln=ne(Ie);if(Ne(Ln)&&ts(Ln)){const Vo=Jw[He];Vo&&Vo.get?Et=Vo.get(Ln.dom,He):Et=Hc(Ln,He)}return Ne(Et)?Et:Nt},Ee=Ie=>{const He=G(Ie);return Xt(He)?[]:He.attributes},Se=(Ie,He,Nt)=>{vn(Ie,Et=>{if(Wt(Et)){const Ln=me.fromDom(Et),Vo=Nt===""?null:Nt,Gr=Hc(Ln,He),Fd=Jw[He];Fd&&Fd.set?Fd.set(Ln.dom,Vo,He):dl(Ln,He,Vo),Gr!==Vo&&n.onSetAttrib&&n.onSetAttrib({attrElm:Ln.dom,attrName:He,attrValue:Vo})}})},Me=(Ie,He)=>Ie.cloneNode(He),lt=()=>n.root_element||e.body,At=Ie=>{const He=Ji(Ie);return{x:He.x,y:He.y,w:He.width,h:He.height}},Gt=(Ie,He)=>Uc(e.body,G(Ie),He),Ge=(Ie,He,Nt)=>{vn(Ie,Et=>{const Ln=me.fromDom(Et);Lb(Ln,He,Nt),n.update_styles&&Ib(M,Ln)})},Le=(Ie,He)=>{vn(Ie,Nt=>{const Et=me.fromDom(Nt);xt(He,(Ln,Vo)=>{Lb(Et,Vo,Ln)}),n.update_styles&&Ib(M,Et)})},ct=(Ie,He,Nt)=>{const Et=G(Ie);if(!(Xt(Et)||!ei(Et)&&!Ph(Et)))return Nt?hc(me.fromDom(Et),si(He)):(He=He.replace(/-(\D)/g,(Ln,Vo)=>Vo.toUpperCase()),He==="float"&&(He="cssFloat"),Et.style?Et.style[He]:void 0)},on=Ie=>{const He=G(Ie);if(!He)return{w:0,h:0};let Nt=ct(He,"width"),Et=ct(He,"height");return(!Nt||Nt.indexOf("px")===-1)&&(Nt="0"),(!Et||Et.indexOf("px")===-1)&&(Et="0"),{w:parseInt(Nt,10)||He.offsetWidth||He.clientWidth,h:parseInt(Et,10)||He.offsetHeight||He.clientHeight}},wn=Ie=>{const He=G(Ie),Nt=Gt(He),Et=on(He);return{x:Nt.x,y:Nt.y,w:Et.w,h:Et.h}},Ro=(Ie,He)=>{if(!Ie)return!1;const Nt=dt(Ie)?Ie:[Ie];return Re(Nt,Et=>Si(me.fromDom(Et),He))},Fo=(Ie,He,Nt,Et)=>{const Ln=[];let Vo=G(Ie);Et=Et===void 0;const Gr=Nt||(lt().nodeName!=="BODY"?lt().parentNode:null);if(oe(He))if(He==="*")He=Wt;else{const Fd=He;He=uy=>Ro(uy,Fd)}for(;Vo&&!(Vo===Gr||Xt(Vo.nodeType)||Cf(Vo)||Rc(Vo));){if(!He||He(Vo))if(Et)Ln.push(Vo);else return[Vo];Vo=Vo.parentNode}return Et?Ln:null},_s=(Ie,He,Nt)=>{const Et=Fo(Ie,He,Nt,!1);return Et&&Et.length>0?Et[0]:null},Zs=(Ie,He,Nt)=>{let Et=He;if(Ie){oe(He)&&(Et=Ln=>Ro(Ln,He));for(let Ln=Ie[Nt];Ln;Ln=Ln[Nt])if(le(Et)&&Et(Ln))return Ln}return null},lc=(Ie,He)=>Zs(Ie,He,"nextSibling"),Kc=(Ie,He)=>Zs(Ie,He,"previousSibling"),Qs=Ie=>le(Ie.querySelectorAll),Pt=(Ie,He)=>{var Nt,Et;const Ln=(Et=(Nt=G(He))!==null&&Nt!==void 0?Nt:n.root_element)!==null&&Et!==void 0?Et:e;return Qs(Ln)?xr(Ln.querySelectorAll(Ie)):[]},vn=function(Ie,He,Nt){const Et=Nt??this;if(dt(Ie)){const Ln=[];return _y(Ie,(Vo,Gr)=>{const Fd=G(Vo);Fd&&Ln.push(He.call(Et,Fd,Gr))}),Ln}else{const Ln=G(Ie);return Ln?He.call(Et,Ln):!1}},is=(Ie,He)=>{vn(Ie,Nt=>{xt(He,(Et,Ln)=>{Se(Nt,Ln,Et)})})},zt=(Ie,He)=>{vn(Ie,Nt=>{const Et=me.fromDom(Nt);ku(Et,He)})},On=(Ie,He,Nt,Et,Ln)=>vn(Ie,Vo=>{const Gr=oe(He)?e.createElement(He):He;return Ne(Nt)&&is(Gr,Nt),Et&&(!oe(Et)&&Et.nodeType?Gr.appendChild(Et):oe(Et)&&zt(Gr,Et)),Ln?Gr:Vo.appendChild(Gr)}),Ao=(Ie,He,Nt)=>On(e.createElement(Ie),Ie,He,Nt,!0),Zt=gd.decode,Oo=gd.encodeAllRaw,Io=(Ie,He,Nt="")=>{let Et="<"+Ie;for(const Ln in He)Bs(He,Ln)&&(Et+=" "+Ln+'="'+Oo(He[Ln])+'"');return No(Nt)&&fn(N.getVoidElements(),Ie)?Et+" />":Et+">"+Nt+"</"+Ie+">"},Sa=Ie=>{const He=e.createElement("div"),Nt=e.createDocumentFragment();Nt.appendChild(He),Ie&&(He.innerHTML=Ie);let Et;for(;Et=He.firstChild;)Nt.appendChild(Et);return Nt.removeChild(He),Nt},Ns=(Ie,He)=>vn(Ie,Nt=>{const Et=me.fromDom(Nt);return He&&ie(Oc(Et),Ln=>{Ds(Ln)&&Ln.dom.length===0?Ws(Ln):_a(Et,Ln)}),Ws(Et),Et.dom}),sa=Ie=>vn(Ie,He=>{const Nt=He.attributes;for(let Et=Nt.length-1;Et>=0;Et--)He.removeAttributeNode(Nt.item(Et))}),Md=Ie=>M.parse(Ie),uf=(Ie,He)=>M.serialize(Ie,He),Yl=Ie=>{if(gg!==wr.DOM&&e===document){if(o[Ie])return;o[Ie]=!0}let He=e.getElementById("mceDefaultStyles");if(!He){He=e.createElement("style"),He.id="mceDefaultStyles",He.type="text/css";const Nt=e.head;Nt.firstChild?Nt.insertBefore(He,Nt.firstChild):Nt.appendChild(He)}He.styleSheet?He.styleSheet.cssText+=Ie:He.appendChild(e.createTextNode(Ie))},Hi=Ie=>{Ie||(Ie=""),ie(Ie.split(","),He=>{a[He]=!0,y.load(He).catch($e)})},Qu=(Ie,He,Nt)=>{vn(Ie,Et=>{if(Wt(Et)){const Ln=me.fromDom(Et),Vo=He.split(" ");ie(Vo,Gr=>{Ne(Nt)?(Nt?wi:Cu)(Ln,Gr):wg(Ln,Gr)})}})},zi=(Ie,He)=>{Qu(Ie,He,!0)},ed=(Ie,He)=>{Qu(Ie,He,!1)},Sn=(Ie,He)=>{const Nt=ne(Ie),Et=He.split(" ");return Ne(Nt)&&As(Et,Ln=>ji(Nt,Ln))},qo=Ie=>{vn(Ie,He=>bl(me.fromDom(He),"display"))},Br=Ie=>{vn(Ie,He=>Dh(me.fromDom(He),"display","none"))},ic=Ie=>{const He=ne(Ie);return Ne(He)&&Us(ta(He,"display"),"none")},Bc=Ie=>(Ie||"mce_")+u++,Ma=Ie=>{const He=ne(Ie);return Ne(He)?Wt(He.dom)?He.dom.outerHTML:Ka(He):""},Pc=(Ie,He)=>{vn(Ie,Nt=>{Wt(Nt)&&(Nt.outerHTML=He)})},$c=(Ie,He)=>{const Nt=G(He);return vn(Ie,Et=>{const Ln=Nt==null?void 0:Nt.parentNode,Vo=Nt==null?void 0:Nt.nextSibling;return Ln&&(Vo?Ln.insertBefore(Et,Vo):Ln.appendChild(Et)),Et})},Rl=(Ie,He,Nt)=>vn(He,Et=>{var Ln;const Vo=dt(He)?Ie.cloneNode(!0):Ie;return Nt&&_y(lS(Et.childNodes),Gr=>{Vo.appendChild(Gr)}),(Ln=Et.parentNode)===null||Ln===void 0||Ln.replaceChild(Vo,Et),Et}),Bd=(Ie,He)=>{if(Ie.nodeName!==He.toUpperCase()){const Nt=Ao(He);return _y(Ee(Ie),Et=>{Se(Nt,Et.nodeName,ge(Ie,Et.nodeName))}),Rl(Nt,Ie,!0),Nt}else return Ie},Pd=(Ie,He)=>{let Nt=Ie;for(;Nt;){let Et=He;for(;Et&&Nt!==Et;)Et=Et.parentNode;if(Nt===Et)break;Nt=Nt.parentNode}return!Nt&&Ie.ownerDocument?Ie.ownerDocument.documentElement:Nt},$d=(Ie,He,Nt)=>oo(He)?Ru(N,Ie,{...Nt,isContent:Ln=>{const Vo=Ln.nodeName.toLowerCase();return!!He[Vo]}}):Ru(N,Ie,Nt),gu=()=>e.createRange(),mg=(Ie,He,Nt)=>{let Et=gu(),Ln,Vo;if(Ie&&He&&Ie.parentNode&&He.parentNode){const Gr=Ie.parentNode;return Et.setStart(Gr,Tt(Ie)),Et.setEnd(He.parentNode,Tt(He)),Ln=Et.extractContents(),Et=gu(),Et.setStart(He.parentNode,Tt(He)+1),Et.setEnd(Gr,Tt(Ie)+1),Vo=Et.extractContents(),Gr.insertBefore(Yd(gg,Ln,N),Ie),Nt?Gr.insertBefore(Nt,Ie):Gr.insertBefore(He,Ie),Gr.insertBefore(Yd(gg,Vo,N),Ie),Ns(Ie),Nt||He}else return},Ah=(Ie,He,Nt,Et)=>{if(dt(Ie)){let Ln=Ie.length;const Vo=[];for(;Ln--;)Vo[Ln]=Ah(Ie[Ln],He,Nt,Et);return Vo}else return n.collect&&(Ie===e||Ie===r)&&E.push([Ie,He,Nt,Et]),$.bind(Ie,He,Nt,Et||gg)},Eb=(Ie,He,Nt)=>{if(dt(Ie)){let Et=Ie.length;const Ln=[];for(;Et--;)Ln[Et]=Eb(Ie[Et],He,Nt);return Ln}else{if(E.length>0&&(Ie===e||Ie===r)){let Et=E.length;for(;Et--;){const[Ln,Vo,Gr]=E[Et];Ie===Ln&&(!He||He===Vo)&&(!Nt||Nt===Gr)&&$.unbind(Ln,Vo,Gr)}}return $.unbind(Ie,He,Nt)}},bk=(Ie,He,Nt)=>$.dispatch(Ie,He,Nt),fg=(Ie,He,Nt)=>$.dispatch(Ie,He,Nt),iy=Ie=>{if(Ie&&ei(Ie)){const He=Ie.getAttribute("data-mce-contenteditable");return He&&He!=="inherit"?He:Ie.contentEditable!=="inherit"?Ie.contentEditable:null}else return null},gg={doc:e,settings:n,win:r,files:a,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:E,styles:M,schema:N,events:$,isBlock:ee,root:null,clone:Me,getRoot:lt,getViewPort:At,getRect:wn,getSize:on,getParent:_s,getParents:Fo,get:G,getNext:lc,getPrev:Kc,select:Pt,is:Ro,add:On,create:Ao,createHTML:Io,createFragment:Sa,remove:Ns,setStyle:Ge,getStyle:ct,setStyles:Le,removeAllAttribs:sa,setAttrib:Se,setAttribs:is,getAttrib:ge,getPos:Gt,parseStyle:Md,serializeStyle:uf,addStyle:Yl,loadCSS:Hi,addClass:zi,removeClass:ed,hasClass:Sn,toggleClass:Qu,show:qo,hide:Br,isHidden:ic,uniqueId:Bc,setHTML:zt,getOuterHTML:Ma,setOuterHTML:Pc,decode:Zt,encode:Oo,insertAfter:$c,replace:Rl,rename:Bd,findCommonAncestor:Pd,run:vn,getAttribs:Ee,isEmpty:$d,createRng:gu,nodeIndex:Tt,split:mg,bind:Ah,unbind:Eb,fire:fg,dispatch:bk,getContentEditable:iy,getContentEditableParent:Ie=>{const He=lt();let Nt=null;for(let Et=Ie;Et&&Et!==He&&(Nt=iy(Et),Nt===null);Et=Et.parentNode);return Nt},isEditable:Ie=>{if(Ne(Ie)){const He=Wt(Ie)?Ie:Ie.parentElement;return Ne(He)&&ei(He)&&zc(me.fromDom(He))}else return!1},destroy:()=>{if(E.length>0){let Ie=E.length;for(;Ie--;){const[He,Nt,Et]=E[Ie];$.unbind(He,Nt,Et)}}xt(a,(Ie,He)=>{y.unload(He),delete a[He]})},isChildOf:(Ie,He)=>Ie===He||He.contains(Ie),dumpRng:Ie=>"startContainer: "+Ie.startContainer.nodeName+", startOffset: "+Ie.startOffset+", endContainer: "+Ie.endContainer.nodeName+", endOffset: "+Ie.endOffset},Jw=uS(M,n,Ke(gg));return gg};wr.DOM=wr(document),wr.nodeIndex=Tt;const Im=wr.DOM,Hb=0,kk=1,Lm=2,zb=3;class bd{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const a=Im;let u;const f=()=>{a.remove(E),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},E=a.uniqueId();u=document.createElement("script"),u.id=E,u.type="text/javascript",u.src=yt._addCacheSuffix(n),this.settings.referrerPolicy&&a.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Lm}markDone(n){this.states[n]=Lm}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=Hb),new Promise((a,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:a,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,E)=>{Yo(o.scriptLoadedCallbacks,E).each(N=>{ie(N,M=>M[y](E))}),delete o.scriptLoadedCallbacks[E]},a=y=>{const E=Bt(y,N=>N.status==="rejected");return E.length>0?Promise.reject(zs(E,({reason:N})=>dt(N)?N:[N])):Promise.resolve()},u=y=>Promise.allSettled(Fe(y,E=>o.states[E]===Lm?(r("resolve",E),Promise.resolve()):o.states[E]===zb?(r("reject",E),Promise.reject(E)):(o.states[E]=kk,o.loadScript(E).then(()=>{o.states[E]=Lm,r("resolve",E);const N=o.queue;return N.length>0?(o.queue=[],u(N).then(a)):Promise.resolve()},()=>(o.states[E]=zb,r("reject",E),Promise.reject(E)))))),f=y=>(o.loading=!0,u(y).then(E=>{o.loading=!1;const N=o.queueLoadedCallbacks.shift();return F.from(N).each(mn),a(E)})),b=Ga(n);return o.loading?new Promise((y,E)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(y,E)})}):f(b)}}bd.ScriptLoader=new bd;const dS=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},Oy=e=>ut(e)&&fn(e,"raw"),mr=e=>dt(e)&&e.length>1,Wh={},Zr=_e("en"),mS=()=>Yo(Wh,Zr.get()),ga={getData:()=>Eo(Wh,e=>({...e})),setCode:e=>{e&&Zr.set(e)},getCode:()=>Zr.get(),add:(e,n)=>{let o=Wh[e];o||(Wh[e]=o={});const r=Fe(yo(n),a=>a.toLowerCase());xt(n,(a,u)=>{const f=u.toLowerCase();f!==u&&dS(r,f)?(fn(n,f)||(o[f]=a),o[u]=a):o[f]=a})},translate:e=>{const n=mS().getOr({}),o=f=>le(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,a=f=>{const b=o(f);return fn(n,b)?o(n[b]):Yo(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(Oy(e))return o(e.raw);if(mr(e)){const f=e.slice(1),b=a(e[0]).replace(/\{([0-9]+)\}/g,(y,E)=>fn(f,E)?o(f[E]):y);return u(b)}return u(a(e))},isRtl:()=>mS().bind(e=>Yo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>fn(Wh,e)},Cl=()=>{const e=[],n={},o={},r=[],a=(G,ne)=>{const ge=Bt(r,Ee=>Ee.name===G&&Ee.state===ne);ie(ge,Ee=>Ee.resolve())},u=G=>fn(n,G),f=G=>fn(o,G),b=G=>{if(o[G])return o[G].instance},y=(G,ne)=>{const ge=ga.getCode(),Ee=","+(ne||"")+",";!ge||ne&&Ee.indexOf(","+ge+",")===-1||bd.ScriptLoader.add(n[G]+"/langs/"+ge+".js")},E=(G,ne)=>{Cl.languageLoad!==!1&&(u(G)?y(G,ne):ee(G,"loaded").then(()=>y(G,ne)))},N=(G,ne)=>(e.push(ne),o[G]={instance:ne},a(G,"added"),ne),M=G=>{delete n[G],delete o[G]},$=(G,ne)=>oe(ne)?oe(G)?{prefix:"",resource:ne,suffix:""}:{prefix:G.prefix,resource:ne,suffix:G.suffix}:ne,j=(G,ne)=>{if(n[G])return Promise.resolve();let ge=oe(ne)?ne:ne.prefix+ne.resource+ne.suffix;ge.indexOf("/")!==0&&ge.indexOf("://")===-1&&(ge=Cl.baseURL+"/"+ge),n[G]=ge.substring(0,ge.lastIndexOf("/"));const Ee=()=>(a(G,"loaded"),Promise.resolve());return o[G]?Ee():bd.ScriptLoader.add(ge).then(Ee)},ee=(G,ne="added")=>ne==="added"&&f(G)||ne==="loaded"&&u(G)?Promise.resolve():new Promise(ge=>{r.push({name:G,state:ne,resolve:ge})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:E,add:N,remove:M,createUrl:$,load:j,waitFor:ee}};Cl.languageLoad=!0,Cl.baseURL="",Cl.PluginManager=Cl(),Cl.ThemeManager=Cl(),Cl.ModelManager=Cl();const a1=(e,n)=>{let o=null;return{cancel:()=>{W(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{W(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Df=(e,n)=>{let o=null;const r=()=>{W(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Dy=(e,n,o)=>gc(e,n,o).isSome(),jh=Ke("mce-annotation"),em=Ke("data-mce-annotation"),Gh=Ke("data-mce-annotation-uid"),Vg=Ke("data-mce-annotation-active"),Rf=Ke("data-mce-annotation-classes"),tm=Ke("data-mce-annotation-attrs"),Ug=e=>n=>wo(n,e),Wg=(e,n)=>{const o=e.selection.getRng(),r=me.fromDom(o.startContainer),a=me.fromDom(e.getBody()),u=n.fold(()=>"."+jh(),y=>`[${em()}="${y}"]`),f=qa(r,o.startOffset).getOr(r);return Yi(f,u,Ug(a)).bind(y=>Er(y,`${Gh()}`).bind(E=>Er(y,`${em()}`).map(N=>{const M=Vb(e,E);return{uid:E,name:N,elements:M}})))},Rk=e=>ts(e)&&ji(e,jh()),Ry=(e,n)=>ur(e,"data-mce-bogus")||Dy(e,'[data-mce-bogus="all"]',Ug(n)),Vb=(e,n)=>{const o=me.fromDom(e.getBody()),r=Aa(o,`[${Gh()}="${n}"]`);return Bt(r,a=>!Ry(a,o))},fS=(e,n)=>{const o=me.fromDom(e.getBody()),r=Aa(o,`[${em()}="${n}"]`),a={};return ie(r,u=>{if(!Ry(u,o)){const f=Hc(u,Gh()),b=Yo(a,f).getOr([]);a[f]=b.concat([u])}}),a},Ny=(e,n)=>{const o=_e({}),r=()=>({listeners:[],previous:La()}),a=(M,$)=>{u(M,j=>($(j),j))},u=(M,$)=>{const j=o.get(),ee=Yo(j,M).getOrThunk(r),G=$(ee);j[M]=G,o.set(j)},f=(M,$,j)=>{a(M,ee=>{ie(ee.listeners,G=>G(!0,M,{uid:$,nodes:Fe(j,ne=>ne.dom)}))})},b=M=>{a(M,$=>{ie($.listeners,j=>j(!1,M))})},y=(M,$)=>{ie(Vb(e,M),j=>{$?Fs(j,Vg(),"true"):Ys(j,Vg())})},E=Df(()=>{const M=bo(n.getNames());ie(M,$=>{u($,j=>{const ee=j.previous.get();return Wg(e,F.some($)).fold(()=>{ee.each(G=>{b($),j.previous.clear(),y(G,!1)})},({uid:G,name:ne,elements:ge})=>{Us(ee,G)||(ee.each(Ee=>y(Ee,!1)),f(ne,G,ge),j.previous.set(G),y(G,!0))}),{previous:j.previous,listeners:j.listeners}})})},30);return e.on("remove",()=>{E.cancel()}),e.on("NodeChange",()=>{E.throttle()}),{addListener:(M,$)=>{u(M,j=>({previous:j.previous,listeners:j.listeners.concat([$])}))}}},Ub=(e,n)=>{const o=em(),r=u=>F.from(u.attr(o)).bind(n.lookup),a=u=>{var f,b;u.attr(Gh(),null),u.attr(em(),null),u.attr(Vg(),null);const y=F.from(u.attr(tm())).map($=>$.split(",")).getOr([]),E=F.from(u.attr(Rf())).map($=>$.split(",")).getOr([]);ie(y,$=>u.attr($,null));const N=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],M=Hr(N,[jh()].concat(E));u.attr("class",M.length>0?M.join(" "):null),u.attr(Rf(),null),u.attr(tm(),null)};e.serializer.addTempAttr(Vg()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():a(f))})})},My=()=>{const e={};return{register:(a,u)=>{e[a]={name:a,settings:u}},lookup:a=>Yo(e,a).map(u=>u.settings),getNames:()=>yo(e)}},By=(e,n,o)=>Math.min(Math.max(e,n),o),Py=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let l1=0;const Wb=e=>{const o=new Date().getTime(),r=Math.floor(Py()*1e9);return l1++,e+"_"+r+l1+String(o)},lR=(e,n)=>{ie(n,o=>{wi(e,o)})},i1=(e,n)=>{ie(n,o=>{Cu(e,o)})},qh=(e,n)=>me.fromDom(e.dom.cloneNode(n)),Nf=e=>qh(e,!1),$y=e=>qh(e,!0),Fy=(e,n)=>{const o=me.fromTag(n),r=bu(e);return ua(o,r),o},gS=(e,n)=>{const o=Fy(e,n);ul(e,o);const r=Oc(e);return Eu(o,r),Ws(e),o},Iy=(e,n,o=Pe)=>{const r=new ma(e,n),a=u=>{let f;do f=r[u]();while(f&&!vt(f)&&!o(f));return F.from(f).filter(vt)};return{current:()=>F.from(r.current()).filter(vt),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},Zg=(e,n)=>{const o=n||(f=>e.isBlock(f)||as(f)||ls(f)),r=(f,b,y,E)=>{if(vt(f)){const N=E(f,b,f.data);if(N!==-1)return F.some({container:f,offset:N})}return y().bind(N=>r(N.container,N.offset,y,E))};return{backwards:(f,b,y,E)=>{const N=Iy(f,E??e.getRoot(),o);return r(f,b,()=>N.prev().map(M=>({container:M,offset:M.length})),y).getOrNull()},forwards:(f,b,y,E)=>{const N=Iy(f,E??e.getRoot(),o);return r(f,b,()=>N.next().map(M=>({container:M,offset:0})),y).getOrNull()}}},Ly=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?F.from(u.dom.nodeValue):F.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Ds,"text"),Mf=e=>Ly.get(e),Kh=e=>Ly.getOption(e),Hy=(e,n)=>Ly.set(e,n),Zb=["td","th"],zy=["thead","tbody","tfoot"],hS=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Qa=["li","dd","dt"],iR=["ul","ol","dl"],Vy=["pre","script","textarea","style"],u1=e=>{let n;return o=>(n=n||xs(e,et),fn(n,J(o)))},Mk=e=>J(e)==="table",ai=e=>ts(e)&&J(e)==="br",Pu=u1(hS),Bf=u1(iR),jg=u1(Qa),pS=u1(zy),d1=u1(Zb),jb=u1(Vy),bS=e=>{const n=[];let o=e.dom;for(;o;)n.push(me.fromDom(o)),o=o.lastChild;return n},m1=e=>{const n=Aa(e,"br"),o=Bt(bS(e).slice(-1),ai);n.length===o.length&&ie(o,Ws)},Gg=()=>{const e=me.fromTag("br");return Fs(e,"data-mce-bogus","1"),e},ru=e=>{id(e),Rr(e,Gg())},Gb=(e,n)=>{sd(e).each(o=>{Ki(o).each(r=>{n.isBlock(J(e))&&ai(o)&&n.isBlock(J(r))&&Ws(o)})})},na=Mh,Uy=Nb,wl=Ya,Bk=e=>e.insertContent(na,{preserve_zwsp:!0}),vS=Wt,Hm=vt,Pf=e=>(Hm(e)&&(e=e.parentNode),vS(e)&&e.hasAttribute("data-mce-caret")),zm=e=>Hm(e)&&Uy(e.data),li=e=>Pf(e)||zm(e),yS=e=>e.firstChild!==e.lastChild||!as(e.firstChild),f1=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(na),u=e.parentNode;if(n){const f=e.previousSibling;if(Hm(f)){if(li(f))return f;if(Zo(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(a,e)}else{const f=e.nextSibling;if(Hm(f)){if(li(f))return f;if($f(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(a,e.nextSibling):u==null||u.appendChild(a)}return a},Wy=e=>{const n=e.container();return vt(n)?n.data.charAt(e.offset())===na||e.isAtStart()&&zm(n.previousSibling):!1},Yh=e=>{const n=e.container();return vt(n)?n.data.charAt(e.offset()-1)===na||e.isAtEnd()&&zm(n.nextSibling):!1},qg=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Gg().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},$f=e=>Hm(e)&&e.data[0]===na,Zo=e=>Hm(e)&&e.data[e.data.length-1]===na,Wl=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Rm(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},nm=e=>e&&e.hasAttribute("data-mce-caret")?(Wl(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,qb=e=>Pf(e.startContainer),Gs=Math.round,Ff=e=>e?{left:Gs(e.left),top:Gs(e.top),bottom:Gs(e.bottom),right:Gs(e.right),width:Gs(e.width),height:Gs(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Kb=(e,n)=>(e=Ff(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Pk=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,$k=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,g1=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:$k(n.top-e.bottom,e,n)},fr=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:$k(n.bottom-e.top,e,n),CS=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,Fk=e=>ro(e,(n,o)=>n.fold(()=>F.some(o),r=>{const a=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return F.some({top:u,right:f,bottom:b,left:a,width:f-a,height:b-u})}),F.none()),wS=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),a=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-a)*(o-a))},Kg=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),ii=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},If=(e,n)=>{if(Wt(e)&&e.hasChildNodes()){const o=e.childNodes,r=By(n,0,o.length-1);return o[r]}else return e},Zy=(e,n)=>{if(!(n<0&&Wt(e)&&e.hasChildNodes()))return If(e,n)},Jt=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),jy=e=>oe(e)&&e.charCodeAt(0)>=768&&Jt.test(e),Ik=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},SS=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},Gy=tt,xS=ls,TS=as,vd=vt,h1=Ti(["script","style","textarea"]),Yg=Ti(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Yb=Ti(["table"]),Lk=li,ki=e=>Lk(e)?!1:vd(e)?!h1(e.parentNode):Yg(e)||TS(e)||Yb(e)||qy(e),ES=e=>Wt(e)&&e.getAttribute("unselectable")==="true",qy=e=>!ES(e)&&xS(e),kS=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(qy(o))return!1;if(Gy(o))return!0}return!0},Xb=e=>qy(e)?!ro(xr(e.getElementsByTagName("*")),(n,o)=>n||Gy(o),!1):!1,Hk=e=>Yg(e)||Xb(e),Jb=(e,n)=>ki(e)&&kS(e,n),Ky=Wt,Yy=ki,_S=Ng("display","block table"),zk=Ng("float","left right"),om=SS(Ky,Yy,Jn(zk)),AS=Jn(Ng("white-space","pre pre-line pre-wrap")),Xh=vt,Jh=as,OS=wr.nodeIndex,Qb=Zy,Xy=e=>e?e.createRange():wr.DOM.createRng(),e0=e=>oe(e)&&/[\r\n\t ]/.test(e),Vk=e=>!!e.setStart&&!!e.setEnd,Sl=e=>{const n=e.startContainer,o=e.startOffset;if(e0(e.toString())&&AS(n.parentNode)&&vt(n)){const r=n.data;if(e0(r[o-1])||e0(r[o+1]))return!0}return!1},Uk=e=>{const n=e.ownerDocument,o=Xy(n),r=n.createTextNode(xc),a=e.parentNode;a.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Ff(o.getBoundingClientRect());return a.removeChild(r),u},Wk=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,a=e.endOffset;if(n===o&&vt(o)&&r===0&&a===1){const u=e.cloneRange();return u.setEndAfter(o),Hf(u)}else return null},Lf=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Hf=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Ff(r[0]):o=Ff(e.getBoundingClientRect()),!Vk(e)&&Jh(e)&&Lf(o)?Uk(e):Lf(o)&&Vk(e)&&(n=Wk(e))!==null&&n!==void 0?n:o},Vm=(e,n)=>{const o=Kb(e,n);return o.width=1,o.right=o.left+1,o},Jy=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&Pk(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=Xy(f.ownerDocument);if(b<f.data.length){if(jy(f.data[b]))return;if(jy(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!Sl(y))){o(Vm(Hf(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),Sl(y)||o(Vm(Hf(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),Sl(y)||o(Vm(Hf(y),!0)))},a=e.container(),u=e.offset();if(Xh(a))return r(a,u),n;if(Ky(a))if(e.isAtEnd()){const f=Qb(a,u);Xh(f)&&r(f,f.data.length),om(f)&&!Jh(f)&&o(Vm(Hf(f),!1))}else{const f=Qb(a,u);if(Xh(f)&&r(f,0),om(f)&&e.isAtEnd())return o(Vm(Hf(f),!1)),n;const b=Qb(e.container(),e.offset()-1);om(b)&&!Jh(b)&&(_S(b)||_S(f)||!om(f))&&o(Vm(Hf(b),!1)),om(f)&&o(Vm(Hf(f),!0))}return n},Ze=(e,n,o)=>{const r=()=>(Xh(e),n===0),a=()=>Xh(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const N=Xy(e.ownerDocument);return N.setStart(e,n),N.setEnd(e,n),N},f=()=>(o||(o=Jy(Ze(e,n))),o),b=()=>f().length>0,y=N=>N&&e===N.container()&&n===N.offset(),E=N=>Qb(e,N?n-1:n);return{container:Ke(e),offset:Ke(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:a,isEqual:y,getNode:E}};Ze.fromRangeStart=e=>Ze(e.startContainer,e.startOffset),Ze.fromRangeEnd=e=>Ze(e.endContainer,e.endOffset),Ze.after=e=>Ze(e.parentNode,OS(e)+1),Ze.before=e=>Ze(e.parentNode,OS(e)),Ze.isAbove=(e,n)=>co(vo(n.getClientRects()),ds(e.getClientRects()),g1).getOr(!1),Ze.isBelow=(e,n)=>co(ds(n.getClientRects()),vo(e.getClientRects()),fr).getOr(!1),Ze.isAtStart=e=>e?e.isAtStart():!1,Ze.isAtEnd=e=>e?e.isAtEnd():!1,Ze.isTextPosition=e=>e?vt(e.container()):!1,Ze.isElementPosition=e=>!Ze.isTextPosition(e);const t0=(e,n)=>{vt(n)&&n.data.length===0&&e.remove(n)},Um=(e,n,o)=>{n.insertNode(o),t0(e,o.previousSibling),t0(e,o.nextSibling)},zf=(e,n,o)=>{const r=F.from(o.firstChild),a=F.from(o.lastChild);n.insertNode(o),r.each(u=>t0(e,u.previousSibling)),a.each(u=>t0(e,u.nextSibling))},n0=(e,n,o)=>{Rc(o)?zf(e,n,o):Um(e,n,o)},ui=vt,Qy=Rm,eC=wr.nodeIndex,xl=e=>{const n=e.parentNode;return Qy(n)?xl(n):n},Qh=e=>e?ue(e.childNodes,(n,o)=>(Qy(o)&&o.nodeName!=="BR"?n=n.concat(Qh(o)):n.push(o),n),[]):[],DS=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&ui(o);)n+=o.data.length;return n},RS=e=>n=>e===n,Zk=e=>{let n,o;n=Qh(xl(e)),o=se(n,RS(e),e),n=n.slice(0,o+1);const r=ue(n,(a,u,f)=>(ui(u)&&ui(n[f-1])&&a++,a),0);return n=Ic(n,Ti([e.nodeName])),o=se(n,RS(e),e),o-r},NS=e=>(ui(e)?"text()":e.nodeName.toLowerCase())+"["+Zk(e)+"]",jk=(e,n,o)=>{const r=[];for(let a=n.parentNode;a&&a!==e;a=a.parentNode)r.push(a);return r},MS=(e,n)=>{let o=[],r=n.container(),a=n.offset(),u;if(ui(r))u=DS(r,a);else{const b=r.childNodes;a>=b.length?(u="after",a=b.length-1):u="before",r=b[a]}o.push(NS(r));let f=jk(e,r);return f=Ic(f,Jn(Rm)),o=o.concat(tc(f,b=>NS(b))),o.reverse().join("/")+","+u},Gk=(e,n,o)=>{let r=Qh(e);return r=Ic(r,(a,u)=>!ui(a)||!ui(r[u-1])),r=Ic(r,Ti([n])),r[o]},qk=(e,n)=>{let o=e,r=0;for(;ui(o);){const a=o.data.length;if(n>=r&&n<=r+a){e=o,n=n-r;break}if(!ui(o.nextSibling)){e=o,n=a;break}r+=a,o=o.nextSibling}return ui(e)&&n>e.data.length&&(n=e.data.length),Ze(e,n)},o0=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),a=o.length>1?o[1]:"before",u=ue(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),Gk(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!ui(u)&&u.parentNode){let f;return a==="after"?f=eC(u)+1:f=eC(u),Ze(u.parentNode,f)}return qk(u,parseInt(a,10))},s0=ls,Kk=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let a=n.previousSibling;a&&vt(a);a=a.previousSibling)r+=e(a.data).length;return r},BS=(e,n,o,r,a)=>{const u=a?r.startContainer:r.endContainer;let f=a?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(vt(u))b.push(o?Kk(n,u,f):f);else{let E=0;const N=u.childNodes;f>=N.length&&N.length&&(E=1,f=Math.max(0,N.length-1)),b.push(e.nodeIndex(N[f],o)+E)}for(let E=u;E&&E!==y;E=E.parentNode)b.push(e.nodeIndex(E,o));return b},Yk=(e,n,o,r)=>{const a=n.dom,u=BS(a,e,o,r,!0),f=n.isForward(),b=qb(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=BS(a,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},tC=(e,n,o)=>{let r=0;return yt.each(e.select(n),a=>{if(a.getAttribute("data-mce-bogus")!=="all"){if(a===o)return!1;r++;return}}),r},jr=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Wt(o)&&o.nodeName==="TR"){const a=o.childNodes;o=a[Math.min(n?r:r-1,a.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},nC=e=>(jr(e,!0),jr(e,!1),e),PS=(e,n)=>{if(Wt(e)&&(e=If(e,n),s0(e)))return e;if(li(e)){vt(e)&&Pf(e)&&(e=e.parentNode);let o=e.previousSibling;if(s0(o)||(o=e.nextSibling,s0(o)))return o}},r0=e=>PS(e.startContainer,e.startOffset)||PS(e.endContainer,e.endOffset),c0=(e,n,o)=>{const r=o.getNode(),a=o.getRng();if(r.nodeName==="IMG"||s0(r)){const f=r.nodeName;return{name:f,index:tC(o.dom,f,r)}}const u=r0(a);if(u){const f=u.tagName;return{name:f,index:tC(o.dom,f,u)}}return Yk(e,o,n,a)},el=e=>{const n=e.getRng();return{start:MS(e.dom.getRoot(),Ze.fromRangeStart(n)),end:MS(e.dom.getRoot(),Ze.fromRangeEnd(n)),forward:e.isForward()}},_i=e=>({rng:e.getRng(),forward:e.isForward()}),oC=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},sC=(e,n)=>{const o=e.dom;let r=e.getRng();const a=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:tC(o,b,f)};const E=nC(r.cloneRange());if(!u){E.collapse(!1);const M=oC(o,a+"_end",n);n0(o,E,M)}r=nC(r),r.collapse(!0);const N=oC(o,a+"_start",n);return n0(o,r,N),e.moveToBookmark({id:a,keep:!0,forward:y}),{id:a,forward:y}},$S=(e,n,o=!1)=>n===2?c0(wl,o,e):n===3?el(e):n?_i(e):sC(e,!1),rC=je(c0,Vn,!0),p1=e=>{const n=u=>u(e),o=Ke(e),r=()=>a,a={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:et,isError:Pe,map:u=>Tl.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>F.some(e)};return a},a0=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,a)=>r(e),isValue:Pe,isError:et,map:n,mapError:r=>Tl.error(r(e)),bind:n,exists:Pe,forall:et,getOr:Vn,or:Vn,getOrThunk:bt,orThunk:bt,getOrDie:bs(String(e)),each:$e,toOptional:F.none};return o},Tl={value:p1,error:a0,fromOption:(e,n)=>e.fold(()=>a0(n),p1)},yd={generate:e=>{if(!dt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return ie(e,(r,a)=>{const u=yo(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!dt(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const E=y.length;if(E!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+E);return{fold:(...M)=>{if(M.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+M.length);return M[a].apply(null,y)},match:M=>{const $=yo(M);if(n.length!==$.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+$.join(","));if(!As(n,ee=>xe($,ee)))throw new Error("Not all branches were specified when using match. Specified: "+$.join(", ")+`
Required: `+n.join(", "));return M[f].apply(null,y)},log:M=>{}}}}),o}};yd.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const cC=e=>{const n=[],o=[];return ie(e,r=>{r.fold(a=>{n.push(a)},a=>{o.push(a)})}),{errors:n,values:o}},Ar=e=>e.type==="inline-command"||e.type==="inline-format",$u=e=>e.type==="block-command"||e.type==="block-format",Uf=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,Xk=e=>{var n;const o=a=>Tl.error({message:a,pattern:e}),r=(a,u,f)=>{if(e.format!==void 0){let b;if(dt(e.format)){if(!As(e.format,oe))return o(a+" pattern has non-string items in the `format` array");b=e.format}else if(oe(e.format))b=[e.format];else return o(a+" pattern has non-string `format` parameter");return Tl.value(u(b))}else return e.cmd!==void 0?oe(e.cmd)?Tl.value(f(e.cmd,e.value)):o(a+" pattern has non-string `cmd` parameter"):o(a+" pattern is missing both `format` and `cmd` parameters")};if(!ut(e))return o("Raw pattern is not an object");if(!oe(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!oe(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let a=e.start,u=e.end;return u.length===0&&(u=a,a=""),r("Inline",f=>({type:"inline-format",start:a,end:u,format:f}),(f,b)=>({type:"inline-command",start:a,end:u,cmd:f,value:b}))}else{if(e.replacement!==void 0)return oe(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):Tl.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const a=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:a}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:a}))}}},aC=e=>Bt(e,$u),IS=e=>Bt(e,Ar),Xg=(e,n)=>({inlinePatterns:IS(e),blockPatterns:aC(e),dynamicPatternsLookup:n}),ha=(e,n)=>({...e,blockPatterns:Bt(e.blockPatterns,o=>Uf(o,n))}),Wm=e=>{const n=cC(Fe(e,Xk));return ie(n.errors,o=>{}),n.values},Jk=e=>n=>{const o=e(n);return Wm(o)},lC=wt().deviceType,Qk=lC.isTouch(),l0=wr.DOM,iC=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return ro(n,(o,r)=>{const a=r.split("="),u=a[0],f=a.length>1?a[1]:u;return o[Os(u)]=Os(f),o},{})},i0=e=>nt(e,RegExp),Qt=e=>n=>n.options.get(e),b1=e=>oe(e)||ut(e),uC=(e,n="")=>o=>{const r=oe(o);if(r)if(o.indexOf("=")!==-1){const a=iC(o);return{value:Yo(a,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},LS=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:uC(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:uC(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=oe(o)&&Dn(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=xe(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Rt(o)?{valid:!0,value:o}:oe(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||oe(o)||gt(o,oe);return r?oe(o)?{value:Fe(o.split(","),Os),valid:r}:dt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:w1(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=oe(o)||gt(o,oe);return r?{value:dt(o)?o:Fe(o.split(","),Os),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Rt(o)||oe(o);return r?o===!1||lC.isiPhone()||lC.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Qk}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||oe(o)||le(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||oe(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:b1}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:b1}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:b1}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:b1}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>oe(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>gt(o,ut)||o===!1?{value:Wm(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>le(o)?{value:Jk(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>gt(o,i0)?{value:o,valid:!0}:i0(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=xe(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=xe(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:ga.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:l0.getAttrib(e.getElement(),"placeholder")})})},HS=Qt("iframe_attrs"),e_=Qt("doctype"),Da=Qt("document_base_url"),t_=Qt("body_id"),Wf=Qt("body_class"),dC=Qt("content_security_policy"),zS=Qt("br_in_pre"),Ha=Qt("forced_root_block"),Zf=Qt("forced_root_block_attrs"),Zm=Qt("newline_behavior"),VS=Qt("br_newline_selector"),n_=Qt("no_newline_selector"),o_=Qt("keep_styles"),Wc=Qt("end_container_on_empty_block"),rc=Qt("automatic_uploads"),Is=Qt("images_reuse_filename"),za=Qt("images_replace_blob_uris"),Zc=Qt("icons"),jc=Qt("icons_url"),u0=Qt("images_upload_url"),d0=Qt("images_upload_base_path"),US=Qt("images_upload_credentials"),WS=Qt("images_upload_handler"),ZS=Qt("content_css_cors"),m0=Qt("referrer_policy"),jf=Qt("language"),f0=Qt("language_url"),s_=Qt("indent_use_margin"),ep=Qt("indentation"),r_=Qt("content_css"),c_=Qt("content_style"),Zl=Qt("font_css"),uR=Qt("directionality"),jS=Qt("inline_boundaries_selector"),Ai=Qt("object_resizing"),g0=Qt("resize_img_proportional"),v1=Qt("placeholder"),Cd=Qt("event_root"),El=Qt("service_message"),Gf=Qt("theme"),mC=Qt("theme_url"),h0=Qt("model"),GS=Qt("model_url"),jm=Qt("inline_boundaries"),qS=Qt("formats"),fC=Qt("preview_styles"),KS=Qt("format_empty_lines"),y1=Qt("format_noneditable_selector"),C1=Qt("custom_ui_selector"),w1=Qt("inline"),a_=Qt("hidden_input"),p0=Qt("submit_patch"),l_=Qt("add_form_submit_trigger"),YS=Qt("add_unload_trigger"),i_=Qt("custom_undo_redo_levels"),b0=Qt("disable_nodechange"),XS=Qt("readonly"),u_=Qt("editable_root"),gC=Qt("content_css_cors"),v0=Qt("plugins"),d_=Qt("external_plugins"),JS=Qt("block_unsupported_drop"),kl=Qt("visual"),hC=Qt("visual_table_class"),pC=Qt("visual_anchor_class"),bC=Qt("iframe_aria_text"),y0=Qt("setup"),m_=Qt("init_instance_callback"),C0=Qt("urlconverter_callback"),QS=Qt("auto_focus"),vC=Qt("browser_spellcheck"),yC=Qt("protect"),ex=Qt("paste_block_drop"),tp=Qt("paste_data_images"),tx=Qt("paste_preprocess"),nx=Qt("paste_postprocess"),ox=Qt("newdocument_content"),f_=Qt("paste_webkit_styles"),sx=Qt("paste_remove_styles_if_webkit"),rx=Qt("paste_merge_formats"),g_=Qt("smart_paste"),w0=Qt("paste_as_text"),cx=Qt("paste_tab_spaces"),np=Qt("allow_html_data_urls"),ax=Qt("text_patterns"),CC=Qt("text_patterns_lookup"),lx=Qt("noneditable_class"),h_=Qt("editable_class"),Fu=Qt("noneditable_regexp"),S0=Qt("preserve_cdata"),x0=Qt("highlight_on_focus"),Va=Qt("xss_sanitization"),dR=Qt("init_content_sync"),Oi=e=>e.options.isSet("text_patterns_lookup"),wC=e=>yt.explode(e.options.get("font_size_style_values")),p_=e=>yt.explode(e.options.get("font_size_classes")),qf=e=>e.options.get("encoding")==="xml",S1=e=>yt.explode(e.options.get("images_file_types")),b_=Qt("table_tab_navigation"),ix=Qt("details_initial_state"),SC=Qt("details_serialized_state"),ux=Qt("sandbox_iframes"),T0=e=>e.options.get("sandbox_iframes_exclusions"),x1=Qt("convert_unsafe_embeds"),dx=Qt("license_key"),mx=Qt("api_key"),v_=Wt,E0=vt,k0=e=>{const n=e.parentNode;n&&n.removeChild(e)},y_=e=>{const n=wl(e);return{count:e.length-n.length,text:n}},op=e=>{let n;for(;(n=e.data.lastIndexOf(na))!==-1;)e.deleteData(n,1)},fx=(e,n)=>(Jg(e),n),_0=(e,n)=>{const o=y_(e.data.substr(0,n.offset())),r=y_(e.data.substr(n.offset()));return(o.text+r.text).length>0?(op(e),Ze(e,n.offset()-o.count)):n},xC=(e,n)=>{const o=n.container(),r=Mt(xr(o.childNodes),e).map(a=>a<n.offset()?Ze(o,n.offset()-1):n).getOr(n);return Jg(e),r},A0=(e,n)=>E0(e)&&n.container()===e?_0(e,n):fx(e,n),C_=(e,n)=>n.container()===e.parentNode?xC(e,n):fx(e,n),gx=(e,n)=>Ze.isTextPosition(n)?A0(e,n):C_(e,n),Jg=e=>{v_(e)&&li(e)&&(yS(e)?e.removeAttribute("data-mce-caret"):k0(e)),E0(e)&&(op(e),e.data.length===0&&k0(e))},hx=ls,T1=Ia,Kf=Bg,E1="*[contentEditable=false],video,audio,embed,object",px=(e,n,o)=>{const r=Kb(n.getBoundingClientRect(),o);let a,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;a=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();a=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=a,r.right+=a,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},bx=e=>{var n,o;const r=Aa(me.fromDom(e),E1);for(let a=0;a<r.length;a++){const u=r[a].dom;let f=u.previousSibling;if(Zo(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,$f(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},mR=(e,n,o,r)=>{const a=La();let u,f;const b=Ha(e),y=e.dom,E=(G,ne)=>{let ge;if(N(),Kf(ne))return null;if(o(ne)){const Ee=qg(b,ne,G),Se=px(n,ne,G);y.setStyle(Ee,"top",Se.top),y.setStyle(Ee,"caret-color","transparent"),f=Ee;const Me=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(Me,{...Se}),y.add(n,Me),a.set({caret:Me,element:ne,before:G}),G&&y.addClass(Me,"mce-visual-caret-before"),M(),ge=ne.ownerDocument.createRange(),ge.setStart(Ee,0),ge.setEnd(Ee,0)}else return f=f1(ne,G),ge=ne.ownerDocument.createRange(),sp(f.nextSibling)?(ge.setStart(f,0),ge.setEnd(f,0)):(ge.setStart(f,1),ge.setEnd(f,1)),ge;return ge},N=()=>{bx(n),f&&(Jg(f),f=null),a.on(G=>{y.remove(G.caret),a.clear()}),u&&(clearInterval(u),u=void 0)},M=()=>{u=setInterval(()=>{a.on(G=>{r()?y.toggleClass(G.caret,"mce-visual-caret-hidden"):y.addClass(G.caret,"mce-visual-caret-hidden")})},500)};return{show:E,hide:N,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{a.on(G=>{const ne=px(n,G.element,G.before);y.setStyles(G.caret,{...ne})})},destroy:()=>clearInterval(u)}},w_=()=>gn.browser.isFirefox(),sp=e=>hx(e)||T1(e),sm=e=>(sp(e)||Qi(e)&&w_())&&Em(me.fromDom(e)).exists(zc),S_=tt,TC=ls,vx=Ia,yx=Ng("display","block table table-cell table-caption list-item"),Cx=li,EC=Pf,wx=Wt,Yf=vt,Sx=ki,Qg=e=>e>0,Xf=e=>e<0,k1=(e,n)=>{let o;for(;o=e(n);)if(!EC(o))return o;return null},rp=(e,n,o,r,a)=>{const u=new ma(e,r),f=TC(e)||EC(e);let b;if(Xf(n)){if(f&&(b=k1(u.prev.bind(u),!0),o(b)))return b;for(;b=k1(u.prev.bind(u),a);)if(o(b))return b}if(Qg(n)){if(f&&(b=k1(u.next.bind(u),!0),o(b)))return b;for(;b=k1(u.next.bind(u),a);)if(o(b))return b}return null},O0=(e,n)=>{const o=a=>S_(a.dom),r=a=>a.dom===n;return yr(me.fromDom(e),o,r).map(a=>a.dom).getOr(n)},Jf=(e,n)=>{for(;e&&e!==n;){if(yx(e))return e;e=e.parentNode}return null},Di=(e,n,o)=>Jf(e.container(),o)===Jf(n.container(),o),kC=(e,n)=>{if(!n)return F.none();const o=n.container(),r=n.offset();return wx(o)?F.from(o.childNodes[r+e]):F.none()},x_=(e,n)=>{var o;const a=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),a},cp=(e,n,o)=>Jf(n,e)===Jf(o,e),xx=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let a=o;for(;a&&a!==n;){let u=a[r];if(u&&Cx(u)&&(u=u[r]),TC(u)||vx(u)){if(cp(n,u,a))return u;break}if(Sx(u))break;a=a.parentNode}return null},ap=je(x_,!0),lp=je(x_,!1),Ra=(e,n,o)=>{let r;const a=je(xx,!0,n),u=je(xx,!1,n),f=o.startContainer,b=o.startOffset;if(Pf(f)){const y=Yf(f)?f.parentNode:f,E=y.getAttribute("data-mce-caret");if(E==="before"&&(r=y.nextSibling,sm(r)))return ap(r);if(E==="after"&&(r=y.previousSibling,sm(r)))return lp(r)}if(!o.collapsed)return o;if(vt(f)){if(Cx(f)){if(e===1){if(r=u(f),r)return ap(r);if(r=a(f),r)return lp(r)}if(e===-1){if(r=a(f),r)return lp(r);if(r=u(f),r)return ap(r)}return o}if(Zo(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?ap(r):o;if($f(f)&&b<=1)return e===-1&&(r=a(f),r)?lp(r):o;if(b===f.data.length)return r=u(f),r?ap(r):o;if(b===0)return r=a(f),r?lp(r):o}return o},D0=(e,n)=>kC(e?0:-1,n).filter(TC),_1=(e,n,o)=>{const r=Ra(e,n,o);return e===-1?Ze.fromRangeStart(r):Ze.fromRangeEnd(r)},R0=e=>F.from(e.getNode()).map(me.fromDom),Tx=e=>F.from(e.getNode(!0)).map(me.fromDom),_C=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},N0=(e,n)=>{const o=Di(e,n);return!o&&as(e.getNode())?!0:o};var Mc;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Mc||(Mc={}));const M0=ls,rm=vt,Ex=Wt,AC=as,Gm=ki,A1=Hk,ip=Jb,B0=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},P0=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Qf=(e,n)=>{if(Qg(e)){if(Gm(n.previousSibling)&&!rm(n.previousSibling))return Ze.before(n);if(rm(n))return Ze(n,0)}if(Xf(e)){if(Gm(n.nextSibling)&&!rm(n.nextSibling))return Ze.after(n);if(rm(n))return Ze(n,n.data.length)}return Xf(e)?AC(n)?Ze.before(n):Ze.after(n):Ze.before(n)},T_=(e,n)=>{const o=n.nextSibling;return o&&Gm(o)?rm(o)?Ze(o,0):Ze.before(o):di(Mc.Forwards,Ze.after(n),e)},di=(e,n,o)=>{let r,a,u,f;if(!Ex(o)||!n)return null;if(n.isEqual(Ze.after(o))&&o.lastChild){if(f=Ze.after(o.lastChild),Xf(e)&&Gm(o.lastChild)&&Ex(o.lastChild))return AC(o.lastChild)?Ze.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if(rm(b)){if(Xf(e)&&y>0)return Ze(b,--y);if(Qg(e)&&y<b.length)return Ze(b,++y);r=b}else{if(Xf(e)&&y>0&&(a=P0(b,y-1),Gm(a)))return!A1(a)&&(u=rp(a,e,ip,a),u)?rm(u)?Ze(u,u.data.length):Ze.after(u):rm(a)?Ze(a,a.data.length):Ze.before(a);if(Qg(e)&&y<b.childNodes.length&&(a=P0(b,y),Gm(a)))return AC(a)?T_(o,a):!A1(a)&&(u=rp(a,e,ip,a),u)?rm(u)?Ze(u,0):Ze.before(u):rm(a)?Ze(a,0):Ze.after(a);r=a||f.getNode()}if(r&&(Qg(e)&&f.isAtEnd()||Xf(e)&&f.isAtStart())&&(r=rp(r,e,et,o,!0),ip(r,o)))return Qf(e,r);a=r&&rp(r,e,ip,o);const E=Be(Bt(B0(b,o),M0));return E&&(!a||!E.contains(a))?(Qg(e)?f=Ze.after(E):f=Ze.before(E),f):a?Qf(e,a):null},wd=e=>({next:n=>di(Mc.Forwards,n,e),prev:n=>di(Mc.Backwards,n,e)}),OC=(e,n,o)=>{const r=e?Ze.before(o):Ze.after(o);return jl(e,n,r)},kx=e=>as(e)?Ze.before(e):Ze.after(e),_x=e=>Ze.isTextPosition(e)?e.offset()===0:ki(e.getNode()),DC=e=>{if(Ze.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return ki(e.getNode(!0))},RC=(e,n)=>!Ze.isTextPosition(e)&&!Ze.isTextPosition(n)&&e.getNode()===n.getNode(!0),Ax=e=>!Ze.isTextPosition(e)&&as(e.getNode()),Ox=(e,n,o)=>e?!RC(n,o)&&!Ax(n)&&DC(n)&&_x(o):!RC(o,n)&&_x(n)&&DC(o),jl=(e,n,o)=>{const r=wd(n);return F.from(e?r.next(o):r.prev(o))},eh=(e,n,o)=>jl(e,n,o).bind(r=>Di(o,r,n)&&Ox(e,o,r)?jl(e,n,r):F.some(r)),NC=(e,n,o,r)=>eh(e,n,o).bind(a=>r(a)?NC(e,n,a,r):F.some(a)),eg=(e,n)=>{const o=e?n.firstChild:n.lastChild;return vt(o)?F.some(Ze(o,e?0:o.data.length)):o?ki(o)?F.some(e?Ze.before(o):kx(o)):OC(e,n,o):F.none()},Gl=je(jl,!0),mi=je(jl,!1),Ua=je(eg,!0),cu=je(eg,!1),$0="_mce_caret",au=e=>Wt(e)&&e.id===$0,th=(e,n)=>{let o=n;for(;o&&o!==e;){if(au(o))return o;o=o.parentNode}return null},E_=e=>oe(e.start),MC=e=>fn(e,"rng"),k_=e=>fn(e,"id"),__=e=>fn(e,"name"),Dx=e=>yt.isArray(e.start),F0=e=>!__(e)&&Rt(e.forward)?e.forward:!0,I0=(e,n)=>(Wt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),tl=(e,n)=>{const o=F.from(o0(e.getRoot(),n.start)),r=F.from(o0(e.getRoot(),n.end));return co(o,r,(a,u)=>{const f=e.createRng();return f.setStart(a.container(),a.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:F0(n)}})},up=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(na);e.appendChild(a),n.setStart(a,0),n.setEnd(a,0)},dp=e=>!e.hasChildNodes(),O1=(e,n)=>cu(e).fold(Pe,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),BC=(e,n,o)=>dp(n)&&th(e,n)?(up(n,o),!0):!1,D1=(e,n,o,r)=>{const a=o[n?"start":"end"],u=e.getRoot();if(a){let f=u,b=a[0];for(let y=a.length-1;f&&y>=1;y--){const E=f.childNodes;if(BC(u,f,r))return!0;if(a[y]>E.length-1)return BC(u,f,r)?!0:O1(f,r);f=E[a[y]]}vt(f)&&(b=Math.min(a[0],f.data.length)),Wt(f)&&(b=Math.min(a[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},R1=e=>vt(e)&&e.data.length>0,nh=(e,n,o)=>{const r=e.get(o.id+"_"+n),a=r==null?void 0:r.parentNode,u=o.keep;if(r&&a){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):R1(r.nextSibling)?(f=r.nextSibling,b=0):R1(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)+1):(f=a,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):R1(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)):(f=a,b=e.nodeIndex(r)),!u){const y=r.previousSibling,E=r.nextSibling;yt.each(yt.grep(r.childNodes),M=>{vt(M)&&(M.data=M.data.replace(/\uFEFF/g,""))});let N;for(;N=e.get(o.id+"_"+n);)e.remove(N,!0);if(vt(E)&&vt(y)&&!gn.browser.isOpera()){const M=y.data.length;y.appendData(E.data),e.remove(E),f=y,b=M}}return F.some(Ze(f,b))}else return F.none()},PC=(e,n)=>{const o=e.createRng();return D1(e,!0,n,o)&&D1(e,!1,n,o)?F.some({range:o,forward:F0(n)}):F.none()},L0=(e,n)=>{const o=nh(e,"start",n),r=nh(e,"end",n);return co(o,r.or(o),(a,u)=>{const f=e.createRng();return f.setStart(I0(e,a.container()),a.offset()),f.setEnd(I0(e,u.container()),u.offset()),{range:f,forward:F0(n)}})},Iu=(e,n)=>F.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),Rx=(e,n)=>{const o=e.dom;if(n){if(Dx(n))return PC(o,n);if(E_(n))return tl(o,n);if(k_(n))return L0(o,n);if(__(n))return Iu(o,n);if(MC(n))return F.some({range:n.rng,forward:F0(n)})}return F.none()},Nx=(e,n,o)=>$S(e,n,o),qm=(e,n)=>{Rx(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Ri=e=>Wt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",oh=(e=>n=>e===n)(xc),tg=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,$C=e=>!tg(e)&&!oh(e)&&!Nb(e),H0=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},Mx=e=>zs(e,n=>{const o=ii(n);return o?[me.fromDom(o)]:[]}),A_=e=>H0(e).length>1,O_=e=>Bt(Mx(e),d1),sh=e=>Aa(e,"td[data-mce-selected],th[data-mce-selected]"),FC=(e,n)=>{const o=sh(n);return o.length>0?o:O_(e)},mp=e=>FC(H0(e.selection.getSel()),me.fromDom(e.getBody())),M1=(e,n)=>gc(e,"table",n),D_=e=>{const n=e.startContainer,o=e.startOffset;return vt(n)?o===0?F.some(me.fromDom(n)):F.none():F.from(n.childNodes[o]).map(me.fromDom)},z0=e=>{const n=e.endContainer,o=e.endOffset;return vt(n)?o===n.data.length?F.some(me.fromDom(n)):F.none():F.from(n.childNodes[o-1]).map(me.fromDom)},IC=e=>ka(e).fold(Ke([e]),n=>[e].concat(IC(n))),LC=e=>sd(e).fold(Ke([e]),n=>J(n)==="br"?Ki(n).map(o=>[e].concat(LC(o))).getOr([]):[e].concat(LC(n))),V0=(e,n)=>co(D_(n),z0(n),(o,r)=>{const a=Po(IC(e),je(wo,o)),u=Po(LC(e),je(wo,r));return a.isSome()&&u.isSome()}).getOr(!1),HC=(e,n,o,r)=>{const a=o,u=new ma(o,a),f=Qo(e.schema.getMoveCaretBeforeOnEnterElements(),(y,E)=>!xe(["td","th","table"],E.toLowerCase()));let b=o;do{if(vt(b)&&yt.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());a.nodeName==="BODY"&&(r?n.setStart(a,0):n.setEnd(a,a.childNodes.length))},fp=e=>{const n=e.selection.getSel();return Ne(n)&&n.rangeCount>0},U0=(e,n)=>{const o=mp(e);o.length>0?ie(o,r=>{const a=r.dom,u=e.dom.createRng();u.setStartBefore(a),u.setEndAfter(a),n(u,!0)}):n(e.selection.getRng(),!1)},W0=(e,n,o)=>{const r=sC(e,n);o(r),e.moveToBookmark(r)},Z0=e=>Bo(e==null?void 0:e.nodeType),j0=e=>Wt(e)&&!Ri(e)&&!au(e)&&!Rm(e),Xo=(e,n)=>{if(j0(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},cm=(e,n,o)=>{const{selection:r,dom:a}=e,u=r.getNode(),f=ls(u);W0(r,!0,()=>{n()}),f&&ls(u)&&a.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&rh(a,r)},rh=(e,n)=>{var o,r;const a=n.getRng(),{startContainer:u,startOffset:f}=a,b=n.getNode();if(!Xo(e,b)&&Wt(u)){const y=u.childNodes,E=e.getRoot();let N;if(f<y.length){const M=y[f];N=new ma(M,(o=e.getParent(M,e.isBlock))!==null&&o!==void 0?o:E)}else{const M=y[y.length-1];N=new ma(M,(r=e.getParent(M,e.isBlock))!==null&&r!==void 0?r:E),N.next(!0)}for(let M=N.current();M;M=N.next()){if(e.getContentEditable(M)==="false")return;if(vt(M)&&!K0(M)){a.setStart(M,0),n.setRng(a);return}}}},G0=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Wt(e)||!K0(e))return e}},q0=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Nu(e,n),ng=(e,n,o)=>e.schema.isValidChild(n,o),K0=(e,n=!1)=>{if(Ne(e)&&vt(e)){const o=n?e.data.replace(/ /g," "):e.data;return Il(o)}else return!1},zC=e=>Ne(e)&&vt(e)&&e.length===0,VC=(e,n)=>{const o="[data-mce-cef-wrappable]",r=y1(e),a=No(r)?o:`${o},${r}`;return Si(me.fromDom(n),a)},UC=(e,n)=>{const o=e.dom;return j0(n)&&o.getContentEditable(n)==="false"&&VC(e,n)&&o.select('[contenteditable="true"]',n).length===0},Km=(e,n)=>le(e)?e(n):(Ne(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),ch=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),Bx=(e,n)=>{if(Xt(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=pd(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},B1=(e,n,o)=>{const r=e.getStyle(n,o);return Bx(r,o)},WC=(e,n)=>{let o;return e.getParent(n,r=>Wt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Y0=(e,n,o)=>e.getParents(n,o,e.getRoot()),X0=(e,n,o)=>{const r=e.formatter.get(n);return Ne(r)&&Re(r,o)},ZC=(e,n)=>X0(e,n,r=>{const a=u=>le(u)||u.length>1&&u.charAt(0)==="%";return Re(["styles","attributes"],u=>Yo(r,u).exists(f=>{const b=dt(f)?f:dc(f);return Re(b,a)}))}),Px=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],a=u=>Qo(u,(f,b)=>Re(r,y=>y===b));return X0(e,n,u=>{const f=a(u);return X0(e,o,b=>{const y=a(b);return qr(f,y)})})},Ym=e=>Bs(e,"block"),J0=e=>Ym(e)&&e.wrapper===!0,$x=e=>Ym(e)&&e.wrapper!==!0,lu=e=>Bs(e,"selector"),pa=e=>Bs(e,"inline"),Xm=e=>lu(e)&&pa(e)&&Us(Yo(e,"mixed"),!0),jC=e=>lu(e)&&e.expand!==!1&&!pa(e),R_=e=>{const n=[];let o=e;for(;o;){if(vt(o)&&o.data!==na||o.childNodes.length>1)return[];Wt(o)&&n.push(o),o=o.firstChild}return n},Q0=e=>R_(e).length>0,GC=e=>au(e.dom)&&Q0(e.dom),gp=Ri,Fx=Y0,N_=K0,fR=q0,M_=e=>as(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Ix=(e,n)=>{let o=n;for(;o;){if(Wt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},Lx=(e,n,o,r)=>{const a=n.data;if(e){for(let u=o;u>0;u--)if(r(a.charAt(u-1)))return u}else for(let u=o;u<a.length;u++)if(r(a.charAt(u)))return u;return-1},qt=(e,n,o)=>Lx(e,n,o,r=>oh(r)||tg(r)),ba=(e,n,o)=>Lx(e,n,o,$C),P1=(e,n,o,r,a,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,y=(N,M,$)=>{const j=Zg(e),ee=a?j.backwards:j.forwards;return F.from(ee(N,M,(G,ne)=>gp(G.parentNode)?-1:(f=G,$(a,G,ne)),b))};return y(o,r,qt).bind(N=>u?y(N.container,N.offset+(a?-1:0),ba):F.some(N)).orThunk(()=>f?F.some({container:f,offset:a?0:f.length}):F.none())},va=(e,n,o,r,a)=>{const u=r[a];vt(r)&&No(r.data)&&u&&(r=u);const f=Fx(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const E=n[y];if(!(Ne(E.collapsed)&&E.collapsed!==o.collapsed)&&lu(E)&&e.is(f[b],E.selector))return f[b]}return r},iu=(e,n,o,r)=>{var a;let u=o;const f=e.getRoot(),b=n[0];if(Ym(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(a=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&a!==void 0?a:f;u=e.getParent(vt(o)?o.parentNode:o,E=>E!==f&&fR(e.schema,E),y)}if(u&&Ym(b)&&b.wrapper&&(u=Fx(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!ch(u,"br")););return u||o},qC=(e,n,o,r)=>{const a=o.parentNode;return Ne(o[r])?!1:a===n||Xt(a)||e.isBlock(a)?!0:qC(e,n,a,r)},ah=(e,n,o,r,a)=>{let u=o;const f=a?"previousSibling":"nextSibling",b=e.getRoot();if(vt(o)&&!N_(o)&&(a?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let y=u[f];y;y=y[f]){const E=vt(y)&&!qC(e,b,y,f);if(!gp(y)&&!M_(y)&&!N_(y,E))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},$1=e=>gp(e.parentNode)||gp(e),lh=(e,n,o,r=!1)=>{let{startContainer:a,startOffset:u,endContainer:f,endOffset:b}=n;const y=o[0];return Wt(a)&&a.hasChildNodes()&&(a=If(a,u),vt(a)&&(u=0)),Wt(f)&&f.hasChildNodes()&&(f=If(f,n.collapsed?b:b-1),vt(f)&&(b=f.data.length)),a=Ix(e,a),f=Ix(e,f),$1(a)&&(a=gp(a)?a:a.parentNode,n.collapsed?a=a.previousSibling||a:a=a.nextSibling||a,vt(a)&&(u=n.collapsed?a.length:0)),$1(f)&&(f=gp(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,vt(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(P1(e,e.getRoot(),a,u,!0,r).each(({container:M,offset:$})=>{a=M,u=$}),P1(e,e.getRoot(),f,b,!1,r).each(({container:M,offset:$})=>{f=M,b=$})),(pa(y)||y.block_expand)&&((!pa(y)||!vt(a)||u===0)&&(a=ah(e,o,a,u,!0)),(!pa(y)||!vt(f)||b===f.data.length)&&(f=ah(e,o,f,b,!1))),jC(y)&&(a=va(e,o,n,a,"previousSibling"),f=va(e,o,n,f,"nextSibling")),(Ym(y)||lu(y))&&(a=iu(e,o,a,"previousSibling"),f=iu(e,o,f,"nextSibling"),Ym(y)&&(e.isBlock(a)||(a=ah(e,o,a,u,!0),vt(a)&&(u=0)),e.isBlock(f)||(f=ah(e,o,f,b,!1),vt(f)&&(b=f.data.length)))),Wt(a)&&a.parentNode&&(u=e.nodeIndex(a),a=a.parentNode),Wt(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:a,startOffset:u,endContainer:f,endOffset:b}},F1=(e,n,o)=>{var r;const a=n.startOffset,u=If(n.startContainer,a),f=n.endOffset,b=If(n.endContainer,f-1),y=ne=>{const ge=ne[0];vt(ge)&&ge===u&&a>=ge.data.length&&ne.splice(0,1);const Ee=ne[ne.length-1];return f===0&&ne.length>0&&Ee===b&&vt(Ee)&&ne.splice(ne.length-1,1),ne},E=(ne,ge,Ee)=>{const Se=[];for(;ne&&ne!==Ee;ne=ne[ge])Se.push(ne);return Se},N=(ne,ge)=>e.getParent(ne,Ee=>Ee.parentNode===ge,ge),M=(ne,ge,Ee)=>{const Se=Ee?"nextSibling":"previousSibling";for(let Me=ne,lt=Me.parentNode;Me&&Me!==ge;Me=lt){lt=Me.parentNode;const At=E(Me===ne?Me:Me[Se],Se);At.length&&(Ee||At.reverse(),o(y(At)))}};if(u===b)return o(y([u]));const $=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return M(u,$,!0);if(e.isChildOf(b,u))return M(b,$);const j=N(u,$)||u,ee=N(b,$)||b;M(u,j,!0);const G=E(j===u?j:j.nextSibling,"nextSibling",ee===b?ee.nextSibling:ee);G.length&&o(y(G)),M(b,ee)},Hx=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],B_=e=>Ds(e)&&Mf(e)===na,P_=(e,n,o,r)=>da(n).fold(()=>"skipping",a=>r==="br"||B_(n)?"valid":Rk(n)?"existing":au(n.dom)?"caret":Re(Hx,u=>Si(n,u))?"valid-block":!ng(e,o,r)||!ng(e,J(a),o)?"invalid-child":"valid"),hp=(e,n)=>{const o=lh(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},ih=(e,n,o,r,a,u)=>{const{uid:f=n,...b}=o;wi(e,jh()),Fs(e,`${Gh()}`,f),Fs(e,`${em()}`,r);const{attributes:y={},classes:E=[]}=a(f,b);if(ua(e,y),lR(e,E),u){E.length>0&&Fs(e,`${Rf()}`,E.join(","));const N=yo(y);N.length>0&&Fs(e,`${tm()}`,N.join(","))}},KC=e=>{Cu(e,jh()),Ys(e,`${Gh()}`),Ys(e,`${em()}`),Ys(e,`${Vg()}`);const n=Er(e,`${tm()}`).map(r=>r.split(",")).getOr([]),o=Er(e,`${Rf()}`).map(r=>r.split(",")).getOr([]);ie(n,r=>Ys(e,r)),i1(e,o),Ys(e,`${Rf()}`),Ys(e,`${tm()}`)},YC=(e,n,o,r,a)=>{const u=me.fromTag("span",e);return ih(u,n,o,r,a,!1),u},fi=(e,n,o,r,a,u)=>{const f=[],b=YC(e.getDoc(),o,u,r,a),y=La(),E=()=>{y.clear()},N=()=>y.get().getOrThunk(()=>{const ee=Nf(b);return f.push(ee),y.set(ee),ee}),M=ee=>{ie(ee,$)},$=ee=>{switch(P_(e,ee,"span",J(ee))){case"invalid-child":{E();const ne=Oc(ee);M(ne),E();break}case"valid-block":{E(),ih(ee,o,u,r,a,!0);break}case"valid":{const ne=N();ld(ee,ne);break}}},j=ee=>{const G=Fe(ee,me.fromDom);M(G)};return F1(e.dom,n,ee=>{E(),j(ee)}),f},am=(e,n,o,r)=>{e.undoManager.transact(()=>{const a=e.selection,u=a.getRng(),f=mp(e).length>0,b=Wb("mce-annotation");if(u.collapsed&&!f&&hp(e,u),a.getRng().collapsed&&!f){const y=YC(e.getDoc(),b,r,n,o.decorate);ku(y,xc),a.getRng().insertNode(y.dom),a.select(y.dom)}else W0(a,!1,()=>{U0(e,y=>{fi(e,y,b,n,o.decorate,r)})})})},ev=e=>{const n=My();Ub(e,n);const o=Ny(e,n),r=Lr("span"),a=u=>{ie(u,f=>{r(f)?Fl(f):KC(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{am(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{Wg(e,F.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();a(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();xt(fS(e,u),(b,y)=>{a(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=fS(e,u);return Eo(f,b=>Fe(b,y=>y.dom))}}},Lu=e=>({getBookmark:je(Nx,e),moveToBookmark:je(qm,e)});Lu.isBookmarkNode=Ri;const tv=(e,n,o)=>o.collapsed?!1:Re(o.getClientRects(),r=>CS(r,e,n)),$_=(e,n)=>e.dispatch("PreProcess",n),nv=(e,n)=>e.dispatch("PostProcess",n),ov=e=>{e.dispatch("remove")},F_=e=>{e.dispatch("detach")},I_=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},L_=(e,n,o,r,a)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:a})},H_=(e,n,o,r,a)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:a})},sv=e=>{e.dispatch("PreInit")},zx=e=>{e.dispatch("PostRender")},z_=e=>{e.dispatch("Init")},rv=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Wa=(e,n,o)=>{e.dispatch(n,o)},uu=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},Ni=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},cv=(e,n)=>e.dispatch("BeforeSetContent",n),I1=(e,n)=>e.dispatch("SetContent",n),gR=(e,n)=>e.dispatch("BeforeGetContent",n),L1=(e,n)=>e.dispatch("GetContent",n),V_=(e,n)=>{e.dispatch("AutocompleterStart",n)},Vx=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},Ux=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},Wx=e=>{e.dispatch("AutocompleterEnd")},U_=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),Zx=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),av=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),jx=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),Ct={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Ct.metaKeyPressed(e),metaKeyPressed:e=>gn.os.isMacOS()||gn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Mi="data-mce-selected",Gx="table,img,figure.image,hr,video,span.mce-preview-object,details",XC=Math.abs,H1=Math.round,uh={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},JC=e=>e.type==="longpress"||e.type.indexOf("touch")===0,z1=(e,n)=>{const o=n.dom,r=n.getDoc(),a=document,u=n.getBody();let f,b,y,E,N,M,$,j,ee,G,ne,ge,Ee,Se,Me,lt,At;const Gt=Zt=>Ne(Zt)&&($h(Zt)||o.is(Zt,"figure.image")),Ge=Zt=>Ia(Zt)||o.hasClass(Zt,"mce-preview-object"),Le=(Zt,Oo)=>{if(JC(Zt)){const Io=Zt.touches[0];return Gt(Zt.target)&&!tv(Io.clientX,Io.clientY,Oo)}else return Gt(Zt.target)&&!tv(Zt.clientX,Zt.clientY,Oo)},ct=Zt=>{const Oo=Zt.target;Le(Zt,n.selection.getRng())&&!Zt.isDefaultPrevented()&&n.selection.select(Oo)},on=Zt=>o.hasClass(Zt,"mce-preview-object")&&Ne(Zt.firstElementChild)?[Zt,Zt.firstElementChild]:o.is(Zt,"figure.image")?[Zt.querySelector("img")]:[Zt],wn=Zt=>{const Oo=Ai(n);return!Oo||Zt.getAttribute("data-mce-resize")==="false"||Zt===n.getBody()?!1:o.hasClass(Zt,"mce-preview-object")&&Ne(Zt.firstElementChild)?Si(me.fromDom(Zt.firstElementChild),Oo):Si(me.fromDom(Zt),Oo)},Ro=(Zt,Oo)=>{if(Ge(Oo))return Zt.create("img",{src:gn.transparentSrc});if(Qi(Oo)){const Sa=Nn(E.name,"n")?vo:ds,Ns=Oo.cloneNode(!0);return Sa(Zt.select("tr",Ns)).each(sa=>{const Md=Zt.select("td,th",sa);Zt.setStyle(sa,"height",null),ie(Md,uf=>Zt.setStyle(uf,"height",null))}),Ns}else return Oo.cloneNode(!0)},Fo=(Zt,Oo,Io)=>{if(Ne(Io)){const Sa=on(Zt);ie(Sa,Ns=>{Ns.style[Oo]||!n.schema.isValid(Ns.nodeName.toLowerCase(),Oo)?o.setStyle(Ns,Oo,Io):o.setAttrib(Ns,Oo,""+Io)})}},_s=(Zt,Oo,Io)=>{Fo(Zt,"width",Oo),Fo(Zt,"height",Io)},Zs=Zt=>{let Oo,Io,Sa,Ns,sa;Oo=Zt.screenX-M,Io=Zt.screenY-$,Se=Oo*E[2]+G,Me=Io*E[3]+ne,Se=Se<5?5:Se,Me=Me<5?5:Me,(Gt(f)||Ge(f))&&g0(n)!==!1?Sa=!Ct.modifierPressed(Zt):Sa=Ct.modifierPressed(Zt),Sa&&(XC(Oo)>XC(Io)?(Me=H1(Se*ge),Se=H1(Me/ge)):(Se=H1(Me/ge),Me=H1(Se*ge))),_s(b,Se,Me),Ns=E.startPos.x+Oo,sa=E.startPos.y+Io,Ns=Ns>0?Ns:0,sa=sa>0?sa:0,o.setStyles(y,{left:Ns,top:sa,display:"block"}),y.innerHTML=Se+" &times; "+Me,E[2]<0&&b.clientWidth<=Se&&o.setStyle(b,"left",j+(G-Se)),E[3]<0&&b.clientHeight<=Me&&o.setStyle(b,"top",ee+(ne-Me)),Oo=u.scrollWidth-lt,Io=u.scrollHeight-At,Oo+Io!==0&&o.setStyles(y,{left:Ns-Oo,top:sa-Io}),Ee||(L_(n,f,G,ne,"corner-"+E.name),Ee=!0)},lc=()=>{const Zt=Ee;Ee=!1,Zt&&(Fo(f,"width",Se),Fo(f,"height",Me)),o.unbind(r,"mousemove",Zs),o.unbind(r,"mouseup",lc),a!==r&&(o.unbind(a,"mousemove",Zs),o.unbind(a,"mouseup",lc)),o.remove(b),o.remove(y),o.remove(N),Kc(f),Zt&&(H_(n,f,Se,Me,"corner-"+E.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},Kc=Zt=>{zt();const Oo=o.getPos(Zt,u),Io=Oo.x,Sa=Oo.y,Ns=Zt.getBoundingClientRect(),sa=Ns.width||Ns.right-Ns.left,Md=Ns.height||Ns.bottom-Ns.top;f!==Zt&&(Pt(),f=Zt,Se=Me=0);const uf=n.dispatch("ObjectSelected",{target:Zt});wn(Zt)&&!uf.isDefaultPrevented()?xt(uh,(Yl,Hi)=>{const Qu=ed=>{const Sn=on(f)[0];M=ed.screenX,$=ed.screenY,G=Sn.clientWidth,ne=Sn.clientHeight,ge=ne/G,E=Yl,E.name=Hi,E.startPos={x:sa*Yl[0]+Io,y:Md*Yl[1]+Sa},lt=u.scrollWidth,At=u.scrollHeight,N=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(N,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=Ro(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:Io,top:Sa,margin:0}),_s(b,sa,Md),b.removeAttribute(Mi),u.appendChild(b),o.bind(r,"mousemove",Zs),o.bind(r,"mouseup",lc),a!==r&&(o.bind(a,"mousemove",Zs),o.bind(a,"mouseup",lc)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},G+" &times; "+ne)};let zi=o.get("mceResizeHandle"+Hi);zi&&o.remove(zi),zi=o.add(u,"div",{id:"mceResizeHandle"+Hi,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Hi+"-resize; margin:0; padding:0"}),o.bind(zi,"mousedown",ed=>{ed.stopImmediatePropagation(),ed.preventDefault(),Qu(ed)}),Yl.elm=zi,o.setStyles(zi,{left:sa*Yl[0]+Io-zi.offsetWidth/2,top:Md*Yl[1]+Sa-zi.offsetHeight/2})}):Pt(!1)},Qs=a1(Kc,0),Pt=(Zt=!0)=>{Qs.cancel(),zt(),f&&Zt&&f.removeAttribute(Mi),xt(uh,(Oo,Io)=>{const Sa=o.get("mceResizeHandle"+Io);Sa&&(o.unbind(Sa),o.remove(Sa))})},vn=(Zt,Oo)=>o.isChildOf(Zt,Oo),is=Zt=>{if(Ee||n.removed||n.composing)return;const Oo=Zt.type==="mousedown"?Zt.target:e.getNode(),Io=Yi(me.fromDom(Oo),Gx).map(Ns=>Ns.dom).filter(Ns=>o.isEditable(Ns.parentElement)||Ns.nodeName==="IMG"&&o.isEditable(Ns)).getOrUndefined(),Sa=Ne(Io)?o.getAttrib(Io,Mi,"1"):"1";if(ie(o.select(`img[${Mi}],hr[${Mi}]`),Ns=>{Ns.removeAttribute(Mi)}),Ne(Io)&&vn(Io,u)&&n.hasFocus()){On();const Ns=e.getStart(!0);if(vn(Ns,Io)&&vn(e.getEnd(!0),Io)){o.setAttrib(Io,Mi,Sa),Qs.throttle(Io);return}}Pt()},zt=()=>{xt(uh,Zt=>{Zt.elm&&(o.unbind(Zt.elm),delete Zt.elm)})},On=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{On(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",is),n.on("keyup compositionend",Zt=>{f&&f.nodeName==="TABLE"&&is(Zt)}),n.on("hide blur",Pt),n.on("contextmenu longpress",ct,!0)}),n.on("remove",zt),{isResizable:wn,showResizeRect:Kc,hideResizeRect:Pt,updateResizeRect:is,destroy:()=>{Qs.cancel(),f=b=N=null}}},qx=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},W_=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},QC=(e,n,o)=>{const r=e.document.createRange();return qx(r,n),W_(r,o),r},V1=(e,n,o,r,a)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,a),u},og=yd.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Kx=(e,n,o)=>n(me.fromDom(o.startContainer),o.startOffset,me.fromDom(o.endContainer),o.endOffset),Yx=(e,n)=>n.match({domRange:o=>({ltr:Ke(o),rtl:F.none}),relative:(o,r)=>({ltr:Ve(()=>QC(e,o,r)),rtl:Ve(()=>F.some(QC(e,r,o)))}),exact:(o,r,a,u)=>({ltr:Ve(()=>V1(e,o,r,a,u)),rtl:Ve(()=>F.some(V1(e,a,u,o,r)))})}),Z_=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(a=>a.collapsed===!1).map(a=>og.rtl(me.fromDom(a.endContainer),a.endOffset,me.fromDom(a.startContainer),a.startOffset)).getOrThunk(()=>Kx(e,og.ltr,o)):Kx(e,og.ltr,o)},e2=(e,n)=>{const o=Yx(e,n);return Z_(e,o)};og.ltr,og.rtl;const gi={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},ml=(e,n,o)=>{var r;return F.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(a=>{if(a.offsetNode===null)return F.none();const u=e.createRange();return u.setStart(a.offsetNode,a.offset),u.collapse(),F.some(u)})},pp=(e,n,o)=>{var r;return F.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},hR=(e,n,o)=>e.caretPositionFromPoint?ml(e,n,o):e.caretRangeFromPoint?pp(e,n,o):F.none(),G_=(e,n,o)=>{const r=e.document;return hR(r,n,o).map(a=>gi.create(me.fromDom(a.startContainer),a.startOffset,me.fromDom(a.endContainer),a.endOffset))},t2=yd.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Jo=(e,n,o,r)=>e.fold(n,o,r),q_=e=>e.fold(Vn,Vn,Vn),K_=t2.before,Xx=t2.on,pR=t2.after,lm={before:K_,on:Xx,after:pR,cata:Jo,getStart:q_},lv=yd.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Y_=e=>lv.exact(e.start,e.soffset,e.finish,e.foffset),X_=e=>e.match({domRange:n=>me.fromDom(n.startContainer),relative:(n,o)=>lm.getStart(n),exact:(n,o,r,a)=>n}),Jx=lv.domRange,U1=lv.relative,n2=lv.exact,Qx=e=>{const n=X_(e);return zd(n)},bR=gi.create,bp={domRange:Jx,relative:U1,exact:n2,exactFromRange:Y_,getWin:Qx,range:bR},o2=(e,n)=>{const o=J(e);return o==="input"?lm.after(e):xe(["br","img"],o)?n===0?lm.before(e):lm.after(e):lm.on(e,n)},vR=(e,n)=>{const o=e.fold(lm.before,o2,lm.after),r=n.fold(lm.before,o2,lm.after);return bp.relative(o,r)},eT=(e,n,o,r)=>{const a=o2(e,n),u=o2(o,r);return bp.relative(a,u)},J_=e=>e.match({domRange:n=>{const o=me.fromDom(n.startContainer),r=me.fromDom(n.endContainer);return eT(o,n.startOffset,r,n.endOffset)},relative:vR,exact:eT}),i=(e,n)=>{const r=document.createDocumentFragment();return ie(e,a=>{r.appendChild(a.dom)}),me.fromDom(r)},m=e=>{const n=bp.getWin(e).dom,o=(a,u,f,b)=>V1(n,a,u,f,b),r=J_(e);return e2(n,r).match({ltr:o,rtl:o})},p=(e,n,o)=>G_(e,n,o),v=(e,n,o)=>{const r=zd(me.fromDom(o));return p(r.dom,e,n).map(a=>{const u=o.createRange();return u.setStart(a.start.dom,a.soffset),u.setEnd(a.finish.dom,a.foffset),u}).getOrUndefined()},T=(e,n)=>Ne(e)&&Ne(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,D=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},I=(e,n,o)=>D(e,n,o)!==null,Z=(e,n,o)=>I(e,n,r=>r.nodeName===o),Q=(e,n)=>li(e)&&!I(e,n,au),he=(e,n,o)=>{const r=n.parentNode;if(r){const a=new ma(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=a[o?"prev":"next"]();)if(as(u))return!0}return!1},De=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},St=(e,n)=>{let o=n;for(;o&&o!==e;){if(ls(o))return!0;o=o.parentNode}return!1},Ht=(e,n,o,r,a)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=a.parentNode;let y,E;if(!b)return F.none();const N=e.getParent(b,e.isBlock)||u;if(r&&as(a)&&n&&e.isEmpty(N))return F.some(Ze(b,e.nodeIndex(a)));const M=new ma(a,N);for(;E=M[r?"prev":"next"]();){if(e.getContentEditableParent(E)==="false"||Q(E,u))return F.none();if(vt(E)&&E.data.length>0)return Z(E,u,"A")?F.none():F.some(Ze(E,r?E.data.length:0));if(e.isBlock(E)||f[E.nodeName.toLowerCase()])return F.none();y=E}return Vc(y)?F.none():o&&y?F.some(Ze(y,0)):F.none()},Ft=(e,n,o,r)=>{const a=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const E=Wt(b)&&y===b.childNodes.length,N=e.schema.getNonEmptyElements();let M=o;if(li(b))return F.none();if(Wt(b)&&y>b.childNodes.length-1&&(M=!1),Cf(b)&&(b=a,y=0),b===a){if(M&&(u=b.childNodes[y>0?y-1:0],u&&(li(u)||N[u.nodeName]||Qi(u))))return F.none();if(b.hasChildNodes()){if(y=Math.min(!M&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=vt(b)&&E?b.data.length:0,!n&&b===a.lastChild&&Qi(b)||St(a,b)||li(b)||Ll(b))return F.none();if(b.hasChildNodes()&&!Qi(b)){u=b;const $=new ma(b,a);do{if(ls(u)||li(u)){f=!1;break}if(vt(u)&&u.data.length>0){y=M?0:u.data.length,b=u,f=!0;break}if(N[u.nodeName.toLowerCase()]&&!Tc(u)){y=e.nodeIndex(u),b=u.parentNode,M||y++,f=!0;break}}while(u=M?$.next():$.prev())}}}return n&&(vt(b)&&y===0&&Ht(e,E,n,!0,b).each($=>{b=$.container(),y=$.offset(),f=!0}),Wt(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&as(u)&&!De(u,"A")&&!he(e,u,!1)&&!he(e,u,!0)&&Ht(e,E,n,!0,u).each($=>{b=$.container(),y=$.offset(),f=!0}))),M&&!n&&vt(b)&&y===b.data.length&&Ht(e,E,n,!1,b).each($=>{b=$.container(),y=$.offset(),f=!0}),f&&b?F.some(Ze(b,y)):F.none()},Dt=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),a=Ze.fromRangeStart(n);return Ft(e,o,!0,r).each(u=>{(!o||!Ze.isAbove(a,u))&&r.setStart(u.container(),u.offset())}),o||Ft(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),T(n,r)?F.none():F.some(r)},an=(e,n)=>e.splitText(n),ht=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset;if(n===r&&vt(n)){if(o>0&&o<n.data.length)if(r=an(n,o),n=r.previousSibling,a>o){a=a-o;const u=an(r,a).previousSibling;n=r=u,a=u.data.length,o=0}else a=0}else if(vt(n)&&o>0&&o<n.data.length&&(n=an(n,o),o=0),vt(r)&&a>0&&a<r.data.length){const u=an(r,a).previousSibling;r=u,a=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:a}},kt=e=>({walk:(u,f)=>F1(e,u,f),split:ht,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=lh(e,u,[{inline:"span"}]),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:u=>Dt(e,u).fold(Pe,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});kt.compareRanges=T,kt.getCaretRangeFromPoint=v,kt.getSelectedNode=ii,kt.getNode=If;const qn=((e,n)=>{const o=(b,y)=>{if(!Bo(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const E=b.dom;Tu(E)&&(E.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const E=hc(b,e);return parseFloat(E)||0}return y},a=r,u=(b,y)=>ro(y,(E,N)=>{const M=hc(b,N),$=M===void 0?0:parseInt(M,10);return isNaN($)?E:E+$},0);return{set:o,get:r,getOuter:a,aggregate:u,max:(b,y,E)=>{const N=u(b,E);return y>N?y-N:0}}})("height",e=>{const n=e.dom;return rd(e)?n.getBoundingClientRect().height:n.offsetHeight}),bn=e=>qn.get(e),Mr=()=>me.fromDom(document),Ls=(e,n)=>e.view(n).fold(Ke([]),r=>{const a=e.owner(r),u=Ls(e,a);return[r].concat(u)}),cc=(e,n)=>{const o=n.owner(e);return Ls(n,o)};var dh=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?F.none():F.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(me.fromDom)},owner:e=>xu(e)});const mh=e=>{const n=Mr(),o=$n(n),r=cc(e,dh),a=fo(e),u=rs(r,(f,b)=>{const y=fo(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return ce(u.left+a.left+o.left,u.top+a.top+o.top)},Rs=e=>J(e)==="textarea",ya=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),_l=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Hu=(e,n)=>{const o=Oc(e);if(o.length===0||Rs(e))return{element:e,offset:n};if(n<o.length&&!Rs(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return Rs(r)?{element:e,offset:n}:J(r)==="img"?{element:r,offset:1}:Ds(r)?{element:r,offset:Mf(r).length}:{element:r,offset:Oc(r).length}}},Pi=(e,n)=>{const o=Mn(e),r=bn(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},vp=(e,n)=>{const o=Hu(e,n),r=me.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+na+"</span>");return _a(o.element,r),Pi(r,()=>Ws(r))},go=e=>Pi(me.fromDom(e),$e),$i=(e,n,o,r)=>{ss(e,(a,u)=>im(e,n,o,r),o)},zu=(e,n,o,r,a)=>{const u={elm:r.element.dom,alignToTop:a};if(ya(e,u))return;const f=$n(n).top;o(e,n,f,r,a),_l(e,u)},im=(e,n,o,r)=>{const a=me.fromDom(e.getBody()),u=me.fromDom(e.getDoc());Dc(a);const f=vp(me.fromDom(o.startContainer),o.startOffset);zu(e,u,n,f,r),f.cleanup()},Gc=(e,n,o,r)=>{const a=me.fromDom(e.getDoc());zu(e,a,o,go(n),r)},ss=(e,n,o)=>{const r=o.startContainer,a=o.startOffset,u=o.endContainer,f=o.endOffset;n(me.fromDom(r),me.fromDom(u));const b=e.dom.createRng();b.setStart(r,a),b.setEnd(u,f),e.selection.setRng(o)},s2=(e,n,o,r,a)=>{const u=n.pos;if(r)Bn(u.left,u.top,a);else{const f=u.top-o+n.height;Bn(-e.getBody().getBoundingClientRect().left,f,a)}},r2=(e,n,o,r,a,u)=>{const f=r+o,b=a.pos.top,y=a.bottom,E=y-b>=r;b<o?s2(e,a,r,u!==!1,n):b>f?s2(e,a,r,E?u!==!1:u===!0,n):y>f&&!E&&s2(e,a,r,u===!0,n)},iv=(e,n,o,r,a)=>{const u=zd(n).dom.innerHeight;r2(e,n,o,u,r,a)},tT=(e,n,o,r,a)=>{const u=zd(n).dom.innerHeight;r2(e,n,o,u,r,a);const f=mh(r.element),b=Ji(window);f.top<b.y?nr(r.element,a!==!1):f.top>b.bottom&&nr(r.element,a===!0)},Jm=(e,n,o)=>$i(e,iv,n,o),fh=(e,n,o)=>Gc(e,n,iv,o),yp=(e,n,o)=>$i(e,tT,n,o),XI=(e,n,o)=>Gc(e,n,tT,o),JI=(e,n,o)=>{(e.inline?fh:XI)(e,n,o)},c2=(e,n,o)=>{(e.inline?Jm:yp)(e,n,o)},uv=(e,n=!1)=>e.dom.focus({preventScroll:n}),W1=e=>{const n=Ql(e).dom;return e.dom===n.activeElement},Q_=(e=Mr())=>F.from(e.dom.activeElement).map(me.fromDom),yR=e=>Q_(Ql(e)).filter(n=>e.dom.contains(n.dom)),CR=(e,n)=>{const o=Ds(n)?Mf(n).length:Oc(n).length+1;return e>o?o:e<0?0:e},QI=e=>bp.range(e.start,CR(e.soffset,e.start),e.finish,CR(e.foffset,e.finish)),wR=(e,n)=>!qd(n.dom)&&(nc(e,n)||wo(e,n)),eA=e=>n=>wR(e,n.start)&&wR(e,n.finish),Sj=e=>e.inline||gn.browser.isFirefox(),e6=e=>bp.range(me.fromDom(e.startContainer),e.startOffset,me.fromDom(e.endContainer),e.endOffset),SR=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?F.none():F.from(n.getRangeAt(0))).map(e6)},tA=e=>{const n=zd(e);return SR(n.dom).filter(eA(e))},nA=(e,n)=>F.from(n).filter(eA(e)).map(QI),oA=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),F.some(n)}catch{return F.none()}},a2=e=>{const n=Sj(e)?tA(me.fromDom(e.getBody())):F.none();e.bookmark=n.isSome()?n:e.bookmark},nT=e=>(e.bookmark?e.bookmark:F.none()).bind(o=>nA(me.fromDom(e.getBody()),o)).bind(oA),xR=e=>{nT(e).each(n=>e.selection.setRng(n))},TR={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},ER=(e,n)=>(Bo(n)||(n=0),setTimeout(e,n)),t6=(e,n)=>(Bo(n)||(n=0),setInterval(e,n)),Vu={setEditorTimeout:(e,n,o)=>ER(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=t6(()=>{e.removed?clearInterval(r):n()},o);return r}},kR=e=>e.type==="nodechange"&&e.selectionChange,_R=(e,n)=>{const o=()=>{n.throttle()};wr.DOM.bind(document,"mouseup",o),e.on("remove",()=>{wr.DOM.unbind(document,"mouseup",o)})},AR=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},OR=(e,n)=>{AR(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{kR(o)||a2(e)})},n6=e=>{const n=a1(()=>{a2(e)},0);e.on("init",()=>{e.inline&&_R(e,n),OR(e,n)}),e.on("remove",()=>{n.cancel()})};let dv;const rA=wr.DOM,o6=e=>Wt(e)&&TR.isEditorUIElement(e),cA=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},oT=(e,n)=>{const o=C1(e);return rA.getParent(n,a=>o6(a)||(o?e.dom.is(a,o):!1))!==null},aA=e=>{try{const n=Ql(me.fromDom(e.getElement()));return Q_(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},s6=(e,n)=>{const o=n.editor;n6(o);const r=(a,u)=>{if(x0(a)&&a.inline!==!0){const f=me.fromDom(a.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const a=e.focusedEditor;cA(aA(o))&&r(o,wi),a!==o&&(a&&a.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:a}),o.focus(!0))}),o.on("focusout",()=>{Vu.setEditorTimeout(o,()=>{const a=e.focusedEditor;(!cA(aA(o))||a!==o)&&r(o,Cu),!oT(o,aA(o))&&a===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),dv||(dv=a=>{const u=e.activeEditor;u&&hf(a).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!oT(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},rA.bind(document,"focusin",dv))},sT=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&dv&&(rA.unbind(document,"focusin",dv),dv=null)},DR=e=>{e.on("AddEditor",je(s6,e)),e.on("RemoveEditor",je(sT,e))},r6=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),RR=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,NR=e=>e.collapsed?F.from(If(e.startContainer,e.startOffset)).map(me.fromDom):F.none(),c6=(e,n)=>NR(n).bind(o=>pS(o)?F.some(o):nc(e,o)?F.none():F.some(e)),MR=(e,n)=>{c6(me.fromDom(e.getBody()),n).bind(o=>Ua(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},rT=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},a6=e=>W1(e)||yR(e).isSome(),l6=e=>Ne(e.iframeElement)&&W1(me.fromDom(e.iframeElement)),BR=e=>{const n=e.getBody();return n&&a6(me.fromDom(n))},PR=e=>{const n=Ql(me.fromDom(e.getElement()));return Q_(n).filter(o=>!cA(o.dom)&&oT(e,o.dom)).isSome()},gh=e=>e.inline?BR(e):l6(e),$R=e=>gh(e)||PR(e),i6=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const a=f=>{nT(f).each(b=>{f.selection.setRng(b),r=b})};!gh(e)&&e.hasEditableRoot()&&a(e);const u=r6(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){RR(e,u)||rT(o),rT(u),e.hasEditableRoot()||a(e),MR(e,r),l2(e);return}e.inline||(gn.browser.isOpera()||rT(o),e.getWin().focus()),(gn.browser.isFirefox()||e.inline)&&(rT(o),MR(e,r)),l2(e)},l2=e=>e.editorManager.setActive(e),u6=(e,n)=>{e.removed||(n?l2(e):i6(e))},lA=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),iA=(e,n,o,r,a)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return F.from(u).map(me.fromDom).map(b=>!r||!n.collapsed?qa(b,a(b,f)).getOr(b):b).bind(b=>ts(b)?F.some(b):da(b).filter(ts)).map(b=>b.dom).getOr(e)},uA=(e,n,o=!1)=>iA(e,n,!0,o,(r,a)=>Math.min(Ud(r),a)),FR=(e,n,o=!1)=>iA(e,n,!1,o,(r,a)=>a>0?a-1:a),IR=(e,n)=>{const o=e;for(;e&&vt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},d6=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const a=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-a<2&&o.hasChildNodes()&&(f=o.childNodes[a]),vt(o)&&vt(r)&&(o.length===a?o=IR(o.nextSibling,!0):o=o.parentNode,u===0?r=IR(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=vt(f)?f.parentNode:f;return ei(b)?b:e},m6=(e,n,o,r)=>{const a=[],u=e.getRoot(),f=e.getParent(o||uA(u,n,n.collapsed),e.isBlock),b=e.getParent(r||FR(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&a.push(f),f&&b&&f!==b){let y;const E=new ma(f,u);for(;(y=E.next())&&y!==b;)e.isBlock(y)&&a.push(y)}return b&&f!==b&&b!==u&&a.push(b),a},cT=(e,n,o)=>F.from(n).bind(r=>F.from(r.parentNode).map(a=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(a,u),f.setEnd(a,u+1),o&&(HC(e,f,r,!0),HC(e,f,r,!1)),f})),aT=(e,n)=>Fe(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),LR={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},i2=(e,n,o)=>{const r=o?"lastChild":"firstChild",a=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[a];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[a],u)return u}},HR=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Il(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},zR=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class hi{static create(n,o){const r=new hi(n,LR[n]||1);return o&&xt(o,(a,u)=>{r.attr(u,a)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!oe(n))return Ne(n)&&xt(n,(u,f)=>{r.attr(f,u)}),r;const a=r.attributes;if(a){if(o!==void 0){if(o===null){if(n in a.map){delete a.map[n];let u=a.length;for(;u--;)if(a[u].name===n)return a.splice(u,1),r}return r}if(n in a.map){let u=a.length;for(;u--;)if(a[u].name===n){a[u].value=o;break}}else a.push({name:n,value:o});return a.map[n]=o,r}return a.map[n]}}clone(){const n=this,o=new hi(n.name,n.type),r=n.attributes;if(r){const a=[];a.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(a[a.length]={name:b.name,value:b.value},a.map[b.name]=b.value)}o.attributes=a}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,a=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):a&&(a.next=r),o.lastChild===n?(o.lastChild=a,a&&(a.next=null)):r&&(r.prev=a),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const a=o.parent||this;return r?(o===a.firstChild?a.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===a.lastChild?a.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=a,n}getAll(n){const o=this,r=[];for(let a=o.firstChild;a;a=i2(a,o))a.name===n&&r.push(a);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let a=n.firstChild;a;a=i2(a,n))o.push(a);let r=o.length;for(;r--;){const a=o[r];a.parent=a.firstChild=a.lastChild=a.next=a.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var a;const u=this;let f=u.firstChild;if(zR(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||zR(f))return!1}if(f.type===8||f.type===3&&!HR(f)||f.type===3&&f.parent&&o[f.parent.name]&&Il((a=f.value)!==null&&a!==void 0?a:"")||r&&r(f))return!1}while(f=i2(f,u));return!0}walk(n){return i2(this,null,n)}}const f6=yt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),VR=e=>oe(e.nodeValue)&&e.nodeValue.includes(na),UR=e=>`${e.length===0?"":`${Fe(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,g6=(e,n)=>n.querySelectorAll(UR(e)),WR=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>VR(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),ZR=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(VR(n)){const o=n.parentNode;return o&&fn(f6,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),h6=e=>WR(e).nextNode()!==null,p6=e=>ZR(e).nextNode()!==null,b6=(e,n)=>n.querySelector(UR(e))!==null,v6=(e,n)=>{ie(g6(e,n),o=>{const r=me.fromDom(o);Hc(r,"data-mce-bogus")==="all"?Ws(r):ie(e,a=>{ur(r,a)&&Ys(r,a)})})},u2=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},jR=A(u2,WR),GR=A(u2,ZR),qR=(e,n)=>{const o=[{condition:je(b6,n),action:je(v6,n)},{condition:h6,action:jR},{condition:p6,action:GR}];let r=e,a=!1;return ie(o,({condition:u,action:f})=>{u(r)&&(a||(r=e.cloneNode(!0),a=!0),f(r))}),r},KR=e=>{const n=Aa(e,"[data-mce-bogus]");ie(n,o=>{Hc(o,"data-mce-bogus")==="all"?Ws(o):ai(o)?(_a(o,me.fromText(Mh)),Ws(o)):Fl(o)})},YR=e=>{const n=Aa(e,"input");ie(n,o=>{Ys(o,"name")})},y6=(e,n)=>{const o=Ha(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},C6=(e,n)=>{const o=e.getDoc(),r=Ql(me.fromDom(e.getBody())),a=me.fromTag("div",o);Fs(a,"data-mce-bogus","all"),uo(a,{position:"fixed",left:"-9999999px",top:"0"}),ku(a,n.innerHTML),KR(a),YR(a);const u=Oh(r);Rr(u,a);const f=wl(a.dom.innerText);return Ws(a),f},w6=(e,n,o)=>{let r;return n.format==="raw"?r=yt.trim(wl(qR(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=C6(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=y6(e,e.serializer.serialize(o,n)),n.format!=="text"&&!jb(me.fromDom(o))&&oe(r)?yt.trim(r):r},XR=(e,n)=>F.from(e.getBody()).fold(Ke(n.format==="tree"?new hi("body",11):""),o=>w6(e,n,o)),JR=yt.makeMap,dA=e=>{const n=[];e=e||{};const o=e.indent,r=JR(e.indent_before||""),a=JR(e.indent_after||""),u=gd.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,E)=>{if(o&&r[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let N=0,M=y.length;N<M;N++){const $=y[N];n.push(" ",$.name,'="',u($.value,!0),'"')}if(!E||f?n[n.length]=">":n[n.length]=" />",E&&o&&a[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&a[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(b,y)=>{b.length>0&&(n[n.length]=y?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},hh=(e={},n=Jd())=>{const o=dA(e);return e.validate="validate"in e?e.validate:!0,{serialize:a=>{const u=e.validate,f={3:y=>{var E;o.text((E=y.value)!==null&&E!==void 0?E:"",y.raw)},8:y=>{var E;o.comment((E=y.value)!==null&&E!==void 0?E:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var E;o.doctype((E=y.value)!==null&&E!==void 0?E:"")},4:y=>{var E;o.cdata((E=y.value)!==null&&E!==void 0?E:"")},11:y=>{let E=y;if(E=E.firstChild)do b(E);while(E=E.next)}};o.reset();const b=y=>{var E;const N=f[y.type];if(N)N(y);else{const M=y.name,$=M in n.getVoidElements();let j=y.attributes;if(u&&j&&j.length>1){const ee=[];ee.map={};const G=n.getElementRule(y.name);if(G){for(let ne=0,ge=G.attributesOrder.length;ne<ge;ne++){const Ee=G.attributesOrder[ne];if(Ee in j.map){const Se=j.map[Ee];ee.map[Ee]=Se,ee.push({name:Ee,value:Se})}}for(let ne=0,ge=j.length;ne<ge;ne++){const Ee=j[ne].name;if(!(Ee in ee.map)){const Se=j.map[Ee];ee.map[Ee]=Se,ee.push({name:Ee,value:Se})}}j=ee}}if(o.start(M,j,$),oc(M))oe(y.value)&&o.text(y.value,!0),o.end(M);else if(!$){let ee=y.firstChild;if(ee){(M==="pre"||M==="textarea")&&ee.type===3&&((E=ee.value)===null||E===void 0?void 0:E[0])===`
`&&o.text(`
`,!0);do b(ee);while(ee=ee.next)}o.end(M)}}};return a.type===1&&!e.inner?b(a):a.type===3?f[3](a):f[11](a),o.getContent()}}},QR=new Set;ie(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{QR.add(n)});const eN=new Set;ie(["background-color"],n=>{eN.add(n)});const tN=["font","text-decoration","text-emphasis"],S6=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),mv=(e,n)=>yo(S6(e,n)),x6=e=>QR.has(e),T6=e=>eN.has(e),nN=(e,n)=>Re(mv(e,n),o=>x6(o)),E6=(e,n)=>nN(e,n)&&Re(mv(e,n),o=>T6(o)),k6=e=>Bt(e,n=>Re(tN,o=>Nn(n,o))),_6=(e,n,o)=>{const r=mv(e,n),a=mv(e,o),u=f=>{var b,y;const E=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",N=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return Dn(E)&&Dn(N)&&E!==N};return Re(r,f=>{const b=y=>Re(y,E=>E===f);if(!b(a)&&b(tN)){const y=k6(a);return Re(y,u)}else return u(f)})},oN=(e,n,o)=>F.from(o.container()).filter(vt).exists(r=>{const a=e?0:-1;return n(r.data.charAt(o.offset()+a))}),mA=je(oN,!0,tg),fA=je(oN,!1,tg),A6=e=>{const n=e.container();return vt(n)&&(n.data.length===0||Uy(n.data)&&Lu.isBookmarkNode(n.parentNode))},Cp=(e,n)=>o=>kC(e?0:-1,o).filter(n).isSome(),sN=e=>$h(e)&&hc(me.fromDom(e),"display")==="block",rN=e=>ls(e)&&!Mg(e),O6=Cp(!0,sN),En=Cp(!1,sN),fv=Cp(!0,Ia),gv=Cp(!1,Ia),cN=Cp(!0,Qi),d2=Cp(!1,Qi),wp=Cp(!0,rN),Sp=Cp(!1,rN),D6=e=>e.slice(0,-1),R6=(e,n,o)=>nc(n,e)?D6(qi(e,r=>o(r)||wo(r,n))):[],aN=(e,n)=>R6(e,n,Pe),um=(e,n)=>[e].concat(aN(e,n)),lT=(e,n,o)=>NC(e,n,o,A6),xj=e=>n=>e.isBlock(J(n)),lN=(e,n,o)=>Po(um(me.fromDom(n.container()),e),xj(o)),to=(e,n,o,r)=>lT(e,n.dom,o).forall(a=>lN(n,o,r).fold(()=>!Di(a,o,n.dom),u=>!Di(a,o,n.dom)&&nc(u,me.fromDom(a.container())))),iN=(e,n,o,r)=>lN(n,o,r).fold(()=>lT(e,n.dom,o).forall(a=>!Di(a,o,n.dom)),a=>lT(e,a.dom,o).isNone()),ho=je(iN,!1),gA=je(iN,!0),Tj=je(to,!1),Ej=je(to,!0),N6=e=>R0(e).exists(ai),hA=(e,n,o,r)=>{const a=Bt(um(me.fromDom(o.container()),n),f=>r.isBlock(J(f))),u=vo(a).getOr(n);return jl(e,u.dom,o).filter(N6)},uN=(e,n,o)=>R0(n).exists(ai)||hA(!0,e,n,o).isSome(),iT=(e,n,o)=>Tx(n).exists(ai)||hA(!1,e,n,o).isSome(),dN=je(hA,!1),Kn=je(hA,!0),mN=e=>Ze.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),fN=(e,n,o)=>{const r=Bt(um(me.fromDom(n.container()),e),a=>o.isBlock(J(a)));return vo(r).getOr(e)},gN=(e,n,o)=>mN(n)?fA(n):fA(n)||mi(fN(e,n,o).dom,n).exists(fA),hv=(e,n,o)=>mN(n)?mA(n):mA(n)||Gl(fN(e,n,o).dom,n).exists(mA),hN=e=>xe(["pre","pre-wrap"],e),pA=e=>R0(e).bind(n=>kr(n,ts)).exists(n=>hN(hc(n,"white-space"))),M6=(e,n)=>mi(e.dom,n).isNone(),B6=(e,n)=>Gl(e.dom,n).isNone(),pN=(e,n,o)=>M6(e,n)||B6(e,n)||ho(e,n,o)||gA(e,n,o)||iT(e,n,o)||uN(e,n,o),P6=e=>Ne(e)&&ls(e)&&yx(e),$6=(e,n)=>o=>P6(new ma(o,e)[n]()),kj=(e,n)=>{const o=Gl(e.dom,n).getOr(n),r=$6(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},F6=(e,n)=>{const o=mi(e.dom,n).getOr(n),r=$6(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},bN=(e,n,o)=>pA(n)?!1:pN(e,n,o)||gN(e,n,o)||hv(e,n,o),m2=(e,n,o)=>pA(n)?!1:ho(e,n,o)||Tj(e,n,o)||iT(e,n,o)||gN(e,n,o)||F6(e,n),I6=e=>{const n=e.container(),o=e.offset();return vt(n)&&o<n.data.length?Ze(n,o+1):e},pv=(e,n,o)=>pA(n)?!1:gA(e,n,o)||Ej(e,n,o)||uN(e,n,o)||hv(e,n,o)||kj(e,n),bA=(e,n,o)=>m2(e,n,o)||pv(e,I6(n),o),_o=(e,n)=>oh(e.charAt(n)),vA=(e,n)=>tg(e.charAt(n)),uT=e=>{const n=e.container();return vt(n)&&Cn(n.data,xc)},vN=e=>{const n=e.split("");return Fe(n,(o,r)=>oh(o)&&r>0&&r<n.length-1&&$C(n[r-1])&&$C(n[r+1])?" ":o).join("")},yA=(e,n,o,r)=>{const a=n.data,u=Ze(n,0);return!o&&_o(a,0)&&!bA(e,u,r)?(n.data=" "+a.slice(1),!0):o&&vA(a,0)&&m2(e,u,r)?(n.data=xc+a.slice(1),!0):!1},yN=e=>{const n=e.data,o=vN(n);return o!==n?(e.data=o,!0):!1},CA=(e,n,o,r)=>{const a=n.data,u=Ze(n,a.length-1);return!o&&_o(a,a.length-1)&&!bA(e,u,r)?(n.data=a.slice(0,-1)+" ",!0):o&&vA(a,a.length-1)&&pv(e,u,r)?(n.data=a.slice(0,-1)+xc,!0):!1},CN=(e,n,o)=>{const r=n.container();if(!vt(r))return F.none();if(uT(n)){const a=yA(e,r,!1,o)||yN(r)||CA(e,r,!1,o);return Tr(a,n)}else if(bA(e,n,o)){const a=yA(e,r,!0,o)||CA(e,r,!0,o);return Tr(a,n)}else return F.none()},L6=e=>{const n=me.fromDom(e.getBody());e.selection.isCollapsed()&&CN(n,Ze.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},wA=(e,n,o,r)=>{if(o===0)return;const a=me.fromDom(e),u=yr(a,E=>r.isBlock(J(E))).getOr(a),f=e.data.slice(n,n+o),b=n+o>=e.data.length&&pv(u,Ze(e,e.data.length),r),y=n===0&&m2(u,Ze(e,0),r);e.replaceData(n,o,xi(f,4,y,b))},dT=(e,n,o)=>{const r=e.data.slice(n),a=r.length-_c(r).length;wA(e,n,a,o)},SA=(e,n,o)=>{const r=e.data.slice(0,n),a=r.length-Lc(r).length;wA(e,n-a,a,o)},xA=(e,n,o,r,a=!0)=>{const u=Lc(e.data).length,f=a?e:n,b=a?n:e;return a?f.appendData(b.data):f.insertData(0,b.data),Ws(me.fromDom(b)),r&&dT(f,u,o),f},H6=(e,n)=>{const o=e.container(),r=e.offset();return!Ze.isTextPosition(e)&&o===n.parentNode&&r>Ze.before(n).offset()},z6=(e,n)=>H6(n,e)?Ze(n.container(),n.offset()-1):n,V6=e=>vt(e)?Ze(e,0):Ze.before(e),U6=e=>vt(e)?Ze(e,e.data.length):Ze.after(e),wN=e=>ki(e.previousSibling)?F.some(U6(e.previousSibling)):e.previousSibling?cu(e.previousSibling):F.none(),mT=e=>ki(e.nextSibling)?F.some(V6(e.nextSibling)):e.nextSibling?Ua(e.nextSibling):F.none(),TA=(e,n)=>F.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>mi(e,Ze.before(o))).orThunk(()=>Gl(e,Ze.after(n))),W6=(e,n)=>Gl(e,Ze.after(n)).orThunk(()=>mi(e,Ze.before(n))),Z6=(e,n)=>wN(n).orThunk(()=>mT(n)).orThunk(()=>TA(e,n)),j6=(e,n)=>mT(n).orThunk(()=>wN(n)).orThunk(()=>W6(e,n)),G6=(e,n,o)=>e?j6(n,o):Z6(n,o),q6=(e,n,o)=>G6(e,n,o).map(je(z6,o)),SN=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},K6=e=>n=>n.dom===e,Y6=(e,n)=>n&&fn(e.schema.getBlockElements(),J(n)),xN=(e,n,o)=>{if(lr(e,n)){const r=me.fromHtml('<br data-mce-bogus="1">');return o?ie(Oc(n),a=>{GC(a)||Ws(a)}):id(n),Rr(n,r),F.some(Ze.before(r.dom))}else return F.none()},X6=(e,n,o,r)=>{const a=Ki(e).filter(Ds),u=Pa(e).filter(Ds);return Ws(e),Jc(a,u,n,(f,b,y)=>{const E=f.dom,N=b.dom,M=E.data.length;return xA(E,N,o,r),y.container()===N?Ze(E,M):y}).orThunk(()=>(r&&(a.each(f=>SA(f.dom,f.dom.length,o)),u.each(f=>dT(f.dom,0,o))),n))},J6=(e,n)=>fn(e.schema.getTextInlineElements(),J(n)),Sd=(e,n,o,r=!0,a=!1)=>{const u=q6(n,e.getBody(),o.dom),f=yr(o,je(Y6,e),K6(e.getBody())),b=X6(o,u,e.schema,J6(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(y=>xN(e.schema,y,a)).fold(()=>{r&&SN(e,n,b)},y=>{r&&SN(e,n,F.some(y))})},Q6=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,TN=e=>Q6.test(e),Z1=(e,n)=>Si(me.fromDom(n),jS(e))&&!Nu(e.schema,n)&&e.dom.isEditable(n),EN=e=>{var n;return wr.DOM.getStyle(e,"direction",!0)==="rtl"||TN((n=e.textContent)!==null&&n!==void 0?n:"")},kN=(e,n,o)=>Bt(wr.DOM.getParents(o.container(),"*",n),e),ph=(e,n,o)=>{const r=kN(e,n,o);return F.from(r[r.length-1])},_N=(e,n,o)=>{const r=Jf(n,e),a=Jf(o,e);return Ne(r)&&r===a},AN=e=>Wy(e)||Yh(e),pc=(e,n)=>{const o=n.container(),r=n.offset();return e?zm(o)?vt(o.nextSibling)?Ze(o.nextSibling,0):Ze.after(o):Wy(n)?Ze(o,r+1):n:zm(o)?vt(o.previousSibling)?Ze(o.previousSibling,o.previousSibling.data.length):Ze.before(o):Yh(n)?Ze(o,r-1):n},ON=je(pc,!0),DN=je(pc,!1),RN=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},eL=e=>{e.execCommand("delete")},fT=e=>RN(e,"Delete"),xp=e=>RN(e,"ForwardDelete"),tL=e=>n=>Us(da(n),e,wo),nL=e=>Pu(e)||jg(e),Or=(e,n)=>nc(e,n)?kr(n,nL,tL(e)):F.none(),bv=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},j1=(e,n,o)=>co(Ua(o),cu(o),(r,a)=>{const u=pc(!0,r),f=pc(!1,a),b=pc(!1,n);return e?Gl(o,b).exists(y=>y.isEqual(f)&&n.isEqual(u)):mi(o,b).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),NN=e=>(Tn(e)?Ki(e):sd(e)).bind(NN).orThunk(()=>F.some(e)),G1=(e,n,o,r=!0)=>{var a;n.deleteContents();const u=NN(o).getOr(o),f=me.fromDom((a=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&a!==void 0?a:o.dom);if(f.dom===e.getBody()?bv(e,r):lr(e.schema,f,{checkRootAsContent:!1})&&(ru(f),r&&e.selection.setCursorLocation(f.dom,0)),!wo(o,f)){const b=Us(da(f),o)?[]:km(f);ie(b.concat(Oc(o)),y=>{!wo(y,f)&&!nc(y,f)&&lr(e.schema,y)&&Ws(y)})}},xd=e=>n=>wo(e,n),q1=e=>Aa(e,"td,th"),sr=(e,n)=>M1(me.fromDom(e),n),f2=e=>co(e.startTable,e.endTable,(n,o)=>{const r=Nh(n,u=>wo(u,o)),a=Nh(o,u=>wo(u,n));return!r&&!a?e:{...e,startTable:r?F.none():e.startTable,endTable:a?F.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),MN=e=>f2(e),BN=(e,n)=>{const o=sr(e.startContainer,n),r=sr(e.endContainer,n),a=o.isSome(),u=r.isSome(),f=co(o,r,wo).getOr(!1);return MN({startTable:o,endTable:r,isStartInTable:a,isEndInTable:u,isSameTable:f,isMultiTable:!f&&a&&u})},g2=(e,n)=>({start:e,end:n}),EA=(e,n,o)=>({rng:e,table:n,cells:o}),K1=yd.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),vv=(e,n)=>Yi(me.fromDom(e),"td,th",n),h2=e=>!wo(e.start,e.end),gT=(e,n)=>M1(e.start,n).bind(o=>M1(e.end,n).bind(r=>Tr(wo(o,r),o))),PN=(e,n)=>!h2(e)&&gT(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),$N=(e,n)=>{const o=vv(e.startContainer,n),r=vv(e.endContainer,n);return co(o,r,g2)},FN=e=>n=>M1(n,e).bind(o=>ds(q1(o)).map(r=>g2(n,r))),IN=e=>n=>M1(n,e).bind(o=>vo(q1(o)).map(r=>g2(r,n))),hT=e=>n=>gT(n,e).map(o=>EA(n,o,q1(o))),Y1=(e,n,o,r)=>{if(o.collapsed||!e.forall(h2))return F.none();if(n.isSameTable){const a=e.bind(hT(r));return F.some({start:a,end:a})}else{const a=vv(o.startContainer,r),u=vv(o.endContainer,r),f=a.bind(FN(r)).bind(hT(r)),b=u.bind(IN(r)).bind(hT(r));return F.some({start:f,end:b})}},kA=(e,n)=>Ms(e,o=>wo(o,n)),p2=e=>co(kA(e.cells,e.rng.start),kA(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),oL=(e,n,o)=>e.exists(r=>PN(r,o)&&V0(r.start,n)),LN=(e,n)=>{const{startTable:o,endTable:r}=n,a=e.cloneRange();return o.each(u=>a.setStartAfter(u.dom)),r.each(u=>a.setEndBefore(u.dom)),a},HN=(e,n,o,r)=>Y1(e,n,o,r).bind(({start:a,end:u})=>a.or(u)).bind(a=>{const{isSameTable:u}=n,f=p2(a).getOr([]);if(u&&a.cells.length===f.length)return F.some(K1.fullTable(a.table));if(f.length>0){if(u)return F.some(K1.partialTable(f,F.none()));{const b=LN(o,n);return F.some(K1.partialTable(f,F.some({...n,rng:b})))}}else return F.none()}),zN=(e,n,o,r)=>Y1(e,n,o,r).bind(({start:a,end:u})=>{const f=a.bind(p2).getOr([]),b=u.bind(p2).getOr([]);if(f.length>0&&b.length>0){const y=LN(o,n);return F.some(K1.multiTable(f,b,y))}else return F.none()}),VN=(e,n)=>{const o=xd(e),r=$N(n,o),a=BN(n,o);return oL(r,n,o)?r.map(u=>K1.singleCellTable(n,u.start)):a.isMultiTable?zN(r,a,n,o):HN(r,a,n,o)},b2=e=>ie(e,n=>{Ys(n,"contenteditable"),ru(n)}),UN=(e,n)=>F.from(e.dom.getParent(n,e.dom.isBlock)).map(me.fromDom),WN=(e,n,o)=>{o.each(r=>{n?Ws(r):(ru(r),e.selection.setCursorLocation(r.dom,0))})},pT=(e,n,o,r)=>{const a=o.cloneRange();r?(a.setStart(o.startContainer,o.startOffset),a.setEndAfter(n.dom.lastChild)):(a.setStartBefore(n.dom.firstChild),a.setEnd(o.endContainer,o.endOffset)),bT(e,a,n,!1).each(u=>u())},_A=e=>{const n=mp(e),o=me.fromDom(e.selection.getNode());Bg(o.dom)&&lr(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&Re(n,r=>wo(r,o))&&Fs(o,"data-mce-selected","1")},AA=(e,n,o)=>F.some(()=>{const r=e.selection.getRng(),a=o.bind(({rng:u,isStartInTable:f})=>{const b=UN(e,f?u.endContainer:u.startContainer);u.deleteContents(),WN(e,f,b.filter(je(lr,e.schema)));const y=f?n[0]:n[n.length-1];return pT(e,y,r,f),lr(e.schema,y)?F.none():F.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);b2(a),_A(e)}),ZN=(e,n,o,r)=>F.some(()=>{const a=e.selection.getRng(),u=n[0],f=o[o.length-1];pT(e,u,a,!0),pT(e,f,a,!1);const b=lr(e.schema,u)?n:n.slice(1),y=lr(e.schema,f)?o:o.slice(0,-1);b2(b.concat(y)),r.deleteContents(),_A(e)}),bT=(e,n,o,r=!0)=>F.some(()=>{G1(e,n,o,r)}),jN=(e,n)=>F.some(()=>Sd(e,!1,n)),GN=(e,n,o)=>VN(n,o).bind(r=>r.fold(je(bT,e),je(jN,e),je(AA,e),je(ZN,e))),qN=(e,n)=>v2(e,n),OA=(e,n,o,r)=>vT(n,r).fold(()=>GN(e,n,o),a=>qN(e,a)),KN=(e,n,o)=>{const r=me.fromDom(e.getBody()),a=e.selection.getRng();return o.length!==0?AA(e,o,F.none()):OA(e,r,a,n)},DA=(e,n)=>Po(um(n,e),d1),vT=(e,n)=>Po(um(n,e),Lr("caption")),YN=(e,n,o,r,a)=>eh(o,e.getBody(),a).bind(u=>DA(n,me.fromDom(u.getNode())).bind(f=>wo(f,r)?F.none():F.some($e))),v2=(e,n)=>F.some(()=>{ru(n),e.selection.setCursorLocation(n.dom,0)}),XN=(e,n,o,r)=>Ua(e.dom).bind(a=>cu(e.dom).map(u=>n?o.isEqual(a)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(a))).getOr(!0),RA=(e,n)=>v2(e,n),yT=(e,n,o)=>vT(e,me.fromDom(o.getNode())).fold(()=>F.some($e),r=>Tr(!wo(r,n),$e)),NA=(e,n,o,r,a)=>eh(o,e.getBody(),a).fold(()=>F.some($e),u=>XN(r,o,a,u)?RA(e,r):yT(n,r,u)),CT=(e,n,o,r)=>{const a=Ze.fromRangeStart(e.selection.getRng());return DA(o,r).bind(u=>lr(e.schema,u,{checkRootAsContent:!1})?v2(e,u):YN(e,o,n,u,a))},JN=(e,n,o,r)=>{const a=Ze.fromRangeStart(e.selection.getRng());return lr(e.schema,r)?v2(e,r):NA(e,o,n,r,a)},y2=(e,n)=>e?cN(n):d2(n),MA=(e,n)=>{const o=Ze.fromRangeStart(e.selection.getRng());return y2(n,o)||jl(n,e.getBody(),o).exists(r=>y2(n,r))},C2=(e,n,o)=>{const r=me.fromDom(e.getBody());return vT(r,o).fold(()=>CT(e,n,r,o).orThunk(()=>Tr(MA(e,n),$e)),a=>JN(e,n,r,a))},w2=(e,n)=>{const o=me.fromDom(e.selection.getStart(!0)),r=mp(e);return e.selection.isCollapsed()&&r.length===0?C2(e,n,o):KN(e,o,r)},Tp=(e,n)=>{let o=n;for(;o&&o!==e;){if(tt(o)||ls(o))return o;o=o.parentNode}return null},yv=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],BA=yt.each,S2=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=E=>{const N={};return BA(n.getAttribs(E),M=>{const $=M.nodeName.toLowerCase();$!=="style"&&!a($)&&(N[$]=n.getAttrib(E,$))}),N},y=(E,N)=>{for(const M in E)if(fn(E,M)){const $=N[M];if(sn($)||E[M]!==$)return!1;delete N[M]}for(const M in N)if(fn(N,M))return!1;return!0};return Wt(u)&&Wt(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!Ri(u)&&!Ri(f)},a=u=>Re(yv,f=>Nn(u,f))||o.has(u);return{compare:r,isAttributeInternal:a}},X1=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),Ep=e=>e.name==="summary",QN=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},eM=(e,n,o,r)=>{const a=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===a){const y=r.nodes[a];y?y.nodes.push(o):r.nodes[a]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],y=b.name;if(y in o.attributes.map){const E=r.attributes[y];E?E.nodes.push(o):r.attributes[y]={filter:b,nodes:[o]}}}},sL=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&QN(o,a=>{eM(e,n,a,r)}),r},PA=(e,n)=>{const o=(r,a)=>{xt(r,u=>{const f=xr(u.nodes);ie(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const E=f[y];(!(a?E.attr(u.filter.name)!==void 0:E.name===u.filter.name)||Xt(E.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},$A=(e,n,o,r={})=>{const a=sL(e,n,o);PA(a,r)},FA=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new hi("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new hi("#text",3)).value=xc},rL=e=>{var n;return bh(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===xc},bh=(e,n)=>{const o=e==null?void 0:e.firstChild;return Ne(o)&&o===e.lastChild&&o.name===n},J1=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},wT=(e,n,o,r)=>r.isEmpty(n,o,a=>J1(e,a)),nl=(e,n)=>Ne(e)&&(n(e)||e.name==="br"),cL=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return F.from(n)},IA=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const a of r)o&&!n.isValidChild(o.name,a.name)&&IA(a,n,o);e.unwrap()}},Qm=(e,n,o,r=$e)=>{const a=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=yt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),y=new Set,E=N=>N!==o&&!b[N.name];for(let N=0;N<e.length;N++){const M=e[N];let $,j,ee;if(!M.parent||y.has(M))continue;if(a[M.name]&&M.parent.name==="li"){let ne=M.next;for(;ne&&a[ne.name];){ne.name="li",y.add(ne),M.parent.insert(ne,M.parent);ne=ne.next}M.unwrap();continue}const G=[M];for($=M.parent;$&&!n.isValidChild($.name,M.name)&&E($);$=$.parent)G.push($);if($&&G.length>1)if(tM(n,M,$))IA(M,n);else{G.reverse(),j=G[0].clone(),r(j);let ne=j;for(let ge=0;ge<G.length-1;ge++){n.isValidChild(ne.name,G[ge].name)&&ge>0?(ee=G[ge].clone(),r(ee),ne.append(ee)):ee=ne;for(let Ee=G[ge].firstChild;Ee&&Ee!==G[ge+1];){const Se=Ee.next;ee.append(Ee),Ee=Se}ne=ee}wT(n,u,f,j)?$.insert(M,G[0],!0):($.insert(j,G[0],!0),$.insert(M,j)),$=G[0],(wT(n,u,f,$)||bh($,"br"))&&$.empty().remove()}else if(M.parent){if(M.name==="li"){let ne=M.prev;if(ne&&(ne.name==="ul"||ne.name==="ol")){ne.append(M);continue}if(ne=M.next,ne&&(ne.name==="ul"||ne.name==="ol")&&ne.firstChild){ne.insert(M,ne.firstChild,!0);continue}const ge=new hi("ul",1);r(ge),M.wrap(ge);continue}if(n.isValidChild(M.parent.name,"div")&&n.isValidChild("div",M.name)){const ne=new hi("div",1);r(ne),M.wrap(ne)}else IA(M,n)}}},ys=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},tM=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&ys(o,"a")?!0:Ep(o)&&X1(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,aL=(e,n,o,r)=>{const a=document.createRange();return a.setStart(e,n),a.setEnd(o,r),a},lL=e=>{const n=Ze.fromRangeStart(e),o=Ze.fromRangeEnd(e),r=e.commonAncestorContainer;return jl(!1,r,o).map(a=>!Di(n,o,r)&&Di(n,a,r)?aL(n.container(),n.offset(),a.container(),a.offset()):e).getOr(e)},gr=e=>e.collapsed?e:lL(e),nM=e=>Ne(e.firstChild)&&e.firstChild===e.lastChild,x2=e=>e.name==="br"||e.value===xc,T2=(e,n)=>e.getBlockElements()[n.name]&&nM(n)&&x2(n.firstChild),E2=(e,n)=>{const o=e.getNonEmptyElements();return Ne(n)&&(n.isEmpty(o)||T2(e,n))},k2=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),E2(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},oM=e=>{var n,o;const r=e.firstChild,a=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),a&&a.id==="mce_marker"&&((o=a.parentNode)===null||o===void 0||o.removeChild(a)),e},_j=(e,n,o)=>{const r=n.serialize(o),a=e.createFragment(r);return oM(a)},Aj=e=>{var n;return Bt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},Oj=e=>e.data===xc||as(e),Dj=e=>Ne(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&Oj(e.firstChild),iL=e=>!e.firstChild||Dj(e),Rj=e=>e.length>0&&iL(e[e.length-1])?e.slice(0,-1):e,LA=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},uL=(e,n)=>!!LA(e,n),Nj=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},dL=(e,n)=>{const o=Ze.before(e),a=wd(n).next(o);return a?a.toRange():null},ac=(e,n)=>{const o=Ze.after(e),a=wd(n).prev(o);return a?a.toRange():null},sM=(e,n,o,r)=>{const a=Nj(e,r),u=e.parentNode;return u&&(u.insertBefore(a[0],e),yt.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(a[1],e),u.removeChild(e)),ac(n[n.length-1],o)},rM=(e,n,o)=>{const r=e.parentNode;return r&&yt.each(n,a=>{r.insertBefore(a,e)}),dL(e,o)},mL=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),ac(n[0],o)),fL=(e,n,o,r)=>{const a=_j(n,e,r),u=LA(n,o.startContainer),f=Rj(Aj(a.firstChild)),b=1,y=2,E=n.getRoot(),N=M=>{const $=Ze.fromRangeStart(o),j=wd(n.getRoot()),ee=M===b?j.prev($):j.next($),G=ee==null?void 0:ee.getNode();return G?LA(n,G)!==u:!0};return u?N(b)?rM(u,f,E):N(y)?mL(u,f,E,n):sM(u,f,E,o):null},gL=["pre"],du=(e,n,o,r)=>{var a;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,E=xe(gL,u.name);if(y&&E){const N=u.attr("contenteditable")!=="false",M=((a=e.getParent(o,e.isBlock))===null||a===void 0?void 0:a.nodeName.toLowerCase())===u.name,$=F.from(Tp(r,o)).forall(tt);return N&&M&&$}else return!1},Td=Bg,hL=(e,n,o)=>{if(Ne(o)){const r=e.getParent(n.endContainer,Td);return o===r&&V0(me.fromDom(o),n)}else return!1},HA=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const a=o.firstChild,u=o.lastChild;!a||a===u&&a.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},zA=(e,n,o)=>{F.from(e.getParent(n,"td,th")).map(me.fromDom).each(r=>Gb(r,o))},pL=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const a=e.getBody(),u=S2(e),f="*[data-mce-fragment]",b=r.select(f);yt.each(b,y=>{const E=$=>Ne(o[$.nodeName.toLowerCase()]),N=$=>$.childNodes.length===1;if(($=>!(nN(r,$)||E6(r,$)))(y)&&E(y)&&N(y)){const $=mv(r,y),j=(ge,Ee)=>As(ge,Se=>xe(Ee,Se)),ee=ge=>N(y)&&r.is(ge,f)&&E(ge)&&(ge.nodeName===y.nodeName&&j($,mv(r,ge))||ee(ge.children[0])),G=ge=>Ne(ge)&&ge!==a&&(u.compare(y,ge)||G(ge.parentElement)),ne=ge=>Ne(ge)&&ge!==a&&r.is(ge,f)&&(_6(r,y,ge)||ne(ge.parentElement));(ee(y.children[0])||G(y.parentElement)&&!ne(y.parentElement))&&r.remove(y,!0)}})}},bL=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},_2=e=>{yt.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},ST=e=>!!e.getAttribute("data-mce-fragment"),VA=(e,n)=>Ne(n)&&!e.schema.getVoidElements()[n.nodeName],vL=(e,n)=>{var o,r,a;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=Tp(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let E=f.createRng();const N=n.previousSibling;if(vt(N)){E.setStart(N,(r=(o=N.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const j=n.nextSibling;vt(j)&&(N.appendData(j.data),(a=j.parentNode)===null||a===void 0||a.removeChild(j))}else E.setStartBefore(n),E.setEndBefore(n);const M=j=>{let ee=Ze.fromRangeStart(j);return ee=wd(e.getBody()).next(ee),ee==null?void 0:ee.toRange()},$=f.getParent(n,f.isBlock);if(f.remove(n),$&&f.isEmpty($)){const j=Td($);id(me.fromDom($)),E.setStart($,0),E.setEnd($,0),!j&&!ST($)&&(u=M(E))?(E=u,f.remove($)):f.add($,f.create("br",j?{}:{"data-mce-bogus":"1"}))}b.setRng(E)},ef=e=>{const n=e.dom,o=gr(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,Td);hL(n,o,r)?bT(e,o,me.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&vt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},yL=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return F.some(n);return F.none()},CL=(e,n,o)=>{var r;return Re(o.children(),X1)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},Ed=(e,n,o)=>{var r,a;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,E=hh({validate:!0},e.schema),N='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=wl(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,N);let M=u.getRng();const $=M.startContainer,j=e.getBody();$===j&&u.isCollapsed()&&f.isBlock(j.firstChild)&&VA(e,j.firstChild)&&f.isEmpty(j.firstChild)&&(M=f.createRng(),M.setStart(j.firstChild,0),M.setEnd(j.firstChild,0),u.setRng(M)),u.isCollapsed()||ef(e);const ee=u.getNode(),G={context:ee.nodeName.toLowerCase(),data:o.data,insert:!0},ne=b.parse(n,G);if(o.paste===!0&&k2(e.schema,ne)&&uL(f,ee))return M=fL(E,f,u.getRng(),ne),M&&u.setRng(M),n;o.paste===!0&&du(f,ne,ee,e.getBody())&&((r=ne.firstChild)===null||r===void 0||r.unwrap()),bL(ne);let ge=ne.lastChild;if(ge&&ge.attr("id")==="mce_marker"){const Ee=ge;for(ge=ge.prev;ge;ge=ge.walk(!0))if(ge.type===3||!f.isBlock(ge.name)){ge.parent&&e.schema.isValidChild(ge.parent.name,"span")&&ge.parent.insert(Ee,ge,ge.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(ee),!G.invalid&&!CL(f,ee,ne))n=E.serialize(ne),HA(e,n,ee);else{e.selection.setContent(N);let Ee=u.getNode(),Se;const Me=e.getBody();for(Cf(Ee)?Ee=Se=Me:Se=Ee;Se&&Se!==Me;)Ee=Se,Se=Se.parentNode;n=Ee===Me?Me.innerHTML:f.getOuterHTML(Ee);const lt=b.parse(n),At=yL(lt),Gt=At.bind(cL).getOr(lt);At.each(on=>on.replace(ne));const Ge=ne.children(),Le=(a=ne.parent)!==null&&a!==void 0?a:lt;ne.unwrap();const ct=Bt(Ge,on=>tM(e.schema,on,Le));Qm(ct,e.schema,Gt),$A(b.getNodeFilters(),b.getAttributeFilters(),lt),n=E.serialize(lt),Ee===Me?f.setHTML(Me,n):f.setOuterHTML(Ee,n)}return pL(e,y),vL(e,f.get("mce_marker")),_2(e.getBody()),zA(f,u.getStart(),e.schema),Ul(e.schema,e.getBody(),u.getStart()),n},kp=e=>e instanceof hi,dm=e=>{gh(e)&&Ua(e.getBody()).each(n=>{const o=n.getNode(),r=Qi(o)?Ua(o).getOr(n):n;e.selection.setRng(r.toRange())})},UA=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&dm(e)},Xs=(e,n,o,r)=>{if(o=wl(o),o.length===0||/^\s+$/.test(o)){const a='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+a+"</li>");const u=Ha(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=a,o=e.dom.createHTML(u,Zf(e),o)):o||(o=a),UA(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=hh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const a=jb(me.fromDom(n))?o:yt.trim(o);return UA(e,a,r.no_selection),{content:a,html:a}}},Cv=(e,n,o,r)=>{$A(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const a=hh({validate:!1},e.schema).serialize(o),u=wl(jb(me.fromDom(n))?a:yt.trim(a));return UA(e,u,r.no_selection),{content:o,html:u}},xT=(e,n,o)=>F.from(e.getBody()).map(r=>kp(n)?Cv(e,r,n,o):Xs(e,r,n,o)).getOr({content:n,html:kp(o.content)?"":o.content}),WA=e=>le(e)?e:Pe,ZA=(e,n,o)=>{let r=e.dom;const a=WA(o);for(;r.parentNode;){r=r.parentNode;const u=me.fromDom(r),f=n(u);if(f.isSome())return f;if(a(u))break}return F.none()},A2=(e,n,o)=>{const r=n(e),a=WA(o);return r.orThunk(()=>a(e)?F.none():ZA(e,n,a))},jA=ch,TT=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let a=0;a<r.length;a++){const u=r[a];if(lu(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},GA=(e,n,o,r,a)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>TT(e,b,o)?!0:b.parentNode===u||!!mm(e,b,o,r,!0));return!!mm(e,f,o,r,a)},O2=(e,n,o)=>pa(o)&&jA(n,o.inline)||Ym(o)&&jA(n,o.block)?!0:lu(o)?Wt(n)&&e.is(n,o.selector):!1,qA=(e,n,o,r,a,u)=>{const f=o[r],b=r==="attributes";if(le(o.onmatch))return o.onmatch(n,o,r);if(f){if(rl(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):B1(e,n,f[y]))return!0}else for(const y in f)if(fn(f,y)){const E=b?e.getAttrib(n,y):B1(e,n,y),N=Km(f[y],u),M=Xt(E)||No(E);if(M&&Xt(N))continue;if(a&&M&&!o.exact||(!a||o.exact)&&!jA(E,Bx(N,y)))return!1}}return!0},mm=(e,n,o,r,a)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Wt(n))for(let b=0;b<u.length;b++){const y=u[b];if(O2(e.dom,n,y)&&qA(f,n,y,"attributes",a,r)&&qA(f,n,y,"styles",a,r)){const E=y.classes;if(E){for(let N=0;N<E.length;N++)if(!e.dom.hasClass(n,Km(E[N],r)))return}return y}}},ET=(e,n,o,r,a)=>{if(r)return GA(e,r,n,o,a);if(r=e.selection.getNode(),GA(e,r,n,o,a))return!0;const u=e.selection.getStart();return!!(u!==r&&GA(e,u,n,o,a))},kT=(e,n,o)=>{const r=[],a={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const y=n[b];!a[y]&&mm(e,f,y,o)&&(a[y]=!0,r.push(y))}},e.dom.getRoot()),r},wL=(e,n)=>{const o=a=>wo(a,me.fromDom(e.getBody())),r=(a,u)=>mm(e,a.dom,u)?F.some(u):F.none();return F.from(e.selection.getStart(!0)).bind(a=>A2(me.fromDom(a),u=>ec(n,f=>r(u,f)),o)).getOrNull()},SL=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const a=e.selection.getStart(),u=Y0(r,a);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!lu(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},xL=(e,n,o)=>ro(o,(r,a)=>{const u=ZC(e,a);return e.formatter.matchNode(n,a,{},u)?r.concat([a]):r},[]),D2=na,TL=(e,n)=>e.importNode(n,!0),KA=e=>{if(e){const n=new ma(e,e);for(let o=n.current();o;o=n.next())if(vt(o))return o}return null},YA=e=>{const n=me.fromTag("span");return ua(n,{id:$0,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Rr(n,me.fromText(D2)),n},EL=e=>{const n=KA(e);return n&&n.data.charAt(0)===D2&&n.deleteData(0,1),n},_T=(e,n,o)=>{const r=e.dom,a=e.selection;if(Q0(n))Sd(e,!1,me.fromDom(n),o,!0);else{const u=a.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,E=u.endContainer,N=u.endOffset,M=EL(n);r.remove(n,!0),b===M&&y>0&&u.setStart(M,y-1),E===M&&N>0&&u.setEnd(M,N-1),f&&r.isEmpty(f)&&ru(me.fromDom(f)),a.setRng(u)}},AT=(e,n,o)=>{const r=e.dom,a=e.selection;if(n)_T(e,n,o);else if(n=th(e.getBody(),a.getStart()),!n)for(;n=r.get($0);)_T(e,n,o)},kL=(e,n,o)=>{var r,a;const u=e.dom,f=u.getParent(o,je(q0,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(m1(me.fromDom(o)),u.isEmpty(o)?(a=o.parentNode)===null||a===void 0||a.replaceChild(n,o):u.insertAfter(n,o))},cM=(e,n)=>(e.appendChild(n),n),XA=(e,n)=>{var o;const r=rs(e,(u,f)=>cM(u,f.cloneNode(!1)),n),a=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return cM(r,a.createTextNode(D2))},_L=(e,n,o,r,a,u)=>{const f=e.formatter,b=e.dom,y=Bt(yo(f.get()),M=>M!==r&&!Cn(M,"removeformat")),E=xL(e,o,y);if(Bt(E,M=>!Px(e,M,r)).length>0){const M=o.cloneNode(!1);return b.add(n,M),f.remove(r,a,M,u),b.remove(M),F.some(M)}else return F.none()},JA=e=>Hy(e,Mf(e).replace(new RegExp(`${xc}$`)," ")),Uu=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&Ki(me.fromDom(n)).each(r=>{Ds(r)?JA(r):_g(r,a=>Ds(a)).each(a=>{Ds(a)&&JA(a)})})};e.once("input",r=>{r.data&&!tg(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},AL=(e,n,o)=>{let r;const a=e.selection,u=e.formatter.get(n);if(!u)return;const f=a.getRng();let b=f.startOffset;const E=f.startContainer.nodeValue;r=th(e.getBody(),a.getStart());const N=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(E&&b>0&&b<E.length&&N.test(E.charAt(b))&&N.test(E.charAt(b-1))){const M=a.getBookmark();f.collapse(!0);let $=lh(e.dom,f,u);$=ht($),e.formatter.apply(n,o,$),a.moveToBookmark(M)}else{let M=r?KA(r):null;(!r||(M==null?void 0:M.data)!==D2)&&(r=TL(e.getDoc(),YA(!0).dom),M=r.firstChild,f.insertNode(r),b=1,Uu(e,r)),e.formatter.apply(n,o,r),a.setCursorLocation(M,b)}},aM=(e,n,o,r)=>{const a=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),E=y.startContainer,N=y.startOffset;let M=E;vt(E)&&(N!==E.data.length&&(f=!0),M=M.parentNode);const $=[];let j;for(;M;){if(mm(e,M,n,o,r)){j=M;break}M.nextSibling&&(f=!0),$.push(M),M=M.parentNode}if(j)if(f){const ee=u.getBookmark();y.collapse(!0);let G=lh(a,y,b,!0);G=ht(G),e.formatter.remove(n,o,G,r),u.moveToBookmark(ee)}else{const ee=th(e.getBody(),j),G=Ne(ee)?a.getParents(j.parentNode,et,ee):[],ne=YA(!1).dom;kL(e,ne,ee??j);const ge=_L(e,ne,j,n,o,r),Ee=XA([...$,...ge.toArray(),...G],ne);ee&&_T(e,ee,Ne(ee)),u.setCursorLocation(Ee,1),Uu(e,ne),a.isEmpty(j)&&a.remove(j)}},QA=(e,n,o)=>{const r=e.selection,a=e.getBody();AT(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===D2&&AT(e,th(a,r.getStart()),!0),(n===37||n===39)&&AT(e,th(a,r.getStart()),!0)},e4=e=>vt(e)&&zo(e.data,xc),lM=e=>{e.on("mouseup keydown",n=>{QA(e,n.keyCode,e4(e.selection.getRng().endContainer))})},t4=e=>{const n=YA(!1),o=XA(e,n.dom);return{caretContainer:n,caretPosition:Ze(o,0)}},iM=(e,n)=>{const{caretContainer:o,caretPosition:r}=t4(n);return _a(me.fromDom(e),o),Ws(me.fromDom(e)),r},OL=(e,n)=>{const{caretContainer:o,caretPosition:r}=t4(n);return e.insertNode(o.dom),r},OT=(e,n)=>{if(au(n.dom))return!1;const o=e.schema.getTextInlineElements();return fn(o,J(n))&&!au(n.dom)&&!Rm(n.dom)},wv={},Wu=Ti(["pre"]),DL=(e,n)=>{wv[e]||(wv[e]=[]),wv[e].push(n)},RL=(e,n)=>{fn(wv,e)&&ie(wv[e],o=>{o(n)})};DL("pre",e=>{const n=e.selection.getRng(),o=a=>u=>{const f=u.previousSibling;return Wu(f)&&xe(a,f)},r=(a,u)=>{const f=me.fromDom(u),b=xu(f).dom;Ws(f),Eu(me.fromDom(a),[me.fromTag("br",b),me.fromTag("br",b),...Oc(f)])};if(!n.collapsed){const a=e.selection.getSelectedBlocks(),u=Bt(Bt(a,Wu),o(a));ie(u,f=>{r(f.previousSibling,f)})}});const NL=["fontWeight","fontStyle","color","fontSize","fontFamily"],n4=e=>ut(e.styles)&&Re(yo(e.styles),n=>xe(NL,n)),ML=e=>Po(e,n=>pa(n)&&n.inline==="span"&&n4(n)),BL=(e,n)=>{const o=e.get(n);return dt(o)?ML(o):F.none()},uM=(e,n)=>mi(n,Ze.fromRangeStart(e)).isNone(),DT=(e,n)=>Gl(n,Ze.fromRangeEnd(e)).exists(o=>!as(o.getNode())||Gl(n,o).isSome())===!1,fm=e=>n=>Bb(n)&&e.isEditable(n),o4=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return uM(o,n[0])&&DT(o,n[0])?n:[];{const r=vo(n).filter(f=>uM(o,f)).toArray(),a=ds(n).filter(f=>DT(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(a)}},RT=e=>Bt(o4(e),fm(e.dom)),NT=e=>Bt(e.getSelectedBlocks(),fm(e.dom)),s4=yt.each,MT=e=>Wt(e)&&!Ri(e)&&!au(e)&&!Rm(e),dM=(e,n)=>{for(let o=e;o;o=o[n]){if(vt(o)&&Dn(o.data))return e;if(Wt(o)&&!Ri(o))return o}return e},r4=(e,n,o)=>{const r=S2(e),a=ei(n)&&e.dom.isEditable(n),u=ei(o)&&e.dom.isEditable(o);if(a&&u){const f=dM(n,"previousSibling"),b=dM(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const E=y;y=y.nextSibling,f.appendChild(E)}return e.dom.remove(b),yt.each(yt.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},BT=(e,n,o,r)=>{var a;if(r&&n.merge_siblings!==!1){const u=(a=r4(e,G0(r),r))!==null&&a!==void 0?a:r;r4(e,u,G0(u,!0))}},PL=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";s4(e.select(r,o),a=>{MT(a)&&e.isEditable(a)&&s4(n.styles,(u,f)=>{e.setStyle(a,f,"")})})}},PT=(e,n,o)=>{s4(e.childNodes,r=>{MT(r)&&(n(r)&&o(r),r.hasChildNodes()&&PT(r,n,o))})},$L=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},_p=(e,n)=>o=>!!(o&&B1(e,o,n)),c4=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),$L(e,r)},Q1=yd.generate([{keep:[]},{rename:["name"]},{removed:[]}]),mM=/^(src|href|style)$/,a4=yt.each,$T=ch,FL=e=>/^(TR|TH|TD)$/.test(e.nodeName),fM=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),gM=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],a=n[o?"startOffset":"endOffset"];if(Wt(r)){const u=r.childNodes.length-1;!o&&a&&a--,r=r.childNodes[a>u?u:a]}return vt(r)&&o&&a>=r.data.length&&(r=new ma(r,e.getBody()).next()||r),vt(r)&&!o&&a===0&&(r=new ma(r,e.getBody()).prev()||r),r},l4=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return FL(e)&&r?e.nodeName==="TR"&&r[o]||r:e},i4=(e,n,o,r)=>{var a;const u=e.create(o,r);return(a=n.parentNode)===null||a===void 0||a.insertBefore(u,n),u.appendChild(n),u},FT=(e,n,o,r,a)=>{const u=me.fromDom(n),f=me.fromDom(e.create(r,a)),b=o?Vd(u):Tg(u);return Eu(f,b),o?(_a(u,f),bf(f,u)):(ul(u,f),Rr(f,u)),f.dom},eb=(e,n)=>n.links&&e.nodeName==="A",hM=(e,n,o)=>{const r=n.parentNode;let a;const u=e.dom,f=Ha(e);Ym(o)&&r===u.getRoot()&&(!o.list_block||!$T(n,o.list_block))&&ie(xr(n.childNodes),b=>{ng(e,f,b.nodeName.toLowerCase())?a?a.appendChild(b):(a=i4(u,b,f),u.setAttribs(a,Zf(e))):a=null}),!(Xm(o)&&!$T(o.inline,n))&&u.remove(n,!0)},pM=(e,n,o)=>Bo(e)?{name:n,value:null}:{name:e,value:Km(n,o)},R2=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},u4=(e,n,o,r,a)=>{let u=!1;a4(o.styles,(f,b)=>{const{name:y,value:E}=pM(b,f,r),N=Bx(E,y);(o.remove_similar||W(E)||!Wt(a)||$T(B1(e,a,y),N))&&e.setStyle(n,y,""),u=!0}),u&&R2(e,n)},bM=(e,n,o)=>{n==="removeformat"?ie(NT(e.selection),r=>{ie(NL,a=>e.dom.setStyle(r,a,"")),R2(e.dom,r)}):BL(e.formatter,n).each(r=>{ie(NT(e.selection),a=>u4(e.dom,a,r,o,null))})},vM=(e,n,o,r,a)=>{const u=e.dom,f=S2(e),b=e.schema;if(pa(n)&&eu(b,n.inline)&&Nu(b,r)&&r.parentElement===e.getBody())return hM(e,r,n),Q1.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!O2(u,r,n)&&!eb(r,n))return Q1.keep();const y=r,E=n.preserve_attributes;if(pa(n)&&n.remove==="all"&&dt(E)){const N=Bt(u.getAttribs(y),M=>xe(E,M.name.toLowerCase()));if(u.removeAllAttribs(y),ie(N,M=>u.setAttrib(y,M.name,M.value)),N.length>0)return Q1.rename("span")}if(n.remove!=="all"){u4(u,y,n,o,a),a4(n.attributes,(M,$)=>{const{name:j,value:ee}=pM($,M,o);if(n.remove_similar||W(ee)||!Wt(a)||$T(u.getAttrib(a,j),ee)){if(j==="class"){const G=u.getAttrib(y,j);if(G){let ne="";if(ie(G.split(/\s+/),ge=>{/mce\-\w+/.test(ge)&&(ne+=(ne?" ":"")+ge)}),ne){u.setAttrib(y,j,ne);return}}}if(mM.test(j)&&y.removeAttribute("data-mce-"+j),j==="style"&&Ti(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute(j),u.setStyle(y,"list-style-type","none");return}j==="class"&&y.removeAttribute("className"),y.removeAttribute(j)}}),a4(n.classes,M=>{M=Km(M,o),(!Wt(a)||u.hasClass(a,M))&&u.removeClass(y,M)});const N=u.getAttribs(y);for(let M=0;M<N.length;M++){const $=N[M].nodeName;if(!f.isAttributeInternal($))return Q1.keep()}}return n.remove!=="none"?(hM(e,y,n),Q1.removed()):Q1.keep()},yM=(e,n,o,r,a)=>{let u;return n.parentNode&&ie(Y0(e.dom,n.parentNode).reverse(),f=>{if(!u&&Wt(f)&&f.id!=="_start"&&f.id!=="_end"){const b=mm(e,f,o,r,a);b&&b.split!==!1&&(u=f)}}),u},IL=(e,n,o,r)=>vM(e,n,o,r,r).fold(Ke(r),a=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,a)),Ke(null)),tb=(e,n,o,r,a,u,f,b)=>{var y,E;let N,M;const $=e.dom;if(o){const j=o.parentNode;for(let ee=r.parentNode;ee&&ee!==j;ee=ee.parentNode){let G=$.clone(ee,!1);for(let ne=0;ne<n.length&&(G=IL(e,n[ne],b,G),G!==null);ne++);G&&(N&&G.appendChild(N),M||(M=G),N=G)}(!f.mixed||!$.isBlock(o))&&(r=(y=$.split(o,r))!==null&&y!==void 0?y:r),N&&M&&((E=a.parentNode)===null||E===void 0||E.insertBefore(N,a),M.appendChild(a),pa(f)&&BT(e,f,b,N))}return r},CM=(e,n,o,r,a)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,E=G=>{const ne=yM(e,G,n,o,a);return tb(e,u,ne,G,G,!0,f,o)},N=G=>Ri(G)&&Wt(G)&&(G.id==="_start"||G.id==="_end"),M=G=>Re(u,ne=>Sv(e,ne,o,G,G)),$=G=>{const ne=xr(G.childNodes),Ee=M(G)||Re(u,lt=>O2(b,G,lt)),Se=G.parentNode;if(!Ee&&Ne(Se)&&jC(f)&&M(Se),f.deep&&ne.length)for(let lt=0;lt<ne.length;lt++)$(ne[lt]);ie(["underline","line-through","overline"],lt=>{Wt(G)&&e.dom.getStyle(G,"text-decoration")===lt&&G.parentNode&&WC(b,G.parentNode)===lt&&Sv(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:lt}},void 0,G)})},j=G=>{const ne=b.get(G?"_start":"_end");if(ne){let ge=ne[G?"firstChild":"lastChild"];return N(ge)&&(ge=ge[G?"firstChild":"lastChild"]),vt(ge)&&ge.data.length===0&&(ge=G?ne.previousSibling||ne.nextSibling:ne.nextSibling||ne.previousSibling),b.remove(ne,!0),ge}else return null},ee=G=>{let ne,ge,Ee=lh(b,G,u,G.collapsed);if(f.split){if(Ee=ht(Ee),ne=gM(e,Ee,!0),ge=gM(e,Ee),ne!==ge){if(ne=l4(ne,!0),ge=l4(ge,!1),fM(b,ne,ge)){const Me=F.from(ne.firstChild).getOr(ne);E(FT(b,Me,!0,"span",{id:"_start","data-mce-type":"bookmark"})),j(!0);return}if(fM(b,ge,ne)){const Me=F.from(ge.lastChild).getOr(ge);E(FT(b,Me,!1,"span",{id:"_end","data-mce-type":"bookmark"})),j(!1);return}ne=i4(b,ne,"span",{id:"_start","data-mce-type":"bookmark"}),ge=i4(b,ge,"span",{id:"_end","data-mce-type":"bookmark"});const Se=b.createRng();Se.setStartAfter(ne),Se.setEndBefore(ge),F1(b,Se,Me=>{ie(Me,lt=>{!Ri(lt)&&!Ri(lt.parentNode)&&E(lt)})}),E(ne),E(ge),ne=j(!0),ge=j()}else ne=ge=E(ne);Ee.startContainer=ne.parentNode?ne.parentNode:ne,Ee.startOffset=b.nodeIndex(ne),Ee.endContainer=ge.parentNode?ge.parentNode:ge,Ee.endOffset=b.nodeIndex(ge)+1}F1(b,Ee,Se=>{ie(Se,$)})};if(r){if(Z0(r)){const G=b.createRng();G.setStartBefore(r),G.setEndAfter(r),ee(G)}else ee(r);Ni(e,n,r,o);return}!y.isCollapsed()||!pa(f)||mp(e).length?(cm(e,()=>U0(e,ee),G=>pa(f)&&ET(e,n,o,G)),e.nodeChanged()):aM(e,n,o,a),bM(e,n,o),Ni(e,n,r,o)},d4=(e,n,o,r,a)=>{(r||e.selection.isEditable())&&CM(e,n,o,r,a)},Sv=(e,n,o,r,a)=>vM(e,n,o,r,a).fold(Pe,u=>(e.dom.rename(r,u),!0),et),N2=yt.each,wM=(e,n,o,r)=>{const a=u=>{if(ei(u)&&Wt(u.parentNode)&&e.isEditable(u)){const f=WC(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(yt.walk(r,a,"childNodes"),a(r))},LL=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const a=_p(e,"fontSize");PT(r,u=>a(u)&&e.isEditable(u),c4(e,"backgroundColor",Km(n.styles.backgroundColor,o)))}},SM=(e,n,o,r)=>{if(pa(n)&&(n.inline==="sub"||n.inline==="sup")){const a=_p(e,"fontSize");PT(r,f=>a(f)&&e.isEditable(f),c4(e,"fontSize",""));const u=Bt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},HL=(e,n,o,r)=>{N2(n,a=>{pa(a)&&N2(e.dom.select(a.inline,r),u=>{MT(u)&&Sv(e,a,o,u,a.exact?u:null)}),PL(e.dom,a,r)})},zL=(e,n,o,r,a)=>{const u=a.parentNode;mm(e,u,o,r)&&Sv(e,n,r,a)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>mm(e,f,o,r)?(Sv(e,n,r,a),!0):!1)},nb=yt.each,xM=(e,n,o,r)=>{if(KS(e)&&pa(n)&&o.parentNode){const a=Fb(e.schema),u=Rb(me.fromDom(o),f=>au(f.dom));return Bs(a,r)&&Ru(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},IT=(e,n,o,r)=>{if(nb(o.styles,(a,u)=>{e.setStyle(n,u,Km(a,r))}),o.styles){const a=e.getAttrib(n,"style");a&&e.setAttrib(n,"data-mce-style",a)}},VL=(e,n,o,r)=>{const a=e.formatter.get(n),u=a[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,E=(ee,G=u)=>{le(G.onformat)&&G.onformat(ee,G,o,r),IT(b,ee,G,o),nb(G.attributes,(ne,ge)=>{b.setAttrib(ee,ge,Km(ne,o))}),nb(G.classes,ne=>{const ge=Km(ne,o);b.hasClass(ee,ge)||b.addClass(ee,ge)})},N=(ee,G)=>{let ne=!1;return nb(ee,ge=>lu(ge)?b.getContentEditable(G)==="false"&&!ge.ceFalseOverride||Ne(ge.collapsed)&&ge.collapsed!==f?!0:b.is(G,ge.selector)&&!au(G)?(E(G,ge),ne=!0,!1):!0:!1),ne},M=ee=>{if(oe(ee)){const G=b.create(ee);return E(G),G}else return null},$=(ee,G,ne)=>{const ge=[];let Ee=!0;const Se=u.inline||u.block,Me=M(Se),lt=Ge=>J0(u)&&mm(e,Ge,n,o),At=(Ge,Le,ct)=>{const on=$x(u)&&q0(e.schema,Ge)&&ng(e,Le,Se);return ct&&on},Gt=(Ge,Le,ct,on)=>{const wn=Ge.nodeName.toLowerCase(),Ro=ng(e,Se,wn)&&ng(e,Le,Se),Fo=!ne&&vt(Ge)&&Uy(Ge.data),_s=au(Ge),Zs=!pa(u)||!ee.isBlock(Ge);return(ct||on)&&Ro&&!Fo&&!_s&&Zs};F1(ee,G,Ge=>{let Le;const ct=on=>{let wn=!1,Ro=Ee,Fo=!1;const _s=on.parentNode,Zs=_s.nodeName.toLowerCase(),lc=ee.getContentEditable(on);Ne(lc)&&(Ro=Ee,Ee=lc==="true",wn=!0,Fo=UC(e,on));const Kc=Ee&&!wn;if(as(on)&&!xM(e,u,on,Zs)){Le=null,Ym(u)&&ee.remove(on);return}if(lt(on)){Le=null;return}if(At(on,Zs,Kc)){const Qs=ee.rename(on,Se);E(Qs),ge.push(Qs),Le=null;return}if(lu(u)){let Qs=N(a,on);if(!Qs&&Ne(_s)&&jC(u)&&(Qs=N(a,_s)),!pa(u)||Qs){Le=null;return}}Ne(Me)&&Gt(on,Zs,Kc,Fo)?(Le||(Le=ee.clone(Me,!1),_s.insertBefore(Le,on),ge.push(Le)),Fo&&wn&&(Ee=Ro),Le.appendChild(on)):(Le=null,ie(xr(on.childNodes),ct),wn&&(Ee=Ro),Le=null)};ie(Ge,ct)}),u.links===!0&&ie(ge,Ge=>{const Le=ct=>{ct.nodeName==="A"&&E(ct,u),ie(xr(ct.childNodes),Le)};Le(Ge)}),ie(ge,Ge=>{const Le=wn=>{let Ro=0;return ie(wn.childNodes,Fo=>{!zC(Fo)&&!Ri(Fo)&&Ro++}),Ro},ct=wn=>Po(wn.childNodes,j0).filter(Fo=>ee.getContentEditable(Fo)!=="false"&&O2(ee,Fo,u)).map(Fo=>{const _s=ee.clone(Fo,!1);return E(_s),ee.replace(_s,wn,!0),ee.remove(Fo,!0),_s}).getOr(wn),on=Le(Ge);if((ge.length>1||!ee.isBlock(Ge))&&on===0){ee.remove(Ge,!0);return}(pa(u)||Ym(u)&&u.wrapper)&&(!u.exact&&on===1&&(Ge=ct(Ge)),HL(e,a,o,Ge),zL(e,u,n,o,Ge),LL(ee,u,o,Ge),wM(ee,u,o,Ge),SM(ee,u,o,Ge),BT(e,u,o,Ge))})},j=Z0(r)?r:y.getNode();if(b.getContentEditable(j)==="false"&&!UC(e,j)){r=j,N(a,r),uu(e,n,r,o);return}if(u){if(r)if(Z0(r)){if(!N(a,r)){const ee=b.createRng();ee.setStartBefore(r),ee.setEndAfter(r),$(b,lh(b,ee,a),!0)}}else $(b,r,!0);else!f||!pa(u)||mp(e).length?(y.setRng(gr(y.getRng())),cm(e,()=>{U0(e,(ee,G)=>{const ne=G?ee:lh(b,ee,a);$(b,ne,!1)})},et),e.nodeChanged()):AL(e,n,o),BL(e.formatter,n).each(ee=>{ie(RT(e.selection),G=>IT(b,G,ee,o))});RL(n,e)}uu(e,n,r,o)},TM=(e,n,o,r)=>{(r||e.selection.isEditable())&&VL(e,n,o,r)},m4=e=>fn(e,"vars"),f4=(e,n)=>{e.set({}),n.on("NodeChange",o=>{_M(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=F.from(o.node).map(a=>Z0(a)?a:a.startContainer).bind(a=>Wt(a)?F.some(a):F.from(a.parentElement)).getOrThunk(()=>g4(n));_M(n,r,e.get())})},g4=e=>e.selection.getStart(),EM=(e,n,o,r,a)=>ir(n,b=>{const y=e.formatter.matchNode(b,o,a??{},r);return!sn(y)},b=>TT(e,b,o)?!0:r?!1:Ne(e.formatter.matchNode(b,o,a,!0))),kM=(e,n)=>{const o=n??g4(e);return Bt(Y0(e.dom,o),r=>Wt(r)&&!Rm(r))},_M=(e,n,o)=>{const r=kM(e,n);xt(o,(a,u)=>{const f=b=>{const y=EM(e,r,u,b.similar,m4(b)?b.vars:void 0),E=y.isSome();if(b.state.get()!==E){b.state.set(E);const N=y.getOr(n);m4(b)?b.callback(E,{node:N,format:u,parents:r}):ie(b.callbacks,M=>M(E,{node:N,format:u,parents:r}))}};ie([a.withSimilar,a.withoutSimilar],f),ie(a.withVars,f)})},LT=(e,n,o,r,a,u)=>{const f=n.get();ie(o.split(","),b=>{const y=Yo(f,b).getOrThunk(()=>{const N={withSimilar:{state:_e(!1),similar:!0,callbacks:[]},withoutSimilar:{state:_e(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=N,N}),E=()=>{const N=kM(e);return EM(e,N,b,a,u).isSome()};if(sn(u)){const N=a?y.withSimilar:y.withoutSimilar;N.callbacks.push(r),N.callbacks.length===1&&N.state.set(E())}else y.withVars.push({state:_e(E()),similar:a,vars:u,callback:r})}),n.set(f)},vh=(e,n,o)=>{const r=e.get();ie(n.split(","),a=>Yo(r,a).each(u=>{r[a]={withSimilar:{...u.withSimilar,callbacks:Bt(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Bt(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Bt(u.withVars,f=>f.callback!==o)}})),e.set(r)},UL=(e,n,o,r,a,u)=>(LT(e,n,o,r,a,u),{unbind:()=>vh(n,o,r)}),h4=(e,n,o,r)=>{const a=e.formatter.get(n);a&&(ET(e,n,o,r)&&(!("toggle"in a[0])||a[0].toggle)?d4(e,n,o,r):TM(e,n,o,r))},Ec=yt.explode,HT=()=>{const e={};return{addFilter:(a,u)=>{ie(Ec(a),f=>{fn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>dc(e),removeFilter:(a,u)=>{ie(Ec(a),f=>{if(fn(e,f))if(Ne(u)){const b=e[f],y=Bt(b.callbacks,E=>E!==u);y.length>0?b.callbacks=y:delete e[f]}else delete e[f]})}}},p4=(e,n)=>{ie(n,o=>{e.attr(o,null)})},yh=(e,n,o)=>{e.addNodeFilter("font",r=>{ie(r,a=>{const u=n.parse(a.attr("style")),f=a.attr("color"),b=a.attr("face"),y=a.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&Kr(y).each(E=>{u["font-size"]=o[E-1]}),a.name="span",a.attr("style",n.serialize(u)),p4(a,["color","face","size"])})})},AM=(e,n,o)=>{e.addNodeFilter("strike",r=>{const a=n.type!=="html4";ie(r,u=>{if(a)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},OM=(e,n,o)=>{var r;const a=xy();n.convert_fonts_to_spans&&yh(e,a,yt.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),AM(e,o,a)},M2=(e,n,o)=>{n.inline_styles&&OM(e,n,o)},WL=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),ZL=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},Ap=e=>{const[n,...o]=e.split(","),r=o.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(a){const u=a[2]===";base64",f=u?ZL(r):decodeURIComponent(r);return F.some({type:a[1],data:f,base64Encoded:u})}else return F.none()},DM=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return F.none()}const a=new Uint8Array(r.length);for(let u=0;u<a.length;u++)a[u]=r.charCodeAt(u);return F.some(new Blob([a],{type:e}))},ob=e=>new Promise((n,o)=>{Ap(e).bind(({type:r,data:a,base64Encoded:u})=>DM(r,a,u)).fold(()=>o("Invalid data URI"),n)}),jL=e=>Nn(e,"blob:")?WL(e):Nn(e,"data:")?ob(e):Promise.reject("Unknown URI format"),Ch=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var a;o((a=r.error)===null||a===void 0?void 0:a.message)},r.readAsDataURL(e)});let GL=0;const kd=e=>"blobid"+GL++,xv=(e,n,o)=>Ap(e).bind(({data:r,type:a,base64Encoded:u})=>{if(n&&!u)return F.none();{const f=u?r:btoa(r);return o(f,a)}}),zT=(e,n,o)=>{const r=e.create(kd(),n,o);return e.add(r),r},VT=(e,n,o=!1)=>xv(n,o,(r,a)=>F.from(e.getByData(r,a)).orThunk(()=>DM(a,r).map(u=>zT(e,u,r)))),qL=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Nn(n,"blob:")){const r=e.getByUri(n);return Ne(r)?Promise.resolve(r):jL(n).then(a=>Ch(a).then(u=>xv(u,!1,f=>F.some(zT(e,a,f))).getOrThunk(o)))}else return Nn(n,"data:")?VT(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},UT=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,KL=e=>F.from(e.match(UT)).bind(n=>xa(n,1)).map(n=>Nn(n,"www.")?n.substring(4):n),_d=(e,n)=>{F.from(e.attr("src")).bind(KL).forall(o=>!xe(n,o))&&e.attr("sandbox","")},Tv=(e,n)=>Nn(e,`${n}/`),RM=e=>sn(e)?"iframe":Tv(e,"image")?"img":Tv(e,"video")?"video":Tv(e,"audio")?"audio":"iframe",b4=({type:e,src:n,width:o,height:r}={},a,u)=>{const f=RM(e),b=new hi(f,1);return b.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&a&&_d(b,u),b},v4=e=>Ne(e.attr("data-mce-bogus")),sb=e=>e.attr("src")===gn.transparentSrc||Ne(e.attr("data-mce-placeholder")),y4=(e,n)=>{const{blob_cache:o}=n;if(o){const r=a=>{const u=a.attr("src");sb(a)||v4(a)||Xt(u)||VT(o,u,!0).each(f=>{a.attr("src",f.blobUri())})};e.addAttributeFilter("src",a=>ie(a,r))}},YL=(e,n)=>{var o,r;const a=e.schema;e.addAttributeFilter("href",y=>{let E=y.length;const N=$=>$.split(" ").filter(ee=>ee.length>0).concat(["noopener"]).sort().join(" "),M=$=>{const j=$?yt.trim($):"";return/\b(noopener)\b/g.test(j)?j:N(j)};if(!n.allow_unsafe_link_target)for(;E--;){const $=y[E];$.name==="a"&&$.attr("target")==="_blank"&&$.attr("rel",M($.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",y=>{let E=y.length,N,M,$,j;for(;E--;)if(j=y[E],j.name==="a"&&j.firstChild&&!j.attr("href"))for($=j.parent,N=j.lastChild;N&&$;)M=N.prev,$.insert(N,j),N=M}),n.fix_list_elements&&e.addNodeFilter("ul,ol",y=>{let E=y.length,N,M;for(;E--;)if(N=y[E],M=N.parent,M&&(M.name==="ul"||M.name==="ol"))if(N.prev&&N.prev.name==="li")N.prev.append(N);else{const $=new hi("li",1);$.attr("style","list-style-type: none"),N.wrap($)}});const u=a.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",y=>{var E;let N=y.length;for(;N--;){const M=y[N],$=(E=M.attr("class"))!==null&&E!==void 0?E:"",j=yt.explode($," ");let ee="";for(let G=0;G<j.length;G++){const ne=j[G];let ge=!1,Ee=u["*"];Ee&&Ee[ne]&&(ge=!0),Ee=u[M.name],!ge&&Ee&&Ee[ne]&&(ge=!0),ge&&(ee&&(ee+=" "),ee+=ne)}ee.length||(ee=null),M.attr("class",ee)}}),y4(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,b=ca((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",y=>ie(y,E=>{E.replace(b4({type:E.attr("type"),src:E.name==="object"?E.attr("data"):E.attr("src"),width:E.attr("width"),height:E.attr("height")},f,b))})),f&&e.addNodeFilter("iframe",y=>ie(y,E=>_d(E,b)))},{entries:C4,setPrototypeOf:NM,isFrozen:XL,getPrototypeOf:JL,getOwnPropertyDescriptor:QL}=Object;let{freeze:Al,seal:tf,create:MM}=Object,{apply:B2,construct:w4}=typeof Reflect<"u"&&Reflect;B2||(B2=function(n,o,r){return n.apply(o,r)}),Al||(Al=function(n){return n}),tf||(tf=function(n){return n}),w4||(w4=function(n,o){return new n(...o)});const BM=gm(Array.prototype.forEach),PM=gm(Array.prototype.pop),P2=gm(Array.prototype.push),WT=gm(String.prototype.toLowerCase),S4=gm(String.prototype.toString),e8=gm(String.prototype.match),nf=gm(String.prototype.replace),t8=gm(String.prototype.indexOf),n8=gm(String.prototype.trim),Ad=gm(RegExp.prototype.test),$2=o8(TypeError);function gm(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return B2(e,n,r)}}function o8(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return w4(e,o)}}function Js(e,n,o){var r;o=(r=o)!==null&&r!==void 0?r:WT,NM&&NM(e,null);let a=n.length;for(;a--;){let u=n[a];if(typeof u=="string"){const f=o(u);f!==u&&(XL(n)||(n[a]=f),u=f)}e[u]=!0}return e}function Ev(e){const n=MM(null);for(const[o,r]of C4(e))n[o]=r;return n}function F2(e,n){for(;e!==null;){const r=QL(e,n);if(r){if(r.get)return gm(r.get);if(typeof r.value=="function")return gm(r.value)}e=JL(e)}function o(r){return null}return o}const $M=Al(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Op=Al(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),x4=Al(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),s8=Al(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),T4=Al(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),r8=Al(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),E4=Al(["#text"]),FM=Al(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),k4=Al(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),IM=Al(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ZT=Al(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),c8=tf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),a8=tf(/<%[\w\W]*|[\w\W]*%>/gm),l8=tf(/\${[\w\W]*}/gm),i8=tf(/^data-[\-\w.\u00B7-\uFFFF]/),u8=tf(/^aria-[\-\w]+$/),LM=tf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),_4=tf(/^(?:\w+script|data):/i),HM=tf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),d8=tf(/^html$/i);var kv=Object.freeze({__proto__:null,MUSTACHE_EXPR:c8,ERB_EXPR:a8,TMPLIT_EXPR:l8,DATA_ATTR:i8,ARIA_ATTR:u8,IS_ALLOWED_URI:LM,IS_SCRIPT_OR_DATA:_4,ATTR_WHITESPACE:HM,DOCTYPE_NAME:d8});const m8=()=>typeof window>"u"?null:window,zM=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const a="data-tt-policy-suffix";o&&o.hasAttribute(a)&&(r=o.getAttribute(a));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return null}};function VM(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m8();const n=Lo=>VM(Lo);if(n.version="3.0.5",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;const o=e.document,r=o.currentScript;let{document:a}=e;const{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:y,NodeFilter:E,NamedNodeMap:N=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:M,DOMParser:$,trustedTypes:j}=e,ee=y.prototype,G=F2(ee,"cloneNode"),ne=F2(ee,"nextSibling"),ge=F2(ee,"childNodes"),Ee=F2(ee,"parentNode");if(typeof f=="function"){const Lo=a.createElement("template");Lo.content&&Lo.content.ownerDocument&&(a=Lo.content.ownerDocument)}let Se,Me="";const{implementation:lt,createNodeIterator:At,createDocumentFragment:Gt,getElementsByTagName:Ge}=a,{importNode:Le}=o;let ct={};n.isSupported=typeof C4=="function"&&typeof Ee=="function"&&lt&&lt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:on,ERB_EXPR:wn,TMPLIT_EXPR:Ro,DATA_ATTR:Fo,ARIA_ATTR:_s,IS_SCRIPT_OR_DATA:Zs,ATTR_WHITESPACE:lc}=kv;let{IS_ALLOWED_URI:Kc}=kv,Qs=null;const Pt=Js({},[...$M,...Op,...x4,...T4,...E4]);let vn=null;const is=Js({},[...FM,...k4,...IM,...ZT]);let zt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),On=null,Ao=null,Zt=!0,Oo=!0,Io=!1,Sa=!0,Ns=!1,sa=!1,Md=!1,uf=!1,Yl=!1,Hi=!1,Qu=!1,zi=!0,ed=!1;const Sn="user-content-";let qo=!0,Br=!1,ic={},Bc=null;const Ma=Js({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Pc=null;const $c=Js({},["audio","video","img","source","image","track"]);let Rl=null;const Bd=Js({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Pd="http://www.w3.org/1998/Math/MathML",$d="http://www.w3.org/2000/svg",gu="http://www.w3.org/1999/xhtml";let mg=gu,Ah=!1,Eb=null;const bk=Js({},[Pd,$d,gu],S4);let fg;const iy=["application/xhtml+xml","text/html"],nR="text/html";let fl,kb=null;const oR=a.createElement("form"),sR=function(ze){return ze instanceof RegExp||ze instanceof Function},gg=function(ze){if(!(kb&&kb===ze)){if((!ze||typeof ze!="object")&&(ze={}),ze=Ev(ze),fg=iy.indexOf(ze.PARSER_MEDIA_TYPE)===-1?fg=nR:fg=ze.PARSER_MEDIA_TYPE,fl=fg==="application/xhtml+xml"?S4:WT,Qs="ALLOWED_TAGS"in ze?Js({},ze.ALLOWED_TAGS,fl):Pt,vn="ALLOWED_ATTR"in ze?Js({},ze.ALLOWED_ATTR,fl):is,Eb="ALLOWED_NAMESPACES"in ze?Js({},ze.ALLOWED_NAMESPACES,S4):bk,Rl="ADD_URI_SAFE_ATTR"in ze?Js(Ev(Bd),ze.ADD_URI_SAFE_ATTR,fl):Bd,Pc="ADD_DATA_URI_TAGS"in ze?Js(Ev($c),ze.ADD_DATA_URI_TAGS,fl):$c,Bc="FORBID_CONTENTS"in ze?Js({},ze.FORBID_CONTENTS,fl):Ma,On="FORBID_TAGS"in ze?Js({},ze.FORBID_TAGS,fl):{},Ao="FORBID_ATTR"in ze?Js({},ze.FORBID_ATTR,fl):{},ic="USE_PROFILES"in ze?ze.USE_PROFILES:!1,Zt=ze.ALLOW_ARIA_ATTR!==!1,Oo=ze.ALLOW_DATA_ATTR!==!1,Io=ze.ALLOW_UNKNOWN_PROTOCOLS||!1,Sa=ze.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ns=ze.SAFE_FOR_TEMPLATES||!1,sa=ze.WHOLE_DOCUMENT||!1,Yl=ze.RETURN_DOM||!1,Hi=ze.RETURN_DOM_FRAGMENT||!1,Qu=ze.RETURN_TRUSTED_TYPE||!1,uf=ze.FORCE_BODY||!1,zi=ze.SANITIZE_DOM!==!1,ed=ze.SANITIZE_NAMED_PROPS||!1,qo=ze.KEEP_CONTENT!==!1,Br=ze.IN_PLACE||!1,Kc=ze.ALLOWED_URI_REGEXP||LM,mg=ze.NAMESPACE||gu,zt=ze.CUSTOM_ELEMENT_HANDLING||{},ze.CUSTOM_ELEMENT_HANDLING&&sR(ze.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(zt.tagNameCheck=ze.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ze.CUSTOM_ELEMENT_HANDLING&&sR(ze.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(zt.attributeNameCheck=ze.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ze.CUSTOM_ELEMENT_HANDLING&&typeof ze.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(zt.allowCustomizedBuiltInElements=ze.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ns&&(Oo=!1),Hi&&(Yl=!0),ic&&(Qs=Js({},[...E4]),vn=[],ic.html===!0&&(Js(Qs,$M),Js(vn,FM)),ic.svg===!0&&(Js(Qs,Op),Js(vn,k4),Js(vn,ZT)),ic.svgFilters===!0&&(Js(Qs,x4),Js(vn,k4),Js(vn,ZT)),ic.mathMl===!0&&(Js(Qs,T4),Js(vn,IM),Js(vn,ZT))),ze.ADD_TAGS&&(Qs===Pt&&(Qs=Ev(Qs)),Js(Qs,ze.ADD_TAGS,fl)),ze.ADD_ATTR&&(vn===is&&(vn=Ev(vn)),Js(vn,ze.ADD_ATTR,fl)),ze.ADD_URI_SAFE_ATTR&&Js(Rl,ze.ADD_URI_SAFE_ATTR,fl),ze.FORBID_CONTENTS&&(Bc===Ma&&(Bc=Ev(Bc)),Js(Bc,ze.FORBID_CONTENTS,fl)),qo&&(Qs["#text"]=!0),sa&&Js(Qs,["html","head","body"]),Qs.table&&(Js(Qs,["tbody"]),delete On.tbody),ze.TRUSTED_TYPES_POLICY){if(typeof ze.TRUSTED_TYPES_POLICY.createHTML!="function")throw $2('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ze.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw $2('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Se=ze.TRUSTED_TYPES_POLICY,Me=Se.createHTML("")}else Se===void 0&&(Se=zM(j,r)),Se!==null&&typeof Me=="string"&&(Me=Se.createHTML(""));Al&&Al(ze),kb=ze}},Jw=Js({},["mi","mo","mn","ms","mtext"]),Ie=Js({},["foreignobject","desc","title","annotation-xml"]),He=Js({},["title","style","font","a","script"]),Nt=Js({},Op);Js(Nt,x4),Js(Nt,s8);const Et=Js({},T4);Js(Et,r8);const Ln=function(ze){let pn=Ee(ze);(!pn||!pn.tagName)&&(pn={namespaceURI:mg,tagName:"template"});const Qn=WT(ze.tagName),kc=WT(pn.tagName);return Eb[ze.namespaceURI]?ze.namespaceURI===$d?pn.namespaceURI===gu?Qn==="svg":pn.namespaceURI===Pd?Qn==="svg"&&(kc==="annotation-xml"||Jw[kc]):!!Nt[Qn]:ze.namespaceURI===Pd?pn.namespaceURI===gu?Qn==="math":pn.namespaceURI===$d?Qn==="math"&&Ie[kc]:!!Et[Qn]:ze.namespaceURI===gu?pn.namespaceURI===$d&&!Ie[kc]||pn.namespaceURI===Pd&&!Jw[kc]?!1:!Et[Qn]&&(He[Qn]||!Nt[Qn]):!!(fg==="application/xhtml+xml"&&Eb[ze.namespaceURI]):!1},Vo=function(ze){P2(n.removed,{element:ze});try{ze.parentNode.removeChild(ze)}catch{ze.remove()}},Gr=function(ze,pn){try{P2(n.removed,{attribute:pn.getAttributeNode(ze),from:pn})}catch{P2(n.removed,{attribute:null,from:pn})}if(pn.removeAttribute(ze),ze==="is"&&!vn[ze])if(Yl||Hi)try{Vo(pn)}catch{}else try{pn.setAttribute(ze,"")}catch{}},Fd=function(ze){let pn,Qn;if(uf)ze="<remove></remove>"+ze;else{const t=e8(ze,/^[\r\n\t ]+/);Qn=t&&t[0]}fg==="application/xhtml+xml"&&mg===gu&&(ze='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ze+"</body></html>");const kc=Se?Se.createHTML(ze):ze;if(mg===gu)try{pn=new $().parseFromString(kc,fg)}catch{}if(!pn||!pn.documentElement){pn=lt.createDocument(mg,"template",null);try{pn.documentElement.innerHTML=Ah?Me:kc}catch{}}const Xl=pn.body||pn.documentElement;return ze&&Qn&&Xl.insertBefore(a.createTextNode(Qn),Xl.childNodes[0]||null),mg===gu?Ge.call(pn,sa?"html":"body")[0]:sa?pn.documentElement:Xl},uy=function(ze){return At.call(ze.ownerDocument||ze,ze,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT,null,!1)},fj=function(ze){return ze instanceof M&&(typeof ze.nodeName!="string"||typeof ze.textContent!="string"||typeof ze.removeChild!="function"||!(ze.attributes instanceof N)||typeof ze.removeAttribute!="function"||typeof ze.setAttribute!="function"||typeof ze.namespaceURI!="string"||typeof ze.insertBefore!="function"||typeof ze.hasChildNodes!="function")},vk=function(ze){return typeof b=="object"?ze instanceof b:ze&&typeof ze=="object"&&typeof ze.nodeType=="number"&&typeof ze.nodeName=="string"},hg=function(ze,pn,Qn){ct[ze]&&BM(ct[ze],kc=>{kc.call(n,pn,Qn,kb)})},VI=function(ze){let pn;if(hg("beforeSanitizeElements",ze,null),fj(ze))return Vo(ze),!0;const Qn=fl(ze.nodeName);if(hg("uponSanitizeElement",ze,{tagName:Qn,allowedTags:Qs}),ze.hasChildNodes()&&!vk(ze.firstElementChild)&&(!vk(ze.content)||!vk(ze.content.firstElementChild))&&Ad(/<[/\w]/g,ze.innerHTML)&&Ad(/<[/\w]/g,ze.textContent))return Vo(ze),!0;if(!Qs[Qn]||On[Qn]){if(!On[Qn]&&WI(Qn)&&(zt.tagNameCheck instanceof RegExp&&Ad(zt.tagNameCheck,Qn)||zt.tagNameCheck instanceof Function&&zt.tagNameCheck(Qn)))return!1;if(qo&&!Bc[Qn]){const kc=Ee(ze)||ze.parentNode,Xl=ge(ze)||ze.childNodes;if(Xl&&kc){const t=Xl.length;for(let s=t-1;s>=0;--s)kc.insertBefore(G(Xl[s],!0),ne(ze))}}return Vo(ze),!0}return ze instanceof y&&!Ln(ze)||(Qn==="noscript"||Qn==="noembed"||Qn==="noframes")&&Ad(/<\/no(script|embed|frames)/i,ze.innerHTML)?(Vo(ze),!0):(Ns&&ze.nodeType===3&&(pn=ze.textContent,pn=nf(pn,on," "),pn=nf(pn,wn," "),pn=nf(pn,Ro," "),ze.textContent!==pn&&(P2(n.removed,{element:ze.cloneNode()}),ze.textContent=pn)),hg("afterSanitizeElements",ze,null),!1)},UI=function(ze,pn,Qn){if(zi&&(pn==="id"||pn==="name")&&(Qn in a||Qn in oR))return!1;if(!(Oo&&!Ao[pn]&&Ad(Fo,pn))){if(!(Zt&&Ad(_s,pn))){if(!vn[pn]||Ao[pn]){if(!(WI(ze)&&(zt.tagNameCheck instanceof RegExp&&Ad(zt.tagNameCheck,ze)||zt.tagNameCheck instanceof Function&&zt.tagNameCheck(ze))&&(zt.attributeNameCheck instanceof RegExp&&Ad(zt.attributeNameCheck,pn)||zt.attributeNameCheck instanceof Function&&zt.attributeNameCheck(pn))||pn==="is"&&zt.allowCustomizedBuiltInElements&&(zt.tagNameCheck instanceof RegExp&&Ad(zt.tagNameCheck,Qn)||zt.tagNameCheck instanceof Function&&zt.tagNameCheck(Qn))))return!1}else if(!Rl[pn]){if(!Ad(Kc,nf(Qn,lc,""))){if(!((pn==="src"||pn==="xlink:href"||pn==="href")&&ze!=="script"&&t8(Qn,"data:")===0&&Pc[ze])){if(!(Io&&!Ad(Zs,nf(Qn,lc,"")))){if(Qn)return!1}}}}}}return!0},WI=function(ze){return ze.indexOf("-")>0},ZI=function(ze){let pn,Qn,kc,Xl;hg("beforeSanitizeAttributes",ze,null);const{attributes:t}=ze;if(!t)return;const s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:vn};for(Xl=t.length;Xl--;){pn=t[Xl];const{name:c,namespaceURI:l}=pn;Qn=c==="value"?pn.value:n8(pn.value);const d=Qn;if(kc=fl(c),s.attrName=kc,s.attrValue=Qn,s.keepAttr=!0,s.forceKeepAttr=void 0,hg("uponSanitizeAttribute",ze,s),Qn=s.attrValue,s.forceKeepAttr)continue;if(!s.keepAttr){Gr(c,ze);continue}if(!Sa&&Ad(/\/>/i,Qn)){Gr(c,ze);continue}Ns&&(Qn=nf(Qn,on," "),Qn=nf(Qn,wn," "),Qn=nf(Qn,Ro," "));const g=fl(ze.nodeName);if(!UI(g,kc,Qn)){Gr(c,ze);continue}if(ed&&(kc==="id"||kc==="name")&&(Gr(c,ze),Qn=Sn+Qn),Se&&typeof j=="object"&&typeof j.getAttributeType=="function"&&!l)switch(j.getAttributeType(g,kc)){case"TrustedHTML":{Qn=Se.createHTML(Qn);break}case"TrustedScriptURL":{Qn=Se.createScriptURL(Qn);break}}if(Qn!==d)try{l?ze.setAttributeNS(l,c,Qn):ze.setAttribute(c,Qn)}catch{Gr(c,ze)}}hg("afterSanitizeAttributes",ze,null)},gj=function Lo(ze){let pn;const Qn=uy(ze);for(hg("beforeSanitizeShadowDOM",ze,null);pn=Qn.nextNode();)hg("uponSanitizeShadowNode",pn,null),!VI(pn)&&(pn.content instanceof u&&Lo(pn.content),ZI(pn));hg("afterSanitizeShadowDOM",ze,null)};return n.sanitize=function(Lo){let ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pn,Qn,kc,Xl;if(Ah=!Lo,Ah&&(Lo="<!-->"),typeof Lo!="string"&&!vk(Lo))if(typeof Lo.toString=="function"){if(Lo=Lo.toString(),typeof Lo!="string")throw $2("dirty is not a string, aborting")}else throw $2("toString is not a function");if(!n.isSupported)return Lo;if(Md||gg(ze),n.removed=[],typeof Lo=="string"&&(Br=!1),Br){if(Lo.nodeName){const c=fl(Lo.nodeName);if(!Qs[c]||On[c])throw $2("root node is forbidden and cannot be sanitized in-place")}}else if(Lo instanceof b)pn=Fd("<!---->"),Qn=pn.ownerDocument.importNode(Lo,!0),Qn.nodeType===1&&Qn.nodeName==="BODY"||Qn.nodeName==="HTML"?pn=Qn:pn.appendChild(Qn);else{if(!Yl&&!Ns&&!sa&&Lo.indexOf("<")===-1)return Se&&Qu?Se.createHTML(Lo):Lo;if(pn=Fd(Lo),!pn)return Yl?null:Qu?Me:""}pn&&uf&&Vo(pn.firstChild);const t=uy(Br?Lo:pn);for(;kc=t.nextNode();)VI(kc)||(kc.content instanceof u&&gj(kc.content),ZI(kc));if(Br)return Lo;if(Yl){if(Hi)for(Xl=Gt.call(pn.ownerDocument);pn.firstChild;)Xl.appendChild(pn.firstChild);else Xl=pn;return(vn.shadowroot||vn.shadowrootmode)&&(Xl=Le.call(o,Xl,!0)),Xl}let s=sa?pn.outerHTML:pn.innerHTML;return sa&&Qs["!doctype"]&&pn.ownerDocument&&pn.ownerDocument.doctype&&pn.ownerDocument.doctype.name&&Ad(d8,pn.ownerDocument.doctype.name)&&(s="<!DOCTYPE "+pn.ownerDocument.doctype.name+`>
`+s),Ns&&(s=nf(s,on," "),s=nf(s,wn," "),s=nf(s,Ro," ")),Se&&Qu?Se.createHTML(s):s},n.setConfig=function(Lo){gg(Lo),Md=!0},n.clearConfig=function(){kb=null,Md=!1},n.isValidAttribute=function(Lo,ze,pn){kb||gg({});const Qn=fl(Lo),kc=fl(ze);return UI(Qn,kc,pn)},n.addHook=function(Lo,ze){typeof ze=="function"&&(ct[Lo]=ct[Lo]||[],P2(ct[Lo],ze))},n.removeHook=function(Lo){if(ct[Lo])return PM(ct[Lo])},n.removeHooks=function(Lo){ct[Lo]&&(ct[Lo]=[])},n.removeAllHooks=function(){ct={}},n}var _v=VM();const A4=yt.each,Ca=yt.trim,Mj=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Bj={ftp:21,http:80,https:443,mailto:25},Pj=["img","video"],$j=(e,n)=>Ne(e)?!e:Ne(n)?!xe(Pj,n):!0,hm=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},I2=(e,n,o)=>{const r=hm(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?$j(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Ol{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),a=/data:([^;]+)/.exec(r[0]);return a&&(o=a[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const a=gd.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!I2(r,a,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=Ca(n),this.settings=o;const r=o.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){a.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new Ol(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+a.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+a.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&A4(Mj,(b,y)=>{let E=f[y];E&&(E=E.replace(/\(mce_at\)/g,"@@")),a[b]=E}),r&&(a.protocol||(a.protocol=r.protocol),a.userInfo||(a.userInfo=r.userInfo),!a.port&&a.host==="mce_host"&&(a.port=r.port),(!a.host||a.host==="mce_host")&&(a.host=r.host),a.source=""),u&&(a.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Ol(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),a=o.getURI();if(r===a||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===a)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Ol(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?Bj[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,a="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)a+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?a+="/"+y[u]:a+=y[u];return a}toAbsPath(n,o){let r=0;const a=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];A4(u,M=>{M&&b.push(M)});const y=[];for(let M=f.length-1;M>=0;M--)if(!(f[M].length===0||f[M]===".")){if(f[M]===".."){r++;continue}if(r>0){r--;continue}y.push(f[M])}const E=b.length-r;let N;return E<=0?N=gs(y).join("/"):N=b.slice(0,E).join("/")+"/"+gs(y).join("/"),N.indexOf("/")!==0&&(N="/"+N),a&&N.lastIndexOf("/")!==N.length-1&&(N+=a),N}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const Dp=yt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),O4="data-mce-type";let UM=0;const rb=(e,n,o,r,a)=>{var u,f,b,y;const E=n.validate,N=o.getSpecialElements();e.nodeType===wc&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const M=(f=a==null?void 0:a.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Ne(a)&&(a.allowedTags[M]=!0);return}if(e.nodeType!==hu||M==="body")return;const $=me.fromDom(e),j=ur($,O4),ee=Hc($,"data-mce-bogus");if(!j&&oe(ee)){ee==="all"?Ws($):Fl($);return}const G=o.getElementRule(M);if(E&&!G){fn(N,M)?Ws($):Fl($);return}else Ne(a)&&(a.allowedTags[M]=!0);if(E&&G&&!j){if(ie((b=G.attributesForced)!==null&&b!==void 0?b:[],ne=>{Fs($,ne.name,ne.value==="{$uid}"?`mce_${UM++}`:ne.value)}),ie((y=G.attributesDefault)!==null&&y!==void 0?y:[],ne=>{ur($,ne.name)||Fs($,ne.name,ne.value==="{$uid}"?`mce_${UM++}`:ne.value)}),G.attributesRequired&&!Re(G.attributesRequired,ne=>ur($,ne))){Fl($);return}if(G.removeEmptyAttrs&&pu($)){Fl($);return}G.outputName&&G.outputName!==M&&gS($,G.outputName)}},Av=(e,n,o,r,a)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=a;a.keepAttr=cb(n,o,r,u,f,b),a.keepAttr?(a.allowedAttributes[f]=!0,GT(f,o)&&(a.attrValue=f),n.allow_svg_data_urls&&Nn(b,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):jT(e,f)&&(a.forceKeepAttr=!0)},cb=(e,n,o,r,a,u)=>o!=="html"&&!oc(r)?!0:!(a in Dp&&I2(e,u,r))&&(!e.validate||n.isValid(r,a)||Nn(a,"data-")||Nn(a,"aria-")),jT=(e,n)=>e.hasAttribute(O4)&&(n==="id"||n==="class"||n==="style"),GT=(e,n)=>e in n.getBoolAttrs(),WM=(e,n,o,r)=>{const{attributes:a}=e;for(let u=a.length-1;u>=0;u--){const f=a[u],b=f.name,y=f.value;!cb(n,o,r,e.tagName.toLowerCase(),b,y)&&!jT(e,b)?e.removeAttribute(b):GT(b,o)&&e.setAttribute(b,b)}},ZM=(e,n,o)=>{const r=_v();return r.addHook("uponSanitizeElement",(a,u)=>{rb(a,e,n,o.track(a),u)}),r.addHook("uponSanitizeAttribute",(a,u)=>{Av(a,e,n,o.current(),u)}),r},f8=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},g8=e=>{const n=fy(e);if(n==="svg"){const o=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(a=>`xlink:${a}`),r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:o};_v().sanitize(e,r)}else if(n==="math"){const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};_v().sanitize(e,o)}else throw new Error("Not a namespace element")},jM=(e,n)=>{const o=_();if(e.sanitize){const r=ZM(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,f8(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:g8}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let y;for(;y=b.nextNode();){const E=o.track(y);rb(y,e,n,E),Wt(y)&&WM(y,e,n,E)}o.reset()},sanitizeNamespaceElement:$e}},GM=yt.makeMap,qM=yt.extend,KM=(e,n,o,r)=>{const a=e.name,u=a in o&&a!=="title"&&a!=="textarea"&&a!=="noscript",f=n.childNodes;for(let b=0,y=f.length;b<y;b++){const E=f[b],N=new hi(E.nodeName.toLowerCase(),E.nodeType);if(Wt(E)){const M=E.attributes;for(let $=0,j=M.length;$<j;$++){const ee=M[$];N.attr(ee.name,ee.value)}oc(N.name)&&(r(E),N.value=E.innerHTML)}else vt(E)?(N.value=E.data,u&&(N.raw=!0)):(Vc(E)||Fa(E)||Au(E))&&(N.value=E.data);oc(N.name)||KM(N,E,o,r),e.append(N)}},h8=(e,n,o)=>{const r=[];for(let a=e,u=a;a;u=a,a=a.walk()){const f=a;ie(n,b=>b(f)),Xt(f.parent)&&f!==e?a=u:r.push(f)}for(let a=r.length-1;a>=0;a--){const u=r[a];ie(o,f=>f(u))}},p8=(e,n,o,r)=>{const a=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=qM(GM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=Fb(n),E=/[ \t\r\n]+/g,N=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,$=Ee=>{let Se=Ee.parent;for(;Ne(Se);){if(Se.name in f)return!0;Se=Se.parent}return!1},j=Ee=>{let Se=Ee;for(;Ne(Se);){if(Se.name in y)return wT(n,u,f,Se);Se=Se.parent}return!1},ee=Ee=>Ee.name in b||ti(n,Ee)||oc(Ee.name)&&Ee.parent===e,G=(Ee,Se)=>{const Me=Se?Ee.prev:Ee.next;return Ne(Me)||Xt(Ee.parent)?!1:ee(Ee.parent)&&(Ee.parent!==e||r.isRootContent===!0)};return[Ee=>{var Se;if(Ee.type===3&&!$(Ee)){let Me=(Se=Ee.value)!==null&&Se!==void 0?Se:"";Me=Me.replace(E," "),(nl(Ee.prev,ee)||G(Ee,!0))&&(Me=Me.replace(N,"")),Me.length===0||Me===" "&&Ee.prev&&Ee.prev.type===wc&&Ee.next&&Ee.next.type===wc?Ee.remove():Ee.value=Me}},Ee=>{var Se;if(Ee.type===1){const Me=n.getElementRule(Ee.name);if(a&&Me){const lt=wT(n,u,f,Ee);Me.paddInEmptyBlock&&lt&&j(Ee)?FA(o,r,ee,Ee):Me.removeEmpty&&lt?ee(Ee)?Ee.remove():Ee.unwrap():Me.paddEmpty&&(lt||rL(Ee))&&FA(o,r,ee,Ee)}}else if(Ee.type===3&&!$(Ee)){let Me=(Se=Ee.value)!==null&&Se!==void 0?Se:"";(Ee.next&&ee(Ee.next)||G(Ee,!1))&&(Me=Me.replace(M,"")),Me.length===0?Ee.remove():Ee.value=Me}}]},YM=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Ov=(e={},n=Jd())=>{const o=HT(),r=HT(),a={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=jM(a,n),b=(Se,Me,lt="html")=>{const At=lt==="xhtml"?"application/xhtml+xml":"text/html",Gt=fn(n.getSpecialElements(),Me.toLowerCase()),Ge=Gt?`<${Me}>${Se}</${Me}>`:Se,Le=()=>lt==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ge}</body></html>`:/^[\s]*<head/i.test(Se)||/^[\s]*<html/i.test(Se)||/^[\s]*<!DOCTYPE/i.test(Se)?`<html>${Ge}</html>`:`<body>${Ge}</body>`,ct=u.parseFromString(Le(),At).body;return f.sanitizeHtmlElement(ct,At),Gt?ct.firstChild:ct},y=o.addFilter,E=o.getFilters,N=o.removeFilter,M=r.addFilter,$=r.getFilters,j=r.removeFilter,ee=(Se,Me)=>{tM(n,Se)&&Me.push(Se)},G=(Se,Me)=>{const lt=oe(Me.attr(O4)),At=Me.type===1&&!fn(Se,Me.name)&&!ti(n,Me)&&!oc(Me.name);return Me.type===3||At&&!lt},ne=(Se,Me)=>{const lt=qM(GM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),At=/^[ \t\r\n]+/,Gt=/[ \t\r\n]+$/;let Ge=Se.firstChild,Le=null;const ct=on=>{var wn,Ro;on&&(Ge=on.firstChild,Ge&&Ge.type===3&&(Ge.value=(wn=Ge.value)===null||wn===void 0?void 0:wn.replace(At,"")),Ge=on.lastChild,Ge&&Ge.type===3&&(Ge.value=(Ro=Ge.value)===null||Ro===void 0?void 0:Ro.replace(Gt,"")))};if(n.isValidChild(Se.name,Me.toLowerCase())){for(;Ge;){const on=Ge.next;G(lt,Ge)?(Le||(Le=new hi(Me,1),Le.attr(a.forced_root_block_attrs),Se.insert(Le,Ge)),Le.append(Ge)):(ct(Le),Le=null),Ge=on}ct(Le)}},Ee={schema:n,addAttributeFilter:M,getAttributeFilters:$,removeAttributeFilter:j,addNodeFilter:y,getNodeFilters:E,removeNodeFilter:N,parse:(Se,Me={})=>{var lt;const At=a.validate,Gt=(lt=Me.context)!==null&&lt!==void 0?lt:a.root_name,Ge=b(Se,Gt,Me.format);ks(n,Ge);const Le=new hi(Gt,11);KM(Le,Ge,n.getSpecialElements(),f.sanitizeNamespaceElement),Ge.innerHTML="";const[ct,on]=p8(Le,n,a,Me),wn=[],Ro=At?lc=>ee(lc,wn):$e,Fo={nodes:{},attributes:{}},_s=lc=>eM(E(),$(),lc,Fo);if(h8(Le,[ct,_s],[on,Ro]),wn.reverse(),At&&wn.length>0)if(Me.context){const{pass:lc,fail:Kc}=Un(wn,Qs=>Qs.parent===Le);Qm(Kc,n,Le,_s),Me.invalid=lc.length>0}else Qm(wn,n,Le,_s);const Zs=YM(a,Me);return Zs&&(Le.name==="body"||Me.isRootContent)&&ne(Le,Zs),Me.invalid||PA(Fo,Me),Le}};return YL(Ee,a),M2(Ee,a,n),Ee},L2=e=>kp(e)?hh({validate:!1}).serialize(e):e,D4=(e,n,o)=>{const r=L2(e),a=n(r);if(a.isDefaultPrevented())return a;if(kp(e))if(a.content!==r){const u=Ov({validate:!1,forced_root_block:!1,...o}).parse(a.content,{context:e.name});return{...a,content:u}}else return{...a,content:e};else return a},XM=e=>({sanitize:Va(e),sandbox_iframes:ux(e),sandbox_iframes_exclusions:T0(e)}),R4=(e,n)=>{if(n.no_events)return Tl.value(n);{const o=gR(e,n);return o.isDefaultPrevented()?Tl.error(L1(e,{content:"",...o}).content):Tl.value(o)}},JM=(e,n,o)=>o.no_events?n:D4(n,a=>L1(e,{...o,content:a}),XM(e)).content,qT=(e,n)=>{if(n.no_events)return Tl.value(n);{const o=D4(n.content,r=>cv(e,{...n,content:r}),XM(e));return o.isDefaultPrevented()?(I1(e,o),Tl.error(void 0)):Tl.value(o)}},N4=(e,n,o)=>{o.no_events||I1(e,{...o,content:n})},M4=(e,n,o)=>({element:e,width:n,rows:o}),B4=(e,n)=>({element:e,cells:n}),QM=(e,n)=>({x:e,y:n}),P4=(e,n)=>Er(e,n).bind(Kr).getOr(1),eB=(e,n,o,r,a)=>{const u=P4(a,"rowspan"),f=P4(a,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=B4($y(r),[]));for(let E=n;E<n+f;E++){const N=b[y].cells;N[E]=y===o&&E===n?a:Nf(a)}}},tB=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},nB=(e,n,o)=>{for(;tB(e,n,o);)n++;return n},oB=e=>ro(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),sB=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const a=o[r].cells;for(let u=0;u<a.length;u++)if(wo(a[u],n))return F.some(QM(u,r))}return F.none()},rB=(e,n,o,r,a)=>{const u=[],f=e.rows;for(let b=o;b<=a;b++){const y=f[b].cells,E=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(B4(f[b].element,E))}return u},$4=(e,n,o)=>{const r=n.x,a=n.y,u=o.x,f=o.y,b=a<f?rB(e,r,a,u,f):rB(e,r,f,u,a);return M4(e.element,oB(b),b)},H2=(e,n)=>{const o=Nf(e.element),r=me.fromTag("tbody");return Eu(r,n),Rr(o,r),o},cB=e=>Fe(e.rows,n=>{const o=Fe(n.cells,a=>{const u=$y(a);return Ys(u,"colspan"),Ys(u,"rowspan"),u}),r=Nf(n.element);return Eu(r,o),r}),aB=e=>{const n=M4(Nf(e),0,[]);return ie(Aa(e,"tr"),(o,r)=>{ie(Aa(o,"td,th"),(a,u)=>{eB(n,nB(n,u,r),r,o,a)})}),M4(n.element,oB(n.rows),n.rows)},KT=e=>H2(e,cB(e)),b8=(e,n,o)=>sB(e,n).bind(r=>sB(e,o).map(a=>$4(e,r,a))),v8=e=>Po(e,n=>J(n)==="ul"||J(n)==="ol"),ab=(e,n)=>Po(e,o=>J(o)==="li"&&V0(o,n)).fold(Ke([]),o=>v8(e).map(r=>{const a=me.fromTag(J(r)),u=Qo($a(r),(f,b)=>Nn(b,"list-style"));return uo(a,u),[me.fromTag("li"),a]}).getOr([])),F4=(e,n)=>{const o=ro(n,(r,a)=>(Rr(a,r),a),e);return n.length>0?i([o]):o},lB=e=>jg(e)?da(e).filter(Bf).fold(Ke([]),n=>[e,n]):Bf(e)?[e]:[],z2=(e,n,o)=>{const r=me.fromDom(n.commonAncestorContainer),a=um(r,e),u=Bt(a,y=>o.isWrapper(J(y))),f=ab(a,n),b=u.concat(f.length?f:lB(r));return Fe(b,Nf)},I4=()=>i([]),L4=(e,n,o)=>F4(me.fromDom(n.cloneContents()),z2(e,n,o)),iB=(e,n)=>gc(n,"table",je(wo,e)),uB=(e,n)=>iB(e,n[0]).bind(o=>{const r=n[0],a=n[n.length-1],u=aB(o);return b8(u,r,a).map(f=>i([KT(f)]))}).getOrThunk(I4),y8=(e,n,o)=>n.length>0&&n[0].collapsed?I4():L4(e,n[0],o),C8=(e,n,o)=>{const r=FC(n,e);return r.length>0?uB(e,r):y8(e,n,o)},YT=(e,n)=>n>=0&&n<e.length&&tg(e.charAt(n)),XT=e=>wl(e.innerText),w8=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),dB=e=>F.from(e.selection.getRng()).map(n=>{var o;const r=F.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),a=e.getBody(),u=w8(r),f=me.fromDom(n.cloneContents());KR(f),YR(f);const b=e.dom.add(a,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=XT(b),E=wl((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),YT(E,0)||YT(E,E.length-1)){const N=r.getOr(a),M=XT(N),$=M.indexOf(y);if($===-1)return y;{const j=YT(M,$-1),ee=YT(M,$+y.length);return(j?" ":"")+y+(ee?" ":"")}}else return y}).getOr(""),S8=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),a=e.selection.getSel(),u=aT(e,H0(a)),f=n.contextual?C8(me.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},x8=(e,n)=>{if(n.format==="text")return dB(e);{const o=S8(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},T8=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),E8=(e,n,o={})=>{const r=T8(o,n);return R4(e,r).fold(Vn,a=>{const u=x8(e,a);return JM(e,u,a)})},H4=0,mB=1,fB=2,k8=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),a=new Array(o),u=(N,M,$)=>({start:N,end:M,diag:$}),f=(N,M,$,j,ee)=>{const G=y(N,M,$,j);if(G===null||G.start===M&&G.diag===M-j||G.end===N&&G.diag===N-$){let ne=N,ge=$;for(;ne<M||ge<j;)ne<M&&ge<j&&e[ne]===n[ge]?(ee.push([H4,e[ne]]),++ne,++ge):M-N>j-$?(ee.push([fB,e[ne]]),++ne):(ee.push([mB,n[ge]]),++ge)}else{f(N,G.start,$,G.start-G.diag,ee);for(let ne=G.start;ne<G.end;++ne)ee.push([H4,e[ne]]);f(G.end,M,G.end-G.diag,j,ee)}},b=(N,M,$,j)=>{let ee=N;for(;ee-M<j&&ee<$&&e[ee]===n[ee-M];)++ee;return u(N,ee,M)},y=(N,M,$,j)=>{const ee=M-N,G=j-$;if(ee===0||G===0)return null;const ne=ee-G,ge=G+ee,Ee=(ge%2===0?ge:ge+1)/2;r[1+Ee]=N,a[1+Ee]=M+1;let Se,Me,lt,At,Gt;for(Se=0;Se<=Ee;++Se){for(Me=-Se;Me<=Se;Me+=2){for(lt=Me+Ee,Me===-Se||Me!==Se&&r[lt-1]<r[lt+1]?r[lt]=r[lt+1]:r[lt]=r[lt-1]+1,At=r[lt],Gt=At-N+$-Me;At<M&&Gt<j&&e[At]===n[Gt];)r[lt]=++At,++Gt;if(ne%2!==0&&ne-Se<=Me&&Me<=ne+Se&&a[lt-ne]<=r[lt])return b(a[lt-ne],Me+N-$,M,j)}for(Me=ne-Se;Me<=ne+Se;Me+=2){for(lt=Me+Ee-ne,Me===ne-Se||Me!==ne+Se&&a[lt+1]<=a[lt-1]?a[lt]=a[lt+1]-1:a[lt]=a[lt-1],At=a[lt]-1,Gt=At-N+$-Me;At>=N&&Gt>=$&&e[At]===n[Gt];)a[lt]=At--,Gt--;if(ne%2===0&&-Se<=Me&&Me<=Se&&a[lt]<=r[lt+ne])return b(a[lt],Me+N-$,M,j)}}return null},E=[];return f(0,e.length,0,n.length,E),E},gB=e=>Wt(e)?e.outerHTML:vt(e)?gd.encodeRaw(e.data,!1):Vc(e)?"<!--"+e.data+"-->":"",_8=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},A8=(e,n,o)=>{const r=_8(n);if(e.hasChildNodes()&&o<e.childNodes.length){const a=e.childNodes[o];e.insertBefore(r,a)}else e.appendChild(r)},JT=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},ql=(e,n)=>{let o=0;ie(e,r=>{r[0]===H4?o++:r[0]===mB?(A8(n,r[1],o),o++):r[0]===fB&&JT(n,o)})},O8=(e,n)=>Bt(Fe(xr(e.childNodes),A(wl,gB)),o=>o.length>0),QT=(e,n)=>{const o=Fe(xr(n.childNodes),gB);return ql(k8(o,e),n),n},lb=Ve(()=>document.implementation.createHTMLDocument("undo")),hB=e=>e.querySelector("iframe")!==null,mu=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),ib=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),V2=e=>{const n=e.serializer.getTempAttrs(),o=qR(e.getBody(),n);return hB(o)?mu(O8(o)):ib(wl(o.innerHTML))},z4=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?QT(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Ne(r)&&Dx(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},eE=e=>e.type==="fragmented"?e.fragments.join(""):e.content,pB=e=>{const n=me.fromTag("body",lb());return ku(n,eE(e)),ie(Aa(n,"*[data-mce-bogus]"),Fl),tr(n)},bB=(e,n)=>eE(e)===eE(n),U2=(e,n)=>pB(e)===pB(n),W2=(e,n)=>!e||!n?!1:bB(e,n)?!0:U2(e,n),V4=e=>e.get()===0,Z2=(e,n,o)=>{V4(o)&&(e.typing=n)},vB=(e,n)=>{e.typing&&(Z2(e,!1,n),e.add())},U4=e=>{e.typing&&(e.typing=!1,e.add())},W4=(e,n,o)=>{V4(n)&&o.set(rC(e.selection))},D8=(e,n,o,r,a,u,f)=>{const b=V2(e),y=yt.extend(u||{},b);if(!V4(r)||e.removed)return null;const E=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:E,originalEvent:f}).isDefaultPrevented()||E&&W2(E,y))return null;n.data[o.get()]&&a.get().each($=>{n.data[o.get()].beforeBookmark=$});const N=i_(e);if(N&&n.data.length>N){for(let $=0;$<n.data.length-1;$++)n.data[$]=n.data[$+1];n.data.length--,o.set(n.data.length)}y.bookmark=rC(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const M={level:y,lastLevel:E,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",M),e.dispatch("change",M)):e.dispatch("AddUndo",M),y},R8=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},sg=(e,n,o,r,a)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];z4(e,f,!0),n.transact(a)&&(n.data[o.get()-1].beforeBookmark=u)}},Z4=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],z4(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},N8=(e,n,o,r)=>{let a;return n.typing&&(n.add(),n.typing=!1,Z2(n,!1,o)),r.get()>0&&(r.set(r.get()-1),a=n.data[r.get()],z4(e,a,!0),e.setDirty(!0),e.dispatch("Undo",{level:a})),a},tE=e=>{e.clear(),e.add()},j4=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!W2(V2(e),n.data[0]),yB=(e,n)=>n.get()<e.data.length-1&&!e.typing,CB=(e,n,o)=>(vB(e,n),e.beforeChange(),e.ignore(o),e.add()),wB=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},M8=(e,n)=>{const o=e.dom,r=Ne(n)?n:e.getBody();ie(o.select("table,a",r),a=>{switch(a.nodeName){case"TABLE":const u=hC(e),f=o.getAttrib(a,"border");(!f||f==="0")&&e.hasVisual?o.addClass(a,u):o.removeClass(a,u);break;case"A":if(!o.getAttrib(a,"href")){const b=o.getAttrib(a,"name")||a.id,y=pC(e);b&&e.hasVisual?o.addClass(a,y):o.removeClass(a,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},SB=e=>({init:{bindEvents:$e},undoManager:{beforeChange:(n,o)=>W4(e,n,o),add:(n,o,r,a,u,f)=>D8(e,n,o,r,a,u,f),undo:(n,o,r)=>N8(e,n,o,r),redo:(n,o)=>Z4(e,n,o),clear:(n,o)=>R8(e,n,o),reset:n=>tE(n),hasUndo:(n,o)=>j4(e,n,o),hasRedo:(n,o)=>yB(n,o),transact:(n,o,r)=>CB(n,o,r),ignore:(n,o)=>wB(n,o),extra:(n,o,r,a)=>sg(e,n,o,r,a)},formatter:{match:(n,o,r,a)=>ET(e,n,o,r,a),matchAll:(n,o)=>kT(e,n,o),matchNode:(n,o,r,a)=>mm(e,n,o,r,a),canApply:n=>SL(e,n),closest:n=>wL(e,n),apply:(n,o,r)=>TM(e,n,o,r),remove:(n,o,r,a)=>d4(e,n,o,r,a),toggle:(n,o,r)=>h4(e,n,o,r),formatChanged:(n,o,r,a,u)=>UL(e,n,o,r,a,u)},editor:{getContent:n=>XR(e,n),setContent:(n,o)=>xT(e,n,o),insertContent:(n,o)=>Ed(e,n,o),addVisual:n=>M8(e,n)},selection:{getContent:(n,o)=>E8(e,n,o)},autocompleter:{addDecoration:$e,removeDecoration:$e},raw:{getModel:()=>F.none()}}),B8=e=>{const n=E=>ut(E)?E:{},{init:o,undoManager:r,formatter:a,editor:u,selection:f,autocompleter:b,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(E,N,M)=>r.transact(M),ignore:(E,N)=>r.ignore(N),extra:(E,N,M,$)=>r.extra(M,$)},formatter:{match:(E,N,M,$)=>a.match(E,n(N),$),matchAll:a.matchAll,matchNode:a.matchNode,canApply:E=>a.canApply(E),closest:E=>a.closest(E),apply:(E,N,M)=>a.apply(E,n(N)),remove:(E,N,M,$)=>a.remove(E,n(N)),toggle:(E,N,M)=>a.toggle(E,n(N)),formatChanged:(E,N,M,$,j)=>a.formatChanged(N,M,$,j)},editor:{getContent:E=>u.getContent(E),setContent:(E,N)=>({content:u.setContent(E,N),html:""}),insertContent:(E,N)=>(u.insertContent(E),""),addVisual:u.addVisual},selection:{getContent:(E,N)=>f.getContent(N)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>F.some(y.getRawModel())}}},P8=()=>{const e=Ke(null),n=Ke("");return{init:{bindEvents:$e},undoManager:{beforeChange:$e,add:e,undo:e,redo:e,clear:$e,reset:$e,hasUndo:Pe,hasRedo:Pe,transact:e,ignore:$e,extra:$e},formatter:{match:Pe,matchAll:Ke([]),matchNode:Ke(void 0),canApply:Pe,closest:n,apply:$e,remove:$e,toggle:$e,formatChanged:Ke({unbind:$e})},editor:{getContent:n,setContent:Ke({content:"",html:""}),insertContent:Ke(""),addVisual:$e},selection:{getContent:n},autocompleter:{addDecoration:$e,removeDecoration:$e},raw:{getModel:Ke(F.none())}}},rg=e=>fn(e.plugins,"rtc"),xB=e=>Yo(e.plugins,"rtc").bind(n=>F.from(n.setup)),$8=e=>{const n=e;return xB(e).fold(()=>(n.rtcInstance=SB(e),F.none()),o=>(n.rtcInstance=P8(),F.some(()=>o().then(r=>(n.rtcInstance=B8(r),r.rtc.isRemote)))))},G4=e=>e.rtcInstance?e.rtcInstance:SB(e),Na=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},TB=(e,n,o)=>{Na(e).undoManager.beforeChange(n,o)},q4=(e,n,o,r,a,u,f)=>Na(e).undoManager.add(n,o,r,a,u,f),K4=(e,n,o,r)=>Na(e).undoManager.undo(n,o,r),EB=(e,n,o)=>Na(e).undoManager.redo(n,o),Y4=(e,n,o)=>{Na(e).undoManager.clear(n,o)},kB=(e,n)=>{Na(e).undoManager.reset(n)},_B=(e,n,o)=>Na(e).undoManager.hasUndo(n,o),X4=(e,n,o)=>Na(e).undoManager.hasRedo(n,o),AB=(e,n,o,r)=>Na(e).undoManager.transact(n,o,r),OB=(e,n,o)=>{Na(e).undoManager.ignore(n,o)},DB=(e,n,o,r,a)=>{Na(e).undoManager.extra(n,o,r,a)},F8=(e,n,o,r,a)=>Na(e).formatter.match(n,o,r,a),J4=(e,n,o)=>Na(e).formatter.matchAll(n,o),I8=(e,n,o,r,a)=>Na(e).formatter.matchNode(n,o,r,a),nE=(e,n)=>Na(e).formatter.canApply(n),L8=(e,n)=>Na(e).formatter.closest(n),H8=(e,n,o,r)=>{Na(e).formatter.apply(n,o,r)},z8=(e,n,o,r,a)=>{Na(e).formatter.remove(n,o,r,a)},RB=(e,n,o,r)=>{Na(e).formatter.toggle(n,o,r)},NB=(e,n,o,r,a,u)=>Na(e).formatter.formatChanged(n,o,r,a,u),V8=(e,n)=>G4(e).editor.getContent(n),U8=(e,n,o)=>G4(e).editor.setContent(n,o),W8=(e,n,o)=>G4(e).editor.insertContent(n,o),Z8=(e,n,o)=>Na(e).selection.getContent(n,o),j8=(e,n)=>Na(e).editor.addVisual(n),Q4=e=>Na(e).init.bindEvents(),Fj=(e,n={})=>{const o=n.format?n.format:"html";return Z8(e,o,n)},MB=e=>e.dom.length===0?(Ws(e),F.none()):F.some(e),G8=(e,n)=>e.filter(o=>Lu.isBookmarkNode(o.dom)).bind(n?Pa:Ki),q8=(e,n,o,r,a)=>{const u=e.dom,f=n.dom,b=r?u.length:f.length;r?(xA(u,f,a,!1,!r),o.setStart(f,b)):(xA(f,u,a,!1,!r),o.setEnd(f,b))},K8=(e,n,o)=>{da(e).each(r=>{const a=e.dom;n&&m2(r,Ze(a,0),o)?dT(a,0,o):!n&&pv(r,Ze(a,a.length),o)&&SA(a,a.length,o)})},BB=(e,n,o,r,a)=>{e.bind(u=>((r?SA:dT)(u.dom,r?u.dom.length:0,a),n.filter(Ds).map(b=>q8(u,b,o,r,a)))).orThunk(()=>G8(n,r).or(n).filter(Ds).map(f=>K8(f,r,a)))},Y8=(e,n,o)=>{const r=F.from(n.firstChild).map(me.fromDom),a=F.from(n.lastChild).map(me.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(Ki).filter(Ds).bind(MB),f=a.bind(Pa).filter(Ds).bind(MB);BB(u,r,e,!0,o),BB(f,a,e,!1,o),e.collapse(!1)},X8=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),PB=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),a=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...a,...n});return hh({validate:!1},e.schema).serialize(u)}else return n.content},J8=(e,n,o={})=>{const r=X8(o,n);qT(e,r).each(a=>{const u=PB(e,a),f=e.selection.getRng();Y8(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),c2(e,f),N4(e,u,a)})},$B=(e,n,o)=>{if(fn(e,n)){const r=Bt(e[n],a=>a!==o);r.length===0?delete e[n]:e[n]=r}};var Q8=(e,n)=>{let o,r;const a=(b,y)=>Po(y,E=>e.is(E,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const y=b.element,E=u(y),N={};xt(o,(M,$)=>{a($,E).each(j=>{r[$]||(ie(M,ee=>{ee(!0,{node:j,selector:$,parents:E})}),r[$]=M),N[$]=M})}),xt(r,(M,$)=>{N[$]||(delete r[$],ie(M,j=>{j(!1,{node:y,selector:$,parents:E})}))})})};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),a(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{$B(o,b,y),$B(r,b,y)}})}};const FB=e=>!!(e&&e.ownerDocument)&&nc(me.fromDom(e.ownerDocument),me.fromDom(e)),e7=e=>e?FB(e.startContainer)&&FB(e.endContainer):!1,t7=(e,n,o,r)=>{let a,u;const{selectorChangedWithUnbind:f}=Q8(e,r),b=(Pt,vn)=>{const is=e.createRng();Ne(Pt)&&Ne(vn)?(is.setStart(Pt,vn),is.setEnd(Pt,vn),Me(is),ge(!1)):(HC(e,is,r.getBody(),!0),Me(is))},y=Pt=>Fj(r,Pt),E=(Pt,vn)=>J8(r,Pt,vn),N=Pt=>uA(r.getBody(),Se(),Pt),M=Pt=>FR(r.getBody(),Se(),Pt),$=(Pt,vn)=>Kc.getBookmark(Pt,vn),j=Pt=>Kc.moveToBookmark(Pt),ee=(Pt,vn)=>(cT(e,Pt,vn).each(Me),Pt),G=()=>{const Pt=Se(),vn=Ee();return!Pt||Pt.item?!1:Pt.compareEndPoints?Pt.compareEndPoints("StartToEnd",Pt)===0:!vn||Pt.collapsed},ne=()=>{const Pt=Se(),vn=r.getBody().querySelectorAll('[data-mce-selected="1"]');return vn.length>0?As(vn,is=>e.isEditable(is.parentElement)):lA(e,Pt)},ge=Pt=>{const vn=Se();vn.collapse(!!Pt),Me(vn)},Ee=()=>n.getSelection?n.getSelection():n.document.selection,Se=()=>{let Pt;const vn=(zt,On,Ao)=>{try{return On.compareBoundaryPoints(zt,Ao)}catch{return-1}},is=n.document;if(Ne(r.bookmark)&&!gh(r)){const zt=nT(r);if(zt.isSome())return zt.map(On=>aT(r,[On])[0]).getOr(is.createRange())}try{const zt=Ee();zt&&!qd(zt.anchorNode)&&(zt.rangeCount>0?Pt=zt.getRangeAt(0):Pt=is.createRange(),Pt=aT(r,[Pt])[0])}catch{}if(Pt||(Pt=is.createRange()),Cf(Pt.startContainer)&&Pt.collapsed){const zt=e.getRoot();Pt.setStart(zt,0),Pt.setEnd(zt,0)}return a&&u&&(vn(Pt.START_TO_START,Pt,a)===0&&vn(Pt.END_TO_END,Pt,a)===0?Pt=u:(a=null,u=null)),Pt},Me=(Pt,vn)=>{if(!e7(Pt))return;const is=Ee();if(Pt=r.dispatch("SetSelectionRange",{range:Pt,forward:vn}).range,is){u=Pt;try{is.removeAllRanges(),is.addRange(Pt)}catch{}vn===!1&&is.extend&&(is.collapse(Pt.endContainer,Pt.endOffset),is.extend(Pt.startContainer,Pt.startOffset)),a=is.rangeCount>0?is.getRangeAt(0):null}if(!Pt.collapsed&&Pt.startContainer===Pt.endContainer&&(is!=null&&is.setBaseAndExtent)&&Pt.endOffset-Pt.startOffset<2&&Pt.startContainer.hasChildNodes()){const On=Pt.startContainer.childNodes[Pt.startOffset];On&&On.nodeName==="IMG"&&(is.setBaseAndExtent(Pt.startContainer,Pt.startOffset,Pt.endContainer,Pt.endOffset),(is.anchorNode!==Pt.startContainer||is.focusNode!==Pt.endContainer)&&is.setBaseAndExtent(On,0,On,1))}r.dispatch("AfterSetSelectionRange",{range:Pt,forward:vn})},lt=Pt=>(E(e.getOuterHTML(Pt)),Pt),At=()=>d6(r.getBody(),Se()),Gt=(Pt,vn)=>m6(e,Se(),Pt,vn),Ge=()=>{const Pt=Ee(),vn=Pt==null?void 0:Pt.anchorNode,is=Pt==null?void 0:Pt.focusNode;if(!Pt||!vn||!is||qd(vn)||qd(is))return!0;const zt=e.createRng(),On=e.createRng();try{zt.setStart(vn,Pt.anchorOffset),zt.collapse(!0),On.setStart(is,Pt.focusOffset),On.collapse(!0)}catch{return!0}return zt.compareBoundaryPoints(zt.START_TO_START,On)<=0},lc={dom:e,win:n,serializer:o,editor:r,expand:(Pt={type:"word"})=>Me(kt(e).expand(Se(),Pt)),collapse:ge,setCursorLocation:b,getContent:y,setContent:E,getBookmark:$,moveToBookmark:j,select:ee,isCollapsed:G,isEditable:ne,isForward:Ge,setNode:lt,getNode:At,getSel:Ee,setRng:Me,getRng:Se,getStart:N,getEnd:M,getSelectedBlocks:Gt,normalize:()=>{const Pt=Se(),vn=Ee();if(!A_(vn)&&fp(r)){const is=Dt(e,Pt);return is.each(zt=>{Me(zt,Ge())}),is.getOr(Pt)}return Pt},selectorChanged:(Pt,vn)=>(f(Pt,vn),lc),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Pt,vn=e.getRoot();for(;vn&&vn.nodeName!=="BODY";){if(vn.scrollHeight>vn.clientHeight){Pt=vn;break}vn=vn.parentNode}return Pt},scrollIntoView:(Pt,vn)=>{Ne(Pt)?JI(r,Pt,vn):c2(r,Se(),vn)},placeCaretAt:(Pt,vn)=>Me(v(Pt,vn,r.getDoc())),getBoundingClientRect:()=>{const Pt=Se();return Pt.collapsed?Ze.fromRangeStart(Pt).getClientRects()[0]:Pt.getBoundingClientRect()},destroy:()=>{n=a=u=null,Qs.destroy()}},Kc=Lu(lc),Qs=z1(lc,r);return lc.bookmarkManager=Kc,lc.controlSelection=Qs,lc},Ij=(e,n,o)=>{n.addNodeFilter("br",(r,a,u)=>{const f=yt.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),y=o.getWhitespaceElements();f.body=1;const E=N=>N.name in f||ti(o,N);for(let N=0,M=r.length;N<M;N++){let $=r[N],j=$.parent;if(j&&E(j)&&$===j.lastChild){let ee=$.prev;for(;ee;){const G=ee.name;if(G!=="span"||ee.attr("data-mce-type")!=="bookmark"){G==="br"&&($=null);break}ee=ee.prev}if($&&($.remove(),wT(o,b,y,j))){const G=o.getElementRule(j.name);G&&(G.removeEmpty?j.remove():G.paddEmpty&&FA(e,u,E,j))}}else{let ee=$;for(;j&&j.firstChild===ee&&j.lastChild===ee&&(ee=j,!f[j.name]);)j=j.parent;if(ee===j){const G=new hi("#text",3);G.value=xc,$.replace(G)}}}})},n7=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(a,null)}}),e.addAttributeFilter("src,href,style",(r,a)=>{const u="data-mce-"+a,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const E=r[y];let N=E.attr(u);N!==void 0?(E.attr(a,N.length>0?N:null),E.attr(u,null)):(N=E.attr(a),a==="style"?N=o.serializeStyle(o.parseStyle(N),E.name):f&&(N=f.call(b,N,a,E.name)),E.attr(a,N.length>0?N:null))}}),e.addAttributeFilter("class",r=>{let a=r.length;for(;a--;){const u=r[a];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,a,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(F.from(b.firstChild).exists(E=>{var N;return!Uy((N=E.value)!==null&&N!==void 0?N:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,a)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],E=y.firstChild,N=(u=E==null?void 0:E.value)!==null&&u!==void 0?u:"";if(a==="script"){const M=y.attr("type");M&&y.attr("type",M==="mce-no/type"?null:M.replace(/^mce\-/,"")),n.element_format==="xhtml"&&E&&N.length>0&&(E.value=`// <![CDATA[
`+f(N)+`
// ]]>`)}else n.element_format==="xhtml"&&E&&N.length>0&&(E.value=`<!--
`+f(N)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let a=r.length;for(;a--;){const u=r[a],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&a==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{ie(r,a=>{a.attr("data-mce-type")==="format-caret"&&(a.isEmpty(e.schema.getNonEmptyElements())?a.remove():a.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.remove_trailing_brs&&Ij(n,e,e.schema)},o7=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},Lj=(e,n,o)=>{let r;const a=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");yt.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{b.body.appendChild(b.importNode(y,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=a.doc,a.doc=b}return $_(e,{...o,node:u}),r&&(a.doc=r),u},s7=(e,n)=>Ne(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,bc=(e,n,o)=>s7(e,o)?Lj(e,n,o):n,e3=(e,n,o)=>{yt.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.push(o))},Hj=(e,n,o)=>!n.no_events&&e?nv(e,{...n,content:o}).content:o,r7=(e,n,o)=>{const r=wl(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||jb(me.fromDom(n))?r:yt.trim(r)},c7=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,a=e.parse(n,r);return o7(a),a},Dv=(e,n,o)=>hh(e,n).serialize(o),zj=(e,n,o,r,a)=>{const u=Dv(n,o,r);return Hj(e,a,u)},Vj=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},a=n&&n.dom?n.dom:wr.DOM,u=n&&n.schema?n.schema:Jd(r),f=Ov(r,u);n7(f,r,a);const b=(y,E={})=>{const N={format:"html",...E},M=bc(n,y,N),$=r7(a,M,N),j=c7(f,$,N);return N.format==="tree"?j:zj(n,r,u,j,N)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:je(e3,f,o),getTempAttrs:Ke(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},ol=(e,n)=>{const o=Vj(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},IB="html",LB=(e,n)=>({...e,format:n,get:!0,getInner:!0}),HB=(e,n={})=>{const o=n.format?n.format:IB,r=LB(n,o);return R4(e,r).fold(Vn,a=>{const u=V8(e,a);return JM(e,u,a)})},a7="html",l7=(e,n)=>({format:a7,...e,set:!0,content:n}),Rv=(e,n,o={})=>{const r=l7(o,n);return qT(e,r).map(a=>{const u=U8(e,a.content,a);return N4(e,u.html,a),u.content}).getOr(n)},i7="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),t3=[],u7="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),n3=[],o3=(e,n)=>{const o=Bt(n,r=>fn(e,r));return bo(o)},s3=e=>{const n=o3(e,i7),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),bo(n)},zB=e=>o3(e,t3),oE=(e,n)=>{const o=yt.makeMap(e.plugins," "),a=Bt(n,u=>fn(o,u));return bo(a)},d7=e=>oE(e,u7),m7=e=>oE(e,n3.map(n=>n.name)),f7=(e,n)=>{const o=s3(e),r=d7(n),a=r.length>0,u=o.length>0,f=n.theme==="mobile";if(a||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",E=a?`

Plugins:${b}${r.join(b)}`:"",N=u?`

Options:${b}${o.join(b)}`:""}},Od=e=>Po(n3,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),g7=(e,n)=>{const o=zB(e),r=m7(n),a=r.length>0,u=o.length>0;if(a||u){const f=`
- `,b=a?`

Plugins:${f}${r.map(Od).join(f)}`:"",y=u?`

Options:${f}${o.join(f)}`:""}},h7=(e,n)=>{f7(e,n),g7(e,n)},sE=wr.DOM,p7=e=>{sE.setStyle(e.id,"display",e.orgDisplay)},rE=e=>F.from(e).each(n=>n.destroy()),VB=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},b7=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),sE.unbind(n,"submit reset",e.formEventDelegate))},v7=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),a=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Ne(a==null?void 0:a.nextSibling)&&sE.remove(a.nextSibling),ov(e),e.editorManager.remove(e),!e.inline&&r&&p7(e),F_(e),sE.remove(e.getContainer()),rE(n),rE(o),e.destroy()}},y7=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),rE(o),rE(r)),b7(e),VB(e),e.destroyed=!0}},cE=(()=>{const e={};return{add:(a,u)=>{e[a]=u},get:a=>e[a]?e[a]:{icons:{}},has:a=>fn(e,a)}})(),Nv=Cl.ModelManager,c3=(e,n)=>n.dom[e],aE=(e,n)=>parseInt(hc(n,e),10),C7=je(c3,"clientWidth"),w7=je(c3,"clientHeight"),Uj=je(aE,"margin-top"),S7=je(aE,"margin-left"),j2=e=>e.dom.getBoundingClientRect(),UB=(e,n,o)=>{const r=C7(e),a=w7(e);return n>=0&&o>=0&&n<=r&&o<=a},WB=(e,n,o,r)=>{const a=j2(n),u=e?a.left+n.dom.clientLeft+S7(n):0,f=e?a.top+n.dom.clientTop+Uj(n):0,b=o-u,y=r-f;return{x:b,y}},x7=(e,n,o)=>{const r=me.fromDom(e.getBody()),a=e.inline?r:Tm(r),u=WB(e.inline,a,n,o);return UB(a,u.x,u.y)},ZB=e=>F.from(e).map(me.fromDom),T7=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return ZB(n).map(rd).getOr(!1)};var E7=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const jB=e=>{const n=[],o=()=>{const $=e.theme;return $&&$.getNotificationManagerImpl?$.getNotificationManagerImpl():E7()},r=()=>F.from(n[0]),a=($,j)=>$.type===j.type&&$.text===j.text&&!$.progressBar&&!$.timeout&&!j.progressBar&&!j.timeout,u=()=>{r().each($=>{$.reposition()})},f=$=>{n.push($)},b=$=>{Ms(n,j=>j===$).each(j=>{n.splice(j,1)})},y=($,j=!0)=>e.removed||!T7(e)?{}:(j&&e.dispatch("BeforeOpenNotification",{notification:$}),Po(n,ee=>a(o().getArgs(ee),$)).getOrThunk(()=>{e.editorManager.setActive(e);const ee=o().open($,()=>{b(ee)},()=>$R(e));return f(ee),u(),e.dispatch("OpenNotification",{notification:{...ee}}),ee})),E=()=>{r().each($=>{o().close($),b($),u()})},N=Ke(n);return($=>{$.on("SkinLoaded",()=>{const j=El($);j&&y({text:j,type:"warning",timeout:0},!1),u()}),$.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),$.on("remove",()=>{ie(n.slice(),j=>{o().close(j)})}),$.addShortcut("alt+F12","Focus to notification",()=>r().map(j=>me.fromDom(j.getEl())).each(j=>uv(j)))})(e),{open:y,close:E,getNotifications:N}},Mv=Cl.PluginManager,Rp=Cl.ThemeManager;var k7=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const GB=e=>{let n=[];const o=()=>{const G=e.theme;return G&&G.getWindowManagerImpl?G.getWindowManagerImpl():k7()},r=(G,ne)=>(...ge)=>ne?ne.apply(G,ge):void 0,a=G=>{e.dispatch("OpenWindow",{dialog:G})},u=G=>{e.dispatch("CloseWindow",{dialog:G})},f=G=>{n.push(G),a(G)},b=G=>{u(G),n=Bt(n,ne=>ne!==G),n.length===0&&e.focus()},y=()=>F.from(n[n.length-1]),E=G=>{e.editorManager.setActive(e),a2(e),e.ui.show();const ne=G();return f(ne),ne},N=(G,ne)=>E(()=>o().open(G,ne,b)),M=G=>E(()=>o().openUrl(G,b)),$=(G,ne,ge)=>{const Ee=o();Ee.alert(G,r(ge||Ee,ne))},j=(G,ne,ge)=>{const Ee=o();Ee.confirm(G,r(ge||Ee,ne))},ee=()=>{y().each(G=>{o().close(G),b(G)})};return e.on("remove",()=>{ie(n,G=>{o().close(G)})}),{open:N,openUrl:M,alert:$,confirm:j,close:ee}},Bv=(e,n)=>{e.notificationManager.open({type:"error",text:n})},G2=(e,n)=>{e._skinLoaded?Bv(e,n):e.on("SkinLoaded",()=>{Bv(e,n)})},qB=(e,n)=>{G2(e,ga.translate(["Failed to upload image: {0}",n]))},q2=(e,n,o)=>{Wa(e,n,{message:o})},K2=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,_7=(e,n,o)=>{q2(e,"PluginLoadError",K2("plugin",n,o))},KB=(e,n,o)=>{q2(e,"IconsLoadError",K2("icons",n,o))},A7=(e,n,o)=>{q2(e,"LanguageLoadError",K2("language",n,o))},O7=(e,n,o)=>{q2(e,"ThemeLoadError",K2("theme",n,o))},D7=(e,n,o)=>{q2(e,"ModelLoadError",K2("model",n,o))},R7=(e,n,o)=>{const r=ga.translate(["Failed to initialize plugin: {0}",n]);Wa(e,"PluginLoadError",{message:r}),a3(r,o),G2(e,r)},a3=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},of=e=>/^[a-z0-9\-]+$/i.test(e),Y2=e=>"content/"+e+"/content.css",N7=e=>tinymce.Resource.has(Y2(e)),M7=e=>YB(e,r_(e)),B7=e=>YB(e,Zl(e)),YB=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",a=`content${e.editorManager.suffix}.css`;return Fe(n,u=>N7(u)?u:of(u)&&!e.inline?`${o}/${u}/${a}`:e.documentBaseURI.toAbsolute(u))},Hs=e=>{e.contentCSS=e.contentCSS.concat(M7(e),B7(e))},P7=e=>e?xr(e.getElementsByTagName("img")):[],X2=(e,n)=>{const o={};return{findAll:(a,u=et)=>{const f=Bt(P7(a),y=>{const E=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!E||E===gn.transparentSrc?!1:Nn(E,"blob:")?!e.isUploaded(E)&&u(y):Nn(E,"data:")?u(y):!1}),b=Fe(f,y=>{const E=y.src;if(fn(o,E))return o[E].then(N=>oe(N)?N:{image:y,blobInfo:N.blobInfo});{const N=qL(n,E).then(M=>(delete o[E],{image:y,blobInfo:M})).catch(M=>(delete o[E],M));return o[E]=N,N}});return Promise.all(b)}}},XB=()=>{let o={};const r=($,j)=>({status:$,resultUri:j}),a=$=>$ in o;return{hasBlobUri:a,getResultUri:$=>{const j=o[$];return j?j.resultUri:null},isPending:$=>a($)?o[$].status===1:!1,isUploaded:$=>a($)?o[$].status===2:!1,markPending:$=>{o[$]=r(1,null)},markUploaded:($,j)=>{o[$]=r(2,j)},removeFailed:$=>{delete o[$]},destroy:()=>{o={}}}};let $7=0;const F7=()=>{const e=()=>Math.round(Py()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},JB=e=>e+$7+++F7(),Np=()=>{let e=[];const n=M=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[M.toLowerCase()]||"dat",o=(M,$,j,ee,G)=>{if(oe(M))return r({id:M,name:ee,filename:G,blob:$,base64:j});if(ut(M))return r(M);throw new Error("Unknown input type")},r=M=>{if(!M.blob||!M.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const $=M.id||JB("blobid"),j=M.name||$,ee=M.blob;return{id:Ke($),name:Ke(j),filename:Ke(M.filename||j+"."+n(ee.type)),blob:Ke(ee),base64:Ke(M.base64),blobUri:Ke(M.blobUri||URL.createObjectURL(ee)),uri:Ke(M.uri)}},a=M=>{f(M.id())||e.push(M)},u=M=>Po(e,M).getOrUndefined(),f=M=>u($=>$.id()===M);return{create:o,add:a,get:f,getByUri:M=>u($=>$.blobUri()===M),getByData:(M,$)=>u(j=>j.base64()===M&&j.blob().type===$),findFirst:u,removeByUri:M=>{e=Bt(e,$=>$.blobUri()===M?(URL.revokeObjectURL($.blobUri()),!1):!0)},destroy:()=>{ie(e,M=>{URL.revokeObjectURL(M.blobUri())}),e=[]}}},Fi=(e,n)=>{const o={},r=(G,ne)=>G?G.replace(/\/$/,"")+"/"+ne.replace(/^\//,""):ne,a=(G,ne)=>new Promise((ge,Ee)=>{const Se=new XMLHttpRequest;Se.open("POST",n.url),Se.withCredentials=n.credentials,Se.upload.onprogress=lt=>{ne(lt.loaded/lt.total*100)},Se.onerror=()=>{Ee("Image upload failed due to a XHR Transport error. Code: "+Se.status)},Se.onload=()=>{if(Se.status<200||Se.status>=300){Ee("HTTP Error: "+Se.status);return}const lt=JSON.parse(Se.responseText);if(!lt||!oe(lt.location)){Ee("Invalid JSON: "+Se.responseText);return}ge(r(n.basePath,lt.location))};const Me=new FormData;Me.append("file",G.blob(),G.filename()),Se.send(Me)}),u=le(n.handler)?n.handler:a,f=()=>new Promise(G=>{G([])}),b=(G,ne)=>({url:ne,blobInfo:G,status:!0}),y=(G,ne)=>({url:"",blobInfo:G,status:!1,error:ne}),E=(G,ne)=>{yt.each(o[G],ge=>{ge(ne)}),delete o[G]},N=(G,ne,ge)=>(e.markPending(G.blobUri()),new Promise(Ee=>{let Se,Me;try{const lt=()=>{Se&&(Se.close(),Me=$e)},At=Ge=>{lt(),e.markUploaded(G.blobUri(),Ge),E(G.blobUri(),b(G,Ge)),Ee(b(G,Ge))},Gt=Ge=>{lt(),e.removeFailed(G.blobUri()),E(G.blobUri(),y(G,Ge)),Ee(y(G,Ge))};Me=Ge=>{Ge<0||Ge>100||F.from(Se).orThunk(()=>F.from(ge).map(bt)).each(Le=>{Se=Le,Le.progressBar.value(Ge)})},ne(G,Me).then(At,Ge=>{Gt(oe(Ge)?{message:Ge}:Ge)})}catch(lt){Ee(y(G,lt))}})),M=G=>G===a,$=G=>{const ne=G.blobUri();return new Promise(ge=>{o[ne]=o[ne]||[],o[ne].push(ge)})},j=(G,ne)=>(G=yt.grep(G,ge=>!e.isUploaded(ge.blobUri())),Promise.all(yt.map(G,ge=>e.isPending(ge.blobUri())?$(ge):N(ge,u,ne))));return{upload:(G,ne)=>!n.url&&M(u)?f():j(G,ne)}},Pv=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),wh=(e,n)=>Fi(n,{url:u0(e),basePath:d0(e),credentials:US(e),handler:WS(e)}),cg=e=>{const n=XB(),o=wh(e,n);return{upload:(r,a=!0)=>o.upload(r,a?Pv(e):void 0)}},J2=(e,n)=>e.dom.isEmpty(n.dom)&&Ne(e.schema.getTextBlockElements()[J(n)]),l3=e=>n=>{J2(e,n)&&Rr(n,me.fromHtml('<br data-mce-bogus="1" />'))},i3=e=>{const n=Np();let o,r;const a=XB(),u=[],f=Se=>Me=>e.selection?Se(Me):[],b=Se=>Se+(Se.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(Se,Me,lt)=>{let At=0;do At=Se.indexOf(Me,At),At!==-1&&(Se=Se.substring(0,At)+lt+Se.substr(At+Me.length),At+=lt.length-Me.length+1);while(At!==-1);return Se},E=(Se,Me,lt)=>{const At=`src="${lt}"${lt===gn.transparentSrc?' data-mce-placeholder="1"':""}`;return Se=y(Se,`src="${Me}"`,At),Se=y(Se,'data-mce-src="'+Me+'"','data-mce-src="'+lt+'"'),Se},N=(Se,Me)=>{ie(e.undoManager.data,lt=>{lt.type==="fragmented"?lt.fragments=Fe(lt.fragments,At=>E(At,Se,Me)):lt.content=E(lt.content,Se,Me)})},M=(Se,Me)=>{const lt=e.convertURL(Me,"src");N(Se.src,Me),ua(me.fromDom(Se),{src:Is(e)?b(Me):Me,"data-mce-src":lt})},$=()=>(o||(o=wh(e,a)),ne().then(f(Se=>{const Me=Fe(Se,lt=>lt.blobInfo);return o.upload(Me,Pv(e)).then(f(lt=>{const At=[];let Gt=!1;const Ge=Fe(lt,(Le,ct)=>{const{blobInfo:on,image:wn}=Se[ct];let Ro=!1;return Le.status&&za(e)?(Le.url&&!Cn(wn.src,Le.url)&&(Gt=!0),n.removeByUri(wn.src),rg(e)||M(wn,Le.url)):Le.error&&(Le.error.remove&&(N(wn.src,gn.transparentSrc),At.push(wn),Ro=!0),qB(e,Le.error.message)),{element:wn,status:Le.status,uploadUri:Le.url,blobInfo:on,removed:Ro}});return At.length>0&&!rg(e)?e.undoManager.transact(()=>{ie(Xi(At),Le=>{const ct=da(Le);Ws(Le),ct.each(l3(e)),n.removeByUri(Le.dom.src)})}):Gt&&e.undoManager.dispatchChange(),Ge}))}))),j=()=>rc(e)?$():Promise.resolve([]),ee=Se=>As(u,Me=>Me(Se)),G=Se=>{u.push(Se)},ne=()=>(r||(r=X2(a,n)),r.findAll(e.getBody(),ee).then(f(Se=>{const Me=Bt(Se,lt=>oe(lt)?(G2(e,lt),!1):lt.uriType!=="blob");return rg(e)||ie(Me,lt=>{N(lt.image.src,lt.blobInfo.blobUri()),lt.image.src=lt.blobInfo.blobUri(),lt.image.removeAttribute("data-mce-src")}),Me}))),ge=()=>{n.destroy(),a.destroy(),r=o=null},Ee=Se=>Se.replace(/src="(blob:[^"]+)"/g,(Me,lt)=>{const At=a.getResultUri(lt);if(At)return'src="'+At+'"';let Gt=n.getByUri(lt);return Gt||(Gt=ro(e.editorManager.get(),(Ge,Le)=>Ge||Le.editorUpload&&Le.editorUpload.blobCache.getByUri(lt),void 0)),Gt?'src="data:'+Gt.blob().type+";base64,"+Gt.base64()+'"':Me});return e.on("SetContent",()=>{rc(e)?j():ne()}),e.on("RawSaveContent",Se=>{Se.content=Ee(Se.content)}),e.on("GetContent",Se=>{Se.source_view||Se.format==="raw"||Se.format==="tree"||(Se.content=Ee(Se.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Se=>{ie(Se,Me=>{const lt=Me.attr("src");if(!lt||n.getByUri(lt))return;const At=a.getResultUri(lt);At&&Me.attr("src",At)})})}),{blobCache:n,addFilter:G,uploadImages:$,uploadImagesAuto:j,scanForImages:ne,destroy:ge}},QB=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const a={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,a,u]:[a,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(a,u,f)=>Wt(a)&&a.hasAttribute("href"),onformat:(a,u,f)=>{yt.each(f,(b,y)=>{n.setAttrib(a,y,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":a=>{var u;return(u=a==null?void 0:a.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return yt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),a=>{r[a]={block:a,remove:"all"}}),r},u3={remove_similar:!0,inherit:!1},$v={selector:"td,th",...u3},I7={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...$v},tablecellverticalalign:{styles:{"vertical-align":"%value"},...$v},tablecellbordercolor:{styles:{borderColor:"%value"},...$v},tablecellclass:{classes:["%value"],...$v},tableclass:{selector:"table",classes:["%value"],...u3},tablecellborderstyle:{styles:{borderStyle:"%value"},...$v},tablecellborderwidth:{styles:{borderWidth:"%value"},...$v}},eP=Ke(I7),tP=e=>{const n={},o=f=>Ne(f)?n[f]:n,r=f=>fn(n,f),a=(f,b)=>{f&&(oe(f)?(dt(b)||(b=[b]),ie(b,y=>{sn(y.deep)&&(y.deep=!lu(y)),sn(y.split)&&(y.split=!lu(y)||pa(y)),sn(y.remove)&&lu(y)&&!pa(y)&&(y.remove="none"),lu(y)&&pa(y)&&(y.mixed=!0,y.block_expand=!0),oe(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=b):xt(f,(y,E)=>{a(E,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return a(QB(e)),a(eP()),a(qS(e)),{get:o,has:r,register:a,unregister:u}},Q2=yt.each,Zu=wr.DOM,ew=e=>Ne(e)&&ut(e),L7=(e,n)=>{const o=n&&n.schema||Jd({}),r=(y,E)=>{E.classes.length>0&&Zu.addClass(y,E.classes.join(" ")),Zu.setAttribs(y,E.attrs)},a=y=>{const E=oe(y)?{name:y,classes:[],attrs:{}}:y,N=Zu.create(E.name);return r(N,E),N},u=(y,E)=>{const N=o.getElementRule(y.nodeName.toLowerCase()),M=N==null?void 0:N.parentsRequired;return M&&M.length?E&&xe(M,E)?E:M[0]:!1},f=(y,E,N)=>{let M;const $=E[0],j=ew($)?$.name:void 0,ee=u(y,j);if(ee)j===ee?(M=$,E=E.slice(1)):M=ee;else if($)M=$,E=E.slice(1);else if(!N)return y;const G=M?a(M):Zu.create("div");G.appendChild(y),N&&yt.each(N,ge=>{const Ee=a(ge);G.insertBefore(Ee,y)});const ne=ew(M)?M.siblings:void 0;return f(G,E,ne)},b=Zu.create("div");if(e.length>0){const y=e[0],E=a(y),N=ew(y)?y.siblings:void 0;b.appendChild(f(E,e.slice(1),N))}return b},H7=e=>{e=yt.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,a,u,f,b)=>{switch(a){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":yt.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},Wj=e=>oe(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),yt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=yt.map(n.split(/(?:~\+|~|\+)/),H7),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],z7=(e,n)=>{let o="",r=fC(e);if(r==="")return"";const a=$=>oe($)?$.replace(/%(\w+)/g,""):"",u=($,j)=>Zu.getStyle(j??e.getBody(),$,!0);if(oe(n)){const $=e.formatter.get(n);if(!$)return"";n=$[0]}if("preview"in n){const $=n.preview;if($===!1)return"";r=$||r}let f=n.block||n.inline||"span",b;const y=Wj(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=L7(y,e)):b=L7([f],e);const E=Zu.select(f,b)[0]||b.firstChild;Q2(n.styles,($,j)=>{const ee=a($);ee&&Zu.setStyle(E,j,ee)}),Q2(n.attributes,($,j)=>{const ee=a($);ee&&Zu.setAttrib(E,j,ee)}),Q2(n.classes,$=>{const j=a($);Zu.hasClass(E,j)||Zu.addClass(E,j)}),e.dispatch("PreviewFormats"),Zu.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const N=u("fontSize"),M=/px$/.test(N)?parseInt(N,10):0;return Q2(r.split(" "),$=>{let j=u($,E);if(!($==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(j)&&(j=u($),pd(j).toLowerCase()==="#ffffff"))&&!($==="color"&&pd(j).toLowerCase()==="#000000")){if($==="font-size"&&/em|%$/.test(j)){if(M===0)return;j=parseFloat(j)/(/%$/.test(j)?100:1)*M+"px"}$==="border"&&j&&(o+="padding:0 2px;"),o+=$+":"+j+";"}}),e.dispatch("AfterPreviewFormats"),Zu.remove(b),o},V7=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},sf=e=>{const n=tP(e),o=_e({});return V7(e),lM(e),rg(e)||f4(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,a,u)=>{H8(e,r,a,u)},remove:(r,a,u,f)=>{z8(e,r,a,u,f)},toggle:(r,a,u)=>{RB(e,r,a,u)},match:(r,a,u,f)=>F8(e,r,a,u,f),closest:r=>L8(e,r),matchAll:(r,a)=>J4(e,r,a),matchNode:(r,a,u,f)=>I8(e,r,a,u,f),canApply:r=>nE(e,r),formatChanged:(r,a,u,f)=>NB(e,o,r,a,u,f),getCssText:je(z7,e)}},U7=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Zj=(e,n,o)=>{const r=_e(!1),a=y=>{Z2(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const E=y.command;U7(E)||(vB(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const E=y.command;U7(E)||a(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",a),e.on("dragend",a),e.on("keyup",y=>{const E=y.keyCode;if(y.isDefaultPrevented())return;const N=gn.os.isMacOS()&&y.key==="Meta";(E>=33&&E<=36||E>=37&&E<=40||E===45||y.ctrlKey||N)&&(a(),e.nodeChanged()),(E===46||E===8)&&e.nodeChanged(),r.get()&&n.typing&&!W2(V2(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",y=>{const E=y.keyCode;if(y.isDefaultPrevented())return;if(E>=33&&E<=36||E>=37&&E<=40||E===45){n.typing&&a(y);return}const N=y.ctrlKey&&!y.altKey||y.metaKey;if((E<16||E>20)&&E!==224&&E!==91&&!n.typing&&!N){n.beforeChange(),Z2(n,!0,o),n.add({},y),r.set(!0);return}(gn.os.isMacOS()?y.metaKey:y.ctrlKey&&!y.altKey)&&n.beforeChange()}),e.on("mousedown",y=>{n.typing&&a(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&a(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},W7=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},Fv=e=>{const n=La(),o=_e(0),r=_e(0),a={data:[],typing:!1,beforeChange:()=>{TB(e,o,n)},add:(u,f)=>q4(e,a,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=V2(e);u.bookmark=rC(e.selection),e.dispatch("change",{level:u,lastLevel:xa(a.data,r.get()).getOrUndefined()})},undo:()=>K4(e,a,o,r),redo:()=>EB(e,r,a.data),clear:()=>{Y4(e,a,r)},reset:()=>{kB(e,a)},hasUndo:()=>_B(e,a,r),hasRedo:()=>X4(e,a,r),transact:u=>AB(e,a,o,u),ignore:u=>{OB(e,o,u)},extra:(u,f)=>{DB(e,a,r,u,f)}};return rg(e)||Zj(e,a,o),W7(e),a},Z7=[9,27,Ct.HOME,Ct.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Ct.DOWN,Ct.UP,Ct.LEFT,Ct.RIGHT].concat(gn.browser.isFirefox()?[224]:[]),d3="data-mce-placeholder",m3=e=>e.type==="keydown"||e.type==="keyup",f3=e=>{const n=e.keyCode;return n===Ct.BACKSPACE||n===Ct.DELETE},j7=e=>{if(m3(e)){const n=e.keyCode;return!f3(e)&&(Ct.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||xe(Z7,n))}else return!1},G7=e=>m3(e)&&!(f3(e)||e.type==="keyup"&&e.keyCode===229),Mp=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},q7=e=>{var n;const o=e.dom,r=Ha(e),a=(n=v1(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(j7(f))return;const y=e.getBody(),E=G7(f)?!1:Mp(o,y,r);(o.getAttrib(y,d3)!==""!==E||b)&&(o.setAttrib(y,d3,E?a:null),rv(e,E),e.on(E?"keydown":"keyup",u),e.off(E?"keyup":"keydown",u))};Dn(a)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Vu.setEditorTimeout(e,()=>u(b)))})},K7=(e,n)=>({block:e,position:n}),Y7=(e,n)=>({from:e,to:n}),g3=(e,n)=>{const o=me.fromDom(e),r=me.fromDom(n.container());return Or(o,r).map(a=>K7(a,n))},X7=e=>!(nc(e.to.block,e.from.block)||nc(e.from.block,e.to.block)),J7=e=>!wo(e.from.block,e.to.block),nP=(e,n)=>kr(n,a=>d1(a)||tt(a.dom),a=>wo(a,e)).filter(ts).getOr(e),Q7=(e,n)=>{const o=me.fromDom(e);return wo(nP(o,n.from.block),nP(o,n.to.block))},eH=e=>ls(e.from.block.dom)===!1&&ls(e.to.block.dom)===!1,lE=e=>{const n=o=>Pu(o)||fa(o.dom)||jg(o);return n(e.from.block)&&n(e.to.block)},tH=(e,n,o,r)=>as(r.position.getNode())&&!lr(e,r.block)?eg(!1,r.block.dom).bind(a=>a.isEqual(r.position)?jl(o,n,a).bind(u=>g3(n,u)):F.some(r)).getOr(r):r,nH=(e,n,o,r)=>{const a=g3(n,Ze.fromRangeStart(r)),u=a.bind(f=>jl(o,n,f.position).bind(b=>g3(n,b).map(y=>tH(e,n,o,y))));return co(a,u,Y7).filter(f=>J7(f)&&Q7(n,f)&&eH(f)&&lE(f)&&X7(f))},jj=(e,n,o,r)=>r.collapsed?nH(e,n,o,r):F.none(),tw=(e,n)=>{const o=Oc(e);return Ms(o,r=>n.isBlock(J(r))).fold(Ke(o),r=>o.slice(0,r))},oP=(e,n)=>{const o=tw(e,n);return ie(o,Ws),o},iE=(e,n,o)=>{const r=um(o,n);return Po(r.reverse(),a=>lr(e,a)).each(Ws)},oH=(e,n)=>Bt(Tg(n),o=>!lr(e,o)).length===0,sH=(e,n,o,r,a)=>{if(lr(r,o))return ru(o),Ua(o.dom);oH(r,a)&&lr(r,n)&&_a(a,me.fromTag("br"));const u=mi(o.dom,Ze.before(a.dom));return ie(oP(n,r),f=>{_a(a,f)}),iE(r,e,n),u},rH=(e,n)=>e.isInline(J(n)),cH=(e,n,o,r)=>{if(lr(r,o)){if(lr(r,n)){const f=rs((b=>{const y=(E,N)=>ka(E).fold(()=>N,M=>rH(r,M)?y(M,N.concat(Nf(M))):N);return y(b,[])})(o),(b,y)=>(ld(b,y),y),Gg());id(n),Rr(n,f)}return Ws(o),Ua(n.dom)}const a=cu(o.dom);return ie(oP(n,r),u=>{Rr(o,u)}),iE(r,e,n),a},ub=(e,n)=>{const o=um(n,e);return F.from(o[o.length-1])},db=(e,n)=>nc(n,e)?ub(n,e):F.none(),nw=(e,n)=>{eg(e,n.dom).bind(o=>F.from(o.getNode())).map(me.fromDom).filter(ai).each(Ws)},ow=(e,n,o,r)=>(nw(!0,n),nw(!1,o),db(n,o).fold(je(cH,e,n,o,r),je(sH,e,n,o,r))),Bp=(e,n,o,r,a)=>n?ow(e,r,o,a):ow(e,o,r,a),Sh=(e,n)=>{const o=me.fromDom(e.getBody());return jj(e.schema,o.dom,n,e.selection.getRng()).map(a=>()=>{Bp(o,n,a.from.block,a.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},uE=(e,n,o)=>{const r=n.getRng();return co(Or(e,me.fromDom(r.startContainer)),Or(e,me.fromDom(r.endContainer)),(a,u)=>wo(a,u)?F.none():F.some(()=>{r.deleteContents(),Bp(e,!0,a,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(F.none())},sw=(e,n)=>{const o=me.fromDom(n),r=je(wo,e);return yr(o,d1,r).isSome()},sP=(e,n)=>sw(e,n.startContainer)||sw(e,n.endContainer),h3=(e,n)=>{const o=mi(e.dom,Ze.fromRangeStart(n)).isNone(),r=Gl(e.dom,Ze.fromRangeEnd(n)).isNone();return!sP(e,n)&&o&&r},p3=e=>F.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),rP=e=>{const n=me.fromDom(e.getBody()),o=e.selection.getRng();return h3(n,o)?p3(e):uE(n,e.selection,e.schema)},dE=(e,n)=>e.selection.isCollapsed()?F.none():rP(e),ju=(e,n,o,r,a)=>F.from(n._selectionOverrides.showCaret(e,o,r,a)),cP=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},Iv=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?F.none():F.some(cP(n)),aP=(e,n,o)=>{const r=Ra(1,e.getBody(),n),a=Ze.fromRangeStart(r),u=a.getNode();if(sp(u))return ju(1,e,u,!a.isAtEnd(),!1);const f=a.getNode(!0);if(sp(f))return ju(1,e,f,!1,!1);const b=Tp(e.dom.getRoot(),a.getNode());return sp(b)?ju(1,e,b,!1,o):F.none()},Lv=(e,n,o)=>n.collapsed?aP(e,n,o).getOr(n):n,lP=e=>wp(e)||fv(e),iP=e=>Sp(e)||gv(e),uP=(e,n)=>{vt(n)&&n.data.length===0&&e.remove(n)},b3=(e,n,o,r,a,u)=>{ju(r,e,u.getNode(!a),a,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();a?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),uP(e.dom,o)},xh=(e,n)=>{const o=e.selection.getRng();if(!vt(o.commonAncestorContainer))return F.none();const r=n?Mc.Forwards:Mc.Backwards,a=wd(e.getBody()),u=je(_C,n?a.next:a.prev),f=n?lP:iP,b=_1(r,e.getBody(),o),y=u(b),E=y&&pc(n,y);if(!E||!N0(b,E))return F.none();if(f(E))return F.some(()=>b3(e,o,b.getNode(),r,n,E));const N=u(E);return N&&f(N)&&N0(E,N)?F.some(()=>b3(e,o,b.getNode(),r,n,N)):F.none()},ag=(e,n)=>xh(e,n),Gu=(e,n)=>{const o=e.getBody();return n?Ua(o).filter(wp):cu(o).filter(Sp)},v3=e=>{const n=e.selection.getRng();return!n.collapsed&&(Gu(e,!0).exists(o=>o.isEqual(Ze.fromRangeStart(n)))||Gu(e,!1).exists(o=>o.isEqual(Ze.fromRangeEnd(n))))},aH=e=>Ne(e)&&(d1(me.fromDom(e))||jg(me.fromDom(e))),qu=yd.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),lH=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Wt(o)&&o.getAttribute("data-mce-caret")===r},iH=(e,n,o,r,a)=>{const u=f=>a.isInline(f.nodeName.toLowerCase())&&!Di(o,r,e);return D0(!n,o).fold(()=>D0(n,r).fold(Pe,u),u)},dP=(e,n,o,r,a)=>{const u=a.getNode(!o);return Or(me.fromDom(n),me.fromDom(r.getNode())).map(f=>lr(e,f)?qu.remove(f.dom):qu.moveToElement(u)).orThunk(()=>F.some(qu.moveToElement(u)))},mP=(e,n,o,r)=>jl(n,e,o).bind(a=>aH(a.getNode())||iH(e,n,o,a,r)?F.none():n&&ls(a.getNode())||!n&&ls(a.getNode(!0))?dP(r,e,n,o,a):n&&Sp(o)||!n&&wp(o)?F.some(qu.moveToPosition(a)):F.none()),uH=(e,n)=>Xt(n)?F.none():e&&ls(n.nextSibling)?F.some(qu.moveToElement(n.nextSibling)):!e&&ls(n.previousSibling)?F.some(qu.moveToElement(n.previousSibling)):F.none(),dH=(e,n,o)=>o.fold(r=>F.some(qu.remove(r)),r=>F.some(qu.moveToElement(r)),r=>Di(n,r,e)?F.none():F.some(qu.moveToPosition(r))),mH=(e,n,o,r)=>lH(n,o)?uH(n,o.getNode(!n)).orThunk(()=>mP(e,n,o,r)):mP(e,n,o,r).bind(a=>dH(e,o,a)),fH=(e,n,o,r)=>{const a=Ra(n?1:-1,e,o),u=Ze.fromRangeStart(a),f=me.fromDom(e);return!n&&Sp(u)?F.some(qu.remove(u.getNode(!0))):n&&wp(u)?F.some(qu.remove(u.getNode())):!n&&wp(u)&&iT(f,u,r)?dN(f,u,r).map(b=>qu.remove(b.getNode())):n&&Sp(u)&&uN(f,u,r)?Kn(f,u,r).map(b=>qu.remove(b.getNode())):mH(e,n,u,r)},gH=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),Sd(e,n,me.fromDom(o)),!0),y3=(e,n)=>o=>{const r=n?Ze.before(o):Ze.after(o);return e.selection.setRng(r.toRange()),!0},C3=e=>n=>(e.selection.setRng(n.toRange()),!0),w3=(e,n)=>F.from(Tp(e.getBody(),n)),hH=(e,n)=>{const o=e.selection.getNode();return w3(e,o).filter(ls).fold(()=>fH(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(gH(e,n),y3(e,n),C3(e))),()=>F.some($e))},pH=e=>{ie(Aa(e,".mce-offscreen-selection"),Ws)},fP=(e,n)=>{const o=e.selection.getNode();return ls(o)&&!Bg(o)?w3(e,o.parentNode).filter(ls).fold(()=>F.some(()=>{pH(me.fromDom(e.getBody())),Sd(e,n,me.fromDom(e.selection.getNode())),bv(e)}),()=>F.some($e)):v3(e)?F.some(()=>{G1(e,e.selection.getRng(),me.fromDom(e.getBody()))}):F.none()},S3=e=>{const n=e.dom,o=e.selection,r=Tp(e.getBody(),o.getNode());if(tt(r)&&n.isBlock(r)&&n.isEmpty(r)){const a=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(a),o.setRng(Ze.before(a).toRange())}return!0},rw=(e,n)=>e.selection.isCollapsed()?hH(e,n):fP(e,n),x3=e=>e.hasOwnProperty("text"),T3=e=>e.hasOwnProperty("marker"),mE=(e,n)=>{const o=(u,f)=>{if(vt(u))return{text:u,offset:f};{const b=n(),y=u.childNodes;return f<y.length?(u.insertBefore(b,y[f]),{marker:b,before:!0}):(u.appendChild(b),{marker:b,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},gP=e=>{var n,o;const{start:r,end:a}=e,u=new window.Range;return x3(r)?u.setStart(r.text,r.offset):T3(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),x3(a)?u.setEnd(a.text,a.offset):T3(a)&&(a.before?u.setEndBefore(a.marker):u.setEndAfter(a.marker),(o=a.marker.parentNode)===null||o===void 0||o.removeChild(a.marker)),u},E3=(e,n)=>{var o;const r=e.dom,a=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),f=e.getBody();if(((o=a==null?void 0:a.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&a&&u&&a===f.firstChild&&u===f.lastChild&&!r.isEmpty(f)){const y=a.cloneNode(!1),E=()=>{if(n?xp(e):fT(e),f.firstChild!==a){const N=mE(e.selection.getRng(),()=>document.createElement("span"));Array.from(f.childNodes).forEach(M=>y.appendChild(M)),f.appendChild(y),e.selection.setRng(gP(N))}};return F.some(E)}return F.none()},lg=(e,n)=>{const o=Ze.fromRangeStart(e.selection.getRng());return jl(n,e.getBody(),o).filter(r=>n?O6(r):En(r)).bind(r=>kC(n?0:-1,r)).map(r=>()=>e.selection.select(r))},Ku=(e,n)=>e.selection.isCollapsed()?lg(e,n):F.none(),Th=vt,k3=e=>Th(e)&&e.data[0]===na,cw=e=>Th(e)&&e.data[e.data.length-1]===na,_3=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(na)},hP=e=>{var n;if(Th(e.previousSibling))return cw(e.previousSibling)||e.previousSibling.appendData(na),e.previousSibling;if(Th(e))return k3(e)||e.insertData(0,na),e;{const o=_3(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},pP=e=>{var n,o;if(Th(e.nextSibling))return k3(e.nextSibling)||e.nextSibling.insertData(0,na),e.nextSibling;if(Th(e))return cw(e)||e.appendData(na),e;{const r=_3(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},aw=(e,n)=>e?hP(n):pP(n),bP=je(aw,!0),vP=je(aw,!1),lw=(e,n)=>vt(e.container())?aw(n,e.container()):aw(n,e.getNode()),fE=(e,n)=>{const o=n.get();return o&&e.container()===o&&zm(o)},A3=(e,n)=>n.fold(o=>{Jg(e.get());const r=bP(o);return e.set(r),F.some(Ze(r,r.length-1))},o=>Ua(o).map(r=>{if(fE(r,e)){const a=e.get();return Ze(a,1)}else{Jg(e.get());const a=lw(r,!0);return e.set(a),Ze(a,1)}}),o=>cu(o).map(r=>{if(fE(r,e)){const a=e.get();return Ze(a,a.length-1)}else{Jg(e.get());const a=lw(r,!1);return e.set(a),Ze(a,a.length-1)}}),o=>{Jg(e.get());const r=vP(o);return e.set(r),F.some(Ze(r,1))}),yP=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return F.none()},pi=yd.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),CP=(e,n)=>{const o=Jf(n,e);return o||e},wP=(e,n,o)=>{const r=ON(o),a=CP(n,r.container());return ph(e,a,r).fold(()=>Gl(a,r).bind(je(ph,e,a)).map(u=>pi.before(u)),F.none)},bH=(e,n)=>th(e,n)===null,SP=(e,n,o)=>ph(e,n,o).filter(je(bH,n)),O3=(e,n,o)=>{const r=DN(o);return SP(e,n,r).bind(a=>mi(a,r).isNone()?F.some(pi.start(a)):F.none())},vH=(e,n,o)=>{const r=ON(o);return SP(e,n,r).bind(a=>Gl(a,r).isNone()?F.some(pi.end(a)):F.none())},yH=(e,n,o)=>{const r=DN(o),a=CP(n,r.container());return ph(e,a,r).fold(()=>mi(a,r).bind(je(ph,e,a)).map(u=>pi.after(u)),F.none)},xP=e=>!EN(D3(e)),ig=(e,n,o)=>yP([wP,O3,vH,yH],[e,n,o]).filter(xP),D3=e=>e.fold(Vn,Vn,Vn,Vn),TP=e=>e.fold(Ke("before"),Ke("start"),Ke("end"),Ke("after")),gE=e=>e.fold(pi.before,pi.before,pi.after,pi.after),Hv=e=>e.fold(pi.start,pi.start,pi.end,pi.end),R3=(e,n)=>TP(e)===TP(n)&&D3(e)===D3(n),CH=(e,n,o,r,a,u)=>co(ph(n,o,r),ph(n,o,a),(f,b)=>f!==b&&_N(o,f,b)?pi.after(e?f:b):u).getOr(u),wH=(e,n)=>e.fold(et,o=>!R3(o,n)),SH=(e,n,o,r,a)=>{const u=pc(e,a);return jl(e,o,u).map(je(pc,e)).fold(()=>r.map(gE),y=>ig(n,o,y).map(je(CH,e,n,o,u,y)).filter(je(wH,r))).filter(xP)},xH=(e,n)=>e?n.fold(A(F.some,pi.start),F.none,A(F.some,pi.after),F.none):n.fold(F.none,A(F.some,pi.before),F.none,A(F.some,pi.end)),EP=(e,n,o,r)=>{const a=pc(e,r),u=ig(n,o,a);return ig(n,o,a).bind(je(xH,e)).orThunk(()=>SH(e,n,o,u,r))},TH=e=>le(e.selection.getSel().modify),kP=(e,n,o)=>{const r=e?1:-1;return n.setRng(Ze(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},N3=(e,n)=>{const o=n.selection.getRng(),r=e?Ze.fromRangeEnd(o):Ze.fromRangeStart(o);return TH(n)?e&&Wy(r)?kP(!0,n.selection,r):!e&&Yh(r)?kP(!1,n.selection,r):!1:!1};var ug;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(ug||(ug={}));const hE=(e,n)=>e===Mc.Backwards?gs(n):n,EH=(e,n,o)=>e===Mc.Forwards?n.next(o):n.prev(o),kH=(e,n,o,r)=>as(r.getNode(n===Mc.Forwards))?ug.Br:Di(o,r)===!1?ug.Block:ug.Wrap,_P=(e,n,o,r)=>{const a=wd(o);let u=r;const f=[];for(;u;){const b=EH(n,a,u);if(!b)break;if(as(b.getNode(!1)))return n===Mc.Forwards?{positions:hE(n,f).concat([b]),breakType:ug.Br,breakAt:F.some(b)}:{positions:hE(n,f),breakType:ug.Br,breakAt:F.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=kH(o,n,u,b);return{positions:hE(n,f),breakType:y,breakAt:F.some(b)}}f.push(b),u=b}return{positions:hE(n,f),breakType:ug.Eol,breakAt:F.none()}},AP=(e,n,o,r)=>n(o,r).breakAt.map(a=>{const u=n(o,a).positions;return e===Mc.Backwards?u.concat(a):[a].concat(u)}).getOr([]),M3=(e,n)=>ro(e,(o,r)=>o.fold(()=>F.some(r),a=>co(vo(a.getClientRects()),vo(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:a}).or(o)),F.none()),mb=(e,n)=>vo(n.getClientRects()).bind(o=>M3(e,o.left)),Pp=je(_P,Ze.isAbove,-1),iw=je(_P,Ze.isBelow,1),OP=je(AP,-1,Pp),uw=je(AP,1,iw),DP=(e,n)=>Pp(e,n).breakAt.isNone(),RP=(e,n)=>iw(e,n).breakAt.isNone(),_H=e=>Ua(e).map(n=>[n].concat(iw(e,n).positions)).getOr([]),AH=e=>cu(e).map(n=>Pp(e,n).positions.concat(n)).getOr([]),OH=(e,n)=>mb(OP(e,n),n),DH=(e,n)=>mb(uw(e,n),n),RH=ls,NP=(e,n)=>Math.abs(e.left-n),MP=(e,n)=>Math.abs(e.right-n),NH=e=>Bs(e,"node"),BP=(e,n)=>ue(e,(o,r)=>{const a=Math.min(NP(o,n),MP(o,n)),u=Math.min(NP(r,n),MP(r,n));return u===a&&NH(r)&&RH(r.node)||u<a?r:o}),Gj=e=>{const n=o=>Fe(o,r=>{const a=Ff(r);return a.node=e,a});if(Wt(e))return n(e.getClientRects());if(vt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Dd=e=>zs(e,Gj);var fb;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(fb||(fb={}));const PP=(e,n,o,r)=>{let a=r;for(;a=rp(a,e,Jb,n);)if(o(a))return},B3=(e,n,o,r,a,u)=>{let f=0;const b=[],y=M=>{let $=Dd([M]);e===-1&&($=$.reverse());for(let j=0;j<$.length;j++){const ee=$[j];if(!o(ee,E)){if(b.length>0&&n(ee,Be(b))&&f++,ee.line=f,a(ee))return!0;b.push(ee)}}return!1},E=Be(u.getClientRects());if(!E)return b;const N=u.getNode();return N&&(y(N),PP(e,r,y,N)),b},MH=(e,n)=>n.line>e,$P=(e,n)=>n.line===e,BH=je(B3,fb.Up,g1,fr),FP=je(B3,fb.Down,fr,g1),IP=e=>Be(e.getClientRects()),PH=(e,n,o,r)=>{const a=wd(n);let u,f,b,y;const E=[];let N=0;e===1?(u=a.next,f=fr,b=g1,y=Ze.after(r)):(u=a.prev,f=g1,b=fr,y=Ze.before(r));const M=IP(y);do{if(!y.isVisible())continue;const $=IP(y);if(b($,M))continue;E.length>0&&f($,Be(E))&&N++;const j=Ff($);if(j.position=y,j.line=N,o(j))return E;E.push(j)}while(y=u(y));return E},LP=e=>n=>MH(e,n),$p=e=>n=>$P(e,n),dg=(e,n)=>{e.selection.setRng(n),c2(e,e.selection.getRng())},pE=(e,n,o)=>F.some(Lv(e,n,o)),P3=(e,n,o,r,a,u)=>{const f=n===Mc.Forwards,b=wd(e.getBody()),y=je(_C,f?b.next:b.prev),E=f?r:a;if(!o.collapsed){const ee=ii(o);if(u(ee))return ju(n,e,ee,n===Mc.Backwards,!1);if(v3(e)){const G=o.cloneRange();return G.collapse(n===Mc.Backwards),F.from(G)}}const N=_1(n,e.getBody(),o);if(E(N))return Iv(e,N.getNode(!f));let M=y(N);const $=qb(o);if(M)M=pc(f,M);else return $?F.some(o):F.none();if(E(M))return ju(n,e,M.getNode(!f),f,!1);const j=y(M);return j&&E(j)&&N0(M,j)?ju(n,e,j.getNode(!f),f,!1):$?pE(e,M.toRange(),!1):F.none()},bE=(e,n,o,r,a,u)=>{const f=_1(n,e.getBody(),o),b=Be(f.getClientRects()),y=n===fb.Down,E=e.getBody();if(!b)return F.none();if(v3(e)){const ne=y?Ze.fromRangeEnd(o):Ze.fromRangeStart(o);return(y?DH:OH)(E,ne).orThunk(()=>F.from(ne)).map(Ee=>Ee.toRange())}const M=(y?FP:BH)(E,LP(1),f),$=Bt(M,$p(1)),j=b.left,ee=BP($,j);if(ee&&u(ee.node)){const ne=Math.abs(j-ee.left),ge=Math.abs(j-ee.right);return ju(n,e,ee.node,ne<ge,!1)}let G;if(r(f)?G=f.getNode():a(f)?G=f.getNode(!0):G=ii(o),G){const ne=PH(n,E,LP(1),G);let ge=BP(Bt(ne,$p(1)),j);if(ge||(ge=Be(Bt(ne,$p(0))),ge))return pE(e,ge.position.toRange(),!1)}return $.length===0?$3(e,y).filter(y?a:r).map(ne=>Lv(e,ne.toRange(),!1)):F.none()},$3=(e,n)=>{const o=e.selection.getRng(),r=n?Ze.fromRangeEnd(o):Ze.fromRangeStart(o),a=O0(r.container(),e.getBody());if(n){const u=iw(a,r);return ds(u.positions)}else{const u=Pp(a,r);return vo(u.positions)}},HP=(e,n,o)=>$3(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),vE=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},zP=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},$H=(e,n,o)=>A3(n,o).map(r=>(vE(e,r),o)),qj=(e,n,o)=>{const r=Ze.fromRangeStart(e);if(e.collapsed)return r;{const a=Ze.fromRangeEnd(e);return o?mi(n,a).getOr(a):Gl(n,r).getOr(r)}},Kj=(e,n,o)=>{const r=e.getBody(),a=qj(e.selection.getRng(),r,o),u=je(Z1,e);return EP(o,u,r,a).bind(b=>$H(e,n,b))},pm=(e,n,o)=>{const r=Fe(Aa(me.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),a=Bt(r,e),u=Bt(o,e);ie(Hr(a,u),je(zP,!1)),ie(Hr(u,a),je(zP,!0))},FH=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Ze.fromRangeStart(e.selection.getRng());Ze.isTextPosition(r)&&!AN(r)&&(vE(e,gx(o,r)),n.set(null))}},IH=(e,n,o,r)=>{if(n.selection.isCollapsed()){const a=Bt(r,e);ie(a,u=>{const f=Ze.fromRangeStart(n.selection.getRng());ig(e,n.getBody(),f).bind(b=>$H(n,o,b))})}},Fp=(e,n,o)=>jm(e)?Kj(e,n,o).isSome():!1,F3=(e,n,o)=>jm(n)?N3(e,n):!1,LH=e=>{const n=_e(null),o=je(Z1,e);return e.on("NodeChange",r=>{jm(e)&&(pm(o,e.dom,r.parents),FH(e,n),IH(o,e,n,r.parents))}),n},yE=je(F3,!0),HH=je(F3,!1),CE=(e,n,o)=>{if(jm(e)){const r=$3(e,n).getOrThunk(()=>{const a=e.selection.getRng();return n?Ze.fromRangeEnd(a):Ze.fromRangeStart(a)});return ig(je(Z1,e),e.getBody(),r).exists(a=>{const u=gE(a);return A3(o,u).exists(f=>(vE(e,f),!0))})}else return!1},zH=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},VH=e=>co(Ua(e),cu(e),(n,o)=>{const r=pc(!0,n),a=pc(!1,o);return Gl(e,r).forall(u=>u.isEqual(a))}).getOr(!0),I3=(e,n)=>o=>A3(n,o).map(r=>()=>vE(e,r)),VP=(e,n,o,r)=>{const a=e.getBody(),u=je(Z1,e);e.undoManager.ignore(()=>{e.selection.setRng(zH(o,r)),fT(e),ig(u,a,Ze.fromRangeStart(e.selection.getRng())).map(Hv).bind(I3(e,n)).each(mn)}),e.nodeChanged()},Eh=(e,n)=>{const o=Jf(n,e);return o||e},UH=(e,n,o,r)=>{const a=Eh(e.getBody(),r.container()),u=je(Z1,e),f=ig(u,a,r);return f.bind(y=>o?y.fold(Ke(F.some(Hv(y))),F.none,Ke(F.some(gE(y))),F.none):y.fold(F.none,Ke(F.some(gE(y))),F.none,Ke(F.some(Hv(y))))).map(I3(e,n)).getOrThunk(()=>{const y=eh(o,a,r),E=y.bind(N=>ig(u,a,N));return co(f,E,()=>ph(u,a,r).bind(N=>VH(N)?F.some(()=>{Sd(e,o,me.fromDom(N))}):F.none())).getOrThunk(()=>E.bind(()=>y.map(N=>()=>{o?VP(e,n,r,N):VP(e,n,N,r)})))})},L3=(e,n,o)=>{if(e.selection.isCollapsed()&&jm(e)){const r=Ze.fromRangeStart(e.selection.getRng());return UH(e,n,o,r)}return F.none()},WH=e=>Ud(e)>1,UP=(e,n)=>{const o=me.fromDom(e.getBody()),r=me.fromDom(e.selection.getStart()),a=um(r,o);return Ms(a,n).fold(Ke(a),u=>a.slice(0,u))},ZH=e=>Ud(e)===1,H3=e=>UP(e,n=>e.schema.isBlock(J(n))||WH(n)),z3=e=>UP(e,n=>e.schema.isBlock(J(n))),wE=(e,n)=>{const o=je(OT,e);return zs(n,r=>o(r)?[r.dom]:[])},V3=e=>{const n=z3(e);return wE(e,n)},WP=(e,n,o,r)=>{const a=wE(n,r);if(a.length===0)Sd(n,e,o);else{const u=iM(o.dom,a);n.selection.setRng(u.toRange())}},ZP=(e,n)=>{const o=Bt(H3(e),ZH);return ds(o).bind(r=>{const a=Ze.fromRangeStart(e.selection.getRng());return j1(n,a,r.dom)&&!GC(r)?F.some(()=>WP(n,e,r,o)):F.none()})},jH=(e,n)=>{const o=n.parentElement;return as(n)&&!W(o)&&e.dom.isEmpty(o)},dw=e=>GC(me.fromDom(e)),mw=(e,n)=>{const o=e.selection.getStart(),r=jH(e,o)||dw(o)?iM(o,n):OL(e.selection.getRng(),n);e.selection.setRng(r.toRange())},jP=(e,n)=>{const o=Hr(n,V3(e));o.length>0&&mw(e,o)},U3=e=>vt(e.startContainer),GP=e=>e.startOffset===0&&U3(e),qP=(e,n)=>{const o=n.startContainer.parentElement;return!W(o)&&OT(e,me.fromDom(o))},SE=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!W(n)&&!W(o)&&n.isEqualNode(o)},W3=e=>{const n=e.endContainer;return e.endOffset===(vt(n)?n.length:n.childNodes.length)},fw=e=>SE(e)&&W3(e),GH=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),KP=e=>fw(e)||GH(e),qH=e=>{const n=e.selection.getRng();return GP(n)&&qP(e,n)&&KP(n)},KH=e=>{if(qH(e)){const n=V3(e);return F.some(()=>{fT(e),jP(e,n)})}else return F.none()},xE=(e,n)=>e.selection.isCollapsed()?ZP(e,n):KH(e),YH=(e,n)=>Dg(e,o=>au(o.dom),o=>n.isBlock(J(o))),YP=e=>YH(me.fromDom(e.selection.getStart()),e.schema),Yj=e=>{const n=e.selection.getRng();return n.collapsed&&(U3(n)||e.dom.isEmpty(n.startContainer))&&!YP(e)},gw=e=>(Yj(e)&&mw(e,[]),!0),Z3=(e,n,o)=>Ne(o)?F.some(()=>{e._selectionOverrides.hideFakeCaret(),Sd(e,n,me.fromDom(o))}):F.none(),XH=(e,n)=>{const o=n?fv:gv,r=n?Mc.Forwards:Mc.Backwards,a=_1(r,e.getBody(),e.selection.getRng());return o(a)?Z3(e,n,a.getNode(!n)):F.from(pc(n,a)).filter(u=>o(u)&&N0(a,u)).bind(u=>Z3(e,n,u.getNode(!n)))},JH=(e,n)=>{const o=e.selection.getNode();return Ia(o)?Z3(e,n,o):F.none()},j3=(e,n)=>e.selection.isCollapsed()?XH(e,n):JH(e,n),QH=e=>kr(e,n=>tt(n.dom)||ls(n.dom)).exists(n=>tt(n.dom)),G3=e=>Kr(e??"").getOr(0),XP=(e,n)=>{const o=e||Mk(n)?"margin":"padding",r=hc(n,"direction")==="rtl"?"-right":"-left";return o+r},JP=(e,n,o,r,a,u)=>{const f=XP(o,me.fromDom(u)),b=G3(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+a:"")}else{const y=b+r+a;e.setStyle(u,f,y)}},e9=(e,n)=>As(n,o=>{const r=XP(s_(e),o),a=ta(o,r).map(G3).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&a>0}),Ip=e=>{const n=Y3(e);return!e.mode.isReadOnly()&&(n.length>1||e9(e,n))},q3=e=>Bf(e)||jg(e),K3=e=>da(e).exists(q3),Y3=e=>Bt(Xi(e.selection.getSelectedBlocks()),n=>!q3(n)&&!K3(n)&&QH(n)),TE=(e,n)=>{var o,r;const{dom:a}=e,u=ep(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=G3(u),y=s_(e);ie(Y3(e),E=>{JP(a,n,y,b,f,E.dom)})},Lp=e=>TE(e,"indent"),X3=e=>TE(e,"outdent"),Yu=e=>{if(e.selection.isCollapsed()&&Ip(e)){const n=e.dom,o=e.selection.getRng(),r=Ze.fromRangeStart(o),a=n.getParent(o.startContainer,n.isBlock);if(a!==null&&ho(me.fromDom(a),r,e.schema))return F.some(()=>X3(e))}return F.none()},Hp=(e,n,o)=>ec([Yu,rw,ag,(r,a)=>L3(r,n,a),Sh,w2,Ku,j3,dE,xE,E3],r=>r(e,o)).filter(r=>e.selection.isEditable()),J3=(e,n)=>{Hp(e,n,!1).fold(()=>{e.selection.isEditable()&&(fT(e),bv(e))},mn)},t9=(e,n)=>{Hp(e,n,!0).fold(()=>{e.selection.isEditable()&&xp(e)},mn)},QP=(e,n)=>{e.addCommand("delete",()=>{J3(e,n)}),e.addCommand("forwardDelete",()=>{t9(e,n)})},e5=5,n9=400,t5=e=>e.touches===void 0||e.touches.length!==1?F.none():F.some(e.touches[0]),o9=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>e5||r>e5},s9=e=>{const n=La(),o=_e(!1),r=Df(a=>{e.dispatch("longpress",{...a,type:"longpress"}),o.set(!0)},n9);e.on("touchstart",a=>{t5(a).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:a.target};r.throttle(a),o.set(!1),n.set(f)})},!0),e.on("touchmove",a=>{r.cancel(),t5(a).each(u=>{n.on(f=>{o9(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",a=>{r.cancel(),a.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(a.target)).each(()=>{o.get()?a.preventDefault():e.dispatch("tap",{...a,type:"tap"})})},!0)},EE=(e,n)=>fn(e,n.nodeName),r9=(e,n)=>vt(n)?!0:Wt(n)?!EE(e.getBlockElements(),n)&&!Ri(n)&&!Nu(e,n)&&!Wr(n):!1,c9=(e,n,o)=>Re(aN(me.fromDom(o),me.fromDom(n)),r=>EE(e,r.dom)),zv=(e,n)=>{if(vt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||EE(e,n.nextSibling)||Wr(n.nextSibling)}return!1},Vv=e=>e.dom.create(Ha(e),Zf(e)),n5=e=>{const n=e.dom,o=e.selection,r=e.schema,a=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,E=null;const N=Ha(e);if(!u||!Wt(u))return;const M=f.nodeName.toLowerCase();if(!r.isValidChild(M,N.toLowerCase())||c9(a,f,u))return;if(f.firstChild===f.lastChild&&as(f.firstChild)){b=Vv(e),b.appendChild(Gg().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let $=f.firstChild;for(;$;)if(Wt($)&&_r(r,$),r9(r,$)){if(zv(a,$)){y=$,$=$.nextSibling,n.remove(y);continue}if(!b){if(!E&&e.hasFocus()&&(E=mE(e.selection.getRng(),()=>document.createElement("span"))),!$.parentNode){$=null;break}b=Vv(e),f.insertBefore(b,$)}y=$,$=$.nextSibling,b.appendChild(y)}else b=null,$=$.nextSibling;E&&(e.selection.setRng(gP(E)),e.nodeChanged())},Q3=(e,n,o)=>{const r=me.fromDom(Vv(e)),a=Gg();Rr(r,a),o(n,r);const u=document.createRange();return u.setStartBefore(a.dom),u.setEndBefore(a.dom),u},eO=e=>{e.on("NodeChange",()=>n5(e))},o5=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,a9=(e,n,o)=>function(r){const a=arguments,u=a[a.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(a[0])+'">'+e.dom.encode(typeof a[1]=="string"?a[1]:a[0])+"</span>"},l9=(e,n,o)=>{let r=n.length,a=o.content;if(o.format!=="raw"){for(;r--;)a=a.replace(n[r],a9(e,a,lx(e)));o.content=a}},i9=(e,n)=>As(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),u9=e=>{const n="contenteditable",o=" "+yt.trim(h_(e))+" ",r=" "+yt.trim(lx(e))+" ",a=o5(o),u=o5(r),f=Fu(e);f.length>0&&e.on("BeforeSetContent",b=>{l9(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let y=b.length;for(;y--;){const E=b[y];a(E)?E.attr(n,"true"):u(E)&&E.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const E=b[y];if(!a(E)&&!u(E))continue;const N=E.attr("data-mce-content");f.length>0&&N?i9(f,N)?(E.name="#text",E.type=3,E.raw=!0,E.value=N):E.remove():E.attr(n,null)}})},d9=e=>hn(me.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),s5=(e,n)=>{n.hasAttribute("data-mce-caret")&&(nm(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},r5=(e,n)=>{const o=d9(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),s5(e,o);return}yS(o)&&(s5(e,o),e.undoManager.add())}},m9=e=>{e.on("keyup compositionstart",je(r5,e))},c5=ls,Xu=(e,n,o)=>P3(n,e,o,wp,Sp,c5),f9=(e,n,o)=>bE(n,e,o,u=>wp(u)||cN(u),u=>Sp(u)||d2(u),c5),tO=e=>{const n=e.dom.create(Ha(e));return n.innerHTML='<br data-mce-bogus="1">',n},nO=(e,n,o)=>{const r=wd(e.getBody()),a=je(_C,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!a(Ze.fromRangeStart(o))){const b=me.fromDom(tO(e));n===1?ul(me.fromDom(u),b):_a(me.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},oO=(e,n)=>{const o=n?Mc.Forwards:Mc.Backwards,r=e.selection.getRng();return Xu(o,e,r).orThunk(()=>(nO(e,o,r),F.none()))},g9=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return f9(o,e,r).orThunk(()=>(nO(e,o,r),F.none()))},h9=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return EN(o)?!n:n},a5=(e,n)=>oO(e,h9(e.selection,n)).exists(o=>(dg(e,o),!0)),l5=(e,n)=>g9(e,n).exists(o=>(dg(e,o),!0)),i5=(e,n)=>HP(e,n,n?Sp:wp),hw=(e,n)=>Gu(e,!n).map(o=>{const r=o.toRange(),a=e.selection.getRng();return n?r.setStart(a.startContainer,a.startOffset):r.setEnd(a.endContainer,a.endOffset),r}).exists(o=>(dg(e,o),!0)),p9=e=>xe(["figcaption"],J(e)),b9=(e,n,o)=>{const r=je(wo,n);return kr(me.fromDom(e.container()),a=>o.isBlock(J(a)),r).filter(p9)},pw=(e,n,o)=>n?RP(e.dom,o):DP(e.dom,o),kh=(e,n)=>{const o=me.fromDom(e.getBody()),r=Ze.fromRangeStart(e.selection.getRng());return b9(r,o,e.schema).exists(()=>{if(pw(o,n,r)){const u=Q3(e,o,n?Rr:bf);return e.selection.setRng(u),!0}else return!1})},zp=(e,n)=>e.selection.isCollapsed()?kh(e,n):!1,kE=(e,n,o)=>{const r=e.selection.getRng(),a=Ze.fromRangeStart(r);return e.getBody().firstChild===n&&DP(o,a)?(e.execCommand("InsertNewBlockBefore"),!0):!1},sO=(e,n)=>{const o=e.selection.getRng(),r=Ze.fromRangeStart(o);return e.getBody().lastChild===n&&RP(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},rO=(e,n)=>n?F.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>sO(e,o)).getOr(!1):F.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>F.from(e.dom.getParent(o,"details")).map(r=>kE(e,r,o))).getOr(!1),cO=(e,n)=>rO(e,n),u5={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},d5=e=>Fe(e,n=>({...u5,...n})),m5=e=>Fe(e,n=>({...u5,...n})),f5=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,v9=(e,n)=>zs(d5(e),o=>f5(o,n)?[o]:[]),y9=(e,n)=>zs(m5(e),o=>f5(o,n)?[o]:[]),no=(e,...n)=>()=>e.apply(null,n),bw=(e,n)=>Po(v9(e,n),o=>o.action()),g5=(e,n)=>ec(y9(e,n),o=>o.action()),aO=(e,n)=>{const o=n?Mc.Forwards:Mc.Backwards,r=e.selection.getRng();return P3(e,o,r,fv,gv,Ia).exists(a=>(dg(e,a),!0))},lO=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return bE(e,o,r,fv,gv,Ia).exists(a=>(dg(e,a),!0))},C9=(e,n)=>HP(e,n,n?gv:fv),w9=yd.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),vw={...w9,none:e=>w9.none(e)},Xj=(e,n)=>S9(e,n,et),S9=(e,n,o)=>zs(Oc(e),r=>Si(r,n)?o(r)?[r]:[]:S9(r,n,o)),x9=(e,n,o=Pe)=>{if(o(n))return F.none();if(xe(e,J(n)))return F.some(n);const r=a=>Si(a,"table")||o(a);return gc(n,e.join(","),r)},T9=(e,n)=>x9(["td","th"],e,n),Jj=e=>Xj(e,"th,td"),h5=(e,n)=>Yi(e,"table",n),Kl=(e,n,o,r,a=et)=>{const u=r===1;if(!u&&o<=0)return vw.first(e[0]);if(u&&o>=e.length-1)return vw.last(e[e.length-1]);{const f=o+r,b=e[f];return a(b)?vw.middle(n,b):Kl(e,n,f,r,a)}},iO=(e,n)=>h5(e,n).bind(o=>{const r=Jj(o);return Ms(r,u=>wo(e,u)).map(u=>({index:u,all:r}))}),yw=(e,n,o)=>iO(e,o).fold(()=>vw.none(e),a=>Kl(a.all,e,a.index,1,n)),E9=(e,n,o)=>iO(e,o).fold(()=>vw.none(),a=>Kl(a.all,e,a.index,-1,n)),p5=e=>Kh(e).filter(n=>n.trim().length!==0||n.indexOf(xc)>-1).isSome(),b5=e=>Wn(e)&&Hc(e,"contenteditable")==="false",uO=["img","br"],k9=e=>p5(e)||xe(uO,J(e))||b5(e),_9=e=>_g(e,k9),v5=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),A9=(e,n)=>zs(n,o=>{const r=v5(Ff(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),O9=(e,n,o)=>ro(e,(r,a)=>r.fold(()=>F.some(a),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(a.x-n)+Math.abs(a.y-o));return F.some(b<f?a:u)}),F.none()),y5=(e,n,o,r,a)=>{const u=Aa(me.fromDom(o),"td,th,caption").map(b=>b.dom),f=Bt(A9(e,u),b=>n(b,a));return O9(f,r,a).map(b=>b.cell)},dO=e=>e.bottom,D9=e=>e.top,R9=(e,n)=>e.y<n,Qj=(e,n)=>e.y>n,N9=je(y5,dO,R9),C5=je(y5,D9,Qj),eG=(e,n)=>vo(n.getClientRects()).bind(o=>N9(e,o.left,o.top)).bind(o=>mb(AH(o),n)),M9=(e,n)=>ds(n.getClientRects()).bind(o=>C5(e,o.left,o.top)).bind(o=>mb(_H(o),n)),B9=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),P9=e=>e.breakType===ug.Wrap&&e.positions.length===0,mO=e=>e.breakType===ug.Br&&e.positions.length===1,Cw=(e,n,o)=>{const r=e(n,o);return P9(r)||!as(o.getNode())&&mO(r)?!B9(e,n,r):r.breakAt.isNone()},w5=je(Cw,Pp),S5=je(Cw,iw),$9=(e,n,o)=>{const r=Ze.fromRangeStart(n);return eg(!e,o).exists(a=>a.isEqual(r))},F9=(e,n,o,r)=>{const a=e.selection.getRng(),u=n?1:-1;return w_()&&$9(n,a,o)?(ju(u,e,o,!n,!1).each(f=>{dg(e,f)}),!0):!1},fO=(e,n,o)=>eG(n,o).orThunk(()=>vo(o.getClientRects()).bind(r=>M3(OP(e,Ze.before(n)),r.left))).getOr(Ze.before(n)),I9=(e,n,o)=>M9(n,o).orThunk(()=>vo(o.getClientRects()).bind(r=>M3(uw(e,Ze.after(n)),r.left))).getOr(Ze.after(n)),x5=(e,n)=>{const o=n.getNode(e);return Qi(o)?F.some(o):F.none()},L9=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?ul:_a,a=Q3(n,me.fromDom(o),r);dg(n,a)})},T5=(e,n,o)=>{const r=x5(!!n,o),a=n===!1;r.fold(()=>dg(e,o.toRange()),u=>eg(a,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>dg(e,o.toRange()),f=>L9(n,e,u)))},bm=(e,n,o,r)=>{const a=e.selection.getRng(),u=Ze.fromRangeStart(a),f=e.getBody();if(!n&&w5(r,u)){const b=fO(f,o,u);return T5(e,n,b),!0}else if(n&&S5(r,u)){const b=I9(f,o,u);return T5(e,n,b),!0}else return!1},gO=(e,n,o)=>F.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>F.from(e.dom.getParent(r,"table")).map(a=>o(e,n,a,r))).getOr(!1),hO=(e,n)=>gO(e,n,F9),E5=(e,n)=>gO(e,n,bm),tG=e=>{const n=bp.exact(e,0,e,0);return m(n)},H9=(e,n,o)=>o.fold(F.none,F.none,(r,a)=>_9(a).map(u=>tG(u)),r=>(e.execCommand("mceTableInsertRowAfter"),z9(e,n,r))),z9=(e,n,o)=>H9(e,n,yw(o,zc)),V9=(e,n,o)=>H9(e,n,E9(o,zc)),ww=(e,n)=>{const o=["table","li","dl"],r=me.fromDom(e.getBody()),a=b=>{const y=J(b);return wo(b,r)||xe(o,y)},u=e.selection.getRng(),f=me.fromDom(n?u.endContainer:u.startContainer);return T9(f,a).map(b=>(h5(b,a).each(N=>{e.model.table.clearSelectedCells(N.dom)}),e.selection.collapse(!n),(n?z9:V9)(e,a,b).each(N=>{e.selection.setRng(N)}),!0)).getOr(!1)},U9=(e,n,o)=>{const r=gn.os.isMacOS()||gn.os.isiOS();bw([{keyCode:Ct.RIGHT,action:no(a5,e,!0)},{keyCode:Ct.LEFT,action:no(a5,e,!1)},{keyCode:Ct.UP,action:no(l5,e,!1)},{keyCode:Ct.DOWN,action:no(l5,e,!0)},...r?[{keyCode:Ct.UP,action:no(hw,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Ct.DOWN,action:no(hw,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Ct.RIGHT,action:no(hO,e,!0)},{keyCode:Ct.LEFT,action:no(hO,e,!1)},{keyCode:Ct.UP,action:no(E5,e,!1)},{keyCode:Ct.DOWN,action:no(E5,e,!0)},{keyCode:Ct.UP,action:no(E5,e,!1)},{keyCode:Ct.UP,action:no(cO,e,!1)},{keyCode:Ct.DOWN,action:no(cO,e,!0)},{keyCode:Ct.RIGHT,action:no(aO,e,!0)},{keyCode:Ct.LEFT,action:no(aO,e,!1)},{keyCode:Ct.UP,action:no(lO,e,!1)},{keyCode:Ct.DOWN,action:no(lO,e,!0)},{keyCode:Ct.RIGHT,action:no(Fp,e,n,!0)},{keyCode:Ct.LEFT,action:no(Fp,e,n,!1)},{keyCode:Ct.RIGHT,ctrlKey:!r,altKey:r,action:no(yE,e,n)},{keyCode:Ct.LEFT,ctrlKey:!r,altKey:r,action:no(HH,e,n)},{keyCode:Ct.UP,action:no(zp,e,!1)},{keyCode:Ct.DOWN,action:no(zp,e,!0)}],o).each(a=>{o.preventDefault()})},pO=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||U9(e,n,o)})},vm=(e,n)=>({container:e,offset:n}),Sw=wr.DOM,xw=e=>n=>e===n?-1:0,W9=e=>n=>e.isBlock(n)||xe(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",bO=(e,n,o)=>{if(vt(e)&&n>=0)return F.some(vm(e,n));{const r=Zg(Sw);return F.from(r.backwards(e,n,xw(e),o)).map(a=>vm(a.container,a.container.data.length))}},Z9=(e,n,o)=>{if(vt(e)&&n>=e.length)return F.some(vm(e,n));{const r=Zg(Sw);return F.from(r.forwards(e,n,xw(e),o)).map(a=>vm(a.container,0))}},vO=(e,n,o)=>{if(!vt(e))return F.none();const r=e.data;if(n>=0&&n<=r.length)return F.some(vm(e,n));{const a=Zg(Sw);return F.from(a.backwards(e,n,xw(e),o)).bind(u=>{const f=u.container.data;return vO(u.container,n+f.length,o)})}},Tw=(e,n,o)=>{if(!vt(e))return F.none();const r=e.data;if(n<=r.length)return F.some(vm(e,n));{const a=Zg(Sw);return F.from(a.forwards(e,n,xw(e),o)).bind(u=>Tw(u.container,n-r.length,o))}},yO=(e,n,o,r,a)=>{const u=Zg(e,W9(e));return F.from(u.backwards(n,o,r,a))},j9=e=>e.collapsed&&vt(e.startContainer),G9=e=>wl(e.toString().replace(/\u00A0/g," ")),_E=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,q9=(e,n)=>e.substring(n.length),K9=(e,n,o,r=!1)=>{let a;const u=o.charAt(0);for(a=n-1;a>=0;a--){const f=e.charAt(a);if(!r&&_E(f))return F.none();if(u===f&&Cn(e,o,a,n))break}return F.some(a)},AE=(e,n,o,r=!1)=>{if(!j9(n))return F.none();const a={text:"",offset:0},u=(b,y,E)=>(a.text=E+a.text,a.offset+=y,K9(a.text,a.offset,o,r).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return yO(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return F.none();const E=G9(y);return E.lastIndexOf(o)!==0?F.none():F.some({text:q9(E,o),range:y,trigger:o})})},Y9=e=>e.nodeType===q,X9=e=>e.nodeType===hu,k5=e=>{if(Y9(e))return vm(e,e.data.length);{const n=e.childNodes;return n.length>0?k5(n[n.length-1]):vm(e,n.length)}},_5=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?_5(o[n],0):o.length>0&&X9(e)&&o.length===n?k5(o[o.length-1]):vm(e,n)},J9=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return yO(e,n.container,n.offset,(a,u)=>u===0?-1:u,r).filter(a=>{const u=a.container.data.charAt(a.offset-1);return!_E(u)}).isSome()},Q9=e=>n=>{const o=_5(n.startContainer,n.startOffset);return!J9(e,o)},CO=(e,n,o)=>ec(o.triggers,r=>AE(e,n,r)),ez=(e,n)=>{const o=n(),r=e.selection.getRng();return CO(e.dom,r,o).bind(a=>wO(e,n,a))},wO=(e,n,o,r={})=>{var a;const u=n(),b=(a=e.selection.getRng().startContainer.nodeValue)!==null&&a!==void 0?a:"",y=Bt(u.lookupByTrigger(o.trigger),N=>o.text.length>=N.minChars&&N.matches.getOrThunk(()=>Q9(e.dom))(o.range,b,o.text));if(y.length===0)return F.none();const E=Promise.all(Fe(y,N=>N.fetch(o.text,N.maxResults,r).then($=>({matchText:o.text,items:$,columns:N.columns,onAction:N.onAction,highlightOn:N.highlightOn}))));return F.some({lookupData:E,context:o})};var rf;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(rf||(rf={}));const SO=(e,n,o)=>e.stype===rf.Error?n(e.serror):o(e.svalue),tz=e=>{const n=[],o=[];return ie(e,r=>{SO(r,a=>o.push(a),a=>n.push(a))}),{values:n,errors:o}},nz=(e,n)=>e.stype===rf.Error?{stype:rf.Error,serror:n(e.serror)}:e,oz=(e,n)=>e.stype===rf.Value?{stype:rf.Value,svalue:n(e.svalue)}:e,sz=(e,n)=>e.stype===rf.Value?n(e.svalue):e,wa=(e,n)=>e.stype===rf.Error?n(e.serror):e,A5=e=>({stype:rf.Value,svalue:e}),O5=e=>({stype:rf.Error,serror:e}),ja={fromResult:e=>e.fold(O5,A5),toResult:e=>SO(e,Tl.error,Tl.value),svalue:A5,partition:tz,serror:O5,bind:sz,bindError:wa,map:oz,mapError:nz,fold:SO},OE=e=>ut(e)&&yo(e).length>100?" removed due to size":JSON.stringify(e,null,2),Vp=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Ke("... (only showing first ten failures)")}]):e;return Fe(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},Uv=(e,n)=>ja.serror([{path:e,getErrorInfo:n}]),D5=(e,n,o)=>Uv(e,()=>'Could not find valid *required* value for "'+n+'" in '+OE(o)),xO=(e,n)=>Uv(e,()=>'Choice schema did not contain choice key: "'+n+'"'),TO=(e,n,o)=>Uv(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+OE(n)),EO=(e,n)=>Uv(e,Ke(n)),R5=(e,n,o,r)=>Yo(o,r).fold(()=>TO(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),DE=(e,n)=>({extract:(a,u)=>Yo(u,e).fold(()=>xO(a,e),b=>R5(a,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+yo(n)}),RE=(e,n)=>n,Ew=(e,n)=>oo(e)&&oo(n)?fu(e,n):n,Wv=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const a=n[r];for(const u in a)fn(a,u)&&(o[u]=e(o[u],a[u]))}return o},fu=Wv(Ew),Zv=Wv(RE),kO=()=>({tag:"required",process:{}}),N5=e=>({tag:"defaultedThunk",process:e}),M5=e=>N5(Ke(e)),B5=()=>({tag:"option",process:{}}),cz=(e,n)=>e.length>0?ja.svalue(fu(n,Zv.apply(void 0,e))):ja.svalue(n),P5=e=>A(ja.serror,ra)(e),az={consolidateObj:(e,n)=>{const o=ja.partition(e);return o.errors.length>0?P5(o.errors):cz(o.values,n)},consolidateArr:e=>{const n=ja.partition(e);return n.errors.length>0?P5(n.errors):ja.svalue(n.values)}},lz=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),iz=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),$5=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},_O=e=>{const n=(r,a)=>ja.bindError(e(a),u=>EO(r,u)),o=Ke("val");return{extract:n,toString:o}},uz=_O(ja.svalue),dz=(e,n,o,r)=>Yo(n,o).fold(()=>D5(e,o,n),r),F5=(e,n,o,r)=>{const a=Yo(e,n).getOrThunk(()=>o(e));return r(a)},mz=(e,n,o)=>o(Yo(e,n)),fz=(e,n,o,r)=>{const a=Yo(e,n).map(u=>u===!0?o(e):u);return r(a)},gz=(e,n,o,r,a)=>{const u=b=>a.extract(n.concat([r]),b),f=b=>b.fold(()=>ja.svalue(F.none()),y=>{const E=a.extract(n.concat([r]),y);return ja.map(E,F.some)});switch(e.tag){case"required":return dz(n,o,r,u);case"defaultedThunk":return F5(o,r,e.process,u);case"option":return mz(o,r,f);case"defaultedOptionThunk":return fz(o,r,e.process,f);case"mergeWithThunk":return F5(o,r,Ke({}),b=>{const y=fu(e.process(o),b);return u(y)})}},hz=(e,n,o)=>{const r={},a=[];for(const u of o)$5(u,(f,b,y,E)=>{const N=gz(y,e,n,f,E);ja.fold(N,M=>{a.push(...M)},M=>{r[b]=M})},(f,b)=>{r[f]=b(n)});return a.length>0?ja.serror(a):ja.svalue(r)},AO=e=>({extract:(r,a)=>hz(r,a,e),toString:()=>`obj{
`+Fe(e,a=>$5(a,(u,f,b,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),OO=e=>({extract:(r,a)=>{const u=Fe(a,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return az.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),I5=e=>_O(n=>e(n).fold(ja.serror,ja.svalue)),L5=(e,n,o)=>{const r=n.extract([e],o);return ja.mapError(r,a=>({input:o,errors:a}))},pz=(e,n,o)=>ja.toResult(L5(e,n,o)),bz=e=>`Errors: 
`+Vp(e.errors).join(`
`)+`

Input object: `+OE(e.input),H5=(e,n)=>DE(e,Eo(n,AO)),vz=Ke(uz),kw=(e,n)=>_O(o=>{const r=typeof o;return e(o)?ja.svalue(o):ja.serror(`Expected type: ${n} but got: ${r}`)}),yz=kw(Bo,"number"),_w=kw(oe,"string"),Cz=kw(Rt,"boolean"),ME=kw(le,"function"),jv=lz,z5=iz,wz=e=>I5(n=>xe(e,n)?Tl.value(n):Tl.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),V5=(e,n)=>jv(e,e,kO(),n),U5=e=>V5(e,_w),DO=e=>V5(e,ME),Sz=(e,n)=>jv(e,e,kO(),OO(n)),RO=(e,n)=>jv(e,e,B5(),n),Aw=e=>RO(e,_w),xz=e=>RO(e,ME),Tz=(e,n)=>jv(e,e,M5(n),vz()),gb=(e,n,o)=>jv(e,e,M5(n),o),W5=(e,n)=>gb(e,n,yz),Ez=(e,n)=>gb(e,n,_w),Z5=(e,n,o)=>gb(e,n,wz(o)),BE=(e,n)=>gb(e,n,Cz),PE=(e,n)=>gb(e,n,ME),kz=(e,n,o)=>gb(e,n,OO(o)),_z=U5("type"),Az=DO("fetch"),NO=DO("onAction"),Oz=PE("onSetup",()=>$e),Dz=Aw("text"),Rz=Aw("icon"),Nz=Aw("tooltip"),sG=Aw("label"),Mz=BE("active",!1),j5=BE("enabled",!0),MO=BE("primary",!1),G5=e=>Tz("columns",e),Ow=e=>Ez("type",e),q5=AO([_z,U5("trigger"),W5("minChars",1),G5(1),W5("maxResults",10),xz("matches"),Az,NO,kz("highlightOn",[],_w)]),K5=e=>pz("Autocompleter",q5,e),BO=[j5,Nz,Rz,Dz,Oz],Y5=[Mz].concat(BO),Bz=[PE("predicate",Pe),Z5("scope","node",["node","editor"]),Z5("position","selection",["node","selection","line"])],X5=BO.concat([Ow("contextformbutton"),MO,NO,z5("original",Vn)]),Pz=Y5.concat([Ow("contextformbutton"),MO,NO,z5("original",Vn)]),PO=BO.concat([Ow("contextformbutton")]),$z=Y5.concat([Ow("contextformtogglebutton")]),Fz=H5("type",{contextformbutton:X5,contextformtogglebutton:Pz});AO([Ow("contextform"),PE("initValue",Ke("")),sG,Sz("commands",Fz),RO("launch",H5("type",{contextformbutton:PO,contextformtogglebutton:$z}))].concat(Bz));const Iz=e=>{const n=e.ui.registry.getAll().popups,o=Eo(n,f=>K5(f).fold(b=>{throw new Error(bz(b))},Vn)),r=Ga(Fc(o,f=>f.trigger)),a=dc(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Bt(a,b=>b.trigger===f)}},J5=(e,n)=>{const o=Df(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const a=r.which;a===8?o.throttle():a===27?(o.cancel(),n.cancelIfNecessary()):(a===38||a===40)&&o.cancel()},!0),e.on("remove",o.cancel)},Lz=e=>{const n=La(),o=_e(!1),r=n.isSet,a=()=>{r()&&(Wx(e),o.set(!1),n.clear())},u=M=>{r()||n.set({trigger:M.trigger,matchLength:M.text.length})},f=Ve(()=>Iz(e)),b=M=>n.get().map($=>AE(e.dom,e.selection.getRng(),$.trigger,!0).bind(j=>wO(e,f,j,M))).getOrThunk(()=>ez(e,f)),y=M=>{b(M).fold(a,$=>{u($.context),$.lookupData.then(j=>{n.get().map(ee=>{const G=$.context;ee.trigger===G.trigger&&(n.set({...ee,matchLength:G.text.length}),o.get()?(Ux(e,{range:G.range}),Vx(e,{lookupData:j})):(o.set(!0),Ux(e,{range:G.range}),V_(e,{lookupData:j})))})})})},E=(M,$)=>{const j=M.compareBoundaryPoints(window.Range.START_TO_START,$),ee=M.compareBoundaryPoints(window.Range.END_TO_END,$);return j>=0&&ee<=0},N=()=>n.get().bind(({trigger:M})=>{const $=e.selection.getRng();return AE(e.dom,$,M,o.get()).filter(({range:j})=>E($,j)).map(({range:j})=>j)});e.addCommand("mceAutocompleterReload",(M,$)=>{const j=ut($)?$.fetchOptions:{};y(j)}),e.addCommand("mceAutocompleterClose",a),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{N().each(M=>{Ux(e,{range:M})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>N().isSome()),J5(e,{cancelIfNecessary:a,load:y})},Hz=wt().browser.isSafari(),Q5=e=>ru(me.fromDom(e)),e$=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},qc=(e,n)=>F.from(e.getParent(n.container(),"details")),cf=(e,n)=>qc(e,n).isSome(),zz=(e,n)=>{const o=F.from(e.getParent(n.startContainer,"details")),r=F.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const a=o.bind(u=>F.from(e.select("summary",u)[0]));return F.some({startSummary:a,startDetails:o,endDetails:r})}else return F.none()},cG=(e,n)=>Ua(n).exists(o=>o.isEqual(e)),Vz=(e,n)=>cu(n).exists(o=>as(o.getNode())&&mi(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),Uz=(e,n)=>n.startSummary.exists(o=>cG(e,o)),Wz=(e,n)=>n.startSummary.exists(o=>Vz(e,o)),Zz=(e,n)=>n.startDetails.exists(o=>mi(o,e).forall(r=>n.startSummary.exists(a=>!a.contains(e.container())&&a.contains(r.container())))),t$=(e,n,o)=>o.startDetails.exists(r=>Gl(e,n).forall(a=>!r.contains(a.container()))),hb=(e,n)=>{const o=n.getNode();sn(o)||e.selection.setCursorLocation(o,n.offset())},jz=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const a=e.dom.select("summary",r)[0];a&&(o?Ua(a):cu(a)).each(f=>hb(e,f))}else hb(e,n)},Gz=(e,n)=>{const o=y=>y.contains(e.startContainer),r=y=>y.contains(e.endContainer),a=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(y=>n.endDetails.forall(E=>y!==E));return(a||u)&&!(a&&u)||f},n$=(e,n,o)=>{const{dom:r,selection:a}=e,u=e.getBody();if(o==="character"){const f=Ze.fromRangeStart(a.getRng()),b=r.getParent(f.container(),r.isBlock),y=qc(r,f),E=b&&r.isEmpty(b),N=W(b==null?void 0:b.previousSibling),M=W(b==null?void 0:b.nextSibling);return E&&(n?M:N)&&eh(!n,u,f).exists(ee=>cf(r,ee)&&!fc(y,qc(r,ee)))?!0:eh(n,u,f).fold(Pe,$=>{const j=qc(r,$);if(cf(r,$)&&!fc(y,j)){if(n||jz(e,$,!1),b&&E){if(n&&N)return!0;if(!n&&M)return!0;jz(e,$,n),e.dom.remove(b)}return!0}else return!1})}else return!1},af=(e,n,o,r)=>{const u=e.selection.getRng(),f=Ze.fromRangeStart(u),b=e.getBody();return r==="selection"?Gz(u,n):o?Wz(f,n)||t$(b,f,n):Uz(f,n)||Zz(f,n)},qz=(e,n,o)=>zz(e.dom,e.selection.getRng()).fold(()=>n$(e,n,o),r=>af(e,r,n,o)||n$(e,n,o)),Kz=(e,n,o)=>{const r=e.selection,a=r.getNode(),u=r.getRng(),f=Ze.fromRangeStart(u);return my(a)?(o==="selection"&&e$(u,a)||j1(n,f,a)?Q5(a):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:y,anchorOffset:E,focusNode:N,focusOffset:M}=b??{};const $=()=>{Ne(y)&&Ne(E)&&Ne(N)&&Ne(M)&&(b==null||b.setBaseAndExtent(y,E,N,M))},j=()=>{y=b==null?void 0:b.anchorNode,E=b==null?void 0:b.anchorOffset,N=b==null?void 0:b.focusNode,M=b==null?void 0:b.focusOffset},ee=(ne,ge)=>{ie(ne.childNodes,Ee=>{Z0(Ee)&&ge.appendChild(Ee)})},G=e.dom.create("span",{"data-mce-bogus":"1"});ee(a,G),a.appendChild(G),$(),(o==="word"||o==="line")&&(b==null||b.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&e$(r.getRng(),G)?Q5(a):(e.execCommand(n?"ForwardDelete":"Delete"),j(),ee(G,a),$()),e.dom.remove(G)}),!0):!1},Up=(e,n,o)=>qz(e,n,o)||Hz&&Kz(e,n,o)?F.some($e):F.none(),o$=e=>(n,o,r={})=>{const a=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:$e,inputType:o},f=Bu(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},pb=o$("input"),Rd=o$("beforeinput"),$O=wt(),FO=$O.os,s$=FO.isMacOS()||FO.isiOS(),LO=$O.browser.isFirefox(),r$=(e,n,o)=>{const r=o.keyCode===Ct.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=e.selection.isCollapsed(),u=a?"character":"selection",f=b=>a?b?"word":"line":"selection";g5([{keyCode:Ct.BACKSPACE,action:no(Yu,e)},{keyCode:Ct.BACKSPACE,action:no(rw,e,!1)},{keyCode:Ct.DELETE,action:no(rw,e,!0)},{keyCode:Ct.BACKSPACE,action:no(ag,e,!1)},{keyCode:Ct.DELETE,action:no(ag,e,!0)},{keyCode:Ct.BACKSPACE,action:no(L3,e,n,!1)},{keyCode:Ct.DELETE,action:no(L3,e,n,!0)},{keyCode:Ct.BACKSPACE,action:no(w2,e,!1)},{keyCode:Ct.DELETE,action:no(w2,e,!0)},{keyCode:Ct.BACKSPACE,action:no(Up,e,!1,u)},{keyCode:Ct.DELETE,action:no(Up,e,!0,u)},...s$?[{keyCode:Ct.BACKSPACE,altKey:!0,action:no(Up,e,!1,f(!0))},{keyCode:Ct.DELETE,altKey:!0,action:no(Up,e,!0,f(!0))},{keyCode:Ct.BACKSPACE,metaKey:!0,action:no(Up,e,!1,f(!1))}]:[{keyCode:Ct.BACKSPACE,ctrlKey:!0,action:no(Up,e,!1,f(!0))},{keyCode:Ct.DELETE,ctrlKey:!0,action:no(Up,e,!0,f(!0))}],{keyCode:Ct.BACKSPACE,action:no(Ku,e,!1)},{keyCode:Ct.DELETE,action:no(Ku,e,!0)},{keyCode:Ct.BACKSPACE,action:no(j3,e,!1)},{keyCode:Ct.DELETE,action:no(j3,e,!0)},{keyCode:Ct.BACKSPACE,action:no(dE,e,!1)},{keyCode:Ct.DELETE,action:no(dE,e,!0)},{keyCode:Ct.BACKSPACE,action:no(Sh,e,!1)},{keyCode:Ct.DELETE,action:no(Sh,e,!0)},{keyCode:Ct.BACKSPACE,action:no(xE,e,!1)},{keyCode:Ct.DELETE,action:no(xE,e,!0)},{keyCode:Ct.BACKSPACE,action:no(E3,e,!1)},{keyCode:Ct.DELETE,action:no(E3,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),Rd(e,r).isDefaultPrevented()||(b(),pb(e,r))})},c$=(e,n,o)=>bw([{keyCode:Ct.BACKSPACE,action:no(S3,e)},{keyCode:Ct.DELETE,action:no(S3,e)},...s$?[{keyCode:Ct.BACKSPACE,altKey:!0,action:no(gw,e)},{keyCode:Ct.DELETE,altKey:!0,action:no(gw,e)},...o?[{keyCode:LO?224:91,action:no(gw,e)}]:[]]:[{keyCode:Ct.BACKSPACE,ctrlKey:!0,action:no(gw,e)},{keyCode:Ct.DELETE,ctrlKey:!0,action:no(gw,e)}]],n),Yz=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===Ct.BACKSPACE,r.isDefaultPrevented()||r$(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||c$(e,r,o),o=!1})},Xz=e=>{for(;e;){if(Wt(e)||vt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Gv=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=Xz(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(xc),n.firstChild)}const a=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new ma(n,n);let f=n,b;for(;b=u.current();){if(vt(b)){a.setStart(b,0),a.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){a.setStartBefore(b),a.setEndBefore(b);break}f=b,b=u.next()}b||(a.setStart(f,0),a.setEnd(f,0))}else as(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)):(a.setStart(n,0),a.setEnd(n,0));e.selection.setRng(a),c2(e,a)},Dw=(e,n)=>{const o=e.getRoot();let r,a=n;for(;a!==o&&a&&e.getContentEditable(a)!=="false";){if(e.getContentEditable(a)==="true"){r=a;break}a=a.parentNode}return a!==o?r:o},HO=e=>F.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),a$=e=>HO(e).fold(Ke(""),n=>n.nodeName.toUpperCase()),Jz=e=>HO(e).filter(n=>jg(me.fromDom(n))).isSome(),zO=e=>{e.innerHTML='<br data-mce-bogus="1">'},Qz=(e,n,o)=>{const r=e.dom;F.from(o.style).map(r.parseStyle).each(y=>{const N={...$a(me.fromDom(n)),...y};r.setStyles(n,N)});const a=F.from(o.class).map(y=>y.split(/\s+/)),u=F.from(n.className).map(y=>Bt(y.split(/\s+/),E=>E!==""));co(a,u,(y,E)=>{const N=Bt(E,$=>!xe(y,$)),M=[...y,...N];r.setAttrib(n,"class",M.join(" "))});const f=["style","class"],b=Qo(o,(y,E)=>!xe(f,E));r.setAttribs(n,b)},Rw=(e,n)=>{if(Ha(e).toLowerCase()===n.tagName.toLowerCase()){const r=Zf(e);Qz(e,n,r)}},l$=(e,n,o,r,a=!0,u,f)=>{const b=e.dom,y=e.schema,E=Ha(e),N=o?o.nodeName.toUpperCase():"";let M=n;const $=y.getTextInlineElements();let j;u||N==="TABLE"||N==="HR"?j=b.create(u||E,f||{}):j=o.cloneNode(!1);let ee=j;if(!a)b.setAttrib(j,"style",null),b.setAttrib(j,"class",null);else do if($[M.nodeName]){if(au(M)||Ri(M))continue;const G=M.cloneNode(!1);b.setAttrib(G,"id",""),j.hasChildNodes()?(G.appendChild(j.firstChild),j.appendChild(G)):(ee=G,j.appendChild(G))}while((M=M.parentNode)&&M!==r);return Rw(e,j),zO(ee),j},i$=(e,n)=>e.dom.getParent(n,Ll),u$=(e,n,o)=>{let r=n;for(;r&&r!==e&&W(r.nextSibling);){const a=r.parentElement;if(!a||!o(a))return Ll(a);r=a}return!1},eV=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Ha(e)&&e.dom.isEmpty(o)&&u$(e.getBody(),o,r=>fn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),tV=(e,n,o)=>{var r,a,u;const f=n(Ha(e)),b=i$(e,o);b&&(e.dom.insertAfter(f,b),Gv(e,f),((u=(a=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||a===void 0?void 0:a.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},aG=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,VO=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},d$=(e,n)=>{const o=e==null?void 0:e.parentNode;return Ne(o)&&o.nodeName===n},m$=e=>Ne(e)&&/^(OL|UL|LI)$/.test(e.nodeName),UO=e=>Ne(e)&&/^(LI|DT|DD)$/.test(e.nodeName),f$=e=>m$(e)&&m$(e.parentNode),$E=e=>{const n=e.parentNode;return UO(n)?n:e},Nw=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Wt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},g$=e=>ro(Fc($a(me.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),nV=(e,n,o,r,a)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;f$(o)&&(a="LI");const y=UO(r)?g$(r):void 0;let E=UO(r)&&y?n(a,{style:g$(r)}):n(a);if(Nw(o,r,!0)&&Nw(o,r,!1))if(d$(o,"LI")){const N=$E(o);u.insertAfter(E,N),VO(o)?u.remove(N):u.remove(o)}else u.replace(E,o);else if(Nw(o,r,!0))d$(o,"LI")?(u.insertAfter(E,$E(o)),E.appendChild(u.doc.createTextNode(" ")),E.appendChild(o)):b.insertBefore(E,o),u.remove(r);else if(Nw(o,r,!1))u.insertAfter(E,$E(o)),u.remove(r);else{o=$E(o);const N=f.cloneRange();N.setStartAfter(r),N.setEndAfter(o);const M=N.extractContents();if(a==="LI"&&aG(M,"LI")){const $=Bt(Fe(E.children,me.fromDom),Jn(Lr("br")));E=M.firstChild,u.insertAfter(M,o),ie($,j=>bf(me.fromDom(E),j)),y&&E.setAttribute("style",y)}else u.insertAfter(M,o),u.insertAfter(E,o);u.remove(r)}Gv(e,E)},lG=e=>{ie(Og(me.fromDom(e),Ds),n=>{const o=n.dom;o.nodeValue=wl(o.data)})},Dl=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},oV=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),WO=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,ZO=(e,n)=>Ne(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",sV=(e,n,o)=>{var r;const a=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Wt(u)&&!n[u.nodeName.toLowerCase()]&&a.push(u)}let f=a.length;for(;f--;)u=a[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||oV(e,u))&&e.remove(u)},jO=(e,n,o)=>vt(n)?e?o===1&&n.data.charAt(o-1)===na?0:o:o===n.data.length-1&&n.data.charAt(o)===na?n.data.length:o:o,rV=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,jO(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,jO(!1,e.endContainer,e.endOffset)),n},cV=e=>{let n=e;do vt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},FE=(e,n,o,r,a)=>{var u,f;const b=e.dom,y=(u=Dw(b,r))!==null&&u!==void 0?u:b.getRoot();let E=b.getParent(r,b.isBlock);if(!E||!ZO(b,E)){if(E=E||y,!E.hasChildNodes()){const j=b.create(n);return Rw(e,j),E.appendChild(j),o.setStart(j,0),o.setEnd(j,0),j}let N=r;for(;N&&N.parentNode!==E;)N=N.parentNode;let M;for(;N&&!b.isBlock(N);)M=N,N=N.previousSibling;const $=(f=M==null?void 0:M.parentElement)===null||f===void 0?void 0:f.nodeName;if(M&&$&&e.schema.isValidChild($,n.toLowerCase())){const j=M.parentNode,ee=b.create(n);for(Rw(e,ee),j.insertBefore(ee,M),N=M;N&&!b.isBlock(N);){const G=N.nextSibling;ee.appendChild(N),N=G}o.setStart(r,a),o.setEnd(r,a)}}return r},aV=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Wt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},lV=(e,n)=>{const o=Wc(e);return Xt(n)?!1:oe(o)?xe(yt.explode(o),n.nodeName.toLowerCase()):o},b$={insert:(e,n)=>{let o,r,a,u,f=!1;const b=e.dom,y=e.schema,E=y.getNonEmptyElements(),N=e.selection.getRng(),M=Ha(e),$=me.fromDom(N.startContainer),j=qa($,N.startOffset),ee=j.exists(ct=>Wn(ct)&&!zc(ct)),G=N.collapsed&&ee,ne=(ct,on)=>l$(e,o,At,lt,o_(e),ct,on),ge=ct=>{const on=jO(ct,o,r);if(vt(o)&&(ct?on>0:on<o.data.length))return!1;if((o.parentNode===At||o===At)&&f&&!ct||ct&&Wt(o)&&o===At.firstChild)return!0;if(WO(o,"TABLE")||WO(o,"HR"))return f&&!ct||!f&&ct;const wn=new ma(o,At);vt(o)&&(ct&&on===0?wn.prev():!ct&&on===o.data.length&&wn.next());let Ro;for(;Ro=wn.current();){if(Wt(Ro)){if(!Ro.getAttribute("data-mce-bogus")){const Fo=Ro.nodeName.toLowerCase();if(E[Fo]&&Fo!=="br")return!1}}else if(vt(Ro)&&!Il(Ro.data))return!1;ct?wn.prev():wn.next()}return!0},Ee=()=>{let ct;return/^(H[1-6]|PRE|FIGURE)$/.test(a)&&Gt!=="HGROUP"?ct=ne(M):ct=ne(),lV(e,u)&&ZO(b,u)&&b.isEmpty(At,void 0,{includeZwsp:!0})?ct=b.split(u,At):b.insertAfter(ct,At),Gv(e,ct),ct};Dt(b,N).each(ct=>{N.setStart(ct.startContainer,ct.startOffset),N.setEnd(ct.endContainer,ct.endOffset)}),o=N.startContainer,r=N.startOffset;const Se=!!(n&&n.shiftKey),Me=!!(n&&n.ctrlKey);Wt(o)&&o.hasChildNodes()&&!G&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&vt(o)?r=o.data.length:r=0);const lt=Dw(b,o);if(!lt||Dl(e,o))return;Se||(o=FE(e,M,N,o,r));let At=b.getParent(o,b.isBlock)||b.getRoot();u=Ne(At==null?void 0:At.parentNode)?b.getParent(At.parentNode,b.isBlock):null,a=At?At.nodeName.toUpperCase():"";const Gt=u?u.nodeName.toUpperCase():"";if(Gt==="LI"&&!Me){const ct=u;At=ct,u=ct.parentNode,a=Gt}if(Wt(u)&&eV(e,Se,At))return tV(e,ne,At);if(/^(LI|DT|DD)$/.test(a)&&Wt(u)&&b.isEmpty(At)){nV(e,ne,u,At,M);return}if(!G&&(At===e.getBody()||!ZO(b,At)))return;const Ge=At.parentNode;let Le;if(G)Le=ne(M),j.fold(()=>{Rr($,me.fromDom(Le))},ct=>{_a(ct,me.fromDom(Le))}),e.selection.setCursorLocation(Le,0);else if(Pf(At))Le=nm(At),b.isEmpty(At)&&zO(At),Rw(e,Le),Gv(e,Le);else if(ge(!1))Le=Ee();else if(ge(!0)&&Ge){const ct=Ze.fromRangeStart(N),on=d2(ct),wn=me.fromDom(At),Fo=iT(wn,ct,e.schema)?dN(wn,ct,e.schema).bind(Zs=>F.from(Zs.getNode())):F.none();Le=Ge.insertBefore(ne(),At);const _s=WO(At,"HR")||on?Le:Fo.getOr(At);Gv(e,_s)}else{const ct=rV(N).cloneRange();ct.setEndAfter(At);const on=ct.extractContents();lG(on),cV(on),Le=on.firstChild,b.insertAfter(on,At),sV(b,E,Le),aV(b,At),b.isEmpty(At)&&zO(At),Le.normalize(),b.isEmpty(Le)?(b.remove(Le),Ee()):(Rw(e,Le),Gv(e,Le))}b.setAttrib(Le,"id",""),e.dispatch("NewBlock",{newBlock:Le})},fakeEventName:"insertParagraph"},iG=(e,n,o)=>{const r=new ma(n,o);let a;const u=e.getNonEmptyElements();for(;a=r.next();)if(u[a.nodeName.toLowerCase()]||vt(a)&&a.length>0)return!0;return!1},iV=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),c2(e,r)},uG=(e,n)=>{const o=e.selection,r=e.dom,a=o.getRng();let u,f=!1;Dt(r,a).each(j=>{a.setStart(j.startContainer,j.startOffset),a.setEnd(j.endContainer,j.endOffset)});let b=a.startOffset,y=a.startContainer;if(Wt(y)&&y.hasChildNodes()){const j=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,j&&vt(y)?b=y.data.length:b=0}let E=r.getParent(y,r.isBlock);const N=E&&E.parentNode?r.getParent(E.parentNode,r.isBlock):null,M=N?N.nodeName.toUpperCase():"",$=!!(n&&n.ctrlKey);M==="LI"&&!$&&(E=N),vt(y)&&b>=y.data.length&&(iG(e.schema,y,E||r.getRoot())||(u=r.create("br"),a.insertNode(u),a.setStartAfter(u),a.setEndAfter(u),f=!0)),u=r.create("br"),n0(r,a,u),iV(e,u,f),e.undoManager.add()},uV=(e,n)=>{const o=me.fromTag("br");_a(me.fromDom(n),o),e.undoManager.add()},dV=(e,n)=>{mV(e.getBody(),n)||ul(me.fromDom(n),me.fromTag("br"));const o=me.fromTag("br");ul(me.fromDom(n),o),iV(e,o.dom,!1),e.undoManager.add()},dG=e=>as(e.getNode()),mV=(e,n)=>dG(Ze.after(n))?!0:Gl(e,Ze.after(n)).map(o=>as(o.getNode())).getOr(!1),ym=e=>e&&e.nodeName==="A"&&"href"in e,fV=e=>e.fold(Pe,ym,ym,Pe),v$=e=>{const n=je(Z1,e),o=Ze.fromRangeStart(e.selection.getRng());return ig(n,e.getBody(),o).filter(fV)},gV=(e,n)=>{n.fold($e,je(uV,e),je(dV,e),$e)},y$={insert:(e,n)=>{const o=v$(e);o.isSome()?o.each(je(gV,e)):uG(e,n)},fakeEventName:"insertLineBreak"},C$=(e,n)=>HO(e).filter(o=>n.length>0&&Si(me.fromDom(o),n)).isSome(),hV=e=>C$(e,VS(e)),pV=e=>C$(e,n_(e)),Ii=yd.generate([{br:[]},{block:[]},{none:[]}]),w$=(e,n)=>pV(e),Mw=e=>(n,o)=>Jz(n)===e,S$=(e,n)=>(o,r)=>a$(o)===e.toUpperCase()===n,bV=e=>{const n=Dw(e.dom,e.selection.getStart());return Xt(n)},Bw=e=>S$("pre",e),vV=()=>S$("summary",!0),IE=e=>(n,o)=>zS(n)===e,x$=(e,n)=>hV(e),LE=(e,n)=>n,T$=e=>{const n=Ha(e),o=Dw(e.dom,e.selection.getStart());return Ne(o)&&e.schema.isValidChild(o.nodeName,n)},E$=e=>{const n=e.selection.getRng(),o=me.fromDom(n.startContainer),a=qa(o,n.startOffset).map(u=>Wn(u)&&!zc(u));return n.collapsed&&a.getOr(!0)},Nd=(e,n)=>(o,r)=>ro(e,(u,f)=>u&&f(o,r),!0)?F.some(n):F.none(),yV=(e,n)=>yP([Nd([w$],Ii.none()),Nd([Bw(!0),bV],Ii.none()),Nd([vV()],Ii.br()),Nd([Bw(!0),IE(!1),LE],Ii.br()),Nd([Bw(!0),IE(!1)],Ii.block()),Nd([Bw(!0),IE(!0),LE],Ii.block()),Nd([Bw(!0),IE(!0)],Ii.br()),Nd([Mw(!0),LE],Ii.br()),Nd([Mw(!0)],Ii.block()),Nd([x$],Ii.br()),Nd([LE],Ii.br()),Nd([T$],Ii.block()),Nd([E$],Ii.block())],[e,!!(n&&n.shiftKey)]).getOr(Ii.none()),qv=(e,n,o)=>{n.selection.isCollapsed()||eL(n),!(Ne(o)&&Rd(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Ne(o)&&pb(n,e.fakeEventName))},k$=(e,n)=>{const o=()=>qv(y$,e,n),r=()=>qv(b$,e,n),a=yV(e,n);switch(Zm(e)){case"linebreak":a.fold(o,o,$e);break;case"block":a.fold(r,r,$e);break;case"invert":a.fold(r,o,$e);break;default:a.fold(o,r,$e);break}},_$=wt(),HE=_$.os.isiOS()&&_$.browser.isSafari(),A$=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),U4(e.undoManager),e.undoManager.transact(()=>{k$(e,n)}))},GO=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(vt(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},qO=e=>{let n=F.none();const o=a=>{n=F.some(a.selection.getBookmark()),a.undoManager.add()},r=(a,u)=>{a.undoManager.undo(),n.fold($e,f=>a.selection.moveToBookmark(f)),A$(a,u),n=F.none()};e.on("keydown",a=>{a.keyCode===Ct.ENTER&&(HE&&GO(e.selection.getRng())?o(e):A$(e,a))}),e.on("keyup",a=>{a.keyCode===Ct.ENTER&&n.each(()=>r(e,a))})},O$=(e,n,o)=>{const r=gn.os.isMacOS()||gn.os.isiOS();bw([{keyCode:Ct.END,action:no(i5,e,!0)},{keyCode:Ct.HOME,action:no(i5,e,!1)},...r?[]:[{keyCode:Ct.HOME,action:no(hw,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Ct.END,action:no(hw,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Ct.END,action:no(C9,e,!0)},{keyCode:Ct.HOME,action:no(C9,e,!1)},{keyCode:Ct.END,action:no(CE,e,!0,n)},{keyCode:Ct.HOME,action:no(CE,e,!1,n)}],o).each(a=>{o.preventDefault()})},CV=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||O$(e,n,o)})},gG=e=>{e.on("input",n=>{n.isComposing||L6(e)})},Wp=wt(),wV=(e,n,o)=>{bw([{keyCode:Ct.PAGE_UP,action:no(CE,e,!1,n)},{keyCode:Ct.PAGE_DOWN,action:no(CE,e,!0,n)}],o)},D$=e=>e.stopImmediatePropagation(),R$=e=>e.keyCode===Ct.PAGE_UP||e.keyCode===Ct.PAGE_DOWN,Pw=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",D$,!0):!o&&e.get()&&n.off("NodeChange",D$),e.set(o)},N$=(e,n)=>{if(Wp.os.isMacOS())return;const o=_e(!1);e.on("keydown",r=>{R$(r)&&Pw(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||wV(e,n,r),R$(r)&&o.get()&&(Pw(o,e,!1),e.nodeChanged())})},M$=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||Re(n.getTargetRanges(),o=>!lA(e.dom,o)))&&n.preventDefault()})},B$=(e,n)=>{const o=n.container(),r=n.offset();return vt(o)?(o.insertData(r,e),F.some(Ze(o,r+e.length))):R0(n).map(a=>{const u=me.fromText(e);return n.isAtEnd()?ul(a,u):_a(a,u),Ze(u.dom,e.length)})},KO=je(B$,xc),P$=je(B$," "),SV=(e,n,o)=>bN(e,n,o)?KO(n):P$(n),xV=e=>n=>n.fold(o=>mi(e.dom,Ze.before(o)),o=>Ua(o),o=>cu(o),o=>Gl(e.dom,Ze.after(o))),YO=(e,n,o)=>r=>bN(e,r,o)?KO(n):P$(n),zE=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},TV=(e,n)=>e.isEditable(e.getParent(n,"summary")),XO=e=>{const n=Ze.fromRangeStart(e.selection.getRng()),o=me.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=je(Z1,e),a=Ze.fromRangeStart(e.selection.getRng());return ig(r,e.getBody(),a).bind(xV(o)).map(u=>()=>YO(o,n,e.schema)(u).each(zE(e)))}else return F.none()},$$=e=>{const n=()=>{const o=me.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Ze.fromRangeStart(e.selection.getRng());SV(o,r,e.schema).each(zE(e))};return Tr(gn.browser.isFirefox()&&e.selection.isEditable()&&TV(e.dom,e.selection.getRng().startContainer),n)},VE=(e,n)=>{g5([{keyCode:Ct.SPACEBAR,action:no(XO,e)},{keyCode:Ct.SPACEBAR,action:no($$,e)}],n).each(o=>{n.preventDefault(),Rd(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),pb(e,"insertText",{data:" "}))})},F$=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||VE(e,n)})},I$=e=>b_(e)?[{keyCode:Ct.TAB,action:no(ww,e,!0)},{keyCode:Ct.TAB,shiftKey:!0,action:no(ww,e,!1)}]:[],EV=(e,n)=>{bw([...I$(e)],n).each(o=>{n.preventDefault()})},kV=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||EV(e,n)})},UE=e=>{if(e.addShortcut("Meta+P","","mcePrint"),Lz(e),rg(e))return _e(null);{const n=LH(e);return M$(e),m9(e),pO(e,n),Yz(e,n),qO(e),F$(e),gG(e),kV(e),CV(e,n),N$(e,n),n}};class L${constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",a=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(a.type==="nodechange"||!T(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{a2(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const a=n.selection.getStart(!0);a&&fp(n)&&!r.isSameElementPath(a)&&n.dom.isChildOf(a,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",a=>{!a.isDefaultPrevented()&&fp(n)&&(n.selection.getNode().nodeName==="IMG"?Vu.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!b0(this.editor)&&!this.editor.mode.isReadOnly()){const a=this.editor.getBody();r=o.getStart(!0)||a,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,a))&&(r=a);const u=[];this.editor.dom.getParent(r,f=>f===a?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,a=gs(r.dom.getParents(n,et,r.getBody()));if(a.length===this.lastPath.length){for(o=a.length;o>=0&&a[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=a,!0}return this.lastPath=a,!1}}const H$=Wb("image"),_V=e=>{const n=e;return F.from(n[H$])},z$=(e,n)=>{const o=e;o[H$]=n},JO=Wb("event"),AV=e=>{const n=e;return F.from(n[JO])},WE=e=>n=>{const o=n;o[JO]=e},OV=(e,n)=>WE(n)(e),V$=WE(0),U$=WE(2),DV=WE(1),NV=(e=>n=>{const o=n;return F.from(o[JO]).exists(r=>r===e)})(0),MV=()=>Object.freeze({length:0,item:e=>null}),QO=Wb("mode"),BV=e=>{const n=e;return F.from(n[QO])},ZE=e=>n=>{const o=n;o[QO]=e},bb=(e,n)=>ZE(n)(e),W$=ZE(0),eD=ZE(2),Z$=ZE(1),j$=e=>n=>{const o=n;return F.from(o[QO]).exists(r=>r===e)},Kv=j$(0),G$=j$(1),q$=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(Kv(e))if(oe(o)){if(!sn(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{Kv(e)&&n.remove(o)},clear:()=>{Kv(e)&&n.clear()}}),PV=["none","copy","link","move"],$V=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],K$=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(a){xe(PV,a)&&(n=a)},get effectAllowed(){return o},set effectAllowed(a){NV(r)&&xe($V,a)&&(o=a)},get items(){return q$(r,e.items)},get files(){return G$(r)?MV():e.files},get types(){return e.types},setDragImage:(a,u,f)=>{Kv(r)&&(z$(r,{image:a,x:u,y:f}),e.setDragImage(a,u,f))},getData:a=>G$(r)?"":e.getData(a),setData:(a,u)=>{Kv(r)&&e.setData(a,u)},clearData:a=>{Kv(r)&&e.clearData(a)}};return W$(r),r},jE=e=>{const n=K$(),o=BV(e);return eD(e),V$(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,_V(e).each(r=>n.setDragImage(r.image,r.x,r.y)),ie(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),ie(e.files,r=>n.items.add(r)),AV(e).each(r=>{OV(n,r)}),o.each(r=>{bb(e,r),bb(n,r)}),n},FV=e=>{const n=e.getData("text/html");return n===""?F.none():F.some(n)},Y$=(e,n)=>e.setData("text/html",n),X$="x-tinymce/html",GE=Ke(X$),tD="<!-- "+X$+" -->",IV=e=>tD+e,LV=e=>e.replace(tD,""),J$=e=>e.indexOf(tD)!==-1,HV=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),zV=(e,n)=>{let o="<"+e;const r=Fc(n,(a,u)=>u+'="'+gd.encodeAllRaw(a)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},VV=(e,n,o)=>{const r=e.split(/\n\n/),a=zV(n,o),u="</"+n+">",f=Fe(r,y=>y.split(/\n/).join("<br />")),b=y=>a+y+u;return f.length===1?f[0]:Fe(f,b).join("")},Q$="%MCEPASTEBIN%",UV=(e,n)=>{const{dom:o,selection:r}=e,a=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Q$);gn.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(a,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},hr=(e,n)=>{const o=e.dom;if(nD(e)){let r;const a=n.get();for(;r=nD(e);)o.remove(r),o.unbind(r);a&&e.selection.setRng(a)}n.set(null)},nD=e=>e.dom.get("mcepastebin"),eF=e=>Ne(e)&&e.id==="mcepastebin",WV=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...a]=Bt(e.getBody().childNodes,eF);ie(a,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},qE=e=>e===Q$,tF=e=>{const n=_e(null);return{create:()=>UV(e,n),remove:()=>hr(e,n),getEl:()=>nD(e),getHtml:()=>WV(e),getLastRng:n.get}},nF=(e,n)=>(yt.each(n,o=>{nt(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),ZV=e=>{const n=Jd(),o=Ov({},n);let r="";const a=n.getVoidElements(),u=yt.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const E=y.name,N=y;if(E==="br"){r+=`
`;return}if(E!=="wbr"){if(a[E]&&(r+=" "),u[E]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let M=y.firstChild;if(M)do b(M);while(M=M.next)}f[E]&&N.next&&(r+=`
`,E==="p"&&(r+=`
`))}};return e=nF(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},oD=e=>(e=nF(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,a)=>!r&&!a?" ":xc],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),sD=e=>{let n=0;return()=>e+n++},jV=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return yt.hasOwn(o,n)?"image/"+o[n]:"image/"+n},GV=(e,n)=>{const o=Ov({sanitize:Va(e),sandbox_iframes:ux(e),sandbox_iframes_exclusions:T0(e),convert_unsafe_embeds:x1(e)},e.schema);o.addNodeFilter("meta",a=>{yt.each(a,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return hh({validate:!0},e.schema).serialize(r)},oF=(e,n)=>({content:e,cancelled:n}),sF=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),a=Zx(e,r,o);return oF(a.node.innerHTML,a.isDefaultPrevented())},qV=(e,n,o)=>{const r=U_(e,n,o),a=GV(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?sF(e,a,o):oF(a,r.isDefaultPrevented())},KV=(e,n,o)=>qV(e,n,o),Zp=(e,n)=>(e.insertContent(n,{merge:rx(e),paste:!0}),!0),rD=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),Yv=(e,n)=>rD(n)&&Re(S1(e),o=>zo(n.toLowerCase(),`.${o.toLowerCase()}`)),$w=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),YV=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),XV=(e,n,o)=>!e.selection.isCollapsed()&&rD(n)?YV(e,n,o):!1,Xv=(e,n,o)=>Yv(e,n)?$w(e,n,o):!1,JV=(e,n)=>{yt.each([XV,Xv,Zp],o=>!o(e,n,Zp))},cD=(e,n,o)=>{o||!g_(e)?Zp(e,n):JV(e,n)},QV=sD("mceclip"),rF=e=>{const n=K$();return Y$(n,e),eD(n),n},aD=(e,n,o,r,a)=>{const u=KV(e,n,o);if(!u.cancelled){const f=u.content,b=()=>cD(e,f,r);a?Rd(e,"insertFromPaste",{dataTransfer:rF(f)}).isDefaultPrevented()||(b(),pb(e,"insertFromPaste")):b()}},Jv=(e,n,o,r)=>{const a=o||J$(n);aD(e,LV(n),a,!1,r)},KE=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),a=xi(r,cx(e)),u=VV(a,Ha(e),Zf(e));aD(e,u,!1,!0,o)},cF=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},jp=(e,n)=>n in e&&e[n].length>0,lD=e=>jp(e,"text/html")||jp(e,"text/plain"),eU=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Ne(o)?e.dom.encode(o[1]):void 0},aF=(e,n,o,r)=>{const a=QV(),u=Is(e)&&Ne(o.name),f=u?eU(e,o.name):a,b=u?o.name:void 0,y=n.create(a,o,r,f,b);return n.add(y),y},iD=(e,n)=>{Ap(n.uri).each(({data:o,type:r,base64Encoded:a})=>{const u=a?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),E=y??aF(e,b,f,u);Jv(e,`<img src="${E.blobUri()}">`,!1,!0)})},lF=e=>e.type==="paste",tU=e=>Promise.all(Fe(e,n=>Ch(n).then(o=>({file:n,uri:o})))),nU=e=>{const n=S1(e);return o=>Nn(o.type,"image/")&&Re(n,r=>jV(r)===o.type)},oU=(e,n)=>{const o=n.items?zs(xr(n.items),a=>a.kind==="file"?[a.getAsFile()]:[]):[],r=n.files?xr(n.files):[];return Bt(o.length>0?o:r,nU(e))},uD=(e,n,o)=>{const r=lF(n)?n.clipboardData:n.dataTransfer;if(tp(e)&&r){const a=oU(e,r);if(a.length>0)return n.preventDefault(),tU(a).then(u=>{o&&e.selection.setRng(o),ie(u,f=>{iD(e,f)})}),!0}return!1},dD=e=>{var n,o;return gn.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},sU=e=>Ct.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,YE=(e,n,o,r,a)=>{let u=oD(o);const f=jp(n,GE())||J$(o),b=!f&&HV(u),y=rD(u);(qE(u)||!u.length||b&&!y)&&(r=!0),(r||y)&&(jp(n,"text/plain")&&b?u=n["text/plain"]:u=ZV(u)),!qE(u)&&(r?KE(e,u,a):Jv(e,u,f,a))},iF=(e,n,o)=>{let r;const a=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{sU(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||dD(u))return;const f=o.get()==="text"||r;r=!1;const b=cF(u.clipboardData);!lD(b)&&uD(e,u,a())||(jp(b,"text/html")?(u.preventDefault(),YE(e,b,b["text/html"],f,!0)):jp(b,"text/plain")&&jp(b,"text/uri-list")?(u.preventDefault(),YE(e,b,b["text/plain"],f,!0)):(n.create(),Vu.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),YE(e,b,y,f,!1)},0)))})},rU=e=>{const n=a=>Nn(a,"webkit-fake-url"),o=a=>Nn(a,"data:"),r=a=>{var u;return((u=a.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(a,u,f)=>{if(!tp(e)&&r(f))for(const b of a){const y=b.attr("src");oe(y)&&!b.attr("data-mce-object")&&y!==gn.transparentSrc&&(n(y)||!np(e)&&o(y))&&b.remove()}})},uF=(e,n,o)=>{iF(e,n,o),rU(e)},cU=(e,n)=>{n.get()==="text"?(n.set("html"),av(e,!1)):(n.set("text"),av(e,!0)),e.focus()},aU=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{cU(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&Jv(e,r.html,r.internal,!1),r.text&&KE(e,r.text,!1)})},lU=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(GE(),n),!0}catch{return!1}else return!1},dF=(e,n,o,r)=>{lU(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},mF=e=>(n,o)=>{const{dom:r,selection:a}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=a.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),a.setRng(y),Vu.setEditorTimeout(e,()=>{a.setRng(b),r.remove(u),o()},0)},Fw=e=>({html:IV(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),iU=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),mD=e=>!e.selection.isCollapsed()||iU(e),uU=e=>n=>{!n.isDefaultPrevented()&&mD(e)&&e.selection.isEditable()&&dF(n,Fw(e),mF(e),()=>{if(gn.browser.isChromium()||gn.browser.isFirefox()){const o=e.selection.getRng();Vu.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},dU=e=>n=>{!n.isDefaultPrevented()&&mD(e)&&dF(n,Fw(e),mF(e),$e)},fF=e=>{e.on("cut",uU(e)),e.on("copy",dU(e))},fD=(e,n)=>{var o,r;return kt.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},mU=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},gF=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},fU=e=>Re(e.files,n=>/^image\//.test(n.type)),gU=(e,n,o,r)=>{const a=e.getParent(o,f=>Nu(n,f));if(!W(e.getParent(o,"summary")))return!0;if(a&&fn(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!W(f.querySelector(a.nodeName.toLowerCase()))}else return!1},hU=e=>{e.on("input",n=>{const o=r=>W(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Bt(e.dom.select("details"),o);ie(r,a=>{as(a.firstChild)&&a.firstChild.remove();const u=e.dom.create("summary");u.appendChild(Gg().dom),a.prepend(u)})}})},hF=(e,n)=>{ex(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),tp(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&fU(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=fD(e,o);if(Xt(r))return;const a=cF(o.dataTransfer),u=jp(a,GE());if((!lD(a)||mU(a))&&uD(e,o,r))return;const f=a[GE()],b=f||a["text/html"]||a["text/plain"],y=gU(e.dom,e.schema,r.startContainer,a),E=n.get();E&&!y||b&&(o.preventDefault(),Vu.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||E&&y)&&e.execCommand("Delete"),gF(e,r);const N=oD(b);a["text/html"]?Jv(e,N,u,!0):KE(e,N,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{tp(e)&&!n.get()&&(o.preventDefault(),gF(e,fD(e,o))),o.type==="dragend"&&n.set(!1)}),hU(e)},pU=e=>{const n=a=>u=>{a(e,u)},o=tx(e);le(o)&&e.on("PastePreProcess",n(o));const r=nx(e);le(r)&&e.on("PastePostProcess",n(r))},bU=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},vU=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,pF=e=>yt.trim(e).replace(vU,pd).toLowerCase(),yU=(e,n,o)=>{const r=f_(e);if(o||r==="all"||!sx(e))return n;const a=r?r.split(/[, ]/):[];if(a&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,y,E,N)=>{const M=u.parseStyle(u.decode(E)),$={};for(let ee=0;ee<a.length;ee++){const G=M[a[ee]];let ne=G,ge=u.getStyle(f,a[ee],!0);/color/.test(a[ee])&&(ne=pF(ne),ge=pF(ge)),ge!==ne&&($[a[ee]]=G)}const j=u.serializeStyle($,"span");return j?y+' style="'+j+'"'+N:y+N})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,y)=>f+' style="'+b+'"'+y),n},CU=e=>{(gn.browser.isChromium()||gn.browser.isSafari())&&bU(e,yU)},wU=e=>{const n=_e(!1),o=_e(w0(e)?"text":"html"),r=tF(e);CU(e),aU(e,o),pU(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{fF(e),hF(e,n),uF(e,r,o)})},SU=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},bF=e=>{e.parser.addNodeFilter("details",n=>{const o=ix(e);ie(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=SC(e);ie(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},vF=e=>{SU(e),bF(e)},xU=as,yF=vt,TU=e=>ls(e.dom),EU=e=>tt(e.dom),CF=e=>n=>wo(me.fromDom(e),n),kU=(e,n,o)=>kr(me.fromDom(e),r=>EU(r)||o.isBlock(J(r)),CF(n)).getOr(me.fromDom(n)).dom,wF=(e,n)=>kr(me.fromDom(e),TU,CF(n)),Iw=(e,n,o)=>{const r=new ma(e,n),a=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:a();f&&!xU(f);f=a())ki(f)&&(u=f);return u},SF=(e,n,o)=>{const a=Ze.fromRangeStart(e).getNode(),u=kU(a,n,o),f=Iw(a,u,!1),b=Iw(a,u,!0),y=document.createRange();return wF(f,u).fold(()=>{yF(f)?y.setStart(f,0):y.setStartBefore(f)},E=>y.setStartBefore(E.dom)),wF(b,u).fold(()=>{yF(b)?y.setEnd(b,b.data.length):y.setEndAfter(b)},E=>y.setEndAfter(E.dom)),y},_U=e=>{const n=SF(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(gr(n))},xF=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),_U(e))})};var vb;(function(e){e.Before="before",e.After="after"})(vb||(vb={}));const gD=(e,n)=>Math.abs(e.left-n),AU=(e,n)=>Math.abs(e.right-n),TF=(e,n)=>e>=n.top&&e<=n.bottom,OU=(e,n)=>e.top<n.bottom&&e.bottom>n.top,EF=(e,n)=>{const o=Kg(e,n)/Math.min(e.height,n.height);return OU(e,n)&&o>.5},DU=(e,n)=>{const o=Bt(e,r=>TF(n,r));return Fk(o).fold(()=>[[],e],r=>{const{pass:a,fail:u}=Un(e,f=>EF(f,r));return[a,u]})},kF=(e,n)=>({node:e.node,position:gD(e,n)<AU(e,n)?vb.Before:vb.After}),RU=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),hD=(e,n,o,r)=>{const a=M=>ki(M.node)?F.some(M):Wt(M.node)?hD(xr(M.node.childNodes),n,o,!1):F.none(),u=(M,$,j)=>a($).filter(ee=>Math.abs(j(M,n,o)-j(ee,n,o))<2&&vt(ee.node)),f=(M,$)=>{const j=bo(M,(ee,G)=>$(ee,n,o)-$(G,n,o));return ec(j,a).map(ee=>r&&!vt(ee.node)&&j.length>1?u(ee,j[1],$).getOr(ee):ee)},[b,y]=DU(Dd(e),o),{pass:E,fail:N}=Un(y,M=>M.top<o);return f(b,RU).orThunk(()=>f(N,wS)).orThunk(()=>f(E,wS))},NU=(e,n,o,r)=>{const a=(u,f)=>{const b=E=>Wt(E)&&E.classList.contains("mce-drag-container"),y=Bt(u.dom.childNodes,Jn(b));return f.fold(()=>hD(y,o,r,!0),E=>{const N=Bt(y,M=>M!==E.dom);return hD(N,o,r,!0)}).orThunk(()=>(wo(u,e)?F.none():Em(u)).bind(N=>a(N,F.some(u))))};return a(n,F.none())},Lw=(e,n,o)=>{const r=me.fromDom(e),a=xu(r),f=me.fromPoint(a,n,o).filter(b=>nc(r,b)).getOr(r);return NU(r,f,n,o)},_F=(e,n,o)=>Lw(e,n,o).filter(r=>sm(r.node)).map(r=>kF(r,n)),AF=e=>{var n,o;const r=e.getBoundingClientRect(),a=e.ownerDocument,u=a.documentElement,f=a.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},OF=e=>e.inline?AF(e.getBody()):{left:0,top:0},MU=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},BU=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},a={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:a},PU=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=AF(e.getContentAreaContainer()),r=BU(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},$U=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),FU=(e,n)=>$U(OF(e),MU(e),PU(e,n)),Hw=e=>({target:e,srcElement:e}),DF=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...Hw(o)}),RF=(e,n,o)=>{const r=bs("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:$e,stopImmediatePropagation:$e,stopPropagation:$e,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...Hw(n)}},IU=(e,n)=>{const o=jE(e);return n==="dragstart"?(V$(o),W$(o)):n==="drop"?(U$(o),eD(o)):(DV(o),Z$(o)),o},LU=(e,n,o,r)=>{const a=IU(o,e);return sn(r)?RF(e,n,a):DF(e,r,n,a)},XE=32,hG=100,JE=8,zw=16,QE=ls,ek=Ik(QE,tt),HU=(e,n,o)=>QE(o)&&o!==n&&e.isEditable(o.parentElement),zU=(e,n,o)=>Xt(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),NF=(e,n,o,r)=>{const a=e.dom,u=n.cloneNode(!0);a.setStyles(u,{width:o,height:r}),a.setAttrib(u,"data-mce-selected",null);const f=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),a.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},VU=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},Qv=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},pD=Qv("left",-XE),MF=Qv("left",XE),BF=Qv("top",-XE),bD=Qv("top",XE),UU=(e,n,o,r,a,u,f,b,y,E,N,M)=>{let $=0,j=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>a&&($=n.pageX+o-a),n.pageY+r>u&&(j=n.pageY+r-u),e.style.width=o-$+"px",e.style.height=r-j+"px";const ee=y.clientHeight,G=y.clientWidth,ne=f+y.getBoundingClientRect().top,ge=b+y.getBoundingClientRect().left;N.on(Ee=>{Ee.intervalId.clear(),Ee.dragging&&M&&(f+JE>=ee?Ee.intervalId.set(bD(E)):f-JE<=0?Ee.intervalId.set(BF(E)):b+JE>=G?Ee.intervalId.set(MF(E)):b-JE<=0?Ee.intervalId.set(pD(E)):ne+zw>=window.innerHeight?Ee.intervalId.set(bD(window)):ne-zw<=0?Ee.intervalId.set(BF(window)):ge+zw>=window.innerWidth?Ee.intervalId.set(MF(window)):ge-zw<=0&&Ee.intervalId.set(pD(window)))})},WU=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},ZU=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);WU(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&ru(me.fromDom(o))},jU=e=>e.button===0,GU=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),PF=(e,n)=>o=>{if(jU(o)){const r=Po(n.dom.getParents(o.target),ek).getOr(null);if(Ne(r)&&HU(n.dom,n.getBody(),r)){const a=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:K$(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-a.x,relY:o.pageY-a.y,width:r.offsetWidth,height:r.offsetHeight,ghost:NF(n,r,r.offsetWidth,r.offsetHeight),intervalId:Sf(hG)})}}},qU=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),_F(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const a=e._selectionOverrides.showCaret(1,r.node,r.position===vb.Before,!1);a?e.selection.setRng(a):e.selection.placeCaretAt(n,o)})},ey=(e,n,o,r,a)=>{n==="dragstart"&&Y$(r,e.dom.getOuterHTML(o));const u=LU(n,o,r,a);return e.dispatch(n,u)},KU=(e,n)=>{const o=a1((a,u)=>qU(n,a,u),0);n.on("remove",o.cancel);const r=e;return a=>e.on(u=>{const f=Math.max(Math.abs(a.screenX-u.screenX),Math.abs(a.screenY-u.screenY));if(!u.dragging&&f>10){const b=ey(n,"dragstart",u.element,u.dataTransfer,a);if(Ne(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=a.currentTarget===n.getDoc().documentElement,y=GU(u,FU(n,a));VU(u.ghost,n.getBody()),UU(u.ghost,y,u.width,u.height,u.maxX,u.maxY,a.clientY,a.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(a.clientX,a.clientY)}})},YU=e=>{const n=e.getSel();if(Ne(n)){const r=n.getRangeAt(0).startContainer;return vt(r)?r.parentNode:r}else return null},XU=(e,n)=>o=>{e.on(r=>{var a;if(r.intervalId.clear(),r.dragging){if(zU(n,YU(n.selection),r.element)){const u=(a=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&a!==void 0?a:n.getBody();ey(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{ZU(n.dom,r.element),FV(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}ey(n,"dragend",n.getBody(),r.dataTransfer,o)}}),vD(e)},$F=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>ey(n,"dragend",r.element,r.dataTransfer),a=>ey(n,"dragend",r.element,r.dataTransfer,a))}),vD(e)},JU=(e,n)=>o=>$F(e,n,F.some(o)),vD=e=>{e.on(n=>{n.intervalId.clear(),WU(n.ghost)}),e.clear()},pG=e=>{const n=La(),o=wr.DOM,r=document,a=PF(n,e),u=KU(n,e),f=XU(n,e),b=JU(n,e);e.on("mousedown",a),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",y=>{y.keyCode===Ct.ESC&&$F(n,e,F.none())})},QU=e=>{const n=a=>{if(!a.isDefaultPrevented()){const u=a.dataTransfer;u&&(xe(u.types,"Files")||u.files.length>0)&&(a.preventDefault(),a.type==="drop"&&G2(e,"Dropped file type is not supported"))}},o=a=>{oT(e,a.target)&&n(a)},r=()=>{const a=wr.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];ie(y,E=>{a.bind(f,E,o),u.bind(b,E,n)}),e.on("remove",()=>{ie(y,E=>{a.unbind(f,E,o),u.unbind(b,E,n)})})};e.on("init",()=>{Vu.setEditorTimeout(e,r,0)})},FF=e=>{pG(e),JS(e)&&QU(e)},eW=e=>{const n=a1(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=Lv(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},yD=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Ia(o)){const r=Tp(e.getBody(),o),a=ls(r)?r:o;e.selection.getNode()!==a&&Iv(e,a).each(u=>e.selection.setRng(u))}})})},Vw=ls,IF=(e,n)=>Tp(e.getBody(),n),tW=e=>{const n=e.selection,o=e.dom,r=e.getBody(),a=mR(e,r,o.isBlock,()=>gh(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=Gt=>Ne(Gt)&&o.hasClass(Gt,"mce-offscreen-selection"),E=Gt=>Gt!==r&&(Vw(Gt)||Ia(Gt))&&o.isChildOf(Gt,r)&&o.isEditable(Gt.parentNode),N=Gt=>{Gt&&n.setRng(Gt)},M=(Gt,Ge,Le,ct=!0)=>e.dispatch("ShowCaret",{target:Ge,direction:Gt,before:Le}).isDefaultPrevented()?null:(ct&&n.scrollIntoView(Ge,Gt===-1),a.show(Le,Ge)),$=Gt=>{Gt.hasAttribute("data-mce-caret")&&(nm(Gt),n.scrollIntoView(Gt))},j=()=>{e.on("click",Ge=>{o.isEditable(Ge.target)||(Ge.preventDefault(),e.focus())}),e.on("blur NewBlock",Me),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",Ge=>{const Le=Ge.target,ct=IF(e,Le);Vw(ct)?(Ge.preventDefault(),Iv(e,ct).each(Se)):E(Le)&&Iv(e,Le).each(Se)},!0),e.on("mousedown",Ge=>{const Le=Ge.target;if(Le!==r&&Le.nodeName!=="HTML"&&!o.isChildOf(Le,r)||!x7(e,Ge.clientX,Ge.clientY))return;Me(),At();const ct=IF(e,Le);Vw(ct)?(Ge.preventDefault(),Iv(e,ct).each(Se)):_F(r,Ge.clientX,Ge.clientY).each(on=>{Ge.preventDefault();const wn=M(1,on.node,on.position===vb.Before,!1);N(wn),ei(ct)?ct.focus():e.getBody().focus()})}),e.on("keypress",Ge=>{Ct.modifierPressed(Ge)||Vw(n.getNode())&&Ge.preventDefault()}),e.on("GetSelectionRange",Ge=>{let Le=Ge.range;if(b){if(!b.parentNode){b=null;return}Le=Le.cloneRange(),Le.selectNode(b),Ge.range=Le}}),e.on("SetSelectionRange",Ge=>{Ge.range=ne(Ge.range);const Le=Se(Ge.range,Ge.forward);Le&&(Ge.range=Le)});const Gt=Ge=>Wt(Ge)&&Ge.id==="mcepastebin";e.on("AfterSetSelectionRange",Ge=>{const Le=Ge.range,ct=Le.startContainer.parentElement;!G(Le)&&!Gt(ct)&&At(),y(ct)||Me()}),FF(e),eW(e),yD(e)},ee=Gt=>li(Gt)||$f(Gt)||Zo(Gt),G=Gt=>ee(Gt.startContainer)||ee(Gt.endContainer),ne=Gt=>{const Ge=e.schema.getVoidElements(),Le=o.createRng(),ct=Gt.startContainer,on=Gt.startOffset,wn=Gt.endContainer,Ro=Gt.endOffset;return fn(Ge,ct.nodeName.toLowerCase())?on===0?Le.setStartBefore(ct):Le.setStartAfter(ct):Le.setStart(ct,on),fn(Ge,wn.nodeName.toLowerCase())?Ro===0?Le.setEndBefore(wn):Le.setEndAfter(wn):Le.setEnd(wn,Ro),Le},ge=(Gt,Ge)=>{const Le=me.fromDom(e.getBody()),ct=e.getDoc(),on=hn(Le,"#"+u).getOrThunk(()=>{const Fo=me.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ct);return Fs(Fo,"id",u),Rr(Le,Fo),Fo}),wn=o.createRng();id(on),Eu(on,[me.fromText(xc,ct),me.fromDom(Ge),me.fromText(xc,ct)]),wn.setStart(on.dom.firstChild,1),wn.setEnd(on.dom.lastChild,0),uo(on,{top:o.getPos(Gt,e.getBody()).y+"px"}),uv(on);const Ro=n.getSel();return Ro&&(Ro.removeAllRanges(),Ro.addRange(wn)),wn},Ee=Gt=>{const Ge=Gt.cloneNode(!0),Le=e.dispatch("ObjectSelected",{target:Gt,targetClone:Ge});if(Le.isDefaultPrevented())return null;const ct=ge(Gt,Le.targetClone),on=me.fromDom(Gt);return ie(Aa(me.fromDom(e.getBody()),`*[${f}]`),wn=>{wo(on,wn)||Ys(wn,f)}),o.getAttrib(Gt,f)||Gt.setAttribute(f,"1"),b=Gt,At(),ct},Se=(Gt,Ge)=>{if(!Gt)return null;if(Gt.collapsed){if(!G(Gt)){const wn=Ge?1:-1,Ro=_1(wn,r,Gt),Fo=Ro.getNode(!Ge);if(Ne(Fo)){if(sm(Fo))return M(wn,Fo,Ge?!Ro.isAtEnd():!1,!1);if(zm(Fo)&&ls(Fo.nextSibling)){const Zs=o.createRng();return Zs.setStart(Fo,0),Zs.setEnd(Fo,0),Zs}}const _s=Ro.getNode(Ge);if(Ne(_s)){if(sm(_s))return M(wn,_s,Ge?!1:!Ro.isAtEnd(),!1);if(zm(_s)&&ls(_s.previousSibling)){const Zs=o.createRng();return Zs.setStart(_s,1),Zs.setEnd(_s,1),Zs}}}return null}let Le=Gt.startContainer,ct=Gt.startOffset;const on=Gt.endOffset;if(vt(Le)&&ct===0&&Vw(Le.parentNode)&&(Le=Le.parentNode,ct=o.nodeIndex(Le),Le=Le.parentNode),!Wt(Le))return null;if(on===ct+1&&Le===Gt.endContainer){const wn=Le.childNodes[ct];if(E(wn))return Ee(wn)}return null},Me=()=>{b&&b.removeAttribute(f),hn(me.fromDom(e.getBody()),"#"+u).each(Ws),b=null},lt=()=>{a.destroy(),b=null},At=()=>{a.hide()};return rg(e)||j(),{showCaret:M,showBlockCaretContainer:$,hideFakeCaret:At,destroy:lt}},LF=(e,n)=>{let o=n;for(let r=e.previousSibling;vt(r);r=r.previousSibling)o+=r.data.length;return o},Uw=(e,n,o,r,a)=>{if(vt(o)&&(r<0||r>o.data.length))return[];const u=a&&vt(o)?[LF(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,a)),f=f.parentNode;return f===n?u.reverse():[]},tk=(e,n,o,r,a,u,f=!1)=>{const b=Uw(e,n,o,r,f),y=Uw(e,n,a,u,f);return{start:b,end:y}},CD=(e,n)=>{const o=n.slice(),r=o.pop();return Bo(r)?ro(o,(u,f)=>u.bind(b=>F.from(b.childNodes[f])),F.some(e)).bind(u=>vt(u)&&(r<0||r>u.data.length)?F.none():F.some({node:u,offset:r})):F.none()},HF=(e,n)=>CD(e,n.start).bind(({node:o,offset:r})=>CD(e,n.end).map(({node:a,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(a,u),f})),nW=(e,n,o,r=!1)=>tk(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),yb=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,vt(n.firstChild)&&Il(n.firstChild.data)),yb(e,r,o)}},nk=(e,n,o,r=!0)=>{const a=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(vt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),vt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),yb(e,a,o),a!==u&&yb(e,u,o))},ok=(e,n)=>F.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),wD=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:aC(r).concat(e.blockPatterns),inlinePatterns:IS(r).concat(e.inlinePatterns)}},Ww=(e,n,o,r)=>{const a=e.createRng();return a.setStart(n,0),a.setEnd(o,r),a.toString()},zF=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),sk=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},VF=(e,n,o)=>{const r=HF(e.getRoot(),o).getOrDie("Unable to resolve path range"),a=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?a:a.splitText(r.startOffset),y=b.parentNode,E=f.parentNode;return{prefix:n,end:E.insertBefore(zF(e,n+"-end"),f),start:y.insertBefore(zF(e,n+"-start"),b)}},UF=(e,n,o)=>{yb(e,e.get(n.prefix+"-end"),o),yb(e,e.get(n.prefix+"-start"),o)},SD=e=>e.start.length===0,oW=e=>(n,o)=>{const a=n.data.substring(0,o),u=a.lastIndexOf(e.charAt(e.length-1)),f=a.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},xD=(e,n,o,r)=>{const a=n.start;return yO(e,r.container,r.offset,oW(a),o).bind(f=>{var b,y;const E=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(a))!==null&&y!==void 0?y:-1;if(E!==-1&&f.offset>=E+a.length){const M=e.createRng();return M.setStart(f.container,f.offset-a.length),M.setEnd(f.container,f.offset),F.some(M)}else{const M=f.offset-a.length;return vO(f.container,M,o).map($=>{const j=e.createRng();return j.setStart($.container,$.offset),j.setEnd(f.container,f.offset),j}).filter($=>$.toString()===a).orThunk(()=>xD(e,n,o,vm(f.container,0)))}})},WF=(e,n,o,r,a,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),F.some(f)}return bO(o,r,a).bind(f=>xD(e,n,a,f).bind(y=>{var E;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return F.none();if(f.offset===0&&((E=y.endContainer.textContent)===null||E===void 0?void 0:E.length)===y.endOffset)return F.none()}return F.some(y)}))},TD=(e,n,o,r)=>{const a=e.dom,u=a.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return vO(b,y-o.pattern.end.length,n).bind(E=>{const N=tk(a,u,E.container,E.offset,b,y,r);if(SD(f))return F.some({matches:[{pattern:f,startRng:N,endRng:N}],position:E});{const M=ty(e,o.remainingPatterns,E.container,E.offset,n,r),$=M.getOr({matches:[],position:E}),j=$.position;return WF(a,f,j.container,j.offset,n,M.isNone()).map(G=>{const ne=nW(a,u,G,r);return{matches:$.matches.concat([{pattern:f,startRng:ne,endRng:N}]),position:vm(G.startContainer,G.startOffset)}})}})},ty=(e,n,o,r,a,u)=>{const f=e.dom;return bO(o,r,f.getRoot()).bind(b=>{const y=Ww(f,a,o,r);for(let E=0;E<n.length;E++){const N=n[E];if(!zo(y,N.end))continue;const M=n.slice();M.splice(E,1);const $=TD(e,a,{pattern:N,remainingPatterns:M,position:b},u);if($.isNone()&&r>0)return ty(e,n,o,r-1,a,u);if($.isSome())return $}return F.none()})},ZF=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?ie(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},ED=(e,n,o,r)=>{const a=sk(e.dom,o);nk(e.dom,a,r),ZF(e,n,a)},sW=(e,n,o,r,a)=>{const u=e.dom,f=sk(u,r),b=sk(u,o);nk(u,b,a),nk(u,f,a);const y={prefix:o.prefix,start:o.end,end:r.start},E=sk(u,y);ZF(e,n,E)},rW=(e,n)=>{const o=Wb("mce_textpattern"),r=rs(n,(a,u)=>{const f=VF(e,o+`_end${a.length}`,u.endRng);return a.concat([{...u,endMarker:f}])},[]);return rs(r,(a,u)=>{const f=r.length-a.length-1,b=SD(u.pattern)?u.endMarker:VF(e,o+`_start${f}`,u.startRng);return a.concat([{...u,startMarker:b}])},[])},jF=e=>bo(e,(n,o)=>o.end.length-n.end.length),cW=(e,n)=>{const o=As(e,r=>Re(n,a=>r.pattern.start===a.pattern.start&&r.pattern.end===a.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},GF=(e,n,o,r,a,u)=>{const f=ty(e,a.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=ty(e,jF(a.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return cW(f,b)},qF=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),a=rW(o,n);ie(a,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;SD(u.pattern)?ED(e,u.pattern,u.endMarker,b):sW(e,u.pattern,u.startMarker,u.endMarker,b),UF(o,u.endMarker,b),UF(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},KF=(e,n,o)=>Z9(n,0,n).map(r=>{const a=r.container;return Tw(a,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(a,0),f.setEnd(u.container,u.offset),nk(e,f,b=>b===n)}),a}),YF=e=>(n,o)=>{const r=n.dom,a=o.pattern,u=HF(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,y)=>{const E=y.get(b);return dt(E)&&vo(E).exists(N=>fn(N,"block"))};return ok(n,u).each(b=>{a.type==="block-format"?f(a.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,b,a),n.formatter.apply(a.format)}):a.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,b,a),n.execCommand(a.cmd,!1,a.value)})}),!0},aW=e=>bo(e,(n,o)=>o.start.length-n.start.length),XF=e=>(n,o)=>{const r=aW(n),a=o.replace(xc," ");return Po(r,u=>e(u,o,a))},kD=(e,n)=>(o,r,a,u,f)=>{var b;f===void 0&&(f=(b=r.textContent)!==null&&b!==void 0?b:"");const y=o.dom,E=Ha(o);return y.is(r,E)?e(a.blockPatterns,f).map(N=>n&&yt.trim(f).length===N.start.length?[]:[{pattern:N,range:tk(y,y.getRoot(),r,0,r,0,u)}]).getOr([]):[]},lW=e=>/^\s[^\s]/.test(e),iW=YF((e,n,o)=>{KF(e,n,o).each(r=>{const a=me.fromDom(r),u=Mf(a);lW(u)&&Hy(a,u.slice(1))})}),uW=XF((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),dW=kD(uW,!0),mW=(e,n)=>{const o=e.selection.getRng();return ok(e,o).map(r=>{var a;const u=Math.max(0,o.startOffset),f=wD(n,r,(a=r.textContent)!==null&&a!==void 0?a:""),b=GF(e,r,o.startContainer,u,f,!0),y=dW(e,r,f,!0);return{inlineMatches:b,blockMatches:y}}).filter(({inlineMatches:r,blockMatches:a})=>a.length>0||r.length>0)},fW=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();ie(n,r=>iW(e,r)),e.selection.moveToBookmark(o)},gW=YF(KF),rk=XF((e,n,o)=>n===e.start||o===e.start),hW=kD(rk,!1),pW=(e,n)=>{const o=e.selection.getRng();return ok(e,o).map(r=>{const a=Math.max(0,o.startOffset),u=Ww(e.dom,r,o.startContainer,a),f=wD(n,r,u);return hW(e,r,f,!1,u)}).filter(r=>r.length>0)},bW=(e,n)=>{ie(n,o=>gW(e,o))},vW=(e,n)=>mW(e,n).fold(Pe,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{Bk(e),qF(e,o),fW(e,r);const a=e.selection.getRng(),u=bO(a.startContainer,a.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===Mh&&(b.deleteData(f.offset-1,1),yb(e.dom,b.parentNode,y=>y===e.dom.getRoot()))})}),!0)),yW=(e,n)=>{const o=e.selection.getRng();ok(e,o).map(r=>{const a=Math.max(0,o.startOffset-1),u=Ww(e.dom,r,o.startContainer,a),f=wD(n,r,u),b=GF(e,r,o.startContainer,a,f,!1);b.length>0&&e.undoManager.transact(()=>{qF(e,b)})})},CW=(e,n)=>pW(e,n).fold(Pe,o=>(e.undoManager.transact(()=>{bW(e,o)}),!0)),QF=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},wW=(e,n)=>QF(e,n,(o,r)=>o===r.keyCode&&!Ct.modifierPressed(r)),SW=(e,n)=>QF(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),eI=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Xg(ax(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),CC(e)),a=()=>Oi(e);e.on("keydown",f=>{if(f.keyCode===13&&!Ct.modifierPressed(f)&&e.selection.isCollapsed()){const b=ha(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||a())&&vW(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()){const b=ha(r(),"space");(b.blockPatterns.length>0||a())&&CW(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=ha(r(),"space");(f.inlinePatterns.length>0||a())&&yW(e,f)}};e.on("keyup",f=>{wW(o,f)&&u()}),e.on("keypress",f=>{SW(n,f)&&Vu.setEditorTimeout(e,u)})},xW=e=>{eI(e)},tI=e=>{const n=yt.each,o=Ct.BACKSPACE,r=Ct.DELETE,a=e.dom,u=e.selection,f=e.parser,b=gn.browser,y=b.isFirefox(),E=b.isChromium()||b.isSafari(),N=gn.deviceType.isiPhone()||gn.deviceType.isiPad(),M=gn.os.isMacOS()||gn.os.isiOS(),$=(zt,On)=>{try{e.getDoc().execCommand(zt,!1,String(On))}catch{}},j=zt=>zt.isDefaultPrevented(),ee=()=>{const zt=Ao=>{const Zt=a.create("body"),Oo=Ao.cloneContents();return Zt.appendChild(Oo),u.serializer.serialize(Zt,{format:"html"})},On=Ao=>{const Zt=zt(Ao),Oo=a.createRng();Oo.selectNode(e.getBody());const Io=zt(Oo);return Zt===Io};e.on("keydown",Ao=>{const Zt=Ao.keyCode;if(!j(Ao)&&(Zt===r||Zt===o)&&e.selection.isEditable()){const Oo=e.selection.isCollapsed(),Io=e.getBody();if(Oo&&!Ru(e.schema,Io)||!Oo&&!On(e.selection.getRng()))return;Ao.preventDefault(),e.setContent(""),Io.firstChild&&a.isBlock(Io.firstChild)?e.selection.setCursorLocation(Io.firstChild,0):e.selection.setCursorLocation(Io,0),e.nodeChanged()}})},G=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ne=()=>{e.inline||a.bind(e.getDoc(),"mousedown mouseup",zt=>{let On;if(zt.target===e.getDoc().documentElement)if(On=u.getRng(),e.getBody().focus(),zt.type==="mousedown"){if(li(On.startContainer))return;u.placeCaretAt(zt.clientX,zt.clientY)}else u.setRng(On)})},ge=()=>{e.on("keydown",zt=>{if(!j(zt)&&zt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const On=u.getNode(),Ao=On.previousSibling;if(On.nodeName==="HR"){a.remove(On),zt.preventDefault();return}Ao&&Ao.nodeName&&Ao.nodeName.toLowerCase()==="hr"&&(a.remove(Ao),zt.preventDefault())}}})},Ee=()=>{Range.prototype.getClientRects||e.on("mousedown",zt=>{if(!j(zt)&&zt.target.nodeName==="HTML"){const On=e.getBody();On.blur(),Vu.setEditorTimeout(e,()=>{On.focus()})}})},Se=()=>{const zt=pC(e);e.on("click",On=>{const Ao=On.target;/^(IMG|HR)$/.test(Ao.nodeName)&&a.isEditable(Ao)&&(On.preventDefault(),e.selection.select(Ao),e.nodeChanged()),Ao.nodeName==="A"&&a.hasClass(Ao,zt)&&Ao.childNodes.length===0&&a.isEditable(Ao.parentNode)&&(On.preventDefault(),u.select(Ao))})},Me=()=>{const zt=()=>{const Ao=a.getAttribs(u.getStart().cloneNode(!1));return()=>{const Zt=u.getStart();Zt!==e.getBody()&&(a.setAttrib(Zt,"style",null),n(Ao,Oo=>{Zt.setAttributeNode(Oo.cloneNode(!0))}))}},On=()=>!u.isCollapsed()&&a.getParent(u.getStart(),a.isBlock)!==a.getParent(u.getEnd(),a.isBlock);e.on("keypress",Ao=>{let Zt;return!j(Ao)&&(Ao.keyCode===8||Ao.keyCode===46)&&On()?(Zt=zt(),e.getDoc().execCommand("delete",!1),Zt(),Ao.preventDefault(),!1):!0}),a.bind(e.getDoc(),"cut",Ao=>{if(!j(Ao)&&On()){const Zt=zt();Vu.setEditorTimeout(e,()=>{Zt()})}})},lt=()=>{e.on("keydown",zt=>{if(!j(zt)&&zt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const On=u.getNode().previousSibling;if(On&&On.nodeName&&On.nodeName.toLowerCase()==="table")return zt.preventDefault(),!1}return!0})},At=()=>{e.on("keydown",zt=>{if(j(zt)||zt.keyCode!==Ct.BACKSPACE)return;let On=u.getRng();const Ao=On.startContainer,Zt=On.startOffset,Oo=a.getRoot();let Io=Ao;if(!(!On.collapsed||Zt!==0)){for(;Io.parentNode&&Io.parentNode.firstChild===Io&&Io.parentNode!==Oo;)Io=Io.parentNode;Io.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Io),On=a.createRng(),On.setStart(Ao,0),On.setEnd(Ao,0),u.setRng(On))}})},Gt=()=>{const zt=()=>{$("StyleWithCSS",!1),$("enableInlineTableEditing",!1),Ai(e)||$("enableObjectResizing",!1)};XS(e)||e.on("BeforeExecCommand mousedown",zt)},Ge=()=>{const zt=()=>{n(a.select("a:not([data-mce-block])"),On=>{var Ao;let Zt=On.parentNode;const Oo=a.getRoot();if((Zt==null?void 0:Zt.lastChild)===On){for(;Zt&&!a.isBlock(Zt);){if(((Ao=Zt.parentNode)===null||Ao===void 0?void 0:Ao.lastChild)!==Zt||Zt===Oo)return;Zt=Zt.parentNode}a.add(Zt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",On=>{(On.type==="setcontent"||On.command==="mceInsertLink")&&zt()})},Le=()=>{e.on("init",()=>{$("DefaultParagraphSeparator",Ha(e))})},ct=zt=>{const On=zt.getBody(),Ao=zt.selection.getRng();return Ao.startContainer===Ao.endContainer&&Ao.startContainer===On&&Ao.startOffset===0&&Ao.endOffset===On.childNodes.length},on=()=>{e.on("keyup focusin mouseup",zt=>{!Ct.modifierPressed(zt)&&!ct(e)&&u.normalize()},!0)},wn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Ro=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Fo=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",zt=>{let On;zt.target.nodeName==="HTML"&&(On=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(On),e.selection.normalize(),e.nodeChanged())}))},_s=()=>{M&&e.on("keydown",zt=>{Ct.metaKeyPressed(zt)&&!zt.shiftKey&&(zt.keyCode===37||zt.keyCode===39)&&(zt.preventDefault(),e.selection.getSel().modify("move",zt.keyCode===37?"backward":"forward","lineboundary"))})},Zs=()=>{e.on("click",zt=>{let On=zt.target;do if(On.tagName==="A"){zt.preventDefault();return}while(On=On.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},lc=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",zt=>{zt.preventDefault()})})},Kc=()=>{f.addNodeFilter("br",zt=>{let On=zt.length;for(;On--;)zt[On].attr("class")==="Apple-interchange-newline"&&zt[On].remove()})},Qs=$e,Pt=()=>{if(!y||e.removed)return!1;const zt=e.selection.getSel();return!zt||!zt.rangeCount||zt.rangeCount===0},vn=()=>{E&&(ne(),Se(),lc(),G(),N&&(Ro(),Fo(),Zs())),y&&(Ee(),Gt(),wn(),_s())},is=()=>{At(),ee(),gn.windowsPhone||on(),E&&(ne(),Se(),Le(),lc(),lt(),Kc(),N?(Ro(),Fo(),Zs()):G()),y&&(ge(),Ee(),Me(),Gt(),Ge(),wn(),_s(),lt())};return rg(e)?vn():is(),{refreshContentEditable:Qs,isHidden:Pt}},TW=e=>e.toLowerCase()==="gpl",EW=e=>e.length>=64&&e.length<=255,nI=e=>TW(e)||EW(e)?"VALID":"INVALID",Zw=e=>{const n=dx(e);!oe(mx(e))&&(sn(n)||nI(n))},_D=wr.DOM,oI=(e,n)=>{const o=me.fromDom(e.getBody()),r=_m(Ql(o)),a=me.fromTag("style");Fs(a,"type","text/css"),Rr(a,me.fromText(n)),Rr(r,a),e.on("remove",()=>{Ws(a)})},kW=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,AD=e=>Qo(e,n=>sn(n)===!1),sI=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return AD({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:kW(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:T0(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},rI=e=>{const n=e.options.get;return AD({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},cI=e=>{const n=e.options.get;return{...sI(e),...rI(e),...AD({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},_W=e=>{const n=Ov(sI(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const a=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=a.serializeStyle(a.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const a=o[r],u=a.attr("type")||"no/type";u.indexOf("mce-")!==0&&a.attr("type","mce-"+u)}}),S0(e)&&n.addNodeFilter("#cdata",o=>{var r;let a=o.length;for(;a--;){const u=o[a];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const a=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(a)&&u.getAll("br").length===0&&u.append(new hi("br",1))}}),n},aI=e=>{const n=QS(e);n&&Vu.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},AW=e=>{const n=e.dom.getRoot();!e.inline&&(!fp(e)||e.selection.getStart(!0)===n)&&Ua(n).each(o=>{const r=o.getNode(),a=Qi(r)?Ua(r).getOr(o):o;e.selection.setRng(a.toRange())})},OW=e=>{e.bindPendingEventDelegates(),e.initialized=!0,z_(e),e.focus(!0),AW(e),e.nodeChanged({initial:!0});const n=m_(e);le(n)&&n.call(e,e),aI(e)},OD=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,DW=(e,n,o)=>{const{pass:r,fail:a}=Un(n,b=>tinymce.Resource.has(Y2(b))),f=[...r.map(b=>{const y=tinymce.Resource.get(Y2(b));return oe(y)?Promise.resolve(OD(e).loadRawCss(b,y)):Promise.resolve()}),OD(e).loadAll(a)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},lI=e=>{const n=OD(e),o=Zl(e),r=e.contentCSS,a=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?a():e.on("remove",a)};if(e.contentStyles.length>0){let y="";yt.each(e.contentStyles,E=>{y+=E+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(DW(e,r,o)).then(u).catch(u),b=c_(e);return b&&oI(e,b),f},RW=e=>{const n=e.getDoc(),o=e.getBody();sv(e),vC(e)||(n.body.spellcheck=!1,_D.setAttrib(o,"spellcheck","false")),e.quirks=tI(e),zx(e);const r=uR(e);r!==void 0&&(o.dir=r);const a=yC(e);a&&e.on("BeforeSetContent",u=>{yt.each(a,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},NW=e=>{rg(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},DD=e=>{e.removed!==!0&&(NW(e),OW(e))},MW=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},RD=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(_D.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=XS(e),e._editableRoot=u_(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&_D.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=i3(e),e.schema=Jd(rI(e)),e.dom=wr(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:ZS(e),referrerPolicy:m0(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=_W(e),e.serializer=ol(cI(e),e),e.selection=t7(e.dom,e.getWin(),e.serializer,e),e.annotator=ev(e),e.formatter=sf(e),e.undoManager=Fv(e),e._nodeChangeDispatcher=new L$(e),e._selectionOverrides=tW(e),s9(e),vF(e),u9(e),rg(e)||(xF(e),xW(e));const a=UE(e);QP(e,a),eO(e),q7(e),wU(e);const u=$8(e);RW(e),Zw(e),u.fold(()=>{const f=MW(e);lI(e).then(()=>{DD(e),f()})},f=>{e.setProgressState(!0),lI(e).then(()=>{f().then(b=>{e.setProgressState(!1),DD(e),Q4(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),DD(e),Q4(e)})})})},ND=et,iI=(e,n,o)=>x(e,n,ND,o),ck=wr.DOM,BW=(e,n,o,r)=>{const a=me.fromTag("iframe");return r.each(u=>Fs(a,"tabindex",u)),ua(a,o),ua(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),wi(a,"tox-edit-area__iframe"),a},PW=e=>{let n=e_(e)+"<html><head>";Da(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=t_(e),r=Wf(e),a=e.translate(bC(e));return dC(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+dC(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${a}"><br></body></html>`,n},$W=(e,n)=>{const o=gn.browser.isFirefox()?bC(e):"Rich Text Area",r=e.translate(o),a=Er(me.fromDom(e.getElement()),"tabindex").bind(Kr),u=BW(e.id,r,HS(e),a).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=PW(e),ck.add(n.iframeContainer,u)},uI=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,RD(e)};if(dR(e)||gn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=iI(me.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},dI=(e,n)=>{$W(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=ck.isHidden(n.editorContainer)),e.getElement().style.display="none",ck.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,uI(e)},mI=wr.DOM,FW=(e,n,o)=>{const r=Mv.get(o),a=Mv.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=yt.trim(o),r&&yt.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,a)||{};e.plugins[o]=u,le(u.init)&&(u.init(e,a),n.push(o))}catch(u){R7(e,o,u)}}},MD=e=>e.replace(/^\-/,""),ak=e=>{const n=[];ie(v0(e),o=>{FW(e,n,MD(o))})},lk=e=>{const n=yt.trim(Zc(e)),o=e.ui.registry.getAll().icons,r={...cE.get("default").icons,...cE.get(n).icons};xt(r,(a,u)=>{fn(o,u)||e.ui.registry.addIcon(u,a)})},_h=e=>{const n=Gf(e);if(oe(n)){const o=Rp.get(n);e.theme=o(e,Rp.urls[n])||{},le(e.theme.init)&&e.theme.init(e,Rp.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},ik=e=>{const n=h0(e),o=Nv.get(n);e.model=o(e,Nv.urls[n])},ny=e=>{const n=e.theme.renderUI;return n?n():BD(e)},fI=e=>{const n=e.getElement(),r=Gf(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},gI=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),IW=e=>{const n=mI.create("div");return mI.insertAfter(n,e),gI(n,n)},BD=e=>{const n=e.getElement();return e.inline?gI(null):IW(n)},LW=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,oe(Gf(e))?ny(e):le(Gf(e))?fI(e):BD(e)},PD=(e,n)=>{const o={show:F.from(n.show).getOr($e),hide:F.from(n.hide).getOr($e),isEnabled:F.from(n.isEnabled).getOr(et),setEnabled:r=>{e.mode.isReadOnly()||F.from(n.setEnabled).each(a=>a(r))}};e.ui={...e.ui,...o}},uk=async e=>{e.dispatch("ScriptsLoaded"),lk(e),_h(e),ik(e),ak(e);const n=await LW(e);PD(e,F.from(n.api).getOr({})),e.editorContainer=n.editorContainer,Hs(e),e.inline?RD(e):dI(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Ju=wr.DOM,Gp=e=>e.charAt(0)==="-",hI=(e,n)=>{const o=jf(n),r=f0(n);if(!ga.hasCode(o)&&o!=="en"){const a=Dn(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(a).catch(()=>{A7(n,a,o)})}},HW=(e,n)=>{const o=Gf(e);if(oe(o)&&!Gp(o)&&!fn(Rp.urls,o)){const r=mC(e),a=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Rp.load(o,a).catch(()=>{O7(e,a,o)})}},zW=(e,n)=>{const o=h0(e);if(o!=="plugin"&&!fn(Nv.urls,o)){const r=GS(e),a=oe(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Nv.load(o,a).catch(()=>{D7(e,a,o)})}},VW=e=>F.from(jc(e)).filter(Dn).map(n=>({url:n,name:F.none()})),pI=(e,n,o)=>F.from(n).filter(r=>Dn(r)&&!cE.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:F.some(r)})),UW=(e,n,o)=>{const r=pI(n,"default",o),a=VW(n).orThunk(()=>pI(n,Zc(n),""));ie(Xc([r,a]),u=>{e.add(u.url).catch(()=>{KB(n,u.url,u.name.getOrUndefined())})})},WW=(e,n)=>{const o=(r,a)=>{Mv.load(r,a).catch(()=>{_7(e,a,r)})};xt(d_(e),(r,a)=>{o(a,r),e.options.set("plugins",v0(e).concat(a))}),ie(v0(e),r=>{r=yt.trim(r),r&&!Mv.urls[r]&&!Gp(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},bI=e=>{const n=Gf(e);return!oe(n)||Ne(Rp.get(n))},ZW=e=>{const n=h0(e);return Ne(Nv.get(n))},jW=(e,n)=>{const o=bd.ScriptLoader,r=()=>{!e.removed&&bI(e)&&ZW(e)&&uk(e)};HW(e,n),zW(e,n),hI(o,e),UW(o,e,n),WW(e,n),o.loadQueue().then(r,r)},GW=(e,n)=>or.forElement(e,{contentCssCors:gC(n),referrerPolicy:m0(n)}),bG=e=>{const n=e.id;ga.setCode(jf(e));const o=()=>{Ju.unbind(window,"ready",o),e.render()};if(!Of.Event.domLoaded){Ju.bind(window,"ready",o);return}if(!e.getElement())return;const r=me.fromDom(e.getElement()),a=bu(r);e.on("remove",()=>{_n(r.dom.attributes,f=>Ys(r,f.name)),ua(r,a)}),e.ui.styleSheetLoader=GW(r,e),w1(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Ju.getParent(n,"form");u&&(e.formElement=u,a_(e)&&!Nr(e.getElement())&&(Ju.insertAfter(Ju.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},Ju.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),p0(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=GB(e),e.notificationManager=jB(e),qf(e)&&e.on("GetContent",f=>{f.save&&(f.content=Ju.encode(f.content))}),l_(e)&&e.on("submit",()=>{e.initialized&&e.save()}),YS(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),jW(e,e.suffix)},qW=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),jx(e,n))},$D=e=>e._editableRoot,KW=(e,n)=>({sections:Ke(e),options:Ke(n)}),vI=wt().deviceType,FD=vI.isPhone(),YW=vI.isTablet(),oy=e=>{if(Xt(e))return[];{const n=dt(e)?e:e.split(/[ ,]/),o=Fe(n,Os);return Bt(o,Dn)}},XW=(e,n)=>{const o=vc(n,(r,a)=>xe(e,a));return KW(o.t,o.f)},ID=(e,n,o={})=>{const r=e.sections(),a=Yo(r,n).getOr({});return yt.extend({},o,a)},LD=(e,n)=>fn(e.sections(),n),JW=(e,n)=>LD(e,n)?e.sections()[n]:{},QW=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Yo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),eZ=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?yt.extend({},e.external_plugins,r):r},yI=(e,n)=>[...oy(e),...oy(n)],HD=(e,n,o,r)=>e&&LD(n,"mobile")?r:o,CI=(e,n,o,r)=>{const a=oy(o.forced_plugins),u=oy(r.plugins),f=JW(n,"mobile"),b=f.plugins?oy(f.plugins):u,y=HD(e,n,u,b),E=yI(a,y);return yt.extend(r,{forced_plugins:a,plugins:E})},zD=(e,n)=>e&&LD(n,"mobile"),tZ=(e,n,o,r,a)=>{var u;const f=e?{mobile:QW((u=a.mobile)!==null&&u!==void 0?u:{},n)}:{},b=XW(["mobile"],fu(f,a)),y=yt.extend(o,r,b.options(),zD(e,b)?ID(b,"mobile"):{},{external_plugins:eZ(r,b.options())});return CI(e,b,r,y)},vG=(e,n)=>{const o=Zv(n);return tZ(FD||YW,FD,o,e,o)},yG=(e,n)=>j8(e,n),nZ=e=>{const n=(r,a)=>{e.formatter.toggle(r,a),e.nodeChanged()},o=r=>()=>{ie("left,center,right,justify".split(","),a=>{r!==a&&e.formatter.remove("align"+a)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},wI=e=>{const n=o=>()=>{const r=e.selection,a=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Re(a,u=>Ne(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},oZ=e=>{nZ(e),wI(e)},sZ=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(gn.os.isMacOS()||gn.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:a,type:"error"})}}})},rZ=(e,n,o,r)=>{const a=me.fromDom(e.getRoot());return m2(a,Ze.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),pv(a,Ze.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},CG=e=>{if(typeof e!="string"){const n=yt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},wG=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?rZ(r,o.getRng(),n,e.schema):n},jw=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=CG(n);qT(e,{...r,content:wG(e,o),format:"html",set:!1,selection:!0}).each(a=>{const u=W8(e,a.content,r);N4(e,u,a),e.addVisual()})}},SI=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{jw(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{jw(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{jw(e,r)},mceInsertContent:(n,o,r)=>{jw(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(ox(e))}})},cZ={"font-size":"size","font-family":"face"},aZ=Lr("font"),lZ=(e,n,o)=>{const r=u=>ta(u,e).orThunk(()=>aZ(u)?Yo(cZ,e).bind(f=>Er(u,f)):F.none()),a=u=>wo(me.fromDom(n),u);return A2(me.fromDom(o),u=>r(u),a)},SG=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),xG=(e,n)=>F.from(wr.DOM.getStyle(n,e,!0)),iZ=e=>(n,o)=>F.from(o).map(me.fromDom).filter(ts).bind(r=>lZ(e,n,r.dom).or(xG(e,r.dom))).getOr(""),uZ=iZ("font-size"),TG=A(SG,iZ("font-family")),dZ=e=>Ua(e.getBody()).bind(n=>{const o=n.container();return F.from(vt(o)?o.parentNode:o)}),Cb=e=>F.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?F.none():F.from(e.selection.getStart(!0))}),VD=(e,n)=>Cb(e).orThunk(je(dZ,e)).map(me.fromDom).filter(ts).bind(n),sy=(e,n)=>VD(e,kn(F.some,n)),UD=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=wC(e),a=p_(e);return a.length>0?a[o-1]||n:r[o-1]||n}else return n}else return n},xI=e=>{const n=e.split(/\s*,\s*/);return Fe(n,o=>o.indexOf(" ")!==-1&&!(Nn(o,'"')||Nn(o,"'"))?`'${o}'`:o).join(",")},TI=(e,n)=>{const o=UD(e,n);e.formatter.toggle("fontname",{value:xI(o)}),e.nodeChanged()},mZ=e=>sy(e,n=>TG(e.getBody(),n.dom)).getOr(""),fZ=(e,n)=>{e.formatter.toggle("fontsize",{value:UD(e,n)}),e.nodeChanged()},gZ=e=>sy(e,n=>uZ(e.getBody(),n.dom)).getOr(""),hZ=e=>sy(e,n=>{const o=me.fromDom(e.getBody()),r=A2(n,u=>ta(u,"line-height"),je(wo,o)),a=()=>{const u=parseFloat(hc(n,"line-height")),f=parseFloat(hc(n,"font-size"));return String(u/f)};return r.getOrThunk(a)}).getOr(""),pZ=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},bZ=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,a)=>{n(o,{value:a})},BackColor:(o,r,a)=>{n("hilitecolor",{value:a})},FontName:(o,r,a)=>{TI(e,a)},FontSize:(o,r,a)=>{fZ(e,a)},LineHeight:(o,r,a)=>{pZ(e,a)},Lang:(o,r,a)=>{var u;n(o,{value:a.code,customValue:(u=a.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,a)=>{n(oe(a)?a:"p")},mceToggleFormat:(o,r,a)=>{n(a)}})},qp=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>mZ(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>gZ(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>hZ(e))},vZ=e=>{bZ(e),qp(e)},EI=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},yZ=e=>{e.editorCommands.addCommands({Indent:()=>{Lp(e)},Outdent:()=>{X3(e)}}),e.editorCommands.addCommands({Outdent:()=>Ip(e)},"state")},dk=e=>{const n=(o,r,a)=>{const u=oe(a)?{href:a}:a,f=e.dom.getParent(e.selection.getNode(),"a");ut(u)&&oe(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},CZ=(e,n,o,r)=>{const a=e.dom,u=b=>a.isBlock(b)&&b.parentElement===o,f=u(n)?n:a.getParent(r,u,o);return F.from(f).map(me.fromDom)},kI=(e,n)=>{const o=e.dom,r=e.selection.getRng(),a=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=Dw(o,u);if(!f||!f.isContentEditable)return;const b=n?_a:ul,y=Ha(e);CZ(e,a,f,u).each(E=>{const N=l$(e,u,E.dom,f,!1,y);b(E,me.fromDom(N)),e.selection.setCursorLocation(N,0),e.dispatch("NewBlock",{newBlock:N}),pb(e,"insertParagraph")})},wZ=e=>kI(e,!0),_I=e=>kI(e,!1),SZ=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{wZ(e)},InsertNewBlockAfter:()=>{_I(e)}})},xZ=e=>{e.editorCommands.addCommands({insertParagraph:()=>{qv(b$,e)},mceInsertNewLine:(n,o,r)=>{k$(e,r)},InsertLineBreak:(n,o,r)=>{qv(y$,e)}})},TZ=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let a=0;e.dom.getParent(e.selection.getNode(),u=>Wt(u)&&a++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),tt);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},EZ=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const a=r??e.selection.getNode();if(a!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{u6(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},WD=e=>{oZ(e),sZ(e),EI(e),TZ(e),SI(e),dk(e),yZ(e),SZ(e),xZ(e),vZ(e),EZ(e)},kZ=["toggleview"],AI=e=>xe(kZ,e.toLowerCase());class oa{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,a){const u=this.editor,f=n.toLowerCase(),b=a==null?void 0:a.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():xR(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const E=this.commands.exec[f];return le(E)?(E(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!AI(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return le(r)?r(o):!1}queryCommandValue(n){if(!AI(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return le(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;xt(n,(a,u)=>{ie(u.toLowerCase().split(","),f=>{r[o][f]=a})})}addCommand(n,o,r){const a=n.toLowerCase();this.commands.exec[a]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const wb="data-mce-contenteditable",_Z=(e,n,o)=>{ji(e,n)&&!o?Cu(e,n):o&&wi(e,n)},Gw=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},qw=(e,n)=>{e.dom.contentEditable=n?"true":"false"},ZD=e=>{ie(Aa(e,'*[contenteditable="true"]'),n=>{Fs(n,wb,"true"),qw(n,!1)})},AZ=e=>{ie(Aa(e,`*[${wb}="true"]`),n=>{Ys(n,wb),qw(n,!0)})},OZ=e=>{F.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},DZ=e=>{e.selection.setRng(e.selection.getRng())},RZ=(e,n)=>{const o=me.fromDom(e.getBody());_Z(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),OZ(e),e.readonly=!0,qw(o,!1),ZD(o)):(e.readonly=!1,e.hasEditableRoot()&&qw(o,!0),AZ(o),Gw(e,"StyleWithCSS",!1),Gw(e,"enableInlineTableEditing",!1),Gw(e,"enableObjectResizing",!1),$R(e)&&e.focus(),DZ(e),e.nodeChanged())},Sb=e=>e.readonly,OI=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Sb(e)&&ie(n,o=>{o.attr(wb,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(wb,n=>{Sb(e)&&ie(n,o=>{o.attr("contenteditable",o.attr(wb))})}),e.serializer.addTempAttr(wb)},NZ=e=>{e.serializer?OI(e):e.on("PreInit",()=>{OI(e)})},MZ=e=>e.type==="click",ry=["copy"],lf=e=>xe(ry,e.type),BZ=(e,n)=>Yi(n,"a",r=>wo(r,me.fromDom(e.getBody()))).bind(r=>Er(r,"href")),PZ=(e,n)=>{if(MZ(n)&&!Ct.metaKeyPressed(n)){const o=me.fromDom(n.target);BZ(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const a=e.dom.select(`${r},[name="${en(r,"#")}"]`);a.length&&e.selection.scrollIntoView(a[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else lf(n)&&e.dispatch(n.type,n)},$Z=e=>{e.on("ShowCaret",n=>{Sb(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{Sb(e)&&n.preventDefault()})},FZ=yt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class jD{static isNative(n){return!!FZ[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Pe}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),a=Ey(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(a);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),a.isImmediatePropagationStopped())return a;if(y.func.call(this.scope,a)===!1)return a.preventDefault(),a}}return a}on(n,o,r,a){if(o===!1&&(o=Pe),o){const u={func:o,removed:!1};a&&yt.extend(u,a);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let E=this.bindings[y];E||(E=[],this.toggleEvent(y,!0)),r?E=[u,...E]:E=[...E,u],this.bindings[y]=E}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let a=r.length;for(;a--;){const u=r[a];let f=this.bindings[u];if(!u)return xt(this.bindings,(b,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const b=Un(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,ie(b.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else xt(this.bindings,(r,a)=>{this.toggleEvent(a,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const Kw=e=>(e._eventDispatcher||(e._eventDispatcher=new jD({scope:e,toggleEvent:(n,o)=>{jD.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),GD={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Ey(e.toLowerCase(),n??{},r);const a=Kw(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!a.isPropagationStopped();)u.dispatch(e,a,!1),u=u.parent?u.parent():void 0}return a},on(e,n,o){return Kw(this).on(e,n,o)},off(e,n){return Kw(this).off(e,n)},once(e,n){return Kw(this).once(e,n)},hasEventListeners(e){return Kw(this).has(e)}},mk=wr.DOM;let xb;const qD=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=Cd(e);return o?(e.eventRoot||(e.eventRoot=mk.select(o)[0]),e.eventRoot):e.getBody()},IZ=e=>!e.hidden&&!Sb(e),DI=(e,n,o)=>{IZ(e)?e.dispatch(n,o):Sb(e)&&PZ(e,o)},RI=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=qD(e,n);if(Cd(e)){if(xb||(xb={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||xb&&(xt(xb,(a,u)=>{e.dom.unbind(qD(e,u))}),xb=null)})),xb[n])return;const r=a=>{const u=a.target,f=e.editorManager.get();let b=f.length;for(;b--;){const y=f[b].getBody();(y===u||mk.isChildOf(u,y))&&DI(f[b],n,a)}};xb[n]=r,mk.bind(o,n,r)}else{const r=a=>{DI(e,n,a)};mk.bind(o,n,r),e.delegates[n]=r}},NI={...GD,bindPendingEventDelegates(){const e=this;yt.each(e._pendingNativeEvents,n=>{RI(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?RI(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(qD(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(xt(e.delegates,(r,a)=>{e.dom.unbind(qD(e,a),a,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},LZ=e=>oe(e)?{value:e.split(/[ ,]/),valid:!0}:gt(e,oe)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},HZ=e=>{const n=(()=>{switch(e){case"array":return dt;case"boolean":return Rt;case"function":return le;case"number":return Bo;case"object":return ut;case"string":return oe;case"string[]":return LZ;case"object[]":return o=>gt(o,ut);case"regexp":return o=>nt(o,RegExp);default:return et}})();return o=>KD(o,n,`The value must be a ${e}.`)},EG=e=>oe(e.processor),kG=(e,n)=>{const o=No(n.message)?"":`. ${n.message}`;return e+o},MI=e=>e.valid,KD=(e,n,o="")=>{const r=n(e);return Rt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},zZ=(e,n,o)=>{if(!sn(n)){const r=KD(n,o);if(MI(r))return r.value}},VZ=(e,n,o=n)=>{const r={},a={},u=(j,ee,G)=>{const ne=KD(ee,G);return MI(ne)?(a[j]=ne.value,!0):!1},f=(j,ee)=>{const G=EG(ee)?HZ(ee.processor):ee.processor,ne=zZ(j,ee.default,G);r[j]={...ee,default:ne,processor:G},Yo(a,j).orThunk(()=>Yo(n,j)).each(Ee=>u(j,Ee,G))},b=j=>fn(r,j);return{register:f,isRegistered:b,get:j=>Yo(a,j).orThunk(()=>Yo(r,j).map(ee=>ee.default)).getOrUndefined(),set:(j,ee)=>{if(b(j)){const G=r[j];return G.immutable?!1:u(j,ee,G.processor)}else return!1},unset:j=>{const ee=b(j);return ee&&delete a[j],ee},isSet:j=>fn(a,j),debug:()=>{try{}catch{}}}},UZ=["design","readonly"],BI=(e,n,o,r)=>{const a=o[n.get()],u=o[r];try{u.activate()}catch{return}a.deactivate(),a.editorReadOnly!==u.editorReadOnly&&RZ(e,u.editorReadOnly),n.set(r),I_(e,r)},WZ=(e,n,o,r)=>{if(r!==o.get()){if(!fn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?BI(e,o,n,r):e.on("init",()=>BI(e,o,n,r))}},ZZ=(e,n,o)=>{if(xe(UZ,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch{}}}}},jZ=e=>{const n=_e("design"),o=_e({design:{activate:$e,deactivate:$e,editorReadOnly:!1},readonly:{activate:$e,deactivate:$e,editorReadOnly:!0}});return NZ(e),$Z(e),{isReadOnly:()=>Sb(e),set:r=>WZ(e,o.get(),n,r),get:()=>n.get(),register:(r,a)=>{o.set(ZZ(o.get(),r,a))}}},YD=yt.each,XD=yt.explode,GZ={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},PI=yt.makeMap("alt,ctrl,shift,meta,access"),qZ=e=>e in PI,KZ=e=>{const n={},o=gn.os.isMacOS()||gn.os.isiOS();YD(XD(e.toLowerCase(),"+"),u=>{qZ(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=GZ[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let a;for(a in PI)n[a]?r.push(a):n[a]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class JD{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(YD(o.shortcuts,a=>{o.matchShortcut(r,a)&&(o.pendingPatterns=a.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(a))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,a){const u=this,f=u.normalizeCommandFunc(r);return YD(XD(yt.trim(n)),b=>{const y=u.createShortcut(b,o,f,a);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:yt.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,a){const u=yt.map(XD(n,">"),KZ);return u[u.length-1]=yt.extend(u[u.length-1],{func:r,scope:a||this.editor}),yt.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const YZ=()=>{const e={},n={},o={},r={},a={},u={},f={},b={},y=(N,M)=>($,j)=>{N[$.toLowerCase()]={...j,type:M}},E=(N,M)=>r[N.toLowerCase()]=M;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(a,"contextmenu"),addContextToolbar:y(u,"contexttoolbar"),addContextForm:y(u,"contextform"),addSidebar:y(f,"sidebar"),addView:y(b,"views"),addIcon:E,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:a,contextToolbars:u,sidebars:f,views:b})}},XZ=()=>{const e=YZ();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Tb=wr.DOM,$I=yt.extend,JZ=yt.each;class fk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,$I(this,NI);const a=this;this.id=n,this.hidden=!1;const u=vG(r.defaultOptions,o);this.options=VZ(a,u,o),LS(a);const f=this.options.get;f("deprecation_warnings")&&h7(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const E=m0(a);E&&(bd.ScriptLoader._setReferrerPolicy(E),wr.DOM.styleSheetLoader._setReferrerPolicy(E));const N=gC(a);Ne(N)&&wr.DOM.styleSheetLoader._setContentCssCors(N),Cl.languageLoad=f("language_load"),Cl.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Ol(Da(a),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=w1(a),this.hasVisual=kl(a),this.shortcuts=new JD(this),this.editorCommands=new oa(this),WD(this);const M=f("cache_suffix");M&&(gn.cacheSuffix=M.replace(/^[\?\&]+/,"")),this.ui={registry:XZ(),styleSheetLoader:void 0,show:$e,hide:$e,setEnabled:$e,isEnabled:et},this.mode=jZ(a),r.dispatch("SetupEditor",{editor:this});const $=y0(a);le($)&&$.call(a,a)}render(){bG(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return gh(this)}translate(n){return ga.translate(n)}getParam(n,o,r){const a=this.options;return a.isRegistered(n)||(Ne(r)?a.register(n,{processor:r,default:o}):a.register(n,{processor:et,default:o})),!a.isSet(n)&&!sn(o)?o:a.get(n)}hasPlugin(n,o){return xe(v0(this),n)?o?Mv.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,a){this.shortcuts.add(n,o,r,a)}execCommand(n,o,r,a){return this.editorCommands.execCommand(n,o,r,a)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Tb.show(n.getContainer()),Tb.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Tb.hide(n.getContainer()),Tb.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const a={...n,load:!0},u=Nr(r)?r.value:r.innerHTML,f=o.setContent(u,a);return a.no_events||o.dispatch("LoadContent",{...a,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const a={...n,save:!0,element:r};let u=o.getContent(a);const f={...a,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,Nr(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=Tb.getParent(o.id,"form");b&&JZ(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=a.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return Rv(this,n,o)}getContent(n){return HB(this,n)}insertContent(n,o){o&&(n=$I({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?Rv(this,this.startContent,{format:"raw"}):Rv(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Tb.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Tb.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const a=this,u=a.options.get,f=C0(a);if(le(f))return f.call(a,n,r,!0,o);if(!u("convert_urls")||r==="link"||ut(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const b=new Ol(n);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?n:u("relative_urls")?a.documentBaseURI.toRelative(n):(n=a.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){yG(this,n)}setEditableRoot(n){qW(this,n)}hasEditableRoot(){return $D(this)}remove(){v7(this)}destroy(n){y7(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const cy=wr.DOM,gk=yt.each;let QD=!1,hk,Li=[];const pk=e=>{const n=e.type;gk(Kp.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},FI=e=>{if(e!==QD){const n=wr.DOM;e?(n.bind(window,"resize",pk),n.bind(window,"scroll",pk)):(n.unbind(window,"resize",pk),n.unbind(window,"scroll",pk)),QD=e}},II=e=>{const n=Li;return Li=Bt(Li,o=>e!==o),Kp.activeEditor===e&&(Kp.activeEditor=Li.length>0?Li[0]:null),Kp.focusedEditor===e&&(Kp.focusedEditor=null),n.length!==Li.length},QZ=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(II(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},ej=document.compatMode!=="CSS1Compat",Kp={...GD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"3.0",releaseDate:"2024-08-07",i18n:ga,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Ol.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const a=window.tinymce||window.tinyMCEPreInit;if(a)n=a.base||a.baseURL,o=a.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Ol(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Ol(e.baseURL),e.suffix=o,DR(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&xt(r,(a,u)=>{Cl.PluginManager.urls[u]=a})},init(e){const n=this;let o;const r=yt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=(N,M)=>N.inline&&M.tagName.toLowerCase()in r,u=N=>{let M=N.id;return M||(M=Yo(N,"name").filter($=>!cy.get($)).getOrThunk(cy.uniqueId),N.setAttribute("id",M)),M},f=N=>{const M=e[N];if(M)return M.apply(n,[])},b=N=>gn.browser.isIE()||gn.browser.isEdge()?(a3("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):ej?(a3("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):oe(N.selector)?cy.select(N.selector):Ne(N.target)?[N.target]:[];let y=N=>{o=N};const E=()=>{let N=0;const M=[];let $;const j=(ee,G,ne)=>{const ge=new fk(ee,G,n);M.push(ge),ge.on("init",()=>{++N===$.length&&y(M)}),ge.targetElm=ge.targetElm||ne,ge.render()};cy.unbind(window,"ready",E),f("onpageload"),$=ca(b(e)),yt.each($,ee=>{QZ(n.get(ee.id))}),$=yt.grep($,ee=>!n.get(ee.id)),$.length===0?y([]):gk($,ee=>{a(e,ee)?a3("Could not initialize inline editor on invalid inline target element",ee):j(u(ee),e,ee)})};return cy.bind(window,"ready",E),new Promise(N=>{o?N(o):y=M=>{N(M)}})},get(e){return arguments.length===0?Li.slice(0):oe(e)?Po(Li,n=>n.id===e).getOr(null):Bo(e)&&Li[e]?Li[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Li.push(e),FI(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),hk||(hk=r=>{const a=n.dispatch("BeforeUnload");if(a.returnValue)return r.preventDefault(),r.returnValue=a.returnValue,a.returnValue},window.addEventListener("beforeunload",hk))),e},createEditor(e,n){return this.add(new fk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Li.length-1;r>=0;r--)n.remove(Li[r]);return}if(oe(e)){gk(cy.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,W(n.get(o.id))?null:(II(o)&&n.dispatch("RemoveEditor",{editor:o}),Li.length===0&&window.removeEventListener("beforeunload",hk),o.remove(),FI(Li.length>0),o)},execCommand(e,n,o){var r;const a=this,u=ut(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!a.get(u)){const f=o.options;new fk(u,f,a).render()}return!0}case"mceRemoveEditor":{const f=a.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=a.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(a.execCommand("mceAddEditor",!1,o),!0)}}return a.activeEditor?a.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{gk(Li,e=>{e.save()})},addI18n:(e,n)=>{ga.add(e,n)},translate:e=>ga.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Ol(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Ol(this.baseURL)}};Kp.setup();const _G=(()=>{const e=La(),n=u=>({items:u,types:yo(u),getType:f=>Yo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),a=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:a}})(),eR=Math.min,ay=Math.max,Yw=Math.round,LI=(e,n,o)=>{let r=n.x,a=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,E=(o||"").split("");return E[0]==="b"&&(a+=y),E[1]==="r"&&(r+=b),E[0]==="c"&&(a+=Yw(y/2)),E[1]==="c"&&(r+=Yw(b/2)),E[3]==="b"&&(a-=f),E[4]==="r"&&(r-=u),E[3]==="c"&&(a-=Yw(f/2)),E[4]==="c"&&(r-=Yw(u/2)),ly(r,a,u,f)},nj=(e,n,o,r)=>{for(let a=0;a<r.length;a++){const u=LI(e,n,r[a]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[a]}return null},oj=(e,n,o)=>ly(e.x-n,e.y-o,e.w+n*2,e.h+o*2),sj=(e,n)=>{const o=ay(e.x,n.x),r=ay(e.y,n.y),a=eR(e.x+e.w,n.x+n.w),u=eR(e.y+e.h,n.y+n.h);return a-o<0||u-r<0?null:ly(o,r,a-o,u-r)},rj=(e,n,o)=>{let r=e.x,a=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,y=n.y+n.h,E=ay(0,n.x-r),N=ay(0,n.y-a),M=ay(0,u-b),$=ay(0,f-y);return r+=E,a+=N,o&&(u+=E,f+=N,r-=M,a-=$),u-=M,f-=$,ly(r,a,u-r,f-a)},ly=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),tR={inflate:oj,relativePosition:LI,findBestRelativePosition:nj,intersect:sj,clamp:rj,create:ly,fromClientRect:e=>ly(e.left,e.top,e.width,e.height)},cj=(e,n,o=1e3)=>{let r=!1,a=null;const u=E=>(...N)=>{r||(r=!0,a!==null&&(clearTimeout(a),a=null),E.apply(null,N))},f=u(e),b=u(n);return{start:(...E)=>{!r&&a===null&&(a=setTimeout(()=>b.apply(null,E),o))},resolve:f,reject:b}},lj=(()=>{const e={},n={},o={};return{load:(y,E)=>{const N=`Script at URL "${E}" failed to load`,M=`Script at URL "${E}" did not call \`tinymce.Resource.add('${y}', data)\` within 1 second`;if(e[y]!==void 0)return e[y];{const $=new Promise((j,ee)=>{const G=cj(j,ee);n[y]=G.resolve,bd.ScriptLoader.loadScript(E).then(()=>G.start(M),()=>G.reject(N))});return e[y]=$,$}},add:(y,E)=>{n[y]!==void 0&&(n[y](E),delete n[y]),e[y]=Promise.resolve(E),o[y]=E},has:y=>y in o,get:y=>o[y],unload:y=>{delete e[y],delete o[y]}}})(),ij=()=>(()=>{let e={},n=[];const o={getItem:r=>{const a=e[r];return a||null},setItem:(r,a)=>{n.push(r),e[r]=String(a)},key:r=>n[r],removeItem:r=>{n=n.filter(a=>a===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let Xw;try{const e="__storage_test__";Xw=window.localStorage,Xw.setItem(e,e),Xw.removeItem(e)}catch{Xw=ij()}var uj=Xw;const dj={geom:{Rect:tR},util:{Delay:Vu,Tools:yt,VK:Ct,URI:Ol,EventDispatcher:jD,Observable:GD,I18n:ga,LocalStorage:uj,ImageUploader:cg},dom:{EventUtils:Of,TreeWalker:ma,TextSeeker:Zg,DOMUtils:wr,ScriptLoader:bd,RangeUtils:kt,Serializer:ol,StyleSheetLoader:tu,ControlSelection:z1,BookmarkManager:Lu,Selection:t7,Event:Of.Event},html:{Styles:xy,Entities:gd,Node:hi,Schema:Jd,DomParser:Ov,Writer:dA,Serializer:hh},Env:gn,AddOnManager:Cl,Annotator:ev,Formatter:sf,UndoManager:Fv,EditorCommands:oa,WindowManager:GB,NotificationManager:jB,EditorObservable:NI,Shortcuts:JD,Editor:fk,FocusManager:TR,EditorManager:Kp,DOM:wr.DOM,ScriptLoader:bd.ScriptLoader,PluginManager:Mv,ThemeManager:Rp,ModelManager:Nv,IconManager:cE,Resource:lj,FakeClipboard:_G,trim:yt.trim,isArray:yt.isArray,is:yt.is,toArray:yt.toArray,makeMap:yt.makeMap,each:yt.each,map:yt.map,grep:yt.grep,inArray:yt.inArray,extend:yt.extend,walk:yt.walk,resolve:yt.resolve,explode:yt.explode,_addCacheSuffix:yt._addCacheSuffix},zI=yt.extend(Kp,dj),mj=e=>{try{Sr.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(zI),mj(zI)})()})(ZG);var sq=ZG.exports;const aq=oq(sq);(function(){var Sr=tinymce.util.Tools.resolve("tinymce.PluginManager");const js=(gt,$e,A)=>{const kn=$e==="UL"?"InsertUnorderedList":"InsertOrderedList";gt.execCommand(kn,!1,A===!1?null:{"list-style-type":A})},ws=gt=>{gt.addCommand("ApplyUnorderedListStyle",($e,A)=>{js(gt,"UL",A["list-style-type"])}),gt.addCommand("ApplyOrderedListStyle",($e,A)=>{js(gt,"OL",A["list-style-type"])})},us=gt=>$e=>$e.options.get(gt),Ko=gt=>{const $e=gt.options.register;$e("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),$e("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},ps=us("advlist_number_styles"),So=us("advlist_bullet_styles"),rt=gt=>gt==null,Hn=gt=>!rt(gt);var Ho=tinymce.util.Tools.resolve("tinymce.util.Tools");class mo{constructor($e,A){this.tag=$e,this.value=A}static some($e){return new mo(!0,$e)}static none(){return mo.singletonNone}fold($e,A){return this.tag?A(this.value):$e()}isSome(){return this.tag}isNone(){return!this.tag}map($e){return this.tag?mo.some($e(this.value)):mo.none()}bind($e){return this.tag?$e(this.value):mo.none()}exists($e){return this.tag&&$e(this.value)}forall($e){return!this.tag||$e(this.value)}filter($e){return!this.tag||$e(this.value)?this:mo.none()}getOr($e){return this.tag?this.value:$e}or($e){return this.tag?this:$e}getOrThunk($e){return this.tag?this.value:$e()}orThunk($e){return this.tag?this:$e()}getOrDie($e){if(this.tag)return this.value;throw new Error($e??"Called getOrDie on None")}static from($e){return Hn($e)?mo.some($e):mo.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each($e){this.tag&&$e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}mo.singletonNone=new mo(!1);const Uo=(gt,$e,A)=>{for(let kn=0,Ke=gt.length;kn<Ke;kn++){const Vn=gt[kn];if($e(Vn,kn))return mo.some(Vn);if(A(Vn,kn))break}return mo.none()},Wo=gt=>/\btox\-/.test(gt.className),zn=(gt,$e)=>gt.dom.isChildOf($e,gt.getBody()),Go=gt=>$e=>Hn($e)&&gt.test($e.nodeName),Xn=Go(/^(OL|UL|DL)$/),Ot=Go(/^(TH|TD)$/),Zn=(gt,$e,A)=>Uo($e,kn=>Xn(kn)&&!Wo(kn),Ot).exists(kn=>kn.nodeName===A&&zn(gt,kn)),nt=gt=>{const $e=gt.dom.getParent(gt.selection.getNode(),"ol,ul"),A=gt.dom.getStyle($e,"listStyleType");return mo.from(A)},oe=(gt,$e)=>$e!==null&&!gt.dom.isEditable($e),ut=(gt,$e)=>{const A=gt.dom.getParent($e,"ol,ul,dl");return oe(gt,A)&&gt.selection.isEditable()},oo=(gt,$e)=>{const A=gt.selection.getNode();return $e({parents:gt.dom.getParents(A),element:A}),gt.on("NodeChange",$e),()=>gt.off("NodeChange",$e)},dt=gt=>gt.replace(/\-/g," ").replace(/\b\w/g,$e=>$e.toUpperCase()),W=gt=>rt(gt)||gt==="default"?"":gt,Rt=(gt,$e)=>A=>{const kn=(Vn,jt)=>{const je=Vn.selection.getStart(!0);A.setActive(Zn(Vn,jt,$e)),A.setEnabled(!ut(Vn,je)&&Vn.selection.isEditable())};return oo(gt,Vn=>kn(gt,Vn.parents))},sn=(gt,$e,A,kn,Ke,Vn)=>{gt.ui.registry.addSplitButton($e,{tooltip:A,icon:Ke==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:jt=>{const je=Ho.map(Vn,Jn=>{const bs=Ke==="OL"?"num":"bull",bt=Jn==="disc"||Jn==="decimal"?"default":Jn,mn=W(Jn),Pe=dt(Jn);return{type:"choiceitem",value:mn,icon:"list-"+bs+"-"+bt,text:Pe}});jt(je)},onAction:()=>gt.execCommand(kn),onItemAction:(jt,je)=>{js(gt,Ke,je)},select:jt=>nt(gt).map(Jn=>jt===Jn).getOr(!1),onSetup:Rt(gt,Ke)})},Xt=(gt,$e,A,kn,Ke,Vn)=>{gt.ui.registry.addToggleButton($e,{active:!1,tooltip:A,icon:Ke==="OL"?"ordered-list":"unordered-list",onSetup:Rt(gt,Ke),onAction:()=>gt.queryCommandState(kn)||Vn===""?gt.execCommand(kn):js(gt,Ke,Vn)})},Ne=(gt,$e,A,kn,Ke,Vn)=>{Vn.length>1?sn(gt,$e,A,kn,Ke,Vn):Xt(gt,$e,A,kn,Ke,W(Vn[0]))},le=gt=>{Ne(gt,"numlist","Numbered list","InsertOrderedList","OL",ps(gt)),Ne(gt,"bullist","Bullet list","InsertUnorderedList","UL",So(gt))};var Bo=()=>{Sr.add("advlist",gt=>{gt.hasPlugin("lists")&&(Ko(gt),le(gt),ws(gt))})};Bo()})();(function(){var Sr=tinymce.util.Tools.resolve("tinymce.PluginManager");const js=(it,Mt,xe)=>{var Re;return xe(it,Mt.prototype)?!0:((Re=it.constructor)===null||Re===void 0?void 0:Re.name)===Mt.name},ws=it=>{const Mt=typeof it;return it===null?"null":Mt==="object"&&Array.isArray(it)?"array":Mt==="object"&&js(it,String,(xe,Re)=>Re.isPrototypeOf(xe))?"string":Mt},us=it=>Mt=>ws(Mt)===it,Ko=it=>Mt=>typeof Mt===it,ps=us("string"),So=Ko("boolean"),rt=it=>it==null,Hn=it=>!rt(it),Ho=Ko("function"),mo=it=>Mt=>Mt.options.get(it),Uo=it=>{const Mt=it.options.register,xe=_n=>Un=>{const Bt=So(Un)||ps(Un);return Bt?So(Un)?{value:Un?_n:"",valid:Bt}:{value:Un.trim(),valid:Bt}:{valid:!1,message:"Must be a boolean or string."}},Re="bold italic | quicklink h2 h3 blockquote";Mt("quickbars_selection_toolbar",{processor:xe(Re),default:Re});const Fe="quickimage quicktable";Mt("quickbars_insert_toolbar",{processor:xe(Fe),default:Fe});const ie="alignleft aligncenter alignright";Mt("quickbars_image_toolbar",{processor:xe(ie),default:ie})},Wo=mo("quickbars_selection_toolbar"),zn=mo("quickbars_insert_toolbar"),Go=mo("quickbars_image_toolbar"),Xn=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Ot=0;const Zn=it=>{const xe=new Date().getTime(),Re=Math.floor(Xn()*1e9);return Ot++,it+"_"+Re+Ot+String(xe)},nt=(it,Mt,xe)=>{it.execCommand("mceInsertTable",!1,{rows:xe,columns:Mt})},oe=(it,Mt,xe)=>{const Re=it.editorUpload.blobCache,Fe=Re.create(Zn("mceu"),xe,Mt);Re.add(Fe),it.insertContent(it.dom.createHTML("img",{src:Fe.blobUri()}))},ut=it=>new Promise(Mt=>{const xe=new FileReader;xe.onloadend=()=>{Mt(xe.result.split(",")[1])},xe.readAsDataURL(it)});var oo=tinymce.util.Tools.resolve("tinymce.util.Delay");const dt=it=>new Promise(Mt=>{let xe=!1;const Re=document.createElement("input");Re.type="file",Re.accept="image/*",Re.style.position="fixed",Re.style.left="0",Re.style.top="0",Re.style.opacity="0.001",document.body.appendChild(Re);const Fe=Un=>{var Bt;xe||((Bt=Re.parentNode)===null||Bt===void 0||Bt.removeChild(Re),xe=!0,Mt(Un))},ie=Un=>{Fe(Array.prototype.slice.call(Un.target.files))};Re.addEventListener("input",ie),Re.addEventListener("change",ie);const _n=Un=>{const Bt=()=>{Fe([])};xe||(Un.type==="focusin"?oo.setEditorTimeout(it,Bt,1e3):Bt()),it.off("focusin remove",_n)};it.on("focusin remove",_n),Re.click()}),W=it=>{it.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{dt(it).then(Mt=>{if(Mt.length>0){const xe=Mt[0];ut(xe).then(Re=>{oe(it,Re,xe)})}})}}),it.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{nt(it,2,2)}})},sn=(it=>()=>it)(!1);class Xt{constructor(Mt,xe){this.tag=Mt,this.value=xe}static some(Mt){return new Xt(!0,Mt)}static none(){return Xt.singletonNone}fold(Mt,xe){return this.tag?xe(this.value):Mt()}isSome(){return this.tag}isNone(){return!this.tag}map(Mt){return this.tag?Xt.some(Mt(this.value)):Xt.none()}bind(Mt){return this.tag?Mt(this.value):Xt.none()}exists(Mt){return this.tag&&Mt(this.value)}forall(Mt){return!this.tag||Mt(this.value)}filter(Mt){return!this.tag||Mt(this.value)?this:Xt.none()}getOr(Mt){return this.tag?this.value:Mt}or(Mt){return this.tag?this:Mt}getOrThunk(Mt){return this.tag?this.value:Mt()}orThunk(Mt){return this.tag?this:Mt()}getOrDie(Mt){if(this.tag)return this.value;throw new Error(Mt??"Called getOrDie on None")}static from(Mt){return Hn(Mt)?Xt.some(Mt):Xt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Mt){this.tag&&Mt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Xt.singletonNone=new Xt(!1),typeof window<"u"||Function("return this;")();const Ne=1,le=it=>it.dom.nodeName.toLowerCase(),Bo=(it,Mt)=>{const xe=it.dom;return xe&&xe.hasAttribute?xe.hasAttribute(Mt):!1};var gt=(it,Mt,xe,Re,Fe)=>it(xe,Re)?Xt.some(xe):Ho(Fe)&&Fe(xe)?Xt.none():Mt(xe,Re,Fe);const $e=(it,Mt)=>{const Re=(Mt||document).createElement("div");if(Re.innerHTML=it,!Re.hasChildNodes()||Re.childNodes.length>1){const Fe="HTML does not have a single root node";throw new Error(Fe)}return Ke(Re.childNodes[0])},A=(it,Mt)=>{const Re=(Mt||document).createElement(it);return Ke(Re)},kn=(it,Mt)=>{const Re=(Mt||document).createTextNode(it);return Ke(Re)},Ke=it=>{if(it==null)throw new Error("Node cannot be null or undefined");return{dom:it}},jt={fromHtml:$e,fromTag:A,fromText:kn,fromDom:Ke,fromPoint:(it,Mt,xe)=>Xt.from(it.dom.elementFromPoint(Mt,xe)).map(Ke)},je=(it,Mt)=>{const xe=it.dom;if(xe.nodeType!==Ne)return!1;{const Re=xe;if(Re.matches!==void 0)return Re.matches(Mt);if(Re.msMatchesSelector!==void 0)return Re.msMatchesSelector(Mt);if(Re.webkitMatchesSelector!==void 0)return Re.webkitMatchesSelector(Mt);if(Re.mozMatchesSelector!==void 0)return Re.mozMatchesSelector(Mt);throw new Error("Browser lacks native selectors")}},Jn=(it,Mt,xe)=>{let Re=it.dom;const Fe=Ho(xe)?xe:sn;for(;Re.parentNode;){Re=Re.parentNode;const ie=jt.fromDom(Re);if(Mt(ie))return Xt.some(ie);if(Fe(ie))break}return Xt.none()},bs=(it,Mt,xe)=>gt((Fe,ie)=>ie(Fe),Jn,it,Mt,xe),bt=(it,Mt,xe)=>bs(it,Mt,xe).isSome(),mn=(it,Mt,xe)=>Jn(it,Re=>je(Re,Mt),xe),Pe=(it,Mt,xe)=>gt((Fe,ie)=>je(Fe,ie),mn,it,Mt,xe),et=it=>{const Mt=zn(it);Mt.length>0&&it.ui.registry.addContextToolbar("quickblock",{predicate:xe=>{const Re=jt.fromDom(xe),Fe=it.schema.getTextBlockElements(),ie=_n=>_n.dom===it.getBody();return!Bo(Re,"data-mce-bogus")&&Pe(Re,'table,[data-mce-bogus="all"]',ie).fold(()=>bt(Re,_n=>le(_n)in Fe&&it.dom.isEmpty(_n.dom),ie),sn)},items:Mt,position:"line",scope:"editor"})},F=it=>it.dom.classList!==void 0,Ss=(it,Mt)=>F(it)&&it.dom.classList.contains(Mt),io=it=>{const Mt=_n=>it.dom.isEditable(_n),xe=_n=>Mt(_n.parentElement),Re=_n=>{const Un=_n.nodeName==="FIGURE"&&/image/i.test(_n.className),Bt=_n.nodeName==="IMG"||Un,rs=Ss(jt.fromDom(_n),"mce-pagebreak");return Bt&&xe(_n)&&!rs},Fe=Go(it);Fe.length>0&&it.ui.registry.addContextToolbar("imageselection",{predicate:Re,items:Fe,position:"node"});const ie=Wo(it);ie.length>0&&it.ui.registry.addContextToolbar("textselection",{predicate:_n=>!Re(_n)&&!it.selection.isCollapsed()&&Mt(_n),items:ie,position:"selection",scope:"editor"})};var To=()=>{Sr.add("quickbars",it=>{Uo(it),W(it),et(it),io(it)})};To()})();(function(){const Sr=Object.getPrototypeOf,js=(t,s,c)=>{var l;return c(t,s.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===s.name},ws=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&js(t,String,(c,l)=>l.isPrototypeOf(c))?"string":s},us=t=>s=>ws(s)===t,Ko=t=>s=>typeof s===t,ps=t=>s=>t===s,So=(t,s)=>Hn(t)&&js(t,s,(c,l)=>Sr(c)===l),rt=us("string"),Hn=us("object"),Ho=t=>So(t,Object),mo=us("array"),Uo=ps(null),Wo=Ko("boolean"),zn=ps(void 0),Go=t=>t==null,Xn=t=>!Go(t),Ot=Ko("function"),Zn=Ko("number"),nt=(t,s)=>{if(mo(t)){for(let c=0,l=t.length;c<l;++c)if(!s(t[c]))return!1;return!0}return!1},oe=()=>{},ut=t=>()=>t(),oo=(t,s)=>(...c)=>t(s.apply(null,c)),dt=(t,s)=>c=>t(s(c)),W=t=>()=>t,Rt=t=>t,sn=(t,s)=>t===s;function Xt(t,...s){return(...c)=>{const l=s.concat(c);return t.apply(null,l)}}const Ne=t=>s=>!t(s),le=t=>()=>{throw new Error(t)},Bo=t=>t(),gt=W(!1),$e=W(!0);class A{constructor(s,c){this.tag=s,this.value=c}static some(s){return new A(!0,s)}static none(){return A.singletonNone}fold(s,c){return this.tag?c(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?A.some(s(this.value)):A.none()}bind(s){return this.tag?s(this.value):A.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:A.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Xn(s)?A.some(s):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const kn=Array.prototype.slice,Ke=Array.prototype.indexOf,Vn=Array.prototype.push,jt=(t,s)=>Ke.call(t,s),je=(t,s)=>{const c=jt(t,s);return c===-1?A.none():A.some(c)},Jn=(t,s)=>jt(t,s)>-1,bs=(t,s)=>{for(let c=0,l=t.length;c<l;c++){const d=t[c];if(s(d,c))return!0}return!1},bt=(t,s)=>{const c=[];for(let l=0;l<t;l++)c.push(s(l));return c},mn=(t,s)=>{const c=[];for(let l=0;l<t.length;l+=s){const d=kn.call(t,l,l+s);c.push(d)}return c},Pe=(t,s)=>{const c=t.length,l=new Array(c);for(let d=0;d<c;d++){const g=t[d];l[d]=s(g,d)}return l},et=(t,s)=>{for(let c=0,l=t.length;c<l;c++){const d=t[c];s(d,c)}},F=(t,s)=>{for(let c=t.length-1;c>=0;c--){const l=t[c];s(l,c)}},Ss=(t,s)=>{const c=[],l=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?c:l).push(h)}return{pass:c,fail:l}},io=(t,s)=>{const c=[];for(let l=0,d=t.length;l<d;l++){const g=t[l];s(g,l)&&c.push(g)}return c},To=(t,s,c)=>(F(t,(l,d)=>{c=s(c,l,d)}),c),it=(t,s,c)=>(et(t,(l,d)=>{c=s(c,l,d)}),c),Mt=(t,s,c)=>{for(let l=0,d=t.length;l<d;l++){const g=t[l];if(s(g,l))return A.some(g);if(c(g,l))break}return A.none()},xe=(t,s)=>Mt(t,s,gt),Re=(t,s)=>{for(let c=0,l=t.length;c<l;c++){const d=t[c];if(s(d,c))return A.some(c)}return A.none()},Fe=t=>{const s=[];for(let c=0,l=t.length;c<l;++c){if(!mo(t[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+t);Vn.apply(s,t[c])}return s},ie=(t,s)=>Fe(Pe(t,s)),_n=(t,s)=>{for(let c=0,l=t.length;c<l;++c){const d=t[c];if(s(d,c)!==!0)return!1}return!0},Un=t=>{const s=kn.call(t,0);return s.reverse(),s},Bt=(t,s)=>io(t,c=>!Jn(s,c)),rs=(t,s)=>{const c={};for(let l=0,d=t.length;l<d;l++){const g=t[l];c[String(g)]=s(g,l)}return c},ro=t=>[t],ir=(t,s)=>{const c=kn.call(t,0);return c.sort(s),c},Po=(t,s)=>s>=0&&s<t.length?A.some(t[s]):A.none(),Ms=t=>Po(t,0),ra=t=>Po(t,t.length-1),zs=Ot(Array.from)?Array.from:t=>kn.call(t),As=(t,s)=>{for(let c=0;c<t.length;c++){const l=s(t[c],c);if(l.isSome())return l}return A.none()},gs=Object.keys,Hr=Object.hasOwnProperty,xs=(t,s)=>{const c=gs(t);for(let l=0,d=c.length;l<d;l++){const g=c[l],h=t[g];s(h,g)}},bo=(t,s)=>xa(t,(c,l)=>({k:l,v:s(c,l)})),xa=(t,s)=>{const c={};return xs(t,(l,d)=>{const g=s(l,d);c[g.k]=g.v}),c},vo=t=>(s,c)=>{t[c]=s},ds=(t,s,c,l)=>{xs(t,(d,g)=>{(s(d,g)?c:l)(d,g)})},xr=(t,s)=>{const c={},l={};return ds(t,s,vo(c),vo(l)),{t:c,f:l}},ec=(t,s)=>{const c={};return ds(t,s,vo(c),oe),c},ca=(t,s)=>{const c=[];return xs(t,(l,d)=>{c.push(s(l,d))}),c},yo=(t,s)=>{const c=gs(t);for(let l=0,d=c.length;l<d;l++){const g=c[l],h=t[g];if(s(h,g,t))return A.some(h)}return A.none()},Ta=t=>ca(t,Rt),xt=(t,s)=>Eo(t,s)?A.from(t[s]):A.none(),Eo=(t,s)=>Hr.call(t,s),Pr=(t,s)=>Eo(t,s)&&t[s]!==void 0&&t[s]!==null,br=(t,s,c=sn)=>t.exists(l=>c(l,s)),uc=(t,s,c=sn)=>Fc(t,s,c).getOr(t.isNone()&&s.isNone()),vc=t=>{const s=[],c=l=>{s.push(l)};for(let l=0;l<t.length;l++)t[l].each(c);return s},Qo=t=>{const s=[];for(let c=0;c<t.length;c++){const l=t[c];if(l.isSome())s.push(l.getOrDie());else return A.none()}return A.some(s)},Fc=(t,s,c)=>t.isSome()&&s.isSome()?A.some(c(t.getOrDie(),s.getOrDie())):A.none(),dc=(t,s,c,l)=>t.isSome()&&s.isSome()&&c.isSome()?A.some(l(t.getOrDie(),s.getOrDie(),c.getOrDie())):A.none(),Yo=(t,s)=>t!=null?A.some(s(t)):A.none(),fn=(t,s)=>t?A.some(s):A.none(),Bs=(t,s)=>t+s,qr=(t,s)=>t.substring(s),Ga=(t,s,c)=>s===""||t.length>=s.length&&t.substr(c,c+s.length)===s,rl=(t,s)=>Ps(t,s)?qr(t,s.length):t,ms=(t,s)=>tc(t,s)?t:Bs(t,s),rr=(t,s,c=0,l)=>{const d=t.indexOf(s,c);return d!==-1?zn(l)?!0:d+s.length<=l:!1},Ps=(t,s)=>Ga(t,s,0),tc=(t,s)=>Ga(t,s,t.length-s.length),cr=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),ue=t=>t.length>0,se=t=>!ue(t),Be=t=>t.style!==void 0&&Ot(t.style.getPropertyValue),Ve=(t,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=t,!l.hasChildNodes()||l.childNodes.length>1){const d="HTML does not have a single root node";throw new Error(d)}return jn(l.childNodes[0])},un=(t,s)=>{const l=(s||document).createElement(t);return jn(l)},Rn=(t,s)=>{const l=(s||document).createTextNode(t);return jn(l)},jn=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},ve={fromHtml:Ve,fromTag:un,fromText:Rn,fromDom:jn,fromPoint:(t,s,c)=>A.from(t.dom.elementFromPoint(s,c)).map(jn)},Gn=typeof window<"u"?window:Function("return this;")(),de=(t,s)=>{let c=s??Gn;for(let l=0;l<t.length&&c!==void 0&&c!==null;++l)c=c[t[l]];return c},pe=(t,s)=>{const c=t.split(".");return de(c,s)},at=(t,s)=>pe(t,s),ft=(t,s)=>{const c=at(t,s);if(c==null)throw new Error(t+" not available on this browser");return c},Vt=Object.getPrototypeOf,nn=t=>ft("HTMLElement",t),rn=t=>{const s=pe("ownerDocument.defaultView",t);return Hn(t)&&(nn(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Vt(t).constructor.name))},en=9,Cn=11,Nn=1,zo=3,cs=t=>t.dom.nodeName.toLowerCase(),Os=t=>t.dom.nodeType,_c=t=>s=>Os(s)===t,Lc=t=>Dn(t)&&rn(t.dom),Dn=_c(Nn),No=_c(zo),$o=_c(en),Kr=_c(Cn),Yr=t=>s=>Dn(s)&&cs(s)===t,$r=(t,s)=>{const c=t.dom;if(c.nodeType!==Nn)return!1;{const l=c;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Ks=t=>t.nodeType!==Nn&&t.nodeType!==en&&t.nodeType!==Cn||t.childElementCount===0,od=(t,s)=>{const c=s===void 0?document:s.dom;return Ks(c)?[]:Pe(c.querySelectorAll(t),ve.fromDom)},Ea=(t,s)=>{const c=s===void 0?document:s.dom;return Ks(c)?A.none():A.from(c.querySelector(t)).map(ve.fromDom)},es=(t,s)=>t.dom===s.dom,yc=(t,s)=>{const c=t.dom,l=s.dom;return c===l?!1:c.contains(l)},mc=t=>ve.fromDom(t.dom.ownerDocument),Dr=t=>$o(t)?t:mc(t),Ml=t=>ve.fromDom(Dr(t).dom.documentElement),Cc=t=>ve.fromDom(Dr(t).dom.defaultView),Ac=t=>A.from(t.dom.parentNode).map(ve.fromDom),Ba=t=>Ac(t),aa=t=>A.from(t.dom.parentElement).map(ve.fromDom),bi=(t,s)=>{const c=Ot(s)?s:gt;let l=t.dom;const d=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const g=l.parentNode,h=ve.fromDom(g);if(d.push(h),c(h)===!0)break;l=g}return d},hl=t=>A.from(t.dom.offsetParent).map(ve.fromDom),cl=t=>A.from(t.dom.nextSibling).map(ve.fromDom),la=t=>Pe(t.dom.childNodes,ve.fromDom),zr=(t,s)=>{const c=t.dom.childNodes;return A.from(c[s]).map(ve.fromDom)},vi=t=>zr(t,0),yi=(t,s)=>({element:t,offset:s}),Ci=(t,s)=>{const c=la(t);return c.length>0&&s<c.length?yi(c[s],0):yi(t,s)},Jl=t=>Kr(t)&&Xn(t.dom.host),Fr=t=>ve.fromDom(t.dom.getRootNode()),ia=t=>Jl(t)?t:ve.fromDom(Dr(t).dom.body),U=t=>re(t).isSome(),re=t=>{const s=Fr(t);return Jl(s)?A.some(s):A.none()},Te=t=>ve.fromDom(t.dom.host),Xe=t=>{if(Xn(t.target)){const s=ve.fromDom(t.target);if(Dn(s)&&wt(s)&&t.composed&&t.composedPath){const c=t.composedPath();if(c)return Ms(c)}}return A.from(t.target)},wt=t=>Xn(t.dom.shadowRoot),Yt=t=>{const s=No(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const c=s.ownerDocument;return re(ve.fromDom(s)).fold(()=>c.body.contains(s),dt(Yt,Te))},Co=()=>Ts(ve.fromDom(document)),Ts=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return ve.fromDom(s)},Do=(t,s,c)=>{if(rt(c)||Wo(c)||Zn(c))t.setAttribute(s,c+"");else throw new Error("Attribute value was not simple")},Ut=(t,s,c)=>{Do(t.dom,s,c)},vr=(t,s)=>{const c=t.dom;xs(s,(l,d)=>{Do(c,d,l)})},gn=(t,s)=>{const c=t.dom.getAttribute(s);return c===null?void 0:c},Vr=(t,s)=>A.from(gn(t,s)),al=(t,s)=>{const c=t.dom;return c&&c.hasAttribute?c.hasAttribute(s):!1},P=(t,s)=>{t.dom.removeAttribute(s)},Y=t=>it(t.dom.attributes,(s,c)=>(s[c.name]=c.value,s),{}),fe=(t,s,c)=>{if(!rt(c))throw new Error("CSS value must be a string: "+c);Be(t)&&t.style.setProperty(s,c)},Oe=(t,s)=>{Be(t)&&t.style.removeProperty(s)},ot=(t,s,c)=>{const l=t.dom;fe(l,s,c)},eo=(t,s)=>{const c=t.dom;xs(s,(l,d)=>{fe(c,d,l)})},Vs=(t,s)=>{const c=t.dom;xs(s,(l,d)=>{l.fold(()=>{Oe(c,d)},g=>{fe(c,d,g)})})},fs=(t,s)=>{const c=t.dom,d=window.getComputedStyle(c).getPropertyValue(s);return d===""&&!Yt(t)?yt(c,s):d},yt=(t,s)=>Be(t)?t.style.getPropertyValue(s):"",Us=(t,s)=>{const c=t.dom,l=yt(c,s);return A.from(l).filter(d=>d.length>0)},fc=t=>{const s={},c=t.dom;if(Be(c))for(let l=0;l<c.style.length;l++){const d=c.style.item(l);s[d]=c.style[d]}return s},Xc=(t,s,c)=>{const l=ve.fromTag(t);return ot(l,s,c),Us(l,s).isSome()},co=(t,s)=>{const c=t.dom;Oe(c,s),br(Vr(t,"style").map(cr),"")&&P(t,"style")},Jc=t=>t.dom.offsetWidth,Tr=(t,s)=>{const c=(C,S)=>{if(!Zn(S)&&!S.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+S);const k=C.dom;Be(k)&&(k.style[t]=S+"px")},l=C=>{const S=s(C);if(S<=0||S===null){const k=fs(C,t);return parseFloat(k)||0}return S},d=l,g=(C,S)=>it(S,(k,O)=>{const B=fs(C,O),z=B===void 0?0:parseInt(B,10);return isNaN(z)?k:k+z},0);return{set:c,get:l,getOuter:d,aggregate:g,max:(C,S,k)=>{const O=g(C,k);return S>O?S-O:0}}},Zi=Tr("height",t=>{const s=t.dom;return Yt(t)?s.getBoundingClientRect().height:s.offsetHeight}),$s=t=>Zi.get(t),Bl=t=>Zi.getOuter(t),Ld=(t,s)=>{const c=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=Zi.max(t,s,c);ot(t,"max-height",l+"px")},mf=(t,s)=>({left:t,top:s,translate:(l,d)=>mf(t+l,s+d)}),ar=mf,Hd=t=>{const s=t.getBoundingClientRect();return ar(s.left,s.top)},Ir=(t,s)=>t!==void 0?t:s!==void 0?s:0,wc=t=>{const s=t.dom.ownerDocument,c=s.body,l=s.defaultView,d=s.documentElement;if(c===t.dom)return ar(c.offsetLeft,c.offsetTop);const g=Ir(l==null?void 0:l.pageYOffset,d.scrollTop),h=Ir(l==null?void 0:l.pageXOffset,d.scrollLeft),C=Ir(d.clientTop,c.clientTop),S=Ir(d.clientLeft,c.clientLeft);return ll(t).translate(h-S,g-C)},ll=t=>{const s=t.dom,l=s.ownerDocument.body;return l===s?ar(l.offsetLeft,l.offsetTop):Yt(t)?Hd(s):ar(0,0)},il=Tr("width",t=>t.dom.offsetWidth),hu=(t,s)=>il.set(t,s),q=t=>il.get(t),J=t=>il.getOuter(t),Ae=(t,s)=>{const c=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=il.max(t,s,c);ot(t,"max-width",l+"px")},Ye=t=>{let s=!1,c;return(...l)=>(s||(s=!0,c=t.apply(null,l)),c)},Tn=(t,s,c,l)=>{const d=t.isiOS()&&/ipad/i.test(c)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),C=h||l("(pointer:coarse)"),S=d||!g&&h&&l("(min-device-width:768px)"),k=g||h&&!S,O=s.isSafari()&&t.isiOS()&&/safari/i.test(c)===!1,B=!k&&!S&&!O;return{isiPad:W(d),isiPhone:W(g),isTablet:W(S),isPhone:W(k),isTouch:W(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:W(O),isDesktop:W(B)}},Wn=(t,s)=>{for(let c=0;c<t.length;c++){const l=t[c];if(l.test(s))return l}},ts=(t,s)=>{const c=Wn(t,s);if(!c)return{major:0,minor:0};const l=d=>Number(s.replace(c,"$"+d));return Qc(l(1),l(2))},Ds=(t,s)=>{const c=String(s).toLowerCase();return t.length===0?Sc():ts(t,c)},Sc=()=>Qc(0,0),Qc=(t,s)=>({major:t,minor:s}),Lr={nu:Qc,detect:Ds,unknown:Sc},ea=(t,s)=>As(s.brands,c=>{const l=c.brand.toLowerCase();return xe(t,d=>{var g;return l===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Lr.nu(parseInt(c.version,10),0)}))}),Fs=(t,s)=>{const c=String(s).toLowerCase();return xe(t,l=>l.search(c))},ua=(t,s)=>Fs(t,s).map(c=>{const l=Lr.detect(c.versionRegexes,s);return{current:c.name,version:l}}),Hc=(t,s)=>Fs(t,s).map(c=>{const l=Lr.detect(c.versionRegexes,s);return{current:c.name,version:l}}),Er=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ur=t=>s=>rr(s,t),Ys=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>rr(t,"edge/")&&rr(t,"chrome")&&rr(t,"safari")&&rr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Er],search:t=>rr(t,"chrome")&&!rr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>rr(t,"msie")||rr(t,"trident")},{name:"Opera",versionRegexes:[Er,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ur("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ur("firefox")},{name:"Safari",versionRegexes:[Er,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(rr(t,"safari")||rr(t,"mobile/"))&&rr(t,"applewebkit")}],pu=[{name:"Windows",search:ur("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>rr(t,"iphone")||rr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ur("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ur("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ur("linux"),versionRegexes:[]},{name:"Solaris",search:ur("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ur("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ur("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],bu={browsers:W(Ys),oses:W(pu)},vu="Edge",Cm="Chromium",yu="IE",Pl="Opera",wm="Firefox",Xr="Safari",Sm=()=>yg({current:void 0,version:Lr.unknown()}),yg=t=>{const s=t.current,c=t.version,l=d=>()=>s===d;return{current:s,version:c,isEdge:l(vu),isChromium:l(Cm),isIE:l(yu),isOpera:l(Pl),isFirefox:l(wm),isSafari:l(Xr)}},wi={unknown:Sm,nu:yg,edge:W(vu),chromium:W(Cm),ie:W(yu),opera:W(Pl),firefox:W(wm),safari:W(Xr)},Cg="Windows",Cu="iOS",wg="Android",ji="Linux",Sg="macOS",xm="Solaris",ff="FreeBSD",wu="ChromeOS",gf=()=>me({current:void 0,version:Lr.unknown()}),me=t=>{const s=t.current,c=t.version,l=d=>()=>s===d;return{current:s,version:c,isWindows:l(Cg),isiOS:l(Cu),isAndroid:l(wg),isMacOS:l(Sg),isLinux:l(ji),isSolaris:l(xm),isFreeBSD:l(ff),isChromeOS:l(wu)}},Gi={unknown:gf,nu:me,windows:W(Cg),ios:W(Cu),android:W(wg),linux:W(ji),macos:W(Sg),solaris:W(xm),freebsd:W(ff),chromeos:W(wu)},xg={detect:(t,s,c)=>{const l=bu.browsers(),d=bu.oses(),g=s.bind(S=>ea(l,S)).orThunk(()=>ua(l,t)).fold(wi.unknown,wi.nu),h=Hc(d,t).fold(Gi.unknown,Gi.nu),C=Tn(h,g,t,c);return{browser:g,os:h,deviceType:C}}},Yp=t=>window.matchMedia(t).matches;let Su=Ye(()=>xg.detect(window.navigator.userAgent,A.from(window.navigator.userAgentData),Yp));const wo=()=>Su(),nc=(t,s,c,l,d,g,h)=>({target:t,x:s,y:c,stop:l,prevent:d,kill:g,raw:h}),$l=t=>{const s=ve.fromDom(Xe(t).getOr(t.target)),c=()=>t.stopPropagation(),l=()=>t.preventDefault(),d=oo(l,c);return nc(s,t.clientX,t.clientY,c,l,d,t)},xu=(t,s)=>c=>{t(c)&&s($l(c))},Tm=(t,s,c,l,d)=>{const g=xu(c,l);return t.dom.addEventListener(s,g,d),{unbind:Xt(Em,t,s,g,d)}},zd=(t,s,c,l)=>Tm(t,s,c,l,!1),da=(t,s,c,l)=>Tm(t,s,c,l,!0),Em=(t,s,c,l)=>{t.dom.removeEventListener(s,c,l)},qi=(t,s)=>{Ac(t).each(l=>{l.dom.insertBefore(s.dom,t.dom)})},km=(t,s)=>{cl(t).fold(()=>{Ac(t).each(d=>{Pa(d,s)})},l=>{qi(l,s)})},Ki=(t,s)=>{vi(t).fold(()=>{Pa(t,s)},l=>{t.dom.insertBefore(s.dom,l.dom)})},Pa=(t,s)=>{t.dom.appendChild(s.dom)},Tg=(t,s,c)=>{zr(t,c).fold(()=>{Pa(t,s)},l=>{qi(l,s)})},Vd=(t,s)=>{et(s,c=>{Pa(t,c)})},Oc=t=>{t.dom.textContent="",et(la(t),s=>{qa(s)})},qa=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},ka=t=>{const s=t!==void 0?t.dom:document,c=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return ar(c,l)},sd=(t,s,c)=>{const d=(c!==void 0?c.dom:document).defaultView;d&&d.scrollTo(t,s)},Ud=t=>{const s=t===void 0?window:t;return wo().browser.isFirefox()?A.none():A.from(s.visualViewport)},Eg=(t,s,c,l)=>({x:t,y:s,width:c,height:l,right:t+c,bottom:s+l}),Wd=t=>{const s=t===void 0?window:t,c=s.document,l=ka(ve.fromDom(c));return Ud(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return Eg(l.left,l.top,g,h)},d=>Eg(Math.max(d.pageLeft,l.left),Math.max(d.pageTop,l.top),d.width,d.height))},Ql=()=>ve.fromDom(document),_m=(t,s)=>t.view(s).fold(W([]),l=>{const d=t.owner(l),g=_m(t,d);return[l].concat(g)}),Oh=(t,s)=>{const c=s.owner(t),l=_m(s,c);return A.some(l)};var hf=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?A.none():A.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(ve.fromDom)},owner:t=>mc(t)});const Zd=t=>{const s=Ql(),c=ka(s);return Oh(t,hf).fold(Xt(wc,t),d=>{const g=ll(t),h=To(d,(C,S)=>{const k=ll(S);return{left:C.left+k.left,top:C.top+k.top}},{left:0,top:0});return ar(h.left+g.left+c.left,h.top+g.top+c.top)})},rd=(t,s,c)=>({point:t,width:s,height:c}),jd=(t,s,c,l)=>({x:t,y:s,width:c,height:l}),yr=(t,s,c,l)=>({x:t,y:s,width:c,height:l,right:t+c,bottom:s+l}),kr=t=>{const s=wc(t),c=J(t),l=Bl(t);return yr(s.left,s.top,c,l)},pl=t=>{const s=Zd(t),c=J(t),l=Bl(t);return yr(s.left,s.top,c,l)},cd=(t,s)=>{const c=Math.max(t.x,s.x),l=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-c,C=g-l;return yr(c,l,h,C)},_g=(t,s)=>it(s,(c,l)=>cd(c,l),t),gc=()=>Wd(window),hn=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Yi=t=>{const s=hn(A.none()),c=()=>s.get().each(t);return{clear:()=>{c(),s.set(A.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{c(),s.set(A.some(C))}}},pf=()=>Yi(t=>t.destroy()),zc=()=>Yi(t=>t.unbind()),Es=()=>{const t=Yi(oe);return{...t,on:c=>t.get().each(c)}};var Tu=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Ag=t=>{const s=g=>g(t),c=W(t),l=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:$e,isError:gt,map:g=>uo.value(g(t)),mapError:l,bind:s,exists:s,forall:s,getOr:c,or:l,getOrThunk:c,orThunk:l,getOrDie:c,each:g=>{g(t)},toOptional:()=>A.some(t)};return d},Gd=t=>{const s=()=>c,c={tag:!1,inner:t,fold:(l,d)=>l(t),isValue:gt,isError:$e,map:s,mapError:l=>uo.error(l(t)),bind:s,exists:gt,forall:$e,getOr:Rt,or:Rt,getOrThunk:Bo,orThunk:Bo,getOrDie:le(String(t)),each:oe,toOptional:A.none};return c},uo={value:Ag,error:Gd,fromOption:(t,s)=>t.fold(()=>Gd(s),Ag)};var hc;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(hc||(hc={}));const ad=(t,s,c)=>t.stype===hc.Error?s(t.serror):c(t.svalue),ta=t=>{const s=[],c=[];return et(t,l=>{ad(l,d=>c.push(d),d=>s.push(d))}),{values:s,errors:c}},$a=(t,s)=>t.stype===hc.Error?{stype:hc.Error,serror:s(t.serror)}:t,bl=(t,s)=>t.stype===hc.Value?{stype:hc.Value,svalue:s(t.svalue)}:t,Dc=(t,s)=>t.stype===hc.Value?s(t.svalue):t,_a=(t,s)=>t.stype===hc.Error?s(t.serror):t,ul=t=>({stype:hc.Value,svalue:t}),bf=t=>({stype:hc.Error,serror:t}),Ur={fromResult:t=>t.fold(bf,ul),toResult:t=>ad(t,uo.error,uo.value),svalue:ul,partition:ta,serror:bf,bind:Dc,bindError:_a,map:bl,mapError:$a,fold:ad},Eu=(t,s,c,l)=>({tag:"field",key:t,newKey:s,presence:c,prop:l}),id=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Ws=(t,s,c)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return c(t.newKey,t.instantiator)}},Fl=(t,s)=>s,Rh=(t,s)=>Ho(t)&&Ho(s)?tr(t,s):s,Xi=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const c={};for(let l=0;l<s.length;l++){const d=s[l];for(const g in d)Eo(d,g)&&(c[g]=t(c[g],d[g]))}return c},tr=Xi(Rh),ku=Xi(Fl),Ka=()=>({tag:"required",process:{}}),ko=t=>({tag:"defaultedThunk",process:t}),ud=t=>ko(W(t)),Am=()=>({tag:"option",process:{}}),vf=t=>({tag:"mergeWithThunk",process:t}),x=t=>vf(W(t)),R=(t,s)=>t.length>0?Ur.svalue(tr(s,ku.apply(void 0,t))):Ur.svalue(s),H=t=>oo(Ur.serror,Fe)(t),mt={consolidateObj:(t,s)=>{const c=Ur.partition(t);return c.errors.length>0?H(c.errors):R(c.values,s)},consolidateArr:t=>{const s=Ur.partition(t);return s.errors.length>0?H(s.errors):Ur.svalue(s.values)}},Mn=t=>Hn(t)&&gs(t).length>100?" removed due to size":JSON.stringify(t,null,2),fo=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:W("... (only showing first ten failures)")}]):t;return Pe(s,c=>"Failed path: ("+c.path.join(" > ")+`)
`+c.getErrorInfo())},$n=(t,s)=>Ur.serror([{path:t,getErrorInfo:s}]),Bn=(t,s,c)=>$n(t,()=>'Could not find valid *required* value for "'+s+'" in '+Mn(c)),nr=(t,s)=>$n(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Jr=(t,s,c)=>$n(t,()=>'The chosen schema: "'+c+'" did not exist in branches: '+Mn(s)),vl=(t,s)=>$n(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Ji=(t,s)=>$n(t,W(s)),Om=t=>{const s=(l,d)=>Ur.bindError(t(d),g=>Ji(l,g)),c=W("val");return{extract:s,toString:c}},Og=Om(Ur.svalue),Aa=(t,s,c,l)=>xt(s,c).fold(()=>Bn(t,c,s),l),Dg=(t,s,c,l)=>{const d=xt(t,s).getOrThunk(()=>c(t));return l(d)},Rb=(t,s,c)=>c(xt(t,s)),Nh=(t,s,c,l)=>{const d=xt(t,s).map(g=>g===!0?c(t):g);return l(d)},ma=(t,s,c,l,d)=>{const g=C=>d.extract(s.concat([l]),C),h=C=>C.fold(()=>Ur.svalue(A.none()),S=>{const k=d.extract(s.concat([l]),S);return Ur.map(k,A.some)});switch(t.tag){case"required":return Aa(s,c,l,g);case"defaultedThunk":return Dg(c,l,t.process,g);case"option":return Rb(c,l,h);case"defaultedOptionThunk":return Nh(c,l,t.process,h);case"mergeWithThunk":return Dg(c,l,W({}),C=>{const S=tr(t.process(c),C);return g(S)})}},Mh=(t,s,c)=>{const l={},d=[];for(const g of c)Ws(g,(h,C,S,k)=>{const O=ma(S,t,s,h,k);Ur.fold(O,B=>{d.push(...B)},B=>{l[C]=B})},(h,C)=>{l[h]=C(s)});return d.length>0?Ur.serror(d):Ur.svalue(l)},xc=t=>({extract:(l,d)=>t().extract(l,d),toString:()=>t().toString()}),Nb=t=>gs(ec(t,Xn)),Ya=t=>{const s=Pn(t),c=To(t,(d,g)=>Ws(g,h=>tr(d,{[h]:!0}),W(d)),{});return{extract:(d,g)=>{const h=Wo(g)?[]:Nb(g),C=io(h,S=>!Pr(c,S));return C.length===0?s.extract(d,g):vl(d,C)},toString:s.toString}},Pn=t=>({extract:(l,d)=>Mh(l,d,t),toString:()=>`obj{
`+Pe(t,d=>Ws(d,(g,h,C,S)=>g+" -> "+S.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),Il=t=>({extract:(l,d)=>{const g=Pe(d,(h,C)=>t.extract(l.concat(["["+C+"]"]),h));return mt.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),yf=(t,s)=>{const c=s!==void 0?s:Rt;return{extract:(g,h)=>{const C=[];for(const S of t){const k=S.extract(g,h);if(k.stype===hc.Value)return{stype:hc.Value,svalue:c(k.svalue)};C.push(k)}return mt.consolidateArr(C)},toString:()=>"oneOf("+Pe(t,g=>g.toString()).join(", ")+")"}},Rg=(t,s)=>{const c=(g,h)=>Il(Om(t)).extract(g,h);return{extract:(g,h)=>{const C=gs(h),S=c(g,C);return Ur.bind(S,k=>{const O=Pe(k,B=>Eu(B,B,Ka(),s));return Pn(O).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},Bh=(t,s)=>{const c=Ye(s);return{extract:(g,h)=>c().extract(g,h),toString:()=>c().toString()}},Xp=oo(Il,Pn),xi=W(Og),_u=(t,s)=>Om(c=>{const l=typeof c;return t(c)?Ur.svalue(c):Ur.serror(`Expected type: ${s} but got: ${l}`)}),qd=_u(Zn,"number"),Wt=_u(rt,"string"),ei=_u(Wo,"boolean"),Ph=_u(Ot,"function"),Dm=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Dm(t[s]));default:return!1}},Ti=Om(t=>Dm(t)?Ur.svalue(t):Ur.serror("Expected value to be acceptable for sending via postMessage")),Ng=(t,s,c,l)=>xt(c,l).fold(()=>Jr(t,c,l),g=>g.extract(t.concat(["branch: "+l]),s)),Kd=(t,s)=>({extract:(d,g)=>xt(g,t).fold(()=>nr(d,t),C=>Ng(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+gs(s)}),Rm=()=>Il(Og),Mg=t=>Om(s=>t(s).fold(Ur.serror,Ur.svalue)),Qi=(t,s)=>Rg(c=>Ur.fromResult(t(c)),s),Mb=(t,s,c)=>{const l=s.extract([t],c);return Ur.mapError(l,d=>({input:c,errors:d}))},Nr=(t,s,c)=>Ur.toResult(Mb(t,s,c)),vt=t=>t.fold(s=>{throw new Error(Au(s))},Rt),Fa=(t,s,c)=>vt(Nr(t,s,c)),Au=t=>`Errors: 
`+fo(t.errors).join(`
`)+`

Input object: `+Mn(t.input),Vc=(t,s)=>Kd(t,bo(s,Pn)),Cf=(t,s)=>Bh(t,s),Rc=Eu,as=id,$h=t=>Mg(s=>Jn(t,s)?uo.value(s):uo.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),tt=t=>Rc(t,t,Ka(),xi()),ls=(t,s)=>Rc(t,t,Ka(),s),Bg=t=>ls(t,qd),Tc=t=>ls(t,Wt),Ia=(t,s)=>Rc(t,t,Ka(),$h(s)),Bb=t=>ls(t,ei),Ll=t=>ls(t,Ph),my=(t,s)=>Rc(t,t,Am(),Om(c=>Ur.serror("The field: "+t+" is forbidden. "+s))),dd=(t,s)=>Rc(t,t,Ka(),Pn(s)),Pb=(t,s)=>Rc(t,t,Ka(),Xp(s)),Hl=(t,s)=>Rc(t,t,Ka(),Il(s)),os=t=>Rc(t,t,Am(),xi()),Ou=(t,s)=>Rc(t,t,Am(),s),Nm=t=>Ou(t,qd),Nc=t=>Ou(t,Wt),Fh=(t,s)=>Ou(t,$h(s)),Du=t=>Ou(t,Ph),Ru=(t,s)=>Ou(t,Il(s)),lr=(t,s)=>Ou(t,Pn(s)),wf=(t,s)=>Ou(t,Ya(s)),_e=(t,s)=>Rc(t,t,ud(s),xi()),zl=(t,s,c)=>Rc(t,t,ud(s),c),Sf=(t,s)=>zl(t,s,qd),La=(t,s)=>zl(t,s,Wt),Vl=(t,s,c)=>zl(t,s,$h(c)),oc=(t,s)=>zl(t,s,ei),Wr=(t,s)=>zl(t,s,Ph),fy=(t,s)=>zl(t,s,Ti),w=(t,s,c)=>zl(t,s,Il(c)),_=(t,s,c)=>zl(t,s,Pn(c)),K={generate:t=>{if(!mo(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],c={};return et(t,(l,d)=>{const g=gs(l);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],C=l[h];if(c[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!mo(C))throw new Error("case arguments must be an array");s.push(h),c[h]=(...S)=>{const k=S.length;if(k!==C.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+C.length+" ("+C+"), got "+k);return{fold:(...B)=>{if(B.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+B.length);return B[d].apply(null,S)},match:B=>{const z=gs(B);if(s.length!==z.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+z.join(","));if(!_n(s,X=>Jn(z,X)))throw new Error("Not all branches were specified when using match. Specified: "+z.join(", ")+`
Required: `+s.join(", "));return B[h].apply(null,S)},log:B=>{}}}}),c}};K.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ye=t=>{const s=[],c=[];return et(t,l=>{l.fold(d=>{s.push(d)},d=>{c.push(d)})}),{errors:s,values:c}},Je=(t,s)=>{const c={};return xs(t,(l,d)=>{Jn(s,d)||(c[d]=l)}),c},_t=(t,s)=>({[t]:s}),tn=t=>{const s={};return et(t,c=>{s[c.key]=c.value}),s},ao=(t,s)=>Je(t,s),po=(t,s)=>_t(t,s),vs=t=>tn(t),ks=(t,s)=>t.length===0?uo.value(s):uo.value(tr(s,ku.apply(void 0,t))),_r=t=>uo.error(Fe(t)),Ul=(t,s)=>{const c=ye(t);return c.errors.length>0?_r(c.errors):ks(c.values,s)},fa=t=>Ot(t)?t:gt,eu=(t,s,c)=>{let l=t.dom;const d=fa(c);for(;l.parentNode;){l=l.parentNode;const g=ve.fromDom(l),h=s(g);if(h.isSome())return h;if(d(g))break}return A.none()},Ei=(t,s,c)=>{const l=s(t),d=fa(c);return l.orThunk(()=>d(t)?A.none():eu(t,s,d))},Nu=(t,s)=>es(t.element,s.event.target),Pg={can:$e,abort:gt,run:oe},ti=t=>{if(!Pr(t,"can")&&!Pr(t,"abort")&&!Pr(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Pg,...t}},xf=(t,s)=>(...c)=>it(t,(l,d)=>l&&s(d).apply(void 0,c),!0),Ih=(t,s)=>(...c)=>it(t,(l,d)=>l||s(d).apply(void 0,c),!1),Lh=t=>Ot(t)?{can:$e,abort:gt,run:t}:t,Mm=t=>{const s=xf(t,d=>d.can),c=Ih(t,d=>d.abort);return{can:s,abort:c,run:(...d)=>{et(t,g=>{g.run.apply(void 0,d)})}}},Uc=W,tu=Uc("touchstart"),ns=Uc("touchmove"),or=Uc("touchend"),Xa=Uc("touchcancel"),Qr=Uc("mousedown"),Hh=Uc("mousemove"),Bm=Uc("mouseout"),Pm=Uc("mouseup"),ni=Uc("mouseover"),md=Uc("focusin"),Yd=Uc("focusout"),Mu=Uc("keydown"),Jp=Uc("keyup"),Xd=Uc("input"),zh=Uc("change"),$g=Uc("click"),tS=Uc("transitioncancel"),fd=Uc("transitionend"),nS=Uc("transitionstart"),gy=Uc("selectstart"),sc=t=>W("alloy."+t),$b={tap:sc("tap")},$m=sc("focus"),Tf=sc("blur.post"),Fm=sc("paste.post"),nu=sc("receive"),ou=sc("execute"),Qp=sc("focus.item"),gd=$b.tap,Ja=sc("longpress"),e1=sc("sandbox.close"),hy=sc("typeahead.cancel"),t1=sc("system.init"),n1=sc("system.touchmove"),py=sc("system.touchend"),Fg=sc("system.scroll"),hd=sc("system.resize"),yl=sc("system.attached"),su=sc("system.detached"),Ef=sc("system.dismissRequested"),by=sc("system.repositionRequested"),Ig=sc("focusmanager.shifted"),vy=sc("slotcontainer.visibility"),oS=sc("system.external.element.scroll"),sS=sc("change.tab"),rS=sc("dismiss.tab"),kf=sc("highlight"),Lg=sc("dehighlight"),xo=(t,s)=>{Fb(t,t.element,s,{})},An=(t,s,c)=>{Fb(t,t.element,s,c)},_f=t=>{xo(t,ou())},o1=(t,s,c)=>{Fb(t,s,c,{})},Fb=(t,s,c,l)=>{const d={target:s,...l};t.getSystem().triggerEvent(c,s,d)},yy=(t,s,c,l)=>{const d={...l,target:s};t.getSystem().triggerEvent(c,s,d)},Jd=(t,s,c,l)=>{t.getSystem().triggerEvent(c,s,l.event)},dr=t=>vs(t),cS=(t,s)=>({key:t,value:ti({abort:s})}),Cy=(t,s)=>({key:t,value:ti({can:s})}),wy=t=>({key:t,value:ti({run:(s,c)=>{c.event.prevent()}})}),st=(t,s)=>({key:t,value:ti({run:s})}),Hg=(t,s,c)=>({key:t,value:ti({run:(l,d)=>{s.apply(void 0,[l,d].concat(c))}})}),Tk=t=>s=>st(t,s),Af=t=>s=>({key:t,value:ti({run:(c,l)=>{Nu(c,l)&&s(c,l)}})}),Ek=(t,s)=>st(t,(c,l)=>{c.getSystem().getByUid(s).each(d=>{Jd(d,d.element,t,l)})}),zg=(t,s,c)=>{const l=s.partUids[c];return Ek(t,l)},Sy=(t,s)=>st(t,(c,l)=>{const d=l.event,g=c.getSystem().getByDom(d.target).getOrThunk(()=>Ei(d.target,C=>c.getSystem().getByDom(C).toOptional(),gt).getOr(c));s(c,g,l)}),pd=t=>st(t,(s,c)=>{c.cut()}),xy=t=>st(t,(s,c)=>{c.stop()}),Vh=(t,s)=>Af(t)(s),Cr=Af(yl()),Qd=Af(su()),Ty=Af(t1()),Bu=Tk(ou()),Ey=(t,s,c)=>{const l=c.toString(),d=l.indexOf(")")+1,g=l.indexOf("("),h=l.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:s1(h.slice(0,1).concat(h.slice(3)))}),t},s1=t=>Pe(t,s=>tc(s,"/*")?s.substring(0,s.length-2):s),Uh=(t,s)=>{const c=t.toString(),l=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:s1(g)}),t},r1=(t,s)=>{const c=s.toString(),l=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:s1(g.slice(1))}),t},oi=t=>({classes:zn(t.classes)?[]:t.classes,attributes:zn(t.attributes)?{}:t.attributes,styles:zn(t.styles)?{}:t.styles}),aS=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),c1=(t,s,c)=>Bu(l=>{c(l,t,s)}),ky=(t,s,c)=>Ty((l,d)=>{c(l,t,s)}),Of=(t,s,c,l,d,g)=>{const h=Ya(t),C=lr(s,[wf("config",t)]);return iS(h,C,s,c,l,d,g)},_y=(t,s,c,l,d,g)=>{const h=t,C=lr(s,[Ou("config",t)]);return iS(h,C,s,c,l,d,g)},lS=(t,s,c)=>Ey((d,...g)=>{const h=[d].concat(g);return d.config({name:W(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+c)},C=>{const S=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,C.config,C.state].concat(S))})},c,s),Ay=t=>({key:t,value:void 0}),iS=(t,s,c,l,d,g,h)=>{const C=B=>Pr(B,c)?B[c]():A.none(),S=bo(d,(B,z)=>lS(c,B,z)),O={...bo(g,(B,z)=>Uh(B,z)),...S,revoke:Xt(Ay,c),config:B=>{const z=Fa(c+"-config",t,B);return{key:c,value:{config:z,me:O,configAsRaw:Ye(()=>Fa(c+"-config",t,B)),initialConfig:B,state:h}}},schema:W(s),exhibit:(B,z)=>Fc(C(B),xt(l,"exhibit"),(V,X)=>X(z,V.config,V.state)).getOrThunk(()=>oi({})),name:W(c),handlers:B=>C(B).map(z=>xt(l,"events").getOr(()=>({}))(z.config,z.state)).getOr({})};return O},dl={init:()=>si({readState:W("No State required")})},si=t=>t,Tt=t=>vs(t),Ib=Ya([tt("fields"),tt("name"),_e("active",{}),_e("apis",{}),_e("state",dl),_e("extra",{})]),Oa=t=>{const s=Fa("Creating behaviour: "+t.name,Ib,t);return Of(s.fields,s.name,s.active,s.apis,s.extra,s.state)},Lb=Ya([tt("branchKey"),tt("branches"),tt("name"),_e("active",{}),_e("apis",{}),_e("state",dl),_e("extra",{})]),uS=t=>{const s=Fa("Creating behaviour: "+t.name,Lb,t);return _y(Vc(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},wr=W(void 0),Im=(t,s)=>{const c=gn(t,s);return c===void 0||c===""?[]:c.split(" ")},Hb=(t,s,c)=>{const d=Im(t,s).concat([c]);return Ut(t,s,d.join(" ")),!0},kk=(t,s,c)=>{const l=io(Im(t,s),d=>d!==c);return l.length>0?Ut(t,s,l.join(" ")):P(t,s),!1},Lm=t=>t.dom.classList!==void 0,zb=t=>Im(t,"class"),bd=(t,s)=>Hb(t,"class",s),dS=(t,s)=>kk(t,"class",s),Oy=(t,s)=>Jn(zb(t),s)?dS(t,s):bd(t,s),mr=(t,s)=>{Lm(t)?t.dom.classList.add(s):bd(t,s)},Wh=t=>{(Lm(t)?t.dom.classList:zb(t)).length===0&&P(t,"class")},Zr=(t,s)=>{Lm(t)?t.dom.classList.remove(s):dS(t,s),Wh(t)},mS=(t,s)=>{const c=Lm(t)?t.dom.classList.toggle(s):Oy(t,s);return Wh(t),c},ri=(t,s)=>Lm(t)&&t.dom.classList.contains(s),Zh=(t,s)=>{et(s,c=>{mr(t,c)})},ci=(t,s)=>{et(s,c=>{Zr(t,c)})},_k=(t,s)=>{et(s,c=>{mS(t,c)})},Ak=(t,s)=>_n(s,c=>ri(t,c)),Ok=t=>{const s=t.dom.classList,c=new Array(s.length);for(let l=0;l<s.length;l++){const d=s.item(l);d!==null&&(c[l]=d)}return c},Dk=t=>Lm(t)?Ok(t):zb(t),ga=(t,s,c,l,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:c.map(g),right:l.map(g),bottom:d.map(g)}},Cl=t=>({...t,position:A.some(t.position)}),a1=(t,s)=>{Vs(t,Cl(s))},Df=t=>(br(Us(t,"position"),"fixed")?A.none():hl(t)).orThunk(()=>{const l=ve.fromTag("span");return Ac(t).bind(d=>{Pa(d,l);const g=hl(l);return qa(l),g})}),Dy=t=>Df(t).map(wc).getOrThunk(()=>ar(0,0)),jh=(t,s)=>{const c=t.element;mr(c,s.transitionClass),Zr(c,s.fadeOutClass),mr(c,s.fadeInClass),s.onShow(t)},em=(t,s)=>{const c=t.element;mr(c,s.transitionClass),Zr(c,s.fadeInClass),mr(c,s.fadeOutClass),s.onHide(t)},Gh=(t,s)=>t.y<s.bottom&&t.bottom>s.y,Vg=(t,s)=>t.y>=s.y,Rf=(t,s)=>t.bottom<=s.bottom,tm=(t,s,c)=>({location:"top",leftX:s,topY:c.bounds.y-t.y}),Ug=(t,s,c)=>({location:"bottom",leftX:s,bottomY:t.bottom-c.bounds.bottom}),Wg=t=>t.box.x-t.win.x,Rk=(t,s,c)=>{const l=s.win,d=s.box,g=Wg(s);return As(t,h=>{switch(h){case"bottom":return Rf(d,c.bounds)?A.none():A.some(Ug(l,g,c));case"top":return Vg(d,c.bounds)?A.none():A.some(tm(l,g,c));default:return A.none()}}).getOr({location:"no-dock"})},Ry=(t,s,c)=>_n(t,l=>{switch(l){case"bottom":return Rf(s,c.bounds);case"top":return Vg(s,c.bounds)}}),Vb=(t,s)=>{const c=s.optScrollEnv.fold(W(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return ar(t.bounds.x,c)},fS=(t,s)=>{const c=s.optScrollEnv.fold(W(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return ar(t.x,c)},Ny=(t,s,c)=>c.getInitialPos().map(l=>{const d=Vb(l,s);return{box:yr(d.left,d.top,q(t),$s(t)),location:l.location}}),Ub=(t,s,c,l,d)=>{const g=fS(s,c),h=yr(g.left,g.top,s.width,s.height);l.setInitialPos({style:fc(t),position:fs(t,"position")||"static",bounds:h,location:d.location})},My=(t,s,c,l,d)=>{l.getInitialPos().fold(()=>Ub(t,s,c,l,d),()=>oe)},By=(t,s,c)=>c.getInitialPos().bind(l=>{var d;switch(c.clearInitialPos(),l.position){case"static":return A.some({morph:"static"});case"absolute":const g=Df(t).getOr(Co()),h=kr(g),C=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return A.some({morph:"absolute",positionCss:ga("absolute",xt(l.style,"left").map(S=>s.x-h.x),xt(l.style,"top").map(S=>s.y-h.y+C),xt(l.style,"right").map(S=>h.right-s.right),xt(l.style,"bottom").map(S=>h.bottom-s.bottom))});default:return A.none()}}),Py=(t,s,c)=>Ny(t,s,c).filter(({box:l})=>Ry(c.getModes(),l,s)).bind(({box:l})=>By(t,l,c)),l1=t=>{switch(t.location){case"top":return A.some({morph:"fixed",positionCss:ga("fixed",A.some(t.leftX),A.some(t.topY),A.none(),A.none())});case"bottom":return A.some({morph:"fixed",positionCss:ga("fixed",A.some(t.leftX),A.none(),A.none(),A.some(t.bottomY))});default:return A.none()}},Wb=(t,s,c)=>{const l=kr(t),d=gc(),g=Rk(c.getModes(),{win:d,box:l},s);return g.location==="top"||g.location==="bottom"?(Ub(t,l,s,c,g),l1(g)):A.none()},lR=(t,s,c)=>Py(t,s,c).orThunk(()=>s.optScrollEnv.bind(l=>Ny(t,s,c)).bind(({box:l,location:d})=>{const g=gc(),h=Wg({win:g,box:l}),C=d==="top"?tm(g,h,s):Ug(g,h,s);return l1(C)})),i1=(t,s,c)=>{const l=t.element;return br(Us(l,"position"),"fixed")?lR(l,s,c):Wb(l,s,c)},qh=(t,s,c)=>{const l=t.element;return Ny(l,s,c).bind(({box:d})=>By(l,d,c))},Nf=(t,s,c,l)=>{const d=kr(t),g=gc(),h=Wg({win:g,box:d}),C=l(g,h,s);return C.location==="bottom"||C.location==="top"?(My(t,d,s,c,C),l1(C)):A.none()},$y=(t,s,c)=>{c.setDocked(!1),et(["left","right","top","bottom","position"],l=>co(t.element,l)),s.onUndocked(t)},Fy=(t,s,c,l)=>{const d=l.position==="fixed";c.setDocked(d),a1(t.element,l),(d?s.onDocked:s.onUndocked)(t)},gS=(t,s,c,l,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const C=Gh(h,l.bounds);C!==c.isVisible()&&(c.setVisible(C),d&&!C?(Zh(t.element,[g.fadeOutClass]),g.onHide(t)):(C?jh:em)(t,g))})})},Iy=(t,s,c,l,d)=>{gS(t,s,c,l,!0),Fy(t,s,c,d.positionCss)},Zg=(t,s,c,l,d)=>{switch(d.morph){case"static":return $y(t,s,c);case"absolute":return Fy(t,s,c,d.positionCss);case"fixed":return Iy(t,s,c,l,d)}},Nk=(t,s,c)=>{const l=s.lazyViewport(t);gS(t,s,c,l),i1(t,l,c).each(d=>{Zg(t,s,c,l,d)})},Ly=(t,s,c)=>{const l=t.element;c.setDocked(!1);const d=s.lazyViewport(t);qh(t,d,c).each(g=>{switch(g.morph){case"static":{$y(t,s,c);break}case"absolute":{Fy(t,s,c,g.positionCss);break}}}),c.setVisible(!0),s.contextual.each(g=>{ci(l,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),Mf(t,s,c)},Mf=(t,s,c)=>{t.getSystem().isConnected()&&Nk(t,s,c)},Kh=(t,s,c)=>{c.isDocked()&&Ly(t,s,c)},Hy=t=>(s,c,l)=>{const d=c.lazyViewport(s);Nf(s.element,d,l,t).each(h=>{Iy(s,c,l,d,h)})},Zb=Hy(tm),zy=Hy(Ug);var Vy=Object.freeze({__proto__:null,refresh:Mf,reset:Kh,isDocked:(t,s,c)=>c.isDocked(),getModes:(t,s,c)=>c.getModes(),setModes:(t,s,c,l)=>c.setModes(l),forceDockToTop:Zb,forceDockToBottom:zy}),Mk=Object.freeze({__proto__:null,events:(t,s)=>dr([Vh(fd(),(c,l)=>{t.contextual.each(d=>{ri(c.element,d.transitionClass)&&(ci(c.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(c)),l.stop()})}),st(Fg(),(c,l)=>{Mf(c,t,s)}),st(oS(),(c,l)=>{Mf(c,t,s)}),st(hd(),(c,l)=>{Kh(c,t,s)})])});const ai=(t,s)=>{const l=(s||document).createElement("div");return l.innerHTML=t,la(ve.fromDom(l))},Pu=t=>t.dom.innerHTML,Bf=(t,s)=>{const l=mc(t).dom,d=ve.fromDom(l.createDocumentFragment()),g=ai(s,l);Vd(d,g),Oc(t),Pa(t,d)},jg=t=>{const s=ve.fromTag("div"),c=ve.fromDom(t.dom.cloneNode(!0));return Pa(s,c),Pu(s)},pS=(t,s)=>ve.fromDom(t.dom.cloneNode(s)),d1=t=>pS(t,!1),jb=t=>pS(t,!0),bS=t=>{if(Jl(t))return"#shadow-root";{const s=d1(t);return jg(s)}},m1=t=>bS(t),Gg="unknown";var ru;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(ru||(ru={}));const Gb=hn({}),na=(t,s)=>{const c=[],l=new Date().getTime();return{logEventCut:(d,g,h)=>{c.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{c.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{c.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{c.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{c.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();Jn(["mousemove","mouseover","mouseout",t1()],t)}}},Uy=(t,s,c)=>{switch(xt(Gb.get(),t).orThunk(()=>{const d=gs(Gb.get());return As(d,g=>t.indexOf(g)>-1?A.some(Gb.get()[g]):A.none())}).getOr(ru.NORMAL)){case ru.NORMAL:return c(Pf());case ru.LOGGING:{const d=na(t,s),g=c(d);return d.write(),g}case ru.STOP:return!0}},wl=["alloy/data/Fields","alloy/debugging/Debugging"],Bk=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return xe(s,c=>c.indexOf("alloy")>0&&!bs(wl,l=>c.indexOf(l)>-1)).getOr(Gg)}else return Gg},vS={logEventCut:oe,logEventStopped:oe,logNoParent:oe,logEventNoHandlers:oe,logEventResponse:oe,write:oe},Hm=(t,s,c)=>Uy(t,s,c),Pf=W(vS),zm=W([tt("menu"),tt("selectedMenu")]),li=W([tt("item"),tt("selectedItem")]);W(Pn(li().concat(zm())));const yS=W(Pn(li())),f1=dd("initSize",[tt("numColumns"),tt("numRows")]),Wy=()=>ls("markers",yS()),Yh=()=>dd("markers",[tt("backgroundMenu")].concat(zm()).concat(li())),qg=t=>dd("markers",Pe(t,tt)),$f=(t,s,c)=>(Bk(),Rc(s,s,c,Mg(l=>uo.value((...d)=>l.apply(void 0,d))))),Zo=t=>$f("onHandler",t,ud(oe)),Wl=t=>$f("onKeyboardHandler",t,ud(A.none)),nm=t=>$f("onHandler",t,Ka()),qb=t=>$f("onKeyboardHandler",t,Ka()),Gs=(t,s)=>as(t,W(s)),Ff=t=>as(t,Rt),Kb=W(f1);var Pk=[lr("contextual",[Tc("fadeInClass"),Tc("fadeOutClass"),Tc("transitionClass"),Ll("lazyContext"),Zo("onShow"),Zo("onShown"),Zo("onHide"),Zo("onHidden")]),Wr("lazyViewport",()=>({bounds:gc(),optScrollEnv:A.none()})),w("modes",["top","bottom"],Wt),Zo("onDocked"),Zo("onUndocked")],g1=Object.freeze({__proto__:null,init:t=>{const s=hn(!1),c=hn(!0),l=Es(),d=hn(t.modes),g=()=>`docked:  ${s.get()}, visible: ${c.get()}, modes: ${d.get().join(",")}`;return si({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:c.get,setVisible:c.set,getModes:d.get,setModes:d.set,readState:g})}});const fr=Oa({fields:Pk,name:"docking",active:Mk,apis:Vy,state:g1}),CS=(t,s,c)=>es(s,t.element)&&!es(s,c),Fk=dr([Cy($m(),(t,s)=>{const c=s.event,l=c.originator,d=c.target;return!CS(t,l,d)})]);var wS=Object.freeze({__proto__:null,events:Fk});const Kg=(t,s,c,l)=>{const d=t+s;return d>l?c:d<c?l:d},ii=(t,s,c)=>Math.min(Math.max(t,s),c),If=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Zy=0;const Jt=t=>{const c=new Date().getTime(),l=Math.floor(If()*1e9);return Zy++,t+"_"+l+Zy+String(c)},jy=W("alloy-id-"),Ik=W("data-alloy-id"),SS=jy(),Gy=Ik(),xS=(t,s)=>{const c=Jt(SS+t);return TS(s,c),c},TS=(t,s)=>{Object.defineProperty(t.dom,Gy,{value:s,writable:!0})},vd=t=>{const s=Dn(t)?t.dom[Gy]:null;return A.from(s)},h1=t=>Jt(t),Yg=Rt,Yb=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+m1(t().element)+" is not in context.":""),c=d=>()=>{throw new Error(s(d))},l=d=>()=>{};return{debugInfo:W("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:c("build"),buildOrPatch:c("buildOrPatch"),addToWorld:c("addToWorld"),removeFromWorld:c("removeFromWorld"),addToGui:c("addToGui"),removeFromGui:c("removeFromGui"),getByUid:c("getByUid"),getByDom:c("getByDom"),isConnected:gt}},Lk=Yb(),ki=Jt("alloy-premade"),ES=t=>(Object.defineProperty(t.element.dom,ki,{value:t.uid,writable:!0}),po(ki,t)),qy=t=>Eo(t.dom,ki),kS=t=>xt(t,ki),Xb=t=>r1((s,...c)=>t(s.getApis(),s,...c),t),Hk=(t,s)=>{const c=Pe(s,d=>lr(d.name(),[tt("config"),_e("state",dl)])),l=Nr("component.behaviours",Pn(c),t.behaviours).fold(d=>{throw new Error(Au(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Rt);return{list:s,data:bo(l,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return W(g)})}},Jb=t=>t.list,Ky=t=>t.data,Yy=(t,s)=>{const c={};return xs(t,(l,d)=>{xs(l,(g,h)=>{const C=xt(c,h).getOr([]);c[h]=C.concat([s(d,g)])})}),c},_S=(t,s,c,l)=>{const d={...s};et(c,O=>{d[O.name()]=O.exhibit(t,l)});const g=Yy(d,(O,B)=>({name:O,modification:B})),h=O=>To(O,(B,z)=>({...z.modification,...B}),{}),C=To(g.classes,(O,B)=>B.modification.concat(O),[]),S=h(g.attributes),k=h(g.styles);return oi({classes:C,attributes:S,styles:k})},zk=(t,s,c,l)=>{try{const d=ir(c,(g,h)=>{const C=g[s],S=h[s],k=l.indexOf(C),O=l.indexOf(S);if(k===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(l,null,2));if(O===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(l,null,2));return k<O?-1:O<k?1:0});return uo.value(d)}catch(d){return uo.error([d])}},om=(t,s)=>({handler:t,purpose:s}),AS=(t,s)=>({cHandler:t,purpose:s}),Xh=(t,s)=>AS(Xt.apply(void 0,[t.handler].concat(s)),t.purpose),Jh=t=>t.cHandler,OS=(t,s)=>({name:t,handler:s}),Qb=(t,s)=>{const c={};return et(t,l=>{c[l.name()]=l.handlers(s)}),c},Xy=(t,s,c)=>{const l={...c,...Qb(s,t)};return Yy(l,OS)},e0=(t,s,c,l)=>{const d=Xy(t,c,l);return Wk(d,s)},Vk=t=>{const s=Lh(t);return(c,l,...d)=>{const g=[c,l].concat(d);s.abort.apply(void 0,g)?l.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},Sl=(t,s)=>uo.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Pe(s,c=>c.name),null,2)]),Uk=(t,s,c)=>{const l=s[c];return l?zk("Event: "+c,"name",t,l).map(d=>{const g=Pe(d,h=>h.handler);return Mm(g)}):Sl(c,t)},Wk=(t,s)=>{const c=ca(t,(l,d)=>(l.length===1?uo.value(l[0].handler):Uk(l,s,d)).map(h=>{const C=Vk(h),S=l.length>1?io(s[d],k=>bs(l,O=>O.name===k)).join(" > "):l[0].name;return po(d,om(C,S))}));return Ul(c,{})},Lf="alloy.base.behaviour",Hf=Pn([Rc("dom","dom",Ka(),Pn([tt("tag"),_e("styles",{}),_e("classes",[]),_e("attributes",{}),os("value"),os("innerHtml")])),tt("components"),tt("uid"),_e("events",{}),_e("apis",{}),Rc("eventOrder","eventOrder",x({[ou()]:["disabling",Lf,"toggling","typeaheadevents"],[$m()]:[Lf,"focusing","keying"],[t1()]:[Lf,"disabling","toggling","representing","tooltipping"],[Xd()]:[Lf,"representing","streaming","invalidating"],[su()]:[Lf,"representing","item-events","toolbar-button-events","tooltipping"],[Qr()]:["focusing",Lf,"item-type-events"],[tu()]:["focusing",Lf,"item-type-events"],[ni()]:["item-type-events","tooltipping"],[nu()]:["receiving","reflecting","tooltipping"]}),xi()),os("domModification")]),Vm=t=>Nr("custom.definition",Hf,t),Jy=t=>({...t.dom,uid:t.uid,domChildren:Pe(t.components,s=>s.element)}),Ze=t=>t.domModification.fold(()=>oi({}),oi),t0=t=>t.events,Um=t=>t.dom.value,zf=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},n0=(t,s,c)=>zr(t,s).map(d=>{if(c.exists(h=>!es(h,d))){const h=c.map(cs).getOr("span"),C=ve.fromTag(h);return qi(d,C),C}else return d}),ui=(t,s,c)=>{c.fold(()=>Pa(t,s),l=>{es(l,s)||(qi(l,s),qa(l))})},Qy=(t,s,c)=>{const l=Pe(s,c),d=la(t);return et(d.slice(l.length),qa),l},eC=(t,s,c,l)=>{const d=zr(t,s),g=l(c,d),h=n0(t,s,d);return ui(t,g.element,h),g},xl=(t,s,c)=>Qy(t,s,(l,d)=>eC(t,d,l,c)),Qh=(t,s)=>Qy(t,s,(c,l)=>{const d=zr(t,l);return ui(t,c,d),c}),DS=(t,s)=>{const c=gs(t),l=gs(s),d=Bt(l,c),g=xr(t,(h,C)=>!Eo(s,C)||h!==s[C]).t;return{toRemove:d,toSet:g}},RS=(t,s)=>{const{class:c,style:l,...d}=Y(s),{toSet:g,toRemove:h}=DS(t.attributes,d),C=()=>{et(h,we=>P(s,we)),vr(s,g)},S=fc(s),{toSet:k,toRemove:O}=DS(t.styles,S),B=()=>{et(O,we=>co(s,we)),eo(s,k)},z=Dk(s),V=Bt(z,t.classes),X=Bt(t.classes,z),te=()=>{Zh(s,X),ci(s,V)},ke=we=>{Bf(s,we)},ae=()=>{const we=t.domChildren;Qh(s,we)},Ce=()=>{const we=s,Qe=t.value.getOrUndefined();Qe!==Um(we)&&zf(we,Qe??"")};return C(),te(),B(),t.innerHtml.fold(ae,ke),Ce(),s},Zk=t=>{const s=ve.fromTag(t.tag);vr(s,t.attributes),Zh(s,t.classes),eo(s,t.styles),t.innerHtml.each(l=>Bf(s,l));const c=t.domChildren;return Vd(s,c),t.value.each(l=>{zf(s,l)}),s},NS=(t,s)=>{try{const c=RS(t,s);return A.some(c)}catch{return A.none()}},jk=t=>t.innerHtml.isSome()&&t.domChildren.length>0,MS=(t,s)=>{const c=d=>cs(d)===t.tag&&!jk(t)&&!qy(d),l=s.filter(c).bind(d=>NS(t,d)).getOrThunk(()=>Zk(t));return TS(l,t.uid),l},Gk=t=>{const s=xt(t,"behaviours").getOr({});return ie(gs(s),c=>{const l=s[c];return Xn(l)?[l.me]:[]})},qk=(t,s)=>Hk(t,s),o0=t=>{const s=Gk(t);return qk(t,s)},s0=(t,s,c)=>{const l=Jy(t),d=Ze(t),g={"alloy.base.modification":d},h=s.length>0?_S(c,g,s,l):d;return aS(l,h)},Kk=(t,s,c)=>{const l={"alloy.base.behaviour":t0(t)};return e0(c,t.eventOrder,s,l).getOrDie()},BS=(t,s)=>{const c=()=>we,l=hn(Lk),d=vt(Vm(t)),g=o0(t),h=Jb(g),C=Ky(g),S=s0(d,h,C),k=MS(S,s),O=Kk(d,h,C),B=hn(d.components),z=Qe=>{l.set(Qe)},V=()=>{l.set(Yb(c))},X=()=>{const Qe=la(k),We=ie(Qe,It=>l.get().getByDom(It).fold(()=>[],ro));B.set(We)},te=Qe=>{const We=C;return(Ot(We[Qe.name()])?We[Qe.name()]:()=>{throw new Error("Could not find "+Qe.name()+" in "+JSON.stringify(t,null,2))})()},ke=Qe=>Ot(C[Qe.name()]),ae=()=>d.apis,Ce=Qe=>C[Qe]().map(We=>We.state.readState()).getOr("not enabled"),we={uid:t.uid,getSystem:l.get,config:te,hasConfigured:ke,spec:t,readState:Ce,getApis:ae,connect:z,disconnect:V,element:k,syncComponents:X,components:B.get,events:O};return we},Yk=(t,s)=>{const c=xt(t,"components").getOr([]);return s.fold(()=>Pe(c,el),l=>Pe(c,(d,g)=>c0(d,zr(l,g))))},tC=(t,s)=>{const{events:c,...l}=Yg(t),d=Yk(l,s),g={...l,events:{...wS,...c},components:d};return uo.value(BS(g,s))},jr=t=>{const s=ve.fromText(t);return nC({element:s})},nC=t=>{const s=Fa("external.component",Ya([tt("element"),os("uid")]),t),c=hn(Yb()),l=C=>{c.set(C)},d=()=>{c.set(Yb(()=>h))},g=s.uid.getOrThunk(()=>h1("external"));TS(s.element,g);const h={uid:g,getSystem:c.get,config:A.none,hasConfigured:gt,connect:l,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:W("No state"),syncComponents:oe,components:W([]),events:{}};return ES(h)},PS=h1,r0=t=>Eo(t,"uid"),c0=(t,s)=>kS(t).getOrThunk(()=>{const c=r0(t)?t:{uid:PS(""),...t};return tC(c,s).getOrDie()}),el=t=>c0(t,A.none()),_i=ES;var oC=(t,s,c,l,d)=>t(c,l)?A.some(c):Ot(d)&&d(c)?A.none():s(c,l,d);const sC=(t,s,c)=>{let l=t.dom;const d=Ot(c)?c:gt;for(;l.parentNode;){l=l.parentNode;const g=ve.fromDom(l);if(s(g))return A.some(g);if(d(g))break}return A.none()},$S=(t,s,c)=>oC((d,g)=>g(d),sC,t,s,c),rC=(t,s)=>{const c=t.dom;return c.parentNode?p1(ve.fromDom(c.parentNode),l=>!es(t,l)&&s(l)):A.none()},p1=(t,s)=>{const c=d=>s(ve.fromDom(d));return xe(t.dom.childNodes,c).map(ve.fromDom)},a0=(t,s)=>{const c=l=>{for(let d=0;d<l.childNodes.length;d++){const g=ve.fromDom(l.childNodes[d]);if(s(g))return A.some(g);const h=c(l.childNodes[d]);if(h.isSome())return h}return A.none()};return c(t.dom)},FS=(t,s,c)=>$S(t,s,c).isSome(),Tl=t=>Ea(t),Vf=(t,s,c)=>sC(t,l=>$r(l,s),c),yd=(t,s)=>rC(t,c=>$r(c,s)),cC=(t,s)=>p1(t,c=>$r(c,s)),Ar=(t,s)=>Ea(s,t),$u=(t,s,c)=>oC((d,g)=>$r(d,g),Vf,t,s,c),Uf="aria-controls",Xk=t=>$S(t,c=>{if(!Dn(c))return!1;const l=gn(c,"id");return l!==void 0&&l.indexOf(Uf)>-1}).bind(c=>{const l=gn(c,"id"),d=Fr(c);return Ar(d,`[${Uf}="${l}"]`)}),aC=()=>{const t=Jt(Uf);return{id:t,link:l=>{Ut(l,Uf,t)},unlink:l=>{P(l,Uf)}}},IS=(t,s)=>Xk(s).exists(c=>Xg(t,c)),Xg=(t,s)=>FS(s,c=>es(c,t.element),gt)||IS(t,s),ha=(t,s,c,l,d,g,h,C=!1)=>({x:t,y:s,bubble:c,direction:l,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:C}),Wm=K.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Jk=(t,s,c,l,d,g,h,C,S)=>t.fold(s,c,l,d,g,h,C,S),lC=(t,s,c,l)=>t.fold(s,s,l,l,s,l,c,c),Qk=(t,s,c,l)=>t.fold(s,l,s,l,c,c,s,l),l0=Wm.southeast,iC=Wm.southwest,i0=Wm.northeast,Qt=Wm.northwest,b1=Wm.south,uC=Wm.north,LS=Wm.east,HS=Wm.west,e_=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Da=(t,s)=>rs(["left","right","top","bottom"],c=>xt(s,c).map(l=>e_(t,l))),t_=(t,s,c)=>{const l=(S,k)=>s[S].map(O=>{const B=S==="top"||S==="bottom",z=B?c.top:c.left,X=(S==="left"||S==="top"?Math.max:Math.min)(O,k)+z;return B?ii(X,t.y,t.bottom):ii(X,t.x,t.right)}).getOr(k),d=l("left",t.x),g=l("top",t.y),h=l("right",t.right),C=l("bottom",t.bottom);return yr(d,g,h-d,C-g)},Wf="layout",dC=t=>t.x,zS=(t,s)=>t.x+t.width/2-s.width/2,Ha=(t,s)=>t.x+t.width-s.width,Zf=(t,s)=>t.y-s.height,Zm=t=>t.y+t.height,VS=(t,s)=>t.y+t.height/2-s.height/2,n_=t=>t.x+t.width,o_=(t,s)=>t.x-s.width,Wc=(t,s,c)=>ha(dC(t),Zm(t),c.southeast(),l0(),"southeast",Da(t,{left:1,top:3}),Wf),rc=(t,s,c)=>ha(Ha(t,s),Zm(t),c.southwest(),iC(),"southwest",Da(t,{right:0,top:3}),Wf),Is=(t,s,c)=>ha(dC(t),Zf(t,s),c.northeast(),i0(),"northeast",Da(t,{left:1,bottom:2}),Wf),za=(t,s,c)=>ha(Ha(t,s),Zf(t,s),c.northwest(),Qt(),"northwest",Da(t,{right:0,bottom:2}),Wf),Zc=(t,s,c)=>ha(zS(t,s),Zf(t,s),c.north(),uC(),"north",Da(t,{bottom:2}),Wf),jc=(t,s,c)=>ha(zS(t,s),Zm(t),c.south(),b1(),"south",Da(t,{top:3}),Wf),u0=(t,s,c)=>ha(n_(t),VS(t,s),c.east(),LS(),"east",Da(t,{left:0}),Wf),d0=(t,s,c)=>ha(o_(t,s),VS(t,s),c.west(),HS(),"west",Da(t,{right:1}),Wf),US=()=>[Wc,rc,Is,za,jc,Zc,u0,d0],WS=()=>[rc,Wc,za,Is,jc,Zc,u0,d0],ZS=()=>[Is,za,Wc,rc,Zc,jc],m0=()=>[za,Is,rc,Wc,Zc,jc],jf=()=>[Wc,rc,Is,za,jc,Zc],f0=()=>[rc,Wc,za,Is,jc,Zc],s_=(t,s)=>s.universal?t:io(t,c=>Jn(s.channels,c));var r_=Object.freeze({__proto__:null,events:t=>dr([st(nu(),(s,c)=>{const l=t.channels,d=gs(l),g=c,h=s_(d,g);et(h,C=>{const S=l[C],k=S.schema,O=Fa("channel["+C+`] data
Receiver: `+m1(s.element),k,g.data);S.onReceive(s,O)})})])}),c_=[ls("channels",Qi(uo.value,Ya([nm("onReceive"),_e("schema",xi())])))];const Zl=Oa({fields:c_,name:"receiving",active:r_});var jS=Object.freeze({__proto__:null,exhibit:(t,s)=>oi({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const Ai=(t,s=!1)=>t.dom.focus({preventScroll:s}),g0=t=>t.dom.blur(),v1=t=>{const s=Fr(t).dom;return t.dom===s.activeElement},Cd=(t=Ql())=>A.from(t.dom.activeElement).map(ve.fromDom),El=t=>Cd(Fr(t)).filter(s=>t.dom.contains(s.dom)),Gf=(t,s)=>{const c=Fr(s),l=Cd(c).bind(g=>{const h=C=>es(g,C);return h(s)?A.some(s):a0(s,h)}),d=t(s);return l.each(g=>{Cd(c).filter(h=>es(h,g)).fold(()=>{Ai(g)},oe)}),d},mC=K.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),h0=(t,s,c,l,d,g)=>{const h=s.rect,C=h.x-c,S=h.y-l,k=h.width,O=h.height,B=d-(C+k),z=g-(S+O),V=A.some(C),X=A.some(S),te=A.some(B),ke=A.some(z),ae=A.none();return Jk(s.direction,()=>ga(t,V,X,ae,ae),()=>ga(t,ae,X,te,ae),()=>ga(t,V,ae,ae,ke),()=>ga(t,ae,ae,te,ke),()=>ga(t,V,X,ae,ae),()=>ga(t,V,ae,ae,ke),()=>ga(t,V,X,ae,ae),()=>ga(t,ae,X,te,ae))},GS=(t,s)=>t.fold(()=>{const c=s.rect;return ga("absolute",A.some(c.x),A.some(c.y),A.none(),A.none())},(c,l,d,g)=>h0("absolute",s,c,l,d,g),(c,l,d,g)=>h0("fixed",s,c,l,d,g)),jm=(t,s)=>{const c=Xt(Zd,s),l=t.fold(c,c,()=>{const h=ka();return Zd(s).translate(-h.left,-h.top)}),d=J(s),g=Bl(s);return yr(l.left,l.top,d,g)},qS=(t,s)=>s.fold(()=>t.fold(gc,gc,yr),c=>t.fold(W(c),W(c),()=>{const l=fC(t,c.x,c.y);return yr(l.left,l.top,c.width,c.height)})),fC=(t,s,c)=>{const l=ar(s,c),d=()=>{const g=ka();return l.translate(-g.left,-g.top)};return t.fold(W(l),W(l),d)},KS=(t,s,c,l)=>t.fold(s,c,l);mC.none;const y1=mC.relative,C1=mC.fixed,w1=(t,s)=>({anchorBox:t,origin:s}),a_=(t,s)=>w1(t,s),p0="data-alloy-placement",l_=(t,s)=>{Ut(t,p0,s)},YS=t=>Vr(t,p0),i_=t=>P(t,p0),b0=K.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),XS=(t,s)=>{const{x:c,y:l,right:d,bottom:g}=s,{x:h,y:C,right:S,bottom:k,width:O,height:B}=t,z=h>=c&&h<=d,V=C>=l&&C<=g,X=z&&V,te=S<=d&&S>=c,ke=k<=g&&k>=l,ae=te&&ke,Ce=Math.min(O,h>=c?d-h:S-c),we=Math.min(B,C>=l?g-C:k-l);return{originInBounds:X,sizeInBounds:ae,visibleW:Ce,visibleH:we}},u_=(t,s)=>{const{x:c,y:l,right:d,bottom:g}=s,{x:h,y:C,width:S,height:k}=t,O=Math.max(c,d-S),B=Math.max(l,g-k),z=ii(h,c,O),V=ii(C,l,B),X=Math.min(z+S,d)-z,te=Math.min(V+k,g)-V;return yr(z,V,X,te)},gC=(t,s,c)=>{const l=W(s.bottom-c.y),d=W(c.bottom-s.y),g=lC(t,d,d,l),h=W(s.right-c.x),C=W(c.right-s.x);return{maxWidth:Qk(t,C,C,h),maxHeight:g}},v0=(t,s,c,l)=>{const d=t.bubble,g=d.offset,h=t_(l,t.restriction,g),C=t.x+g.left,S=t.y+g.top,k=yr(C,S,s,c),{originInBounds:O,sizeInBounds:B,visibleW:z,visibleH:V}=XS(k,h),X=O&&B,te=X?k:u_(k,h),ke=te.width>0&&te.height>0,{maxWidth:ae,maxHeight:Ce}=gC(t.direction,te,l),we={rect:te,maxHeight:Ce,maxWidth:ae,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:S};return X||t.alwaysFit?b0.fit(we):b0.nofit(we,z,V,ke)},d_=(t,s,c,l,d,g)=>{const h=l.width,C=l.height,S=(O,B,z,V,X)=>{const te=O(c,l,d,t,g),ke=v0(te,h,C,g);return ke.fold(W(ke),(ae,Ce,we,Qe)=>(X===Qe?we>V||Ce>z:!X&&Qe)?ke:b0.nofit(B,z,V,X))};return it(s,(O,B)=>{const z=Xt(S,B);return O.fold(W(O),z)},b0.nofit({rect:c,maxHeight:l.height,maxWidth:l.width,direction:l0(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:c.y},-1,-1,!1)).fold(Rt,Rt)},JS=$e,kl=(t,s,c)=>zd(t,s,JS,c),hC=(t,s,c)=>da(t,s,JS,c),pC=$l,bC=["top","bottom","right","left"],y0="data-alloy-transition-timer",m_=(t,s)=>Ak(t,s.classes),C0=(t,s,c)=>c.exists(l=>{const d=t.mode;return d==="all"?!0:l[d]!==s[d]}),QS=(t,s)=>{const c=l=>parseFloat(l).toFixed(3);return yo(s,(l,d)=>{const g=t[d].map(c),h=l.map(c);return!uc(g,h)}).isSome()},vC=t=>{const s=g=>{const C=fs(t,g).split(/\s*,\s*/);return io(C,ue)},c=g=>{if(rt(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return tc(g,"ms")?h:h*1e3}else return 0},l=s("transition-delay"),d=s("transition-duration");return it(d,(g,h,C)=>{const S=c(l[C])+c(h);return Math.max(g,S)},0)},yC=(t,s)=>{const c=zc(),l=zc();let d;const g=k=>{var O;const B=(O=k.raw.pseudoElement)!==null&&O!==void 0?O:"";return es(k.target,t)&&se(B)&&Jn(bC,k.raw.propertyName)},h=k=>{if(Go(k)||g(k)){c.clear(),l.clear();const O=k==null?void 0:k.raw.type;(Go(O)||O===fd())&&(clearTimeout(d),P(t,y0),ci(t,s.classes))}},C=kl(t,nS(),k=>{g(k)&&(C.unbind(),c.set(kl(t,fd(),h)),l.set(kl(t,tS(),h)))}),S=vC(t);requestAnimationFrame(()=>{d=setTimeout(h,S+17),Ut(t,y0,d)})},ex=(t,s)=>{Zh(t,s.classes),Vr(t,y0).each(c=>{clearTimeout(parseInt(c,10)),P(t,y0)}),yC(t,s)},tp=(t,s,c,l,d,g)=>{const h=C0(l,d,g);if(h||m_(t,l)){ot(t,"position",c.position);const C=jm(s,t),S=GS(s,{...d,rect:C}),k=rs(bC,O=>S[O]);QS(c,k)&&(Vs(t,k),h&&ex(t,l),Jc(t))}else ci(t,l.classes)},tx=t=>({width:J(t),height:Bl(t)}),nx=(t,s,c,l)=>{co(s,"max-height"),co(s,"max-width");const d=tx(s);return d_(s,l.preference,t,d,c,l.bounds)},ox=(t,s)=>{const c=s.classes;ci(t,c.off),Zh(t,c.on)},f_=(t,s,c)=>{const l=c.maxHeightFunction;l(t,s.maxHeight)},sx=(t,s,c)=>{const l=c.maxWidthFunction;l(t,s.maxWidth)},rx=(t,s,c)=>{const l=GS(c.origin,s);c.transition.each(d=>{tp(t,c.origin,l,d,s,c.lastPlacement)}),a1(t,l)},g_=(t,s)=>{l_(t,s.placement)},w0=(t,s)=>{Ld(t,Math.floor(s))},cx=W((t,s)=>{w0(t,s),eo(t,{"overflow-x":"hidden","overflow-y":"auto"})}),np=W((t,s)=>{w0(t,s)}),ax=(t,s,c)=>t[s]===void 0?c:t[s],CC=(t,s,c,l,d,g,h,C)=>{const S=ax(h,"maxHeightFunction",cx()),k=ax(h,"maxWidthFunction",oe),O=t.anchorBox,B=t.origin,z={bounds:qS(B,g),origin:B,preference:l,maxHeightFunction:S,maxWidthFunction:k,lastPlacement:d,transition:C};return lx(O,s,c,z)},lx=(t,s,c,l)=>{const d=nx(t,s,c,l);return rx(s,d,l),g_(s,d),ox(s,d),f_(s,d,l),sx(s,d,l),{layout:d.layout,placement:d.placement}},h_=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Fu=(t,s,c,l=1)=>{const d=t*l,g=s*l,h=S=>xt(c,S).getOr([]),C=(S,k,O)=>{const B=Bt(h_,O);return{offset:ar(S,k),classesOn:ie(O,h),classesOff:ie(B,h)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},S0=()=>Fu(0,0,{}),x0=Rt,Va=(t,s)=>c=>dR(c)==="rtl"?s:t,dR=t=>fs(t,"direction")==="rtl"?"rtl":"ltr";var Oi;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Oi||(Oi={}));const wC="data-alloy-vertical-dir",p_=t=>FS(t,s=>Dn(s)&&gn(s,"data-alloy-vertical-dir")===Oi.BottomToTop),qf=()=>lr("layouts",[tt("onLtr"),tt("onRtl"),os("onBottomLtr"),os("onBottomRtl")]),S1=(t,s,c,l,d,g,h)=>{const C=h.map(p_).getOr(!1),S=s.layouts.map(V=>V.onLtr(t)),k=s.layouts.map(V=>V.onRtl(t)),O=C?s.layouts.bind(V=>V.onBottomLtr.map(X=>X(t))).or(S).getOr(d):S.getOr(c),B=C?s.layouts.bind(V=>V.onBottomRtl.map(X=>X(t))).or(k).getOr(g):k.getOr(l);return Va(O,B)(t)},b_=(t,s,c)=>{const l=s.hotspot,d=jm(c,l.element),g=S1(t.element,s,jf(),f0(),ZS(),m0(),A.some(s.hotspot.element));return A.some(x0({anchorBox:d,bubble:s.bubble.getOr(S0()),overrides:s.overrides,layouts:g}))};var ix=[tt("hotspot"),os("bubble"),_e("overrides",{}),qf(),Gs("placement",b_)];const SC=(t,s,c)=>{const l=fC(c,s.x,s.y),d=yr(l.left,l.top,s.width,s.height),g=S1(t.element,s,US(),WS(),US(),WS(),A.none());return A.some(x0({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var ux=[tt("x"),tt("y"),_e("height",0),_e("width",0),_e("bubble",S0()),_e("overrides",{}),qf(),Gs("placement",SC)];const T0=K.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),x1=t=>t.fold(Rt,(s,c,l)=>s.translate(-c,-l)),dx=t=>t.fold(Rt,Rt),mx=t=>it(t,(s,c)=>s.translate(c.left,c.top),ar(0,0)),v_=t=>{const s=Pe(t,x1);return mx(s)},E0=t=>{const s=Pe(t,dx);return mx(s)},k0=T0.screen,y_=T0.absolute,op=(t,s,c)=>{const l=Cc(c.root).dom,d=g=>{const h=mc(g),C=mc(t.element);return es(h,C)};return A.from(l.frameElement).map(ve.fromDom).filter(d).map(wc)},fx=(t,s,c)=>{const l=mc(t.element),d=ka(l),g=op(t,s,c).getOr(d);return y_(g,d.left,d.top)},_0=(t,s,c,l)=>{const d=k0(ar(t,s));return A.some(rd(d,c,l))},xC=(t,s,c,l,d)=>t.map(g=>{const h=[s,g.point],C=KS(l,()=>E0(h),()=>E0(h),()=>v_(h)),S=jd(C.left,C.top,g.width,g.height),k=c.showAbove?ZS():jf(),O=c.showAbove?m0():f0(),B=S1(d,c,k,O,k,O,A.none());return x0({anchorBox:S,bubble:c.bubble.getOr(S0()),overrides:c.overrides,layouts:B})}),A0=(t,s,c)=>{const l=fx(t,c,s);return s.node.filter(Yt).bind(d=>{const g=d.dom.getBoundingClientRect(),h=_0(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return xC(h,l,s,c,C)})};var C_=[tt("node"),tt("root"),os("bubble"),qf(),_e("overrides",{}),_e("showAbove",!1),Gs("placement",A0)];const gx="\uFEFF",Jg=" ",T1={create:(t,s,c,l)=>({start:t,soffset:s,finish:c,foffset:l})},Kf=K.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),E1=(t,s,c,l)=>t.fold(s,c,l),px=t=>t.fold(Rt,Rt,Rt),bx=Kf.before,mR=Kf.on,w_=Kf.after,sp={before:bx,on:mR,after:w_,cata:E1,getStart:px},sm=K.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),S_=t=>sm.exact(t.start,t.soffset,t.finish,t.foffset),TC=t=>t.match({domRange:s=>ve.fromDom(s.startContainer),relative:(s,c)=>sp.getStart(s),exact:(s,c,l,d)=>s}),vx=sm.domRange,yx=sm.relative,Cx=sm.exact,EC=t=>{const s=TC(t);return Cc(s)},wx=T1.create,Yf={domRange:vx,relative:yx,exact:Cx,exactFromRange:S_,getWin:EC,range:wx},Sx=(t,s)=>{s.fold(c=>{t.setStartBefore(c.dom)},(c,l)=>{t.setStart(c.dom,l)},c=>{t.setStartAfter(c.dom)})},Qg=(t,s)=>{s.fold(c=>{t.setEndBefore(c.dom)},(c,l)=>{t.setEnd(c.dom,l)},c=>{t.setEndAfter(c.dom)})},Xf=(t,s,c)=>{const l=t.document.createRange();return Sx(l,s),Qg(l,c),l},k1=(t,s,c,l,d)=>{const g=t.document.createRange();return g.setStart(s.dom,c),g.setEnd(l.dom,d),g},rp=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),O0=t=>{const s=t.getClientRects(),c=s.length>0?s[0]:t.getBoundingClientRect();return c.width>0||c.height>0?A.some(c).map(rp):A.none()},Jf=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?A.some(s).map(rp):A.none()},Di=K.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),kC=(t,s,c)=>s(ve.fromDom(c.startContainer),c.startOffset,ve.fromDom(c.endContainer),c.endOffset),x_=(t,s)=>s.match({domRange:c=>({ltr:W(c),rtl:A.none}),relative:(c,l)=>({ltr:Ye(()=>Xf(t,c,l)),rtl:Ye(()=>A.some(Xf(t,l,c)))}),exact:(c,l,d,g)=>({ltr:Ye(()=>k1(t,c,l,d,g)),rtl:Ye(()=>A.some(k1(t,d,g,c,l)))})}),cp=(t,s)=>{const c=s.ltr();return c.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>Di.rtl(ve.fromDom(d.endContainer),d.endOffset,ve.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>kC(t,Di.ltr,c)):kC(t,Di.ltr,c)},xx=(t,s)=>{const c=x_(t,s);return cp(t,c)},ap=(t,s)=>xx(t,s).match({ltr:(l,d,g,h)=>{const C=t.document.createRange();return C.setStart(l.dom,d),C.setEnd(g.dom,h),C},rtl:(l,d,g,h)=>{const C=t.document.createRange();return C.setStart(g.dom,h),C.setEnd(l.dom,d),C}});Di.ltr,Di.rtl;const lp=(t,s,c)=>io(bi(t,c),s),Ra=(t,s)=>od(s,t),D0=(t,s,c,l)=>{const g=mc(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(c.dom,l),g},_1=(t,s,c,l)=>{const d=D0(t,s,c,l),g=es(t,c)&&s===l;return d.collapsed&&!g},R0=t=>A.from(t.getSelection()),Tx=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),c=t.getRangeAt(t.rangeCount-1);return A.some(T1.create(ve.fromDom(s.startContainer),s.startOffset,ve.fromDom(c.endContainer),c.endOffset))}else return A.none()},_C=t=>{if(t.anchorNode===null||t.focusNode===null)return Tx(t);{const s=ve.fromDom(t.anchorNode),c=ve.fromDom(t.focusNode);return _1(s,t.anchorOffset,c,t.focusOffset)?A.some(T1.create(s,t.anchorOffset,c,t.focusOffset)):Tx(t)}},N0=t=>R0(t).filter(s=>s.rangeCount>0).bind(_C),Mc=(t,s)=>{const c=ap(t,s);return O0(c)},M0=(t,s)=>{const c=ap(t,s);return Jf(c)},Ex=((t,s)=>{const c=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return l(g).getOr("")},l=g=>t(g)?A.from(g.dom.nodeValue):A.none();return{get:c,getOption:l,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(No,"text"),AC=t=>Ex.get(t),Gm=(t,s)=>({element:t,offset:s}),A1=(t,s)=>{const c=la(t);if(c.length===0)return Gm(t,s);if(s<c.length)return Gm(c[s],0);{const l=c[c.length-1],d=No(l)?AC(l).length:la(l).length;return Gm(l,d)}},ip=(t,s)=>No(t)?Gm(t,s):A1(t,s),B0=t=>t.foffset!==void 0,P0=(t,s)=>s.getSelection.getOrThunk(()=>()=>N0(t))().map(l=>{if(B0(l)){const d=ip(l.start,l.soffset),g=ip(l.finish,l.foffset);return Yf.range(d.element,d.offset,g.element,g.offset)}else return l}),Qf=(t,s,c)=>{const l=Cc(s.root).dom,d=fx(t,c,s),g=P0(l,s).bind(S=>{if(B0(S))return M0(l,Yf.exactFromRange(S)).orThunk(()=>{const O=ve.fromText(gx);qi(S.start,O);const B=Mc(l,Yf.exact(O,0,O,1));return qa(O),B}).bind(O=>_0(O.left,O.top,O.width,O.height));{const k=bo(S,B=>B.dom.getBoundingClientRect()),O={left:Math.min(k.firstCell.left,k.lastCell.left),right:Math.max(k.firstCell.right,k.lastCell.right),top:Math.min(k.firstCell.top,k.lastCell.top),bottom:Math.max(k.firstCell.bottom,k.lastCell.bottom)};return _0(O.left,O.top,O.right-O.left,O.bottom-O.top)}}),C=P0(l,s).bind(S=>B0(S)?Dn(S.start)?A.some(S.start):aa(S.start):A.some(S.firstCell)).getOr(t.element);return xC(g,d,s,c,C)};var T_=[os("getSelection"),tt("root"),os("bubble"),qf(),_e("overrides",{}),_e("showAbove",!1),Gs("placement",Qf)];const di="link-layout",wd=t=>t.x+t.width,OC=(t,s)=>t.x-s.width,kx=(t,s)=>t.y-s.height+t.height,_x=t=>t.y,DC=(t,s,c)=>ha(wd(t),_x(t),c.southeast(),l0(),"southeast",Da(t,{left:0,top:2}),di),RC=(t,s,c)=>ha(OC(t,s),_x(t),c.southwest(),iC(),"southwest",Da(t,{right:1,top:2}),di),Ax=(t,s,c)=>ha(wd(t),kx(t,s),c.northeast(),i0(),"northeast",Da(t,{left:0,bottom:3}),di),Ox=(t,s,c)=>ha(OC(t,s),kx(t,s),c.northwest(),Qt(),"northwest",Da(t,{right:1,bottom:3}),di),jl=()=>[DC,RC,Ax,Ox],eh=()=>[RC,DC,Ox,Ax],NC=(t,s,c)=>{const l=jm(c,s.item.element),d=S1(t.element,s,jl(),eh(),jl(),eh(),A.none());return A.some(x0({anchorBox:l,bubble:S0(),overrides:s.overrides,layouts:d}))};var eg=[tt("item"),qf(),_e("overrides",{}),Gs("placement",NC)],Gl=Vc("type",{selection:T_,node:C_,hotspot:ix,submenu:eg,makeshift:ux});const mi=[Hl("classes",Wt),Vl("mode","all",["all","layout","placement"])],Ua=[_e("useFixed",gt),os("getBounds")],cu=[ls("anchor",Gl),lr("transition",mi)],$0=()=>{const t=document.documentElement;return C1(0,0,t.clientWidth,t.clientHeight)},au=t=>{const s=wc(t.element),c=t.element.dom.getBoundingClientRect();return y1(s.left,s.top,c.width,c.height)},th=(t,s,c,l,d,g)=>{const h=a_(s.anchorBox,t);return CC(h,l.element,s.bubble,s.layouts,d,c,s.overrides,g)},E_=(t,s,c,l,d)=>{const g=A.none();MC(t,s,c,l,d,g)},MC=(t,s,c,l,d,g)=>{const h=Fa("placement.info",Pn(cu),d),C=h.anchor,S=l.element,k=c.get(l.uid);Gf(()=>{ot(S,"position","fixed");const O=Us(S,"visibility");ot(S,"visibility","hidden");const B=s.useFixed()?$0():au(t);C.placement(t,C,B).each(z=>{const V=g.orThunk(()=>s.getBounds.map(Bo)),X=th(B,z,V,l,k,h.transition);c.set(l.uid,X)}),O.fold(()=>{co(S,"visibility")},z=>{ot(S,"visibility",z)}),Us(S,"left").isNone()&&Us(S,"top").isNone()&&Us(S,"right").isNone()&&Us(S,"bottom").isNone()&&br(Us(S,"position"),"fixed")&&co(S,"position")},S)};var Dx=Object.freeze({__proto__:null,position:E_,positionWithinBounds:MC,getMode:(t,s,c)=>s.useFixed()?"fixed":"absolute",reset:(t,s,c,l)=>{const d=l.element;et(["position","left","right","top","bottom"],g=>co(d,g)),i_(d),c.clear(l.uid)}}),I0=Object.freeze({__proto__:null,init:()=>{let t={};return si({readState:()=>t,clear:d=>{Xn(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>xt(t,d)})}});const tl=Oa({fields:Ua,name:"positioning",active:jS,apis:Dx,state:I0}),up=t=>t.getSystem().isConnected(),dp=t=>{xo(t,su());const s=t.components();et(s,dp)},O1=t=>{const s=t.components();et(s,O1),xo(t,yl())},BC=(t,s)=>{t.getSystem().addToWorld(s),Yt(t.element)&&O1(s)},D1=t=>{dp(t),t.getSystem().removeFromWorld(t)},R1=(t,s)=>{Pa(t.element,s.element)},nh=t=>{et(t.components(),s=>qa(s.element)),Oc(t.element),t.syncComponents()},PC=(t,s,c)=>{const l=t.components();nh(t);const d=c(s),g=Bt(l,d);et(g,h=>{dp(h),t.getSystem().removeFromWorld(h)}),et(d,h=>{up(h)?R1(t,h):(t.getSystem().addToWorld(h),R1(t,h),Yt(t.element)&&O1(h))}),t.syncComponents()},L0=(t,s,c)=>{const l=t.components(),d=ie(s,C=>kS(C).toArray());et(l,C=>{Jn(d,C)||D1(C)});const g=c(s),h=Bt(l,g);et(h,C=>{up(C)&&D1(C)}),et(g,C=>{up(C)||BC(t,C)}),t.syncComponents()},Iu=(t,s)=>{Rx(t,s,Pa)},Rx=(t,s,c)=>{t.getSystem().addToWorld(s),c(t.element,s.element),Yt(t.element)&&O1(s),t.syncComponents()},Nx=t=>{dp(t),qa(t.element),t.getSystem().removeFromWorld(t)},qm=t=>{const s=Ac(t.element).bind(c=>t.getSystem().getByDom(c).toOptional());Nx(t),s.each(c=>{c.syncComponents()})},Ri=t=>{const s=t.components();et(s,Nx),Oc(t.element),t.syncComponents()},N1=(t,s)=>{tg(t,s,Pa)},oh=(t,s)=>{tg(t,s,km)},tg=(t,s,c)=>{c(t,s.element);const l=la(s.element);et(l,d=>{s.getByDom(d).each(O1)})},$C=t=>{const s=la(t.element);et(s,c=>{t.getByDom(c).each(dp)}),qa(t.element)},H0=(t,s,c,l)=>{c.get().each(h=>{Ri(t)});const d=s.getAttachPoint(t);Iu(d,t);const g=t.getSystem().build(l);return Iu(t,g),c.set(g),g},Mx=(t,s,c,l)=>{const d=H0(t,s,c,l);return s.onOpen(t,d),d},A_=(t,s,c,l)=>c.get().map(()=>H0(t,s,c,l)),O_=(t,s,c,l,d)=>{IC(t,s),Mx(t,s,c,l),d(),V0(t,s)},sh=(t,s,c)=>{c.get().each(l=>{Ri(t),qm(t),s.onClose(t,l),c.clear()})},FC=(t,s,c)=>c.isOpen(),mp=(t,s,c,l)=>FC(t,s,c)&&c.get().exists(d=>s.isPartOf(t,d,l)),M1=(t,s,c)=>c.get(),D_=(t,s,c,l)=>{Us(t.element,s).fold(()=>{P(t.element,c)},d=>{Ut(t.element,c,d)}),ot(t.element,s,l)},z0=(t,s,c)=>{Vr(t.element,c).fold(()=>co(t.element,s),l=>ot(t.element,s,l))},IC=(t,s,c)=>{const l=s.getAttachPoint(t);ot(t.element,"position",tl.getMode(l)),D_(t,"visibility",s.cloakVisibilityAttr,"hidden")},LC=t=>bs(["top","left","right","bottom"],s=>Us(t,s).isSome()),V0=(t,s,c)=>{LC(t.element)||co(t.element,"position"),z0(t,"visibility",s.cloakVisibilityAttr)};var HC=Object.freeze({__proto__:null,cloak:IC,decloak:V0,open:Mx,openWhileCloaked:O_,close:sh,isOpen:FC,isPartOf:mp,getState:M1,setContent:A_}),U0=Object.freeze({__proto__:null,events:(t,s)=>dr([st(e1(),(c,l)=>{sh(c,t,s)})])}),W0=[Zo("onOpen"),Zo("onClose"),tt("isPartOf"),tt("getAttachPoint"),_e("cloakVisibilityAttr","data-precloak-visibility")],j0=Object.freeze({__proto__:null,init:()=>{const t=Es(),s=W("not-implemented");return si({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Xo=Oa({fields:W0,name:"sandboxing",active:U0,apis:HC,state:j0}),cm=W("dismiss.popups"),rh=W("reposition.popups"),G0=W("mouse.released"),q0=Ya([_e("isExtraPart",gt),lr("fireEventInstead",[_e("event",Ef())])]),ng=t=>{const s=Fa("Dismissal",q0,t);return{[cm()]:{schema:Ya([tt("target")]),onReceive:(c,l)=>{Xo.isOpen(c)&&(Xo.isPartOf(c,l.target)||s.isExtraPart(c,l.target)||s.fireEventInstead.fold(()=>Xo.close(c),g=>xo(c,g.event)))}}}},K0=Ya([lr("fireEventInstead",[_e("event",by())]),Ll("doReposition")]),zC=t=>{const s=Fa("Reposition",K0,t);return{[rh()]:{onReceive:c=>{Xo.isOpen(c)&&s.fireEventInstead.fold(()=>s.doReposition(c),l=>xo(c,l.event))}}}},VC=(t,s,c)=>{s.store.manager.onLoad(t,s,c)},UC=(t,s,c)=>{s.store.manager.onUnload(t,s,c)};var B1=Object.freeze({__proto__:null,onLoad:VC,onUnload:UC,setValue:(t,s,c,l)=>{s.store.manager.setValue(t,s,c,l)},getValue:(t,s,c)=>s.store.manager.getValue(t,s,c),getState:(t,s,c)=>c}),Y0=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.resetOnDom?[Cr((l,d)=>{VC(l,t,s)}),Qd((l,d)=>{UC(l,t,s)})]:[ky(t,s,VC)];return dr(c)}});const X0=()=>{const t=hn(null),s=()=>({mode:"memory",value:t.get()}),c=()=>t.get()===null,l=()=>{t.set(null)};return si({set:t.set,get:t.get,isNotSet:c,clear:l,readState:s})},ZC=()=>si({readState:oe}),Px=()=>{const t=hn({}),s=hn({});return si({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>xt(t.get(),h).orThunk(()=>xt(s.get(),h)),update:h=>{const C=t.get(),S=s.get(),k={},O={};et(h,B=>{k[B.value]=B,xt(B,"meta").each(z=>{xt(z,"text").each(V=>{O[V]=B})})}),t.set({...C,...k}),s.set({...S,...O})},clear:()=>{t.set({}),s.set({})}})};var J0=Object.freeze({__proto__:null,memory:X0,dataset:Px,manual:ZC,init:t=>t.store.manager.state(t)});const $x=(t,s,c,l)=>{const d=s.store;c.update([l]),d.setValue(t,l),s.onSetValue(t,l)},lu=(t,s,c)=>{const l=s.store,d=l.getDataKey(t);return c.lookup(d).getOrThunk(()=>l.getFallbackEntry(d))},pa=(t,s,c)=>{s.store.initialValue.each(d=>{$x(t,s,c,d)})},Xm=(t,s,c)=>{c.clear()};var jC=[os("initialValue"),tt("getFallbackEntry"),tt("getDataKey"),tt("setValue"),Gs("manager",{setValue:$x,getValue:lu,onLoad:pa,onUnload:Xm,state:Px})];const R_=(t,s,c)=>s.store.getValue(t),Q0=(t,s,c,l)=>{s.store.setValue(t,l),s.onSetValue(t,l)},GC=(t,s,c)=>{s.store.initialValue.each(l=>{s.store.setValue(t,l)})};var gp=[tt("getValue"),_e("setValue",oe),os("initialValue"),Gs("manager",{setValue:Q0,getValue:R_,onLoad:GC,onUnload:oe,state:dl.init})];const Fx=(t,s,c,l)=>{c.set(l),s.onSetValue(t,l)},N_=(t,s,c)=>c.get(),fR=(t,s,c)=>{s.store.initialValue.each(l=>{c.isNotSet()&&c.set(l)})},M_=(t,s,c)=>{c.clear()};var Ix=[os("initialValue"),Gs("manager",{setValue:Fx,getValue:N_,onLoad:fR,onUnload:M_,state:X0})],Lx=[zl("store",{mode:"memory"},Vc("mode",{memory:Ix,manual:gp,dataset:jC})),Zo("onSetValue"),_e("resetOnDom",!1)];const qt=Oa({fields:Lx,name:"representing",active:Y0,apis:B1,extra:{setValueFrom:(t,s)=>{const c=qt.getValue(s);qt.setValue(t,c)}},state:J0}),ba=(t,s)=>_(t,{},Pe(s,c=>my(c.name(),"Cannot configure "+c.name()+" for "+t)).concat([as("dump",Rt)])),P1=t=>t.dump,va=(t,s)=>({...Tt(s),...t.dump}),iu={field:ba,augment:va,get:P1},qC="placeholder",ah=K.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),$1=t=>Eo(t,"uiType"),lh=(t,s,c,l)=>t.exists(d=>d!==c.owner)?ah.single(!0,W(c)):xt(l,c.name).fold(()=>{throw new Error("Unknown placeholder component: "+c.name+`
Known: [`+gs(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(c,null,2))},d=>d.replace()),F1=(t,s,c,l)=>$1(c)&&c.uiType===qC?lh(t,s,c,l):ah.single(!1,W(c)),Hx=(t,s,c,l)=>F1(t,s,c,l).fold((g,h)=>{const C=$1(c)?h(s,c.config,c.validated):h(s),S=xt(C,"components").getOr([]),k=ie(S,O=>Hx(t,s,O,l));return[{...C,components:k}]},(g,h)=>{if($1(c)){const C=h(s,c.config,c.validated);return c.validated.preprocess.getOr(Rt)(C)}else return h(s)}),B_=(t,s,c,l)=>ie(c,d=>Hx(t,s,d,l)),P_=(t,s)=>{let c=!1;const l=()=>c,d=()=>{if(c)throw new Error("Trying to use the same placeholder more than once: "+t);return c=!0,s},g=()=>s.fold((h,C)=>h,(h,C)=>h);return{name:W(t),required:g,used:l,replace:d}},hp=(t,s,c,l)=>{const d=bo(l,(h,C)=>P_(C,h)),g=B_(t,s,c,d);return xs(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},ih=ah.single,KC=ah.multiple,YC=W(qC),fi=K.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),am=_e("factory",{sketch:Rt}),ev=_e("schema",[]),Lu=tt("name"),tv=Rc("pname","pname",ko(t=>"<alloy."+Jt(t.name)+">"),xi()),$_=as("schema",()=>[os("preprocess")]),nv=_e("defaults",W({})),ov=_e("overrides",W({})),F_=Pn([am,ev,Lu,tv,nv,ov]),I_=Pn([am,ev,Lu,nv,ov]),L_=Pn([am,ev,Lu,tv,nv,ov]),H_=Pn([am,$_,Lu,tt("unit"),tv,nv,ov]),sv=t=>t.fold(A.some,A.none,A.some,A.some),zx=t=>{const s=c=>c.name;return t.fold(s,s,s,s)},z_=t=>t.fold(Rt,Rt,Rt,Rt),rv=(t,s)=>c=>{const l=Fa("Converting part type",s,c);return t(l)},Wa=rv(fi.required,F_),uu=rv(fi.external,I_),Ni=rv(fi.optional,L_),cv=rv(fi.group,H_),I1=W("entirety");var gR=Object.freeze({__proto__:null,required:Wa,external:uu,optional:Ni,group:cv,asNamedPart:sv,name:zx,asCommon:z_,original:I1});const L1=(t,s,c,l)=>tr(s.defaults(t,c,l),c,{uid:t.partUids[s.name]},s.overrides(t,c,l)),V_=(t,s,c)=>{const l={},d={};return et(c,g=>{g.fold(h=>{l[h.pname]=ih(!0,(C,S,k)=>h.factory.sketch(L1(C,h,S,k)))},h=>{const C=s.parts[h.name];d[h.name]=W(h.factory.sketch(L1(s,h,C[I1()]),C))},h=>{l[h.pname]=ih(!1,(C,S,k)=>h.factory.sketch(L1(C,h,S,k)))},h=>{l[h.pname]=KC(!0,(C,S,k)=>{const O=C[h.name];return Pe(O,B=>h.factory.sketch(tr(h.defaults(C,B,k),B,h.overrides(C,B))))})})}),{internals:W(l),externals:W(d)}},Vx=(t,s)=>{const c={};return et(s,l=>{sv(l).each(d=>{const g=Ux(t,d.pname);c[d.name]=h=>{const C=Fa("Part: "+d.name+" in "+t,Pn(d.schema),h);return{...g,config:h,validated:C}}})}),c},Ux=(t,s)=>({uiType:YC(),owner:t,name:s}),Wx=(t,s,c)=>({uiType:YC(),owner:t,name:s,config:c,validated:{}}),U_=t=>ie(t,s=>s.fold(A.none,A.some,A.none,A.none).map(c=>dd(c.name,c.schema.concat([Ff(I1())]))).toArray()),Zx=t=>Pe(t,zx),av=(t,s,c)=>V_(t,s,c),jx=(t,s,c)=>hp(A.some(t),s,s.components,c),Ct=(t,s,c)=>{const l=s.partUids[c];return t.getSystem().getByUid(l).toOptional()},Mi=(t,s,c)=>Ct(t,s,c).getOrDie("Could not find part: "+c),Gx=(t,s,c)=>{const l={},d=s.partUids,g=t.getSystem();return et(c,h=>{l[h]=W(g.getByUid(d[h]))}),l},XC=(t,s)=>{const c=t.getSystem();return bo(s.partUids,(l,d)=>W(c.getByUid(l)))},H1=t=>gs(t.partUids),uh=(t,s,c)=>{const l={},d=s.partUids,g=t.getSystem();return et(c,h=>{l[h]=W(g.getByUid(d[h]).getOrDie())}),l},JC=(t,s)=>{const c=Zx(s);return vs(Pe(c,l=>({key:l,value:t+"-"+l})))},z1=t=>Rc("partUids","partUids",vf(s=>JC(s.uid,t)),xi());var qx=Object.freeze({__proto__:null,generate:Vx,generateOne:Wx,schemas:U_,names:Zx,substitutes:av,components:jx,defaultUids:JC,defaultUidsSchema:z1,getAllParts:XC,getAllPartNames:H1,getPart:Ct,getPartOrDie:Mi,getParts:Gx,getPartsOrDie:uh});const W_=(t,s)=>(t.length>0?[dd("parts",t)]:[]).concat([tt("uid"),_e("dom",{}),_e("components",[]),Ff("originalSpec"),_e("debug.sketcher",{})]).concat(s),QC=(t,s,c,l,d)=>{const g=W_(l,d);return Fa(t+" [SpecSchema]",Ya(g.concat(s)),c)},V1=(t,s,c,l)=>{const d=Yx(l),g=QC(t,s,d,[],[]);return c(g,d)},og=(t,s,c,l,d)=>{const g=Yx(d),h=U_(c),C=z1(c),S=QC(t,s,g,h,[C]),k=av(t,S,c),O=jx(t,S,k.internals());return l(S,O,g,k.externals())},Kx=t=>Eo(t,"uid"),Yx=t=>Kx(t)?t:{...t,uid:h1("uid")},Z_=t=>t.uid!==void 0,e2=Ya([tt("name"),tt("factory"),tt("configFields"),_e("apis",{}),_e("extraApis",{})]),j_=Ya([tt("name"),tt("factory"),tt("configFields"),tt("partFields"),_e("apis",{}),_e("extraApis",{})]),gi=t=>{const s=Fa("Sketcher for "+t.name,e2,t),c=g=>V1(s.name,s.configFields,s.factory,g),l=bo(s.apis,Xb),d=bo(s.extraApis,(g,h)=>Uh(g,h));return{name:s.name,configFields:s.configFields,sketch:c,...l,...d}},ml=t=>{const s=Fa("Sketcher for "+t.name,j_,t),c=h=>og(s.name,s.configFields,s.partFields,s.factory,h),l=Vx(s.name,s.partFields),d=bo(s.apis,Xb),g=bo(s.extraApis,(h,C)=>Uh(h,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:c,parts:l,...d,...g}},pp=t=>Yr("input")(t)&&gn(t,"type")!=="radio"||Yr("textarea")(t);var G_=Object.freeze({__proto__:null,getCurrent:(t,s,c)=>s.find(t)});const t2=[tt("find")],Jo=Oa({fields:t2,name:"composing",apis:G_}),q_=["input","button","textarea","select"],K_=(t,s,c)=>{(s.disabled()?U1:n2)(t,s)},Xx=(t,s)=>s.useNative===!0&&Jn(q_,cs(t.element)),pR=t=>al(t.element,"disabled"),lm=t=>{Ut(t.element,"disabled","disabled")},lv=t=>{P(t.element,"disabled")},Y_=t=>gn(t.element,"aria-disabled")==="true",X_=t=>{Ut(t.element,"aria-disabled","true")},Jx=t=>{Ut(t.element,"aria-disabled","false")},U1=(t,s,c)=>{s.disableClass.each(d=>{mr(t.element,d)}),(Xx(t,s)?lm:X_)(t),s.onDisabled(t)},n2=(t,s,c)=>{s.disableClass.each(d=>{Zr(t.element,d)}),(Xx(t,s)?lv:Jx)(t),s.onEnabled(t)},Qx=(t,s)=>Xx(t,s)?pR(t):Y_(t);var bp=Object.freeze({__proto__:null,enable:n2,disable:U1,isDisabled:Qx,onLoad:K_,set:(t,s,c,l)=>{(l?U1:n2)(t,s)}}),eT=Object.freeze({__proto__:null,exhibit:(t,s)=>oi({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>dr([cS(ou(),(c,l)=>Qx(c,t)),ky(t,s,K_)])}),J_=[Wr("disabled",gt),_e("useNative",!0),os("disableClass"),Zo("onDisabled"),Zo("onEnabled")];const i=Oa({fields:J_,name:"disabling",active:eT,apis:bp}),m=(t,s,c,l)=>{const d=Ra(t.element,"."+s.highlightClass);et(d,g=>{bs(l,C=>es(C.element,g))||(Zr(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),xo(C,Lg())}))})},p=(t,s,c)=>m(t,s,c,[]),v=(t,s,c,l)=>{he(t,s,c,l)&&(Zr(l.element,s.highlightClass),s.onDehighlight(t,l),xo(l,Lg()))},T=(t,s,c,l)=>{m(t,s,c,[l]),he(t,s,c,l)||(mr(l.element,s.highlightClass),s.onHighlight(t,l),xo(l,kf()))},D=(t,s,c)=>{Ht(t,s).each(l=>{T(t,s,c,l)})},I=(t,s,c)=>{Ft(t,s).each(l=>{T(t,s,c,l)})},Z=(t,s,c,l)=>{St(t,s,c,l).fold(d=>{throw d},d=>{T(t,s,c,d)})},Q=(t,s,c,l)=>{const d=kt(t,s);xe(d,l).each(h=>{T(t,s,c,h)})},he=(t,s,c,l)=>ri(l.element,s.highlightClass),De=(t,s,c)=>Ar(t.element,"."+s.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),St=(t,s,c,l)=>{const d=Ra(t.element,"."+s.itemClass);return A.from(d[l]).fold(()=>uo.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},Ht=(t,s,c)=>Ar(t.element,"."+s.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),Ft=(t,s,c)=>{const l=Ra(t.element,"."+s.itemClass);return(l.length>0?A.some(l[l.length-1]):A.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Dt=(t,s,c,l)=>{const d=Ra(t.element,"."+s.itemClass);return Re(d,h=>ri(h,s.highlightClass)).bind(h=>{const C=Kg(h,l,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},an=(t,s,c)=>Dt(t,s,c,-1),ht=(t,s,c)=>Dt(t,s,c,1),kt=(t,s,c)=>{const l=Ra(t.element,"."+s.itemClass);return vc(Pe(l,d=>t.getSystem().getByDom(d).toOptional()))};var In=Object.freeze({__proto__:null,dehighlightAll:p,dehighlight:v,highlight:T,highlightFirst:D,highlightLast:I,highlightAt:Z,highlightBy:Q,isHighlighted:he,getHighlighted:De,getFirst:Ht,getLast:Ft,getPrevious:an,getNext:ht,getCandidates:kt}),qn=[tt("highlightClass"),tt("itemClass"),Zo("onHighlight"),Zo("onDehighlight")];const bn=Oa({fields:qn,name:"highlighting",apis:In}),Mr=[8],Ls=[9],cc=[13],Bi=[27],Za=[32],dh=[37],mh=[38],Rs=[39],ya=[40],_l=(t,s,c)=>{const l=Un(t.slice(0,s)),d=Un(t.slice(s+1));return xe(l.concat(d),c)},Hu=(t,s,c)=>{const l=Un(t.slice(0,s));return xe(l,c)},Pi=(t,s,c)=>{const l=t.slice(0,s),d=t.slice(s+1);return xe(d.concat(l),c)},vp=(t,s,c)=>{const l=t.slice(s+1);return xe(l,c)},go=t=>s=>{const c=s.raw;return Jn(t,c.which)},$i=t=>s=>_n(t,c=>c(s)),zu=t=>t.raw.shiftKey===!0,im=t=>t.raw.ctrlKey===!0,Gc=Ne(zu),ss=(t,s)=>({matches:t,classification:s}),s2=(t,s)=>xe(t,l=>l.matches(s)).map(l=>l.classification),r2=(t,s,c)=>{s.exists(d=>c.exists(g=>es(g,d)))||An(t,Ig(),{prevFocus:s,newFocus:c})},iv=()=>{const t=c=>El(c.element);return{get:t,set:(c,l)=>{const d=t(c);c.getSystem().triggerFocus(l,c.element);const g=t(c);r2(c,d,g)}}},tT=()=>{const t=c=>bn.getHighlighted(c).map(l=>l.element);return{get:t,set:(c,l)=>{const d=t(c);c.getSystem().getByDom(l).fold(oe,h=>{bn.highlight(c,h)});const g=t(c);r2(c,d,g)}}};var Jm;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Jm||(Jm={}));const fh=(t,s,c,l,d)=>{const g=()=>t.concat([_e("focusManager",iv()),zl("focusInside","onFocus",Mg(k=>Jn(["onFocus","onEnterOrSpace","onApi"],k)?uo.value(k):uo.error("Invalid value for focusInside"))),Gs("handler",S),Gs("state",s),Gs("sendFocusIn",d)]),h=(k,O,B,z,V)=>{const X=B(k,O,z,V);return s2(X,O.event).bind(te=>te(k,O,z,V))},S={schema:g,processKey:h,toEvents:(k,O)=>{const B=k.focusInside!==Jm.OnFocusMode?A.none():d(k).map(X=>st($m(),(te,ke)=>{X(te,k,O),ke.stop()})),z=(X,te)=>{const ke=go(Za.concat(cc))(te.event);k.focusInside===Jm.OnEnterOrSpaceMode&&ke&&Nu(X,te)&&d(k).each(ae=>{ae(X,k,O),te.stop()})},V=[st(Mu(),(X,te)=>{h(X,te,c,k,O).fold(()=>{z(X,te)},ke=>{te.stop()})}),st(Jp(),(X,te)=>{h(X,te,l,k,O).each(ke=>{te.stop()})})];return dr(B.toArray().concat(V))}};return S},yp=t=>{const s=[os("onEscape"),os("onEnter"),_e("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),_e("firstTabstop",0),_e("useTabstopAt",$e),os("visibilitySelector")].concat([t]),c=(ae,Ce)=>{const we=ae.visibilitySelector.bind(Qe=>$u(Ce,Qe)).getOr(Ce);return $s(we)>0},l=(ae,Ce)=>{const we=Ra(ae.element,Ce.selector),Qe=io(we,We=>c(Ce,We));return A.from(Qe[Ce.firstTabstop])},d=(ae,Ce)=>Ce.focusManager.get(ae).bind(we=>$u(we,Ce.selector)),g=(ae,Ce)=>c(ae,Ce)&&ae.useTabstopAt(Ce),h=(ae,Ce,we)=>{l(ae,Ce).each(Qe=>{Ce.focusManager.set(ae,Qe)})},C=(ae,Ce,we,Qe,We)=>We(Ce,we,It=>g(Qe,It)).fold(()=>Qe.cyclic?A.some(!0):A.none(),It=>(Qe.focusManager.set(ae,It),A.some(!0))),S=(ae,Ce,we,Qe)=>{const We=Ra(ae.element,we.selector);return d(ae,we).bind(It=>Re(We,Xt(es,It)).bind(qe=>C(ae,We,qe,we,Qe)))},k=(ae,Ce,we)=>{const Qe=we.cyclic?_l:Hu;return S(ae,Ce,we,Qe)},O=(ae,Ce,we)=>{const Qe=we.cyclic?Pi:vp;return S(ae,Ce,we,Qe)},B=ae=>Ba(ae).bind(vi).exists(Ce=>es(Ce,ae)),z=(ae,Ce,we)=>d(ae,we).filter(Qe=>!we.useTabstopAt(Qe)).bind(Qe=>(B(Qe)?k:O)(ae,Ce,we)),V=(ae,Ce,we)=>we.onEnter.bind(Qe=>Qe(ae,Ce)),X=(ae,Ce,we)=>we.onEscape.bind(Qe=>Qe(ae,Ce)),te=W([ss($i([zu,go(Ls)]),k),ss(go(Ls),O),ss($i([Gc,go(cc)]),V)]),ke=W([ss(go(Bi),X),ss(go(Ls),z)]);return fh(s,dl.init,te,ke,()=>A.some(h))};var XI=yp(as("cyclic",gt)),JI=yp(as("cyclic",$e));const c2=(t,s,c)=>(o1(t,c,ou()),A.some(!0)),uv=(t,s,c)=>pp(c)&&go(Za)(s.event)?A.none():c2(t,s,c),W1=(t,s)=>A.some(!0),Q_=[_e("execute",uv),_e("useSpace",!1),_e("useEnter",!0),_e("useControlEnter",!1),_e("useDown",!1)],yR=(t,s,c)=>c.execute(t,s,t.element),CR=(t,s,c,l)=>{const d=c.useSpace&&!pp(t.element)?Za:[],g=c.useEnter?cc:[],h=c.useDown?ya:[],C=d.concat(g).concat(h);return[ss(go(C),yR)].concat(c.useControlEnter?[ss($i([im,go(cc)]),yR)]:[])},QI=(t,s,c,l)=>c.useSpace&&!pp(t.element)?[ss(go(Za),W1)]:[];var wR=fh(Q_,dl.init,CR,QI,()=>A.none());const eA=()=>{const t=Es();return si({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var e6=Object.freeze({__proto__:null,flatgrid:eA,init:t=>t.state(t)});const SR=t=>(s,c,l,d)=>{const g=t(s.element);return a2(g,s,c,l,d)},tA=(t,s)=>{const c=Va(t,s);return SR(c)},nA=(t,s)=>{const c=Va(s,t);return SR(c)},oA=t=>(s,c,l,d)=>a2(t,s,c,l,d),a2=(t,s,c,l,d)=>l.focusManager.get(s).bind(h=>t(s.element,h,l,d)).map(h=>(l.focusManager.set(s,h),!0)),nT=oA,xR=oA,sA=oA,TR=t=>t.offsetWidth<=0&&t.offsetHeight<=0,ER=t=>!TR(t.dom),t6=(t,s)=>Re(t,s).map(c=>({index:c,candidates:t})),Vu=(t,s,c)=>{const l=h=>es(h,s),d=Ra(t,c),g=io(d,ER);return t6(g,l)},kR=(t,s)=>Re(t,c=>es(s,c)),_R=(t,s,c,l)=>{const d=Math.floor(s/c),g=s%c;return l(d,g).bind(h=>{const C=h.row*c+h.column;return C>=0&&C<t.length?A.some(t[C]):A.none()})},AR=(t,s,c,l,d)=>_R(t,s,l,(g,h)=>{const S=g===c-1?t.length-g*l:l,k=Kg(h,d,0,S-1);return A.some({row:g,column:k})}),OR=(t,s,c,l,d)=>_R(t,s,l,(g,h)=>{const C=Kg(g,d,0,c-1),k=C===c-1?t.length-C*l:l,O=ii(h,0,k-1);return A.some({row:C,column:O})}),n6=(t,s,c,l)=>AR(t,s,c,l,1),dv=(t,s,c,l)=>AR(t,s,c,l,-1),rA=(t,s,c,l)=>OR(t,s,c,l,-1),o6=(t,s,c,l)=>OR(t,s,c,l,1),cA=[tt("selector"),_e("execute",uv),Wl("onEscape"),_e("captureTab",!1),Kb()],oT=(t,s,c)=>{Ar(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},aA=(t,s)=>s.focusManager.get(t).bind(c=>$u(c,s.selector)),s6=(t,s,c,l)=>aA(t,c).bind(d=>c.execute(t,s,d)),sT=t=>(s,c,l,d)=>Vu(s,c,l.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(l.initSize.numRows),d.getNumColumns().getOr(l.initSize.numColumns))),DR=(t,s,c)=>c.captureTab?A.some(!0):A.none(),r6=(t,s,c)=>c.onEscape(t,s),RR=sT(dv),NR=sT(n6),c6=sT(rA),MR=sT(o6),rT=W([ss(go(dh),tA(RR,NR)),ss(go(Rs),nA(RR,NR)),ss(go(mh),nT(c6)),ss(go(ya),xR(MR)),ss($i([zu,go(Ls)]),DR),ss($i([Gc,go(Ls)]),DR),ss(go(Za.concat(cc)),s6)]),a6=W([ss(go(Bi),r6),ss(go(Za),W1)]);var l6=fh(cA,eA,rT,a6,()=>A.some(oT));const BR=(t,s,c,l,d)=>{const g=C=>cs(C)==="button"&&gn(C,"disabled")==="disabled",h=(C,S,k)=>d(C,S,l,0,k.length-1,k[S],O=>g(k[O])?h(C,O,k):A.from(k[O]));return Vu(t,c,s).bind(C=>{const S=C.index,k=C.candidates;return h(S,S,k)})},PR=(t,s,c,l)=>BR(t,s,c,l,(d,g,h,C,S,k,O)=>{const B=ii(g+h,C,S);return B===d?A.from(k):O(B)}),gh=(t,s,c,l)=>BR(t,s,c,l,(d,g,h,C,S,k,O)=>{const B=Kg(g,h,C,S);return B===d?A.none():O(B)}),$R=[tt("selector"),_e("getInitial",A.none),_e("execute",uv),Wl("onEscape"),_e("executeOnMove",!1),_e("allowVertical",!0),_e("allowHorizontal",!0),_e("cycles",!0)],i6=(t,s)=>s.focusManager.get(t).bind(c=>$u(c,s.selector)),l2=(t,s,c)=>i6(t,c).bind(l=>c.execute(t,s,l)),u6=(t,s,c)=>{s.getInitial(t).orThunk(()=>Ar(t.element,s.selector)).each(l=>{s.focusManager.set(t,l)})},lA=(t,s,c)=>(c.cycles?gh:PR)(t,c.selector,s,-1),iA=(t,s,c)=>(c.cycles?gh:PR)(t,c.selector,s,1),uA=t=>(s,c,l,d)=>t(s,c,l,d).bind(()=>l.executeOnMove?l2(s,c,l):A.some(!0)),FR=(t,s,c)=>c.onEscape(t,s),IR=(t,s,c,l)=>{const d=[...c.allowHorizontal?dh:[]].concat(c.allowVertical?mh:[]),g=[...c.allowHorizontal?Rs:[]].concat(c.allowVertical?ya:[]);return[ss(go(d),uA(tA(lA,iA))),ss(go(g),uA(nA(lA,iA))),ss(go(cc),l2),ss(go(Za),l2)]},d6=W([ss(go(Za),W1),ss(go(Bi),FR)]);var m6=fh($R,dl.init,IR,d6,()=>A.some(u6));const cT=(t,s,c)=>A.from(t[s]).bind(l=>A.from(l[c]).map(d=>({rowIndex:s,columnIndex:c,cell:d}))),aT=(t,s,c,l)=>{const g=t[s].length,h=Kg(c,l,0,g-1);return cT(t,s,h)},LR=(t,s,c,l)=>{const d=Kg(c,l,0,t.length-1),g=t[d].length,h=ii(s,0,g-1);return cT(t,d,h)},i2=(t,s,c,l)=>{const g=t[s].length,h=ii(c+l,0,g-1);return cT(t,s,h)},HR=(t,s,c,l)=>{const d=ii(c+l,0,t.length-1),g=t[d].length,h=ii(s,0,g-1);return cT(t,d,h)},zR=(t,s,c)=>aT(t,s,c,1),hi=(t,s,c)=>aT(t,s,c,-1),f6=(t,s,c)=>LR(t,c,s,-1),VR=(t,s,c)=>LR(t,c,s,1),UR=(t,s,c)=>i2(t,s,c,-1),g6=(t,s,c)=>i2(t,s,c,1),WR=(t,s,c)=>HR(t,c,s,-1),ZR=(t,s,c)=>HR(t,c,s,1),h6=[dd("selectors",[tt("row"),tt("cell")]),_e("cycles",!0),_e("previousSelector",A.none),_e("execute",uv)],p6=(t,s,c)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Ar(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},b6=(t,s,c)=>El(t.element).bind(l=>c.execute(t,s,l)),v6=(t,s)=>Pe(t,c=>Ra(c,s.selectors.cell)),u2=(t,s)=>(c,l,d)=>{const g=d.cycles?t:s;return $u(l,d.selectors.row).bind(h=>{const C=Ra(h,d.selectors.cell);return kR(C,l).bind(S=>{const k=Ra(c,d.selectors.row);return kR(k,h).bind(O=>{const B=v6(k,d);return g(B,O,S).map(z=>z.cell)})})})},jR=u2(hi,UR),GR=u2(zR,g6),qR=u2(f6,WR),KR=u2(VR,ZR),YR=W([ss(go(dh),tA(jR,GR)),ss(go(Rs),nA(jR,GR)),ss(go(mh),nT(qR)),ss(go(ya),xR(KR)),ss(go(Za.concat(cc)),b6)]),y6=W([ss(go(Za),W1)]);var C6=fh(h6,dl.init,YR,y6,()=>A.some(p6));const w6=[tt("selector"),_e("execute",uv),_e("moveOnTab",!1)],XR=(t,s,c)=>c.focusManager.get(t).bind(l=>c.execute(t,s,l)),JR=(t,s,c)=>{Ar(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},dA=(t,s,c)=>gh(t,c.selector,s,-1),hh=(t,s,c)=>gh(t,c.selector,s,1),QR=(t,s,c,l)=>c.moveOnTab?sA(dA)(t,s,c,l):A.none(),eN=(t,s,c,l)=>c.moveOnTab?sA(hh)(t,s,c,l):A.none(),tN=W([ss(go(mh),sA(dA)),ss(go(ya),sA(hh)),ss($i([zu,go(Ls)]),QR),ss($i([Gc,go(Ls)]),eN),ss(go(cc),XR),ss(go(Za),XR)]),S6=W([ss(go(Za),W1)]);var mv=fh(w6,dl.init,tN,S6,()=>A.some(JR));const x6=[Wl("onSpace"),Wl("onEnter"),Wl("onShiftEnter"),Wl("onLeft"),Wl("onRight"),Wl("onTab"),Wl("onShiftTab"),Wl("onUp"),Wl("onDown"),Wl("onEscape"),_e("stopSpaceKeyup",!1),os("focusIn")],T6=(t,s,c)=>[ss(go(Za),c.onSpace),ss($i([Gc,go(cc)]),c.onEnter),ss($i([zu,go(cc)]),c.onShiftEnter),ss($i([zu,go(Ls)]),c.onShiftTab),ss($i([Gc,go(Ls)]),c.onTab),ss(go(mh),c.onUp),ss(go(ya),c.onDown),ss(go(dh),c.onLeft),ss(go(Rs),c.onRight),ss(go(Za),c.onSpace)],nN=(t,s,c)=>[...c.stopSpaceKeyup?[ss(go(Za),W1)]:[],ss(go(Bi),c.onEscape)];var E6=fh(x6,dl.init,T6,nN,t=>t.focusIn);const k6=XI.schema(),_6=JI.schema(),oN=m6.schema(),mA=l6.schema(),fA=C6.schema(),A6=wR.schema(),Cp=mv.schema(),sN=E6.schema();var rN=Object.freeze({__proto__:null,acyclic:k6,cyclic:_6,flow:oN,flatgrid:mA,matrix:fA,execution:A6,menu:Cp,special:sN});const O6=t=>Pr(t,"setGridSize"),En=uS({branchKey:"mode",branches:rN,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,c)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,s,c)})},setGridSize:(t,s,c,l,d)=>{O6(c)&&c.setGridSize(l,d)}},state:e6}),fv=(t,s)=>{Gf(()=>{PC(t,s,()=>Pe(s,t.getSystem().build))},t.element)},gv=(t,s)=>{Gf(()=>{L0(t,s,()=>xl(t.element,s,t.getSystem().buildOrPatch))},t.element)},cN=(t,s,c,l)=>{D1(s);const d=eC(t.element,c,l,t.getSystem().buildOrPatch);BC(t,d),t.syncComponents()},d2=(t,s,c)=>{const l=t.getSystem().build(c);Rx(t,l,s)},wp=(t,s,c,l)=>{qm(s),d2(t,(d,g)=>Tg(d,g,c),l)},Sp=(t,s,c,l)=>(s.reuseDom?gv:fv)(t,l),D6=(t,s,c,l)=>{d2(t,Pa,l)},R6=(t,s,c,l)=>{d2(t,Ki,l)},aN=(t,s,c,l)=>{const d=um(t);xe(d,h=>es(l.element,h.element)).each(qm)},um=(t,s)=>t.components(),lT=(t,s,c,l,d)=>{const g=um(t);return A.from(g[l]).map(h=>(d.fold(()=>qm(h),C=>{(s.reuseDom?cN:wp)(t,h,l,C)}),h))};var lN=Object.freeze({__proto__:null,append:D6,prepend:R6,remove:aN,replaceAt:lT,replaceBy:(t,s,c,l,d)=>{const g=um(t);return Re(g,l).bind(h=>lT(t,s,c,h,d))},set:Sp,contents:um});const to=Oa({fields:[oc("reuseDom",!0)],name:"replacing",apis:lN}),iN=(t,s)=>{const c=dr(s);return Oa({fields:[tt("enabled")],name:t,active:{events:W(c)}})},ho=(t,s)=>{const c=iN(t,s);return{key:t,value:{config:{},me:c,configAsRaw:W({}),initialConfig:{},state:dl}}},gA=(t,s)=>{s.ignore||(Ai(t.element),s.onFocus(t))};var N6=Object.freeze({__proto__:null,focus:gA,blur:(t,s)=>{s.ignore||g0(t.element)},isFocused:t=>v1(t.element)}),iT=Object.freeze({__proto__:null,exhibit:(t,s)=>{const c=s.ignore?{}:{attributes:{tabindex:"-1"}};return oi(c)},events:t=>dr([st($m(),(s,c)=>{gA(s,t),c.stop()})].concat(t.stopMousedown?[st(Qr(),(s,c)=>{c.event.prevent()})]:[]))}),dN=[Zo("onFocus"),_e("stopMousedown",!1),_e("ignore",!1)];const Kn=Oa({fields:dN,name:"focusing",active:iT,apis:N6}),mN=t=>({init:()=>{const c=hn(t);return{get:()=>c.get(),set:C=>c.set(C),clear:()=>c.set(t),readState:()=>c.get()}}}),fN=(t,s,c)=>{const l=s.aria;l.update(t,l,c.get())},gN=(t,s,c)=>{s.toggleClass.each(l=>{c.get()?mr(t.element,l):Zr(t.element,l)})},hv=(t,s,c,l)=>{const d=c.get();c.set(l),gN(t,s,c),fN(t,s,c),d!==l&&s.onToggled(t,l)},hN=(t,s,c)=>{hv(t,s,c,!c.get())},pA=(t,s,c)=>{hv(t,s,c,!0)},M6=(t,s,c)=>{hv(t,s,c,!1)},B6=(t,s,c)=>c.get(),pN=(t,s,c)=>{hv(t,s,c,s.selected)};var P6=Object.freeze({__proto__:null,onLoad:pN,toggle:hN,isOn:B6,on:pA,off:M6,set:hv}),F6=Object.freeze({__proto__:null,exhibit:()=>oi({}),events:(t,s)=>{const c=c1(t,s,hN),l=ky(t,s,pN);return dr(Fe([t.toggleOnExecute?[c]:[],[l]]))}});const bN=(t,s,c)=>{Ut(t.element,"aria-pressed",c),s.syncWithExpanded&&pv(t,s,c)},m2=(t,s,c)=>{Ut(t.element,"aria-selected",c)},I6=(t,s,c)=>{Ut(t.element,"aria-checked",c)},pv=(t,s,c)=>{Ut(t.element,"aria-expanded",c)};var bA=[_e("selected",!1),os("toggleClass"),_e("toggleOnExecute",!0),Zo("onToggled"),zl("aria",{mode:"none"},Vc("mode",{pressed:[_e("syncWithExpanded",!1),Gs("update",bN)],checked:[Gs("update",I6)],expanded:[Gs("update",pv)],selected:[Gs("update",m2)],none:[Gs("update",oe)]}))];const _o=Oa({fields:bA,name:"toggling",active:F6,apis:P6,state:mN(!1)}),vA=()=>{const t=(s,c)=>{c.stop(),_f(s)};return[st($g(),t),st(gd(),t),pd(tu()),pd(Qr())]},uT=t=>{const s=c=>Bu((l,d)=>{c(l),d.stop()});return dr(Fe([t.map(s).toArray(),vA()]))},vN="alloy.item-hover",yA="alloy.item-focus",yN="alloy.item-toggled",CA=t=>{(El(t.element).isNone()||Kn.isFocused(t))&&(Kn.isFocused(t)||Kn.focus(t),An(t,vN,{item:t}))},CN=t=>{An(t,yA,{item:t})},L6=(t,s)=>{An(t,yN,{item:t,state:s})},wA=W(vN),dT=W(yA),SA=W(yN),xA=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Rt),H6=(t,s)=>({aria:{mode:s?"selected":"checked"},...ec(t,(c,l)=>l!=="exclusive"),onToggled:(c,l)=>{Ot(t.onToggled)&&t.onToggled(c,l),L6(c,l)}}),z6=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:xA(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:iu.augment(t.itemBehaviours,[t.toggling.fold(_o.revoke,s=>_o.config(H6(s,t.role.exists(c=>c==="option")))),Kn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{CN(s)}}),En.config({mode:"execution"}),qt.config({store:{mode:"memory",initialValue:t.data}}),ho("item-type-events",[...vA(),st(ni(),CA),st(Qp(),Kn.focus)])]),components:t.components,eventOrder:t.eventOrder}),V6=[tt("data"),tt("components"),tt("dom"),_e("hasSubmenu",!1),os("toggling"),os("role"),iu.field("itemBehaviours",[_o,Kn,En,qt]),_e("ignoreFocus",!1),_e("domModification",{}),Gs("builder",z6),_e("eventOrder",{})],U6=t=>({dom:t.dom,components:t.components,events:dr([xy(Qp())])}),wN=[tt("dom"),tt("components"),Gs("builder",U6)],mT=W("item-widget"),TA=W([Wa({name:"widget",overrides:t=>({behaviours:Tt([qt.config({store:{mode:"manual",getValue:s=>t.data,setValue:oe}})])})})]),W6=t=>{const s=av(mT(),t,TA()),c=jx(mT(),t,s.internals()),l=g=>Ct(g,t,"widget").map(h=>(En.focusIn(h),h)),d=(g,h)=>pp(h.event.target)?A.none():(t.autofocus&&h.setSource(g.element),A.none());return{dom:t.dom,components:c,domModification:t.domModification,events:dr([Bu((g,h)=>{l(g).each(C=>{h.stop()})}),st(ni(),CA),st(Qp(),(g,h)=>{t.autofocus?l(g):Kn.focus(g)})]),behaviours:iu.augment(t.widgetBehaviours,[qt.config({store:{mode:"memory",initialValue:t.data}}),Kn.config({ignore:t.ignoreFocus,onFocus:g=>{CN(g)}}),En.config({mode:"special",focusIn:t.autofocus?g=>{l(g)}:wr(),onLeft:d,onRight:d,onEscape:(g,h)=>!Kn.isFocused(g)&&!t.autofocus?(Kn.focus(g),A.some(!0)):(t.autofocus&&h.setSource(g.element),A.none())})])}},Z6=[tt("uid"),tt("data"),tt("components"),tt("dom"),_e("autofocus",!1),_e("ignoreFocus",!1),iu.field("widgetBehaviours",[qt,Kn,En]),_e("domModification",{}),z1(TA()),Gs("builder",W6)],j6=Vc("type",{widget:Z6,item:V6,separator:wN}),G6=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),q6=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),SN=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),K6=W([cv({factory:{sketch:t=>{const s=Fa("menu.spec item",j6,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Eo(s,"uid")?s:{...s,uid:h1("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),Y6=W([Nc("role"),tt("value"),tt("items"),tt("dom"),tt("components"),_e("eventOrder",{}),ba("menuBehaviours",[bn,qt,Jo,En]),zl("movement",{mode:"menu",moveOnTab:!0},Vc("mode",{grid:[Kb(),Gs("config",G6)],matrix:[Gs("config",q6),tt("rowSelector"),_e("previousSelector",A.none)],menu:[_e("moveOnTab",!0),Gs("config",SN)]})),Wy(),_e("fakeFocus",!1),_e("focusManager",iv()),Zo("onHighlight"),Zo("onDehighlight"),_e("showMenuRole",!0)]),xN=W("alloy.menu-focus"),X6=(t,s)=>{const c=Ra(t.element,'[role="menuitemradio"][aria-checked="true"]');et(c,l=>{es(l,s.element)||t.getSystem().getByDom(l).each(d=>{_o.off(d)})})},J6=(t,s,c,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:va(t.menuBehaviours,[bn.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),qt.config({store:{mode:"memory",initialValue:t.value}}),Jo.config({find:A.some}),En.config(t.movement.config(t,t.movement))]),events:dr([st(dT(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(C=>{bn.highlight(d,C),g.stop(),An(d,xN(),{menu:d,item:C})})}),st(wA(),(d,g)=>{const h=g.event.item;bn.highlight(d,h)}),st(SA(),(d,g)=>{const{item:h,state:C}=g.event;C&&gn(h.element,"role")==="menuitemradio"&&X6(d,h)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Sd=ml({name:"Menu",configFields:Y6(),partFields:K6(),factory:J6}),Q6=t=>xa(t,(s,c)=>({k:s,v:c})),TN=(t,s,c,l)=>xt(c,l).bind(d=>xt(t,d).bind(g=>{const h=TN(t,s,c,g);return A.some([g].concat(h))})).getOr([]),Z1=(t,s)=>{const c={};xs(t,(h,C)=>{et(h,S=>{c[S]=C})});const l=s,d=Q6(s),g=bo(d,(h,C)=>[C].concat(TN(c,l,d,C)));return bo(c,h=>xt(g,h).getOr([h]))},EN=()=>{const t=hn({}),s=hn({}),c=hn({}),l=Es(),d=hn({}),g=()=>{t.set({}),s.set({}),c.set({}),l.clear()},h=()=>l.get().isNone(),C=(We,It)=>{s.set({...s.get(),[We]:{type:"prepared",menu:It}})},S=(We,It,Kt,qe)=>{l.set(We),t.set(Kt),s.set(It),d.set(qe);const cn=Z1(qe,Kt);c.set(cn)},k=We=>yo(t.get(),(It,Kt)=>It===We),O=(We,It,Kt)=>te(We).bind(qe=>k(We).bind(cn=>It(cn).map($t=>({triggeredMenu:qe,triggeringItem:$t,triggeringPath:Kt})))),B=(We,It)=>{const Kt=io(ae(We).toArray(),qe=>te(qe).isSome());return xt(c.get(),We).bind(qe=>{const cn=Un(Kt.concat(qe)),$t=ie(cn,(dn,Mo)=>O(dn,It,cn.slice(0,Mo+1)).fold(()=>br(l.get(),dn)?[]:[A.none()],pr=>[A.some(pr)]));return Qo($t)})},z=We=>xt(t.get(),We).map(It=>{const Kt=xt(c.get(),We).getOr([]);return[It].concat(Kt)}),V=We=>xt(c.get(),We).bind(It=>It.length>1?A.some(It.slice(1)):A.none()),X=We=>xt(c.get(),We),te=We=>ke(We).bind(kN),ke=We=>xt(s.get(),We),ae=We=>xt(t.get(),We);return{setMenuBuilt:C,setContents:S,expand:z,refresh:X,collapse:V,lookupMenu:ke,lookupItem:ae,otherMenus:We=>{const It=d.get();return Bt(gs(It),We)},getPrimary:()=>l.get().bind(te),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:B}},kN=t=>t.type==="prepared"?A.some(t.menu):A.none(),ph={init:EN,extractPreparedMenu:kN},_N=Jt("tiered-menu-item-highlight"),AN=Jt("tiered-menu-item-dehighlight");var pc;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(pc||(pc={}));const ON=(t,s)=>{const c=Es(),l=(pt,Lt,Yn)=>bo(Yn,(Fn,xn)=>{const lo=()=>Sd.sketch({...Fn,value:xn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(er,Cs)=>{An(er,_N,{menuComp:er,itemComp:Cs})},onDehighlight:(er,Cs)=>{An(er,AN,{menuComp:er,itemComp:Cs})},focusManager:t.fakeFocus?tT():iv()});return xn===Lt?{type:"prepared",menu:pt.getSystem().build(lo())}:{type:"notbuilt",nbMenu:lo}}),d=ph.init(),g=pt=>{const Lt=l(pt,t.data.primary,t.data.menus),Yn=S();return d.setContents(t.data.primary,Lt,t.data.expansions,Yn),d.getPrimary()},h=pt=>qt.getValue(pt).value,C=(pt,Lt,Yn)=>As(Lt,Fn=>{if(!Fn.getSystem().isConnected())return A.none();const xn=bn.getCandidates(Fn);return xe(xn,lo=>h(lo)===Yn)}),S=pt=>bo(t.data.menus,(Lt,Yn)=>ie(Lt.items,Fn=>Fn.type==="separator"?[]:[Fn.data.value])),k=bn.highlight,O=(pt,Lt)=>{k(pt,Lt),bn.getHighlighted(Lt).orThunk(()=>bn.getFirst(Lt)).each(Yn=>{t.fakeFocus?bn.highlight(Lt,Yn):o1(pt,Yn.element,Qp())})},B=(pt,Lt)=>vc(Pe(Lt,Yn=>pt.lookupMenu(Yn).bind(Fn=>Fn.type==="prepared"?A.some(Fn.menu):A.none()))),z=(pt,Lt,Yn)=>{const Fn=B(Lt,Lt.otherMenus(Yn));et(Fn,xn=>{ci(xn.element,[t.markers.backgroundMenu]),t.stayInDom||to.remove(pt,xn)})},V=pt=>c.get().getOrThunk(()=>{const Lt={},Yn=Ra(pt.element,`.${t.markers.item}`),Fn=io(Yn,xn=>gn(xn,"aria-haspopup")==="true");return et(Fn,xn=>{pt.getSystem().getByDom(xn).each(lo=>{const er=h(lo);Lt[er]=lo})}),c.set(Lt),Lt}),X=(pt,Lt)=>{const Yn=V(pt);xs(Yn,(Fn,xn)=>{const lo=Jn(Lt,xn);Ut(Fn.element,"aria-expanded",lo)})},te=(pt,Lt,Yn)=>A.from(Yn[0]).bind(Fn=>Lt.lookupMenu(Fn).bind(xn=>{if(xn.type==="notbuilt")return A.none();{const lo=xn.menu,er=B(Lt,Yn.slice(1));return et(er,Cs=>{mr(Cs.element,t.markers.backgroundMenu)}),Yt(lo.element)||to.append(pt,_i(lo)),ci(lo.element,[t.markers.backgroundMenu]),O(pt,lo),z(pt,Lt,Yn),A.some(lo)}}));let ke;(function(pt){pt[pt.HighlightSubmenu=0]="HighlightSubmenu",pt[pt.HighlightParent=1]="HighlightParent"})(ke||(ke={}));const ae=(pt,Lt,Yn)=>{if(Yn.type==="notbuilt"){const Fn=pt.getSystem().build(Yn.nbMenu());return d.setMenuBuilt(Lt,Fn),Fn}else return Yn.menu},Ce=(pt,Lt,Yn=ke.HighlightSubmenu)=>{if(Lt.hasConfigured(i)&&i.isDisabled(Lt))return A.some(Lt);{const Fn=h(Lt);return d.expand(Fn).bind(xn=>(X(pt,xn),A.from(xn[0]).bind(lo=>d.lookupMenu(lo).bind(er=>{const Cs=ae(pt,lo,er);return Yt(Cs.element)||to.append(pt,_i(Cs)),t.onOpenSubmenu(pt,Lt,Cs,Un(xn)),Yn===ke.HighlightSubmenu?(bn.highlightFirst(Cs),te(pt,d,xn)):(bn.dehighlightAll(Cs),A.some(Lt))}))))}},we=(pt,Lt)=>{const Yn=h(Lt);return d.collapse(Yn).bind(Fn=>(X(pt,Fn),te(pt,d,Fn).map(xn=>(t.onCollapseMenu(pt,Lt,xn),xn))))},Qe=(pt,Lt)=>{const Yn=h(Lt);return d.refresh(Yn).bind(Fn=>(X(pt,Fn),te(pt,d,Fn)))},We=(pt,Lt)=>pp(Lt.element)?A.none():Ce(pt,Lt,ke.HighlightSubmenu),It=(pt,Lt)=>pp(Lt.element)?A.none():we(pt,Lt),Kt=(pt,Lt)=>we(pt,Lt).orThunk(()=>t.onEscape(pt,Lt).map(()=>pt)),qe=pt=>(Lt,Yn)=>$u(Yn.getSource(),`.${t.markers.item}`).bind(Fn=>Lt.getSystem().getByDom(Fn).toOptional().bind(xn=>pt(Lt,xn).map($e))),cn=dr([st(xN(),(pt,Lt)=>{const Yn=Lt.event.item;d.lookupItem(h(Yn)).each(()=>{const Fn=Lt.event.menu;bn.highlight(pt,Fn);const xn=h(Lt.event.item);d.refresh(xn).each(lo=>z(pt,d,lo))})}),Bu((pt,Lt)=>{const Yn=Lt.event.target;pt.getSystem().getByDom(Yn).each(Fn=>{h(Fn).indexOf("collapse-item")===0&&we(pt,Fn),Ce(pt,Fn,ke.HighlightSubmenu).fold(()=>{t.onExecute(pt,Fn)},oe)})}),Cr((pt,Lt)=>{g(pt).each(Yn=>{to.append(pt,_i(Yn)),t.onOpenMenu(pt,Yn),t.highlightOnOpen===pc.HighlightMenuAndItem?O(pt,Yn):t.highlightOnOpen===pc.HighlightJustMenu&&k(pt,Yn)})}),st(_N,(pt,Lt)=>{t.onHighlightItem(pt,Lt.event.menuComp,Lt.event.itemComp)}),st(AN,(pt,Lt)=>{t.onDehighlightItem(pt,Lt.event.menuComp,Lt.event.itemComp)}),...t.navigateOnHover?[st(wA(),(pt,Lt)=>{const Yn=Lt.event.item;Qe(pt,Yn),Ce(pt,Yn,ke.HighlightParent),t.onHover(pt,Yn)})]:[]]),$t=pt=>bn.getHighlighted(pt).bind(bn.getHighlighted),dn=pt=>{$t(pt).each(Lt=>{we(pt,Lt)})},Mo=pt=>{d.getPrimary().each(Lt=>{O(pt,Lt)})},pr=pt=>A.from(pt.components()[0]).filter(Lt=>gn(Lt.element,"role")==="menu"),ln={collapseMenu:dn,highlightPrimary:Mo,repositionMenus:pt=>{d.getPrimary().bind(Yn=>$t(pt).bind(Fn=>{const xn=h(Fn),lo=Ta(d.getMenus()),er=vc(Pe(lo,ph.extractPreparedMenu));return d.getTriggeringPath(xn,Cs=>C(pt,er,Cs))}).map(Fn=>({primary:Yn,triggeringPath:Fn}))).fold(()=>{pr(pt).each(Yn=>{t.onRepositionMenu(pt,Yn,[])})},({primary:Yn,triggeringPath:Fn})=>{t.onRepositionMenu(pt,Yn,Fn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:va(t.tmenuBehaviours,[En.config({mode:"special",onRight:qe(We),onLeft:qe(It),onEscape:qe(Kt),focusIn:(pt,Lt)=>{d.getPrimary().each(Yn=>{o1(pt,Yn.element,Qp())})}}),bn.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Jo.config({find:pt=>bn.getHighlighted(pt)}),to.config({})]),eventOrder:t.eventOrder,apis:ln,events:cn}},DN=W("collapse-item"),RN=(t,s,c)=>({primary:t,menus:s,expansions:c}),eL=(t,s)=>({primary:t,menus:po(t,s),expansions:{}}),fT=t=>({value:Jt(DN()),meta:{text:t}}),xp=gi({name:"TieredMenu",configFields:[qb("onExecute"),qb("onEscape"),nm("onOpenMenu"),nm("onOpenSubmenu"),Zo("onRepositionMenu"),Zo("onCollapseMenu"),_e("highlightOnOpen",pc.HighlightMenuAndItem),dd("data",[tt("primary"),tt("menus"),tt("expansions")]),_e("fakeFocus",!1),Zo("onHighlightItem"),Zo("onDehighlightItem"),Zo("onHover"),Yh(),tt("dom"),_e("navigateOnHover",!0),_e("stayInDom",!1),ba("tmenuBehaviours",[En,bn,Jo,to]),_e("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:ON,extraApis:{tieredData:RN,singleData:eL,collapseItem:fT}}),tL=(t,s,c,l,d)=>{const g=()=>t.lazySink(s),h=l.type==="horizontal"?{layouts:{onLtr:()=>jf(),onRtl:()=>f0()}}:{},C=k=>k.length===2,S=k=>C(k)?h:{};return xp.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(Xo.close(s),t.onEscape.map(k=>k(s)),A.some(!0)),onExecute:()=>A.some(!0),onOpenMenu:(k,O)=>{tl.positionWithinBounds(g().getOrDie(),O,c,d())},onOpenSubmenu:(k,O,B,z)=>{const V=g().getOrDie();tl.position(V,B,{anchor:{type:"submenu",item:O,...S(z)}})},onRepositionMenu:(k,O,B)=>{const z=g().getOrDie();tl.positionWithinBounds(z,O,c,d()),et(B,V=>{const X=S(V.triggeringPath);tl.position(z,V.triggeredMenu,{anchor:{type:"submenu",item:V.triggeringItem,...X}})})}})},nL=(t,s)=>{const c=(z,V)=>t.getRelated(z).exists(te=>Xg(te,V)),l=(z,V)=>{Xo.setContent(z,V)},d=(z,V,X)=>{const te=A.none;g(z,V,X,te)},g=(z,V,X,te)=>{const ke=t.lazySink(z).getOrDie();Xo.openWhileCloaked(z,V,()=>tl.positionWithinBounds(ke,z,X,te())),qt.setValue(z,A.some({mode:"position",config:X,getBounds:te}))},h=(z,V,X)=>{C(z,V,X,A.none)},C=(z,V,X,te)=>{const ke=tL(t,z,V,X,te);Xo.open(z,ke),qt.setValue(z,A.some({mode:"menu",menu:ke}))},S=z=>{Xo.isOpen(z)&&(qt.setValue(z,A.none()),Xo.close(z))},k=z=>Xo.getState(z),O=z=>{Xo.isOpen(z)&&qt.getValue(z).each(V=>{switch(V.mode){case"menu":Xo.getState(z).each(xp.repositionMenus);break;case"position":const X=t.lazySink(z).getOrDie();tl.positionWithinBounds(X,z,V.config,V.getBounds());break}})},B={setContent:l,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:C,hide:S,getContent:k,reposition:O,isOpen:Xo.isOpen};return{uid:t.uid,dom:t.dom,behaviours:va(t.inlineBehaviours,[Xo.config({isPartOf:(z,V,X)=>Xg(V,X)||c(z,X),getAttachPoint:z=>t.lazySink(z).getOrDie(),onOpen:z=>{t.onShow(z)},onClose:z=>{t.onHide(z)}}),qt.config({store:{mode:"memory",initialValue:A.none()}}),Zl.config({channels:{...ng({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(z=>({fireEventInstead:{event:z.event}})).getOr({})}),...zC({...t.fireRepositionEventInstead.map(z=>({fireEventInstead:{event:z.event}})).getOr({}),doReposition:O})}})]),eventOrder:t.eventOrder,apis:B}},Or=gi({name:"InlineView",configFields:[tt("lazySink"),Zo("onShow"),Zo("onHide"),Du("onEscape"),ba("inlineBehaviours",[Xo,qt,Zl]),lr("fireDismissalEventInstead",[_e("event",Ef())]),lr("fireRepositionEventInstead",[_e("event",by())]),_e("getRelated",A.none),_e("isExtraPart",gt),_e("eventOrder",A.none)],factory:nL,apis:{showAt:(t,s,c,l)=>{t.showAt(s,c,l)},showWithinBounds:(t,s,c,l,d)=>{t.showWithinBounds(s,c,l,d)},showMenuAt:(t,s,c,l)=>{t.showMenuAt(s,c,l)},showMenuWithinBounds:(t,s,c,l,d)=>{t.showMenuWithinBounds(s,c,l,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,c)=>{t.setContent(s,c)},reposition:(t,s)=>{t.reposition(s)}}});var bv=tinymce.util.Tools.resolve("tinymce.util.Delay"),j1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),NN=tinymce.util.Tools.resolve("tinymce.EditorManager"),G1=tinymce.util.Tools.resolve("tinymce.Env"),xd;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(xd||(xd={}));var q1;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(q1||(q1={}));const sr=t=>s=>s.options.get(t),f2=t=>s=>A.from(t(s)),MN=t=>{const s=G1.deviceType.isPhone(),c=G1.deviceType.isTablet()||s,l=t.options.register,d=h=>rt(h)||h===!1,g=h=>rt(h)||Zn(h);l("skin",{processor:h=>rt(h)||h===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:g,default:j1.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:h=>rt(h)||Wo(h),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:h=>Wo(h)||rt(h)||mo(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),bt(9,h=>{l("toolbar"+(h+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:c?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:q1.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:d,default:"#top"}),l("anchor_bottom",{processor:d,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:h=>h==="both"||Wo(h),default:!G1.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},BN=sr("readonly"),g2=sr("height"),EA=sr("width"),K1=f2(sr("min_width")),vv=f2(sr("min_height")),h2=f2(sr("max_width")),gT=f2(sr("max_height")),PN=f2(sr("style_formats")),$N=sr("style_formats_merge"),FN=sr("style_formats_autohide"),IN=sr("content_langs"),hT=sr("removed_menuitems"),Y1=sr("toolbar_mode"),kA=sr("toolbar_groups"),p2=sr("toolbar_location"),oL=sr("fixed_toolbar_container"),LN=sr("fixed_toolbar_container_target"),HN=sr("toolbar_persist"),zN=sr("toolbar_sticky_offset"),VN=sr("menubar"),b2=sr("toolbar"),UN=sr("file_picker_callback"),WN=sr("file_picker_validator_handler"),pT=sr("font_size_input_default_unit"),_A=sr("file_picker_types"),AA=sr("typeahead_urls"),ZN=sr("anchor_top"),bT=sr("anchor_bottom"),jN=sr("draggable_modal"),GN=sr("statusbar"),qN=sr("elementpath"),OA=sr("branding"),KN=sr("resize"),DA=sr("paste_as_text"),vT=sr("sidebar_show"),YN=sr("promotion"),v2=sr("help_accessibility"),XN=sr("default_font_stack"),RA=t=>t.options.get("skin")===!1,yT=t=>t.options.get("menubar")!==!1,NA=t=>{const s=t.options.get("skin_url");if(RA(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const c=t.options.get("skin");return NN.baseURL+"/skins/ui/"+c}},CT=t=>A.from(t.options.get("skin_url")),JN=t=>t.options.get("line_height_formats").split(" "),y2=t=>{const s=b2(t),c=rt(s),l=mo(s)&&s.length>0;return!C2(t)&&(l||c||s===!0)},MA=t=>{const s=bt(9,l=>t.options.get("toolbar"+(l+1))),c=io(s,rt);return fn(c.length>0,c)},C2=t=>MA(t).fold(()=>{const s=b2(t);return nt(s,rt)&&s.length>0},$e),w2=t=>p2(t)===q1.bottom,Tp=t=>{var s;if(!t.inline)return A.none();const c=(s=oL(t))!==null&&s!==void 0?s:"";if(c.length>0)return Ar(Co(),c);const l=LN(t);return Xn(l)?A.some(ve.fromDom(l)):A.none()},yv=t=>t.inline&&Tp(t).isSome(),BA=t=>Tp(t).getOrThunk(()=>ia(Fr(ve.fromDom(t.getElement())))),S2=t=>t.inline&&!yT(t)&&!y2(t)&&!C2(t),X1=t=>(t.options.get("toolbar_sticky")||t.inline)&&!yv(t)&&!S2(t),Ep=t=>!yv(t)&&t.options.get("ui_mode")==="split",QN=t=>{const s=t.options.get("menu");return bo(s,c=>({...c,items:c.items}))};var eM=Object.freeze({__proto__:null,get ToolbarMode(){return xd},get ToolbarLocation(){return q1},register:MN,getSkinUrl:NA,getSkinUrlOption:CT,isReadOnly:BN,isSkinDisabled:RA,getHeightOption:g2,getWidthOption:EA,getMinWidthOption:K1,getMinHeightOption:vv,getMaxWidthOption:h2,getMaxHeightOption:gT,getUserStyleFormats:PN,shouldMergeStyleFormats:$N,shouldAutoHideStyleFormats:FN,getLineHeightFormats:JN,getContentLanguages:IN,getRemovedMenuItems:hT,isMenubarEnabled:yT,isMultipleToolbars:C2,isToolbarEnabled:y2,isToolbarPersist:HN,getMultipleToolbarsOption:MA,getUiContainer:BA,useFixedContainer:yv,isSplitUiMode:Ep,getToolbarMode:Y1,isDraggableModal:jN,isDistractionFree:S2,isStickyToolbar:X1,getStickyToolbarOffset:zN,getToolbarLocation:p2,isToolbarLocationBottom:w2,getToolbarGroups:kA,getMenus:QN,getMenubar:VN,getToolbar:b2,getFilePickerCallback:UN,getFilePickerTypes:_A,useTypeaheadUrls:AA,getAnchorTop:ZN,getAnchorBottom:bT,getFilePickerValidatorHandler:WN,getFontSizeInputDefaultUnit:pT,useStatusBar:GN,useElementPath:qN,promotionEnabled:YN,useBranding:OA,getResize:KN,getPasteAsText:DA,getSidebarShow:vT,useHelpAccessibility:v2,getDefaultFontStack:XN});const sL=["visible","hidden","clip"],PA=t=>cr(t).length>0&&!Jn(sL,t),$A=t=>{if(Lc(t)){const s=fs(t,"overflow-x"),c=fs(t,"overflow-y");return PA(s)||PA(c)}else return!1},FA=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),rL=(t,s)=>{const c=lp(s,$A),l=c.length===0?re(s).map(Te).map(d=>lp(d,$A)).getOr([]):c;return Ms(l).map(d=>({element:d,others:l.slice(1),isFullscreen:()=>FA(t)}))},bh=(t,s)=>Ep(t)?rL(t,s):A.none(),J1=t=>{const s=[...Pe(t.others,kr),gc()];return t.isFullscreen()?gc():_g(kr(t.element),s)},nl=gi({name:"Button",factory:t=>{const s=uT(t.action),c=t.dom.tag,l=g=>xt(t.dom,"attributes").bind(h=>xt(h,g)),d=()=>{if(c==="button"){const g=l("type").getOr("button"),h=l("role").map(C=>({role:C})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:iu.augment(t.buttonBehaviours,[Kn.config({}),En.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[_e("uid",void 0),tt("dom"),_e("components",[]),iu.field("buttonBehaviours",[Kn,En]),os("action"),os("role"),_e("eventOrder",{})]}),cL=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return it(s,(c,l)=>l.name==="class"?c:{...c,[l.name]:l.value},{})},IA=t=>Array.prototype.slice.call(t.dom.classList,0),Qm=t=>{const s=ve.fromHtml(t),c=la(s),l=cL(s),d=IA(s),g=c.length===0?{}:{innerHtml:Pu(s)};return{tag:cs(s),classes:d,attributes:l,...g}},ys=t=>{const s=Z_(t)&&Pr(t,"uid")?t.uid:h1("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var aL=Object.freeze({__proto__:null,exhibit:(t,s)=>oi({attributes:vs([{key:s.tabAttr,value:"true"}])})}),lL=[_e("tabAttr","data-alloy-tabstop")];const gr=Oa({fields:lL,name:"tabstopping",active:aL}),nM=Jt("tooltip.exclusive"),x2=Jt("tooltip.show"),T2=Jt("tooltip.hide"),E2=Jt("tooltip.immediateHide"),k2=Jt("tooltip.immediateShow"),oM=(t,s,c)=>{t.getSystem().broadcastOn([nM],{})};var iL=Object.freeze({__proto__:null,hideAllExclusive:oM,immediateOpenClose:(t,s,c,l)=>xo(t,l?k2:E2),isEnabled:(t,s,c)=>c.isEnabled(),setComponents:(t,s,c,l)=>{c.getTooltip().each(d=>{d.getSystem().isConnected()&&to.set(d,l)})},setEnabled:(t,s,c,l)=>c.setEnabled(l)}),LA=Object.freeze({__proto__:null,events:(t,s)=>{const c=h=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(qm(C),t.onHide(h,C),s.clearTooltip())}),s.clearTimer()},l=h=>{if(!s.isShowing()&&s.isEnabled()){oM(h);const C=t.lazySink(h).getOrDie(),S=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:dr(t.mode==="normal"?[st(ni(),k=>{xo(h,x2)}),st(Bm(),k=>{xo(h,T2)})]:[]),behaviours:Tt([to.config({})])});s.setTooltip(S),Iu(C,S),t.onShow(h,S),tl.position(C,S,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(C=>{const S=t.lazySink(h).getOrDie();tl.position(S,C,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[st(md(),h=>{xo(h,k2)}),st(Tf(),h=>{xo(h,E2)}),st(ni(),h=>{xo(h,x2)}),st(Bm(),h=>{xo(h,T2)})];case"follow-highlight":return[st(kf(),(h,C)=>{xo(h,x2)}),st(Lg(),h=>{xo(h,T2)})];case"children-normal":return[st(md(),(h,C)=>{El(h.element).each(S=>{$r(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{xo(h,k2)},k=>{s.isShowing()&&(t.onShow(h,k),d(h))})})}),st(Tf(),h=>{El(h.element).fold(()=>{xo(h,E2)},oe)}),st(ni(),h=>{Ar(h.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{xo(h,x2)},S=>{s.isShowing()&&(t.onShow(h,S),d(h))})})}),st(Bm(),h=>{Ar(h.element,"[data-mce-tooltip]:hover").fold(()=>{xo(h,T2)},oe)})];default:return[st(md(),(h,C)=>{El(h.element).each(S=>{$r(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{xo(h,k2)},k=>{s.isShowing()&&(t.onShow(h,k),d(h))})})}),st(Tf(),h=>{El(h.element).fold(()=>{xo(h,E2)},oe)})]}};return dr(Fe([[Ty(h=>{t.onSetup(h)}),st(x2,h=>{s.resetTimer(()=>{l(h)},t.delayForShow())}),st(T2,h=>{s.resetTimer(()=>{c(h)},t.delayForHide())}),st(k2,h=>{s.resetTimer(()=>{l(h)},0)}),st(E2,h=>{s.resetTimer(()=>{c(h)},0)}),st(nu(),(h,C)=>{const S=C;S.universal||Jn(S.channels,nM)&&c(h)}),Qd(h=>{c(h)})],g()]))}}),uL=[tt("lazySink"),tt("tooltipDom"),_e("exclusive",!0),_e("tooltipComponents",[]),Wr("delayForShow",W(300)),Wr("delayForHide",W(300)),Wr("onSetup",oe),Vl("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),_e("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:W([jc,Zc,Wc,Is,rc,za]),onRtl:W([jc,Zc,Wc,Is,rc,za])},bubble:Fu(0,-2,{})})),Zo("onHide"),Zo("onShow")],dL=Object.freeze({__proto__:null,init:()=>{const t=hn(!0),s=Es(),c=Es(),l=()=>{s.on(clearTimeout)},d=(h,C)=>{l(),s.set(setTimeout(h,C))},g=W("not-implemented");return si({getTooltip:c.get,isShowing:c.isSet,setTooltip:c.set,clearTooltip:c.clear,clearTimer:l,resetTimer:d,readState:g,isEnabled:()=>t.get(),setEnabled:h=>t.set(h)})}});const ac=Oa({fields:uL,name:"tooltipping",active:LA,state:dL,apis:iL}),{entries:sM,setPrototypeOf:rM,isFrozen:mL,getPrototypeOf:fL,getOwnPropertyDescriptor:gL}=Object;let{freeze:du,seal:Td,create:hL}=Object,{apply:HA,construct:zA}=typeof Reflect<"u"&&Reflect;HA||(HA=function(s,c,l){return s.apply(c,l)}),du||(du=function(s){return s}),Td||(Td=function(s){return s}),zA||(zA=function(s,c){return new s(...c)});const pL=dm(Array.prototype.forEach),bL=dm(Array.prototype.pop),_2=dm(Array.prototype.push),ST=dm(String.prototype.toLowerCase),VA=dm(String.prototype.toString),vL=dm(String.prototype.match),ef=dm(String.prototype.replace),yL=dm(String.prototype.indexOf),CL=dm(String.prototype.trim),Ed=dm(RegExp.prototype.test),kp=UA(TypeError);function dm(t){return function(s){for(var c=arguments.length,l=new Array(c>1?c-1:0),d=1;d<c;d++)l[d-1]=arguments[d];return HA(t,s,l)}}function UA(t){return function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return zA(t,c)}}function Xs(t,s,c){var l;c=(l=c)!==null&&l!==void 0?l:ST,rM&&rM(t,null);let d=s.length;for(;d--;){let g=s[d];if(typeof g=="string"){const h=c(g);h!==g&&(mL(s)||(s[d]=h),g=h)}t[g]=!0}return t}function Cv(t){const s=hL(null);for(const[c,l]of sM(t))s[c]=l;return s}function xT(t,s){for(;t!==null;){const l=gL(t,s);if(l){if(l.get)return dm(l.get);if(typeof l.value=="function")return dm(l.value)}t=fL(t)}function c(l){return null}return c}const WA=du(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ZA=du(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),A2=du(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),jA=du(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),TT=du(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),GA=du(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),O2=du(["#text"]),qA=du(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),mm=du(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ET=du(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),kT=du(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),wL=Td(/\{\{[\w\W]*|[\w\W]*\}\}/gm),SL=Td(/<%[\w\W]*|[\w\W]*%>/gm),xL=Td(/\${[\w\W]*}/gm),D2=Td(/^data-[\-\w.\u00B7-\uFFFF]/),TL=Td(/^aria-[\-\w]+$/),KA=Td(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),YA=Td(/^(?:\w+script|data):/i),EL=Td(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_T=Td(/^html$/i);var AT=Object.freeze({__proto__:null,MUSTACHE_EXPR:wL,ERB_EXPR:SL,TMPLIT_EXPR:xL,DATA_ATTR:D2,ARIA_ATTR:TL,IS_ALLOWED_URI:KA,IS_SCRIPT_OR_DATA:YA,ATTR_WHITESPACE:EL,DOCTYPE_NAME:_T});const kL=()=>typeof window>"u"?null:window,cM=function(s,c){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let l=null;const d="data-tt-policy-suffix";c&&c.hasAttribute(d)&&(l=c.getAttribute(d));const g="dompurify"+(l?"#"+l:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return null}};function XA(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kL();const s=jo=>XA(jo);if(s.version="3.0.5",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;const c=t.document,l=c.currentScript;let{document:d}=t;const{DocumentFragment:g,HTMLTemplateElement:h,Node:C,Element:S,NodeFilter:k,NamedNodeMap:O=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:B,DOMParser:z,trustedTypes:V}=t,X=S.prototype,te=xT(X,"cloneNode"),ke=xT(X,"nextSibling"),ae=xT(X,"childNodes"),Ce=xT(X,"parentNode");if(typeof h=="function"){const jo=d.createElement("template");jo.content&&jo.content.ownerDocument&&(d=jo.content.ownerDocument)}let we,Qe="";const{implementation:We,createNodeIterator:It,createDocumentFragment:Kt,getElementsByTagName:qe}=d,{importNode:cn}=c;let $t={};s.isSupported=typeof sM=="function"&&typeof Ce=="function"&&We&&We.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:dn,ERB_EXPR:Mo,TMPLIT_EXPR:pr,DATA_ATTR:hs,ARIA_ATTR:ln,IS_SCRIPT_OR_DATA:pt,ATTR_WHITESPACE:Lt}=AT;let{IS_ALLOWED_URI:Yn}=AT,Fn=null;const xn=Xs({},[...WA,...ZA,...A2,...TT,...O2]);let lo=null;const er=Xs({},[...qA,...mm,...ET,...kT]);let Cs=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Nl=null,td=null,df=!0,gl=!0,nd=!1,Id=!0,Vi=!1,pg=!1,_b=!1,rR=!1,dy=!1,yk=!1,jI=!1,OG=!0,DG=!1;const GG="user-content-";let hj=!0,cR=!1,Ck={},wk=null;const RG=Xs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let NG=null;const MG=Xs({},["audio","video","img","source","image","track"]);let pj=null;const BG=Xs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),GI="http://www.w3.org/1998/Math/MathML",qI="http://www.w3.org/2000/svg",Ab="http://www.w3.org/1999/xhtml";let Sk=Ab,bj=!1,vj=null;const qG=Xs({},[GI,qI,Ab],VA);let Qw;const KG=["application/xhtml+xml","text/html"],YG="text/html";let Ui,xk=null;const XG=d.createElement("form"),PG=function(Ue){return Ue instanceof RegExp||Ue instanceof Function},yj=function(Ue){if(!(xk&&xk===Ue)){if((!Ue||typeof Ue!="object")&&(Ue={}),Ue=Cv(Ue),Qw=KG.indexOf(Ue.PARSER_MEDIA_TYPE)===-1?Qw=YG:Qw=Ue.PARSER_MEDIA_TYPE,Ui=Qw==="application/xhtml+xml"?VA:ST,Fn="ALLOWED_TAGS"in Ue?Xs({},Ue.ALLOWED_TAGS,Ui):xn,lo="ALLOWED_ATTR"in Ue?Xs({},Ue.ALLOWED_ATTR,Ui):er,vj="ALLOWED_NAMESPACES"in Ue?Xs({},Ue.ALLOWED_NAMESPACES,VA):qG,pj="ADD_URI_SAFE_ATTR"in Ue?Xs(Cv(BG),Ue.ADD_URI_SAFE_ATTR,Ui):BG,NG="ADD_DATA_URI_TAGS"in Ue?Xs(Cv(MG),Ue.ADD_DATA_URI_TAGS,Ui):MG,wk="FORBID_CONTENTS"in Ue?Xs({},Ue.FORBID_CONTENTS,Ui):RG,Nl="FORBID_TAGS"in Ue?Xs({},Ue.FORBID_TAGS,Ui):{},td="FORBID_ATTR"in Ue?Xs({},Ue.FORBID_ATTR,Ui):{},Ck="USE_PROFILES"in Ue?Ue.USE_PROFILES:!1,df=Ue.ALLOW_ARIA_ATTR!==!1,gl=Ue.ALLOW_DATA_ATTR!==!1,nd=Ue.ALLOW_UNKNOWN_PROTOCOLS||!1,Id=Ue.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Vi=Ue.SAFE_FOR_TEMPLATES||!1,pg=Ue.WHOLE_DOCUMENT||!1,dy=Ue.RETURN_DOM||!1,yk=Ue.RETURN_DOM_FRAGMENT||!1,jI=Ue.RETURN_TRUSTED_TYPE||!1,rR=Ue.FORCE_BODY||!1,OG=Ue.SANITIZE_DOM!==!1,DG=Ue.SANITIZE_NAMED_PROPS||!1,hj=Ue.KEEP_CONTENT!==!1,cR=Ue.IN_PLACE||!1,Yn=Ue.ALLOWED_URI_REGEXP||KA,Sk=Ue.NAMESPACE||Ab,Cs=Ue.CUSTOM_ELEMENT_HANDLING||{},Ue.CUSTOM_ELEMENT_HANDLING&&PG(Ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Cs.tagNameCheck=Ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ue.CUSTOM_ELEMENT_HANDLING&&PG(Ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Cs.attributeNameCheck=Ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ue.CUSTOM_ELEMENT_HANDLING&&typeof Ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Cs.allowCustomizedBuiltInElements=Ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Vi&&(gl=!1),yk&&(dy=!0),Ck&&(Fn=Xs({},[...O2]),lo=[],Ck.html===!0&&(Xs(Fn,WA),Xs(lo,qA)),Ck.svg===!0&&(Xs(Fn,ZA),Xs(lo,mm),Xs(lo,kT)),Ck.svgFilters===!0&&(Xs(Fn,A2),Xs(lo,mm),Xs(lo,kT)),Ck.mathMl===!0&&(Xs(Fn,TT),Xs(lo,ET),Xs(lo,kT))),Ue.ADD_TAGS&&(Fn===xn&&(Fn=Cv(Fn)),Xs(Fn,Ue.ADD_TAGS,Ui)),Ue.ADD_ATTR&&(lo===er&&(lo=Cv(lo)),Xs(lo,Ue.ADD_ATTR,Ui)),Ue.ADD_URI_SAFE_ATTR&&Xs(pj,Ue.ADD_URI_SAFE_ATTR,Ui),Ue.FORBID_CONTENTS&&(wk===RG&&(wk=Cv(wk)),Xs(wk,Ue.FORBID_CONTENTS,Ui)),hj&&(Fn["#text"]=!0),pg&&Xs(Fn,["html","head","body"]),Fn.table&&(Xs(Fn,["tbody"]),delete Nl.tbody),Ue.TRUSTED_TYPES_POLICY){if(typeof Ue.TRUSTED_TYPES_POLICY.createHTML!="function")throw kp('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ue.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw kp('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');we=Ue.TRUSTED_TYPES_POLICY,Qe=we.createHTML("")}else we===void 0&&(we=cM(V,l)),we!==null&&typeof Qe=="string"&&(Qe=we.createHTML(""));du&&du(Ue),xk=Ue}},$G=Xs({},["mi","mo","mn","ms","mtext"]),FG=Xs({},["foreignobject","desc","title","annotation-xml"]),JG=Xs({},["title","style","font","a","script"]),KI=Xs({},ZA);Xs(KI,A2),Xs(KI,jA);const Cj=Xs({},TT);Xs(Cj,GA);const QG=function(Ue){let yn=Ce(Ue);(!yn||!yn.tagName)&&(yn={namespaceURI:Sk,tagName:"template"});const so=ST(Ue.tagName),Yc=ST(yn.tagName);return vj[Ue.namespaceURI]?Ue.namespaceURI===qI?yn.namespaceURI===Ab?so==="svg":yn.namespaceURI===GI?so==="svg"&&(Yc==="annotation-xml"||$G[Yc]):!!KI[so]:Ue.namespaceURI===GI?yn.namespaceURI===Ab?so==="math":yn.namespaceURI===qI?so==="math"&&FG[Yc]:!!Cj[so]:Ue.namespaceURI===Ab?yn.namespaceURI===qI&&!FG[Yc]||yn.namespaceURI===GI&&!$G[Yc]?!1:!Cj[so]&&(JG[so]||!KI[so]):!!(Qw==="application/xhtml+xml"&&vj[Ue.namespaceURI]):!1},eS=function(Ue){_2(s.removed,{element:Ue});try{Ue.parentNode.removeChild(Ue)}catch{Ue.remove()}},aR=function(Ue,yn){try{_2(s.removed,{attribute:yn.getAttributeNode(Ue),from:yn})}catch{_2(s.removed,{attribute:null,from:yn})}if(yn.removeAttribute(Ue),Ue==="is"&&!lo[Ue])if(dy||yk)try{eS(yn)}catch{}else try{yn.setAttribute(Ue,"")}catch{}},IG=function(Ue){let yn,so;if(rR)Ue="<remove></remove>"+Ue;else{const bg=vL(Ue,/^[\r\n\t ]+/);so=bg&&bg[0]}Qw==="application/xhtml+xml"&&Sk===Ab&&(Ue='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ue+"</body></html>");const Yc=we?we.createHTML(Ue):Ue;if(Sk===Ab)try{yn=new z().parseFromString(Yc,Qw)}catch{}if(!yn||!yn.documentElement){yn=We.createDocument(Sk,"template",null);try{yn.documentElement.innerHTML=bj?Qe:Yc}catch{}}const Wi=yn.body||yn.documentElement;return Ue&&so&&Wi.insertBefore(d.createTextNode(so),Wi.childNodes[0]||null),Sk===Ab?qe.call(yn,pg?"html":"body")[0]:pg?yn.documentElement:Wi},LG=function(Ue){return It.call(Ue.ownerDocument||Ue,Ue,k.SHOW_ELEMENT|k.SHOW_COMMENT|k.SHOW_TEXT,null,!1)},eq=function(Ue){return Ue instanceof B&&(typeof Ue.nodeName!="string"||typeof Ue.textContent!="string"||typeof Ue.removeChild!="function"||!(Ue.attributes instanceof O)||typeof Ue.removeAttribute!="function"||typeof Ue.setAttribute!="function"||typeof Ue.namespaceURI!="string"||typeof Ue.insertBefore!="function"||typeof Ue.hasChildNodes!="function")},YI=function(Ue){return typeof C=="object"?Ue instanceof C:Ue&&typeof Ue=="object"&&typeof Ue.nodeType=="number"&&typeof Ue.nodeName=="string"},Ob=function(Ue,yn,so){$t[Ue]&&pL($t[Ue],Yc=>{Yc.call(s,yn,so,xk)})},HG=function(Ue){let yn;if(Ob("beforeSanitizeElements",Ue,null),eq(Ue))return eS(Ue),!0;const so=Ui(Ue.nodeName);if(Ob("uponSanitizeElement",Ue,{tagName:so,allowedTags:Fn}),Ue.hasChildNodes()&&!YI(Ue.firstElementChild)&&(!YI(Ue.content)||!YI(Ue.content.firstElementChild))&&Ed(/<[/\w]/g,Ue.innerHTML)&&Ed(/<[/\w]/g,Ue.textContent))return eS(Ue),!0;if(!Fn[so]||Nl[so]){if(!Nl[so]&&VG(so)&&(Cs.tagNameCheck instanceof RegExp&&Ed(Cs.tagNameCheck,so)||Cs.tagNameCheck instanceof Function&&Cs.tagNameCheck(so)))return!1;if(hj&&!wk[so]){const Yc=Ce(Ue)||Ue.parentNode,Wi=ae(Ue)||Ue.childNodes;if(Wi&&Yc){const bg=Wi.length;for(let sl=bg-1;sl>=0;--sl)Yc.insertBefore(te(Wi[sl],!0),ke(Ue))}}return eS(Ue),!0}return Ue instanceof S&&!QG(Ue)||(so==="noscript"||so==="noembed"||so==="noframes")&&Ed(/<\/no(script|embed|frames)/i,Ue.innerHTML)?(eS(Ue),!0):(Vi&&Ue.nodeType===3&&(yn=Ue.textContent,yn=ef(yn,dn," "),yn=ef(yn,Mo," "),yn=ef(yn,pr," "),Ue.textContent!==yn&&(_2(s.removed,{element:Ue.cloneNode()}),Ue.textContent=yn)),Ob("afterSanitizeElements",Ue,null),!1)},zG=function(Ue,yn,so){if(OG&&(yn==="id"||yn==="name")&&(so in d||so in XG))return!1;if(!(gl&&!td[yn]&&Ed(hs,yn))){if(!(df&&Ed(ln,yn))){if(!lo[yn]||td[yn]){if(!(VG(Ue)&&(Cs.tagNameCheck instanceof RegExp&&Ed(Cs.tagNameCheck,Ue)||Cs.tagNameCheck instanceof Function&&Cs.tagNameCheck(Ue))&&(Cs.attributeNameCheck instanceof RegExp&&Ed(Cs.attributeNameCheck,yn)||Cs.attributeNameCheck instanceof Function&&Cs.attributeNameCheck(yn))||yn==="is"&&Cs.allowCustomizedBuiltInElements&&(Cs.tagNameCheck instanceof RegExp&&Ed(Cs.tagNameCheck,so)||Cs.tagNameCheck instanceof Function&&Cs.tagNameCheck(so))))return!1}else if(!pj[yn]){if(!Ed(Yn,ef(so,Lt,""))){if(!((yn==="src"||yn==="xlink:href"||yn==="href")&&Ue!=="script"&&yL(so,"data:")===0&&NG[Ue])){if(!(nd&&!Ed(pt,ef(so,Lt,"")))){if(so)return!1}}}}}}return!0},VG=function(Ue){return Ue.indexOf("-")>0},UG=function(Ue){let yn,so,Yc,Wi;Ob("beforeSanitizeAttributes",Ue,null);const{attributes:bg}=Ue;if(!bg)return;const sl={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:lo};for(Wi=bg.length;Wi--;){yn=bg[Wi];const{name:vg,namespaceURI:wj}=yn;so=vg==="value"?yn.value:CL(yn.value);const nq=so;if(Yc=Ui(vg),sl.attrName=Yc,sl.attrValue=so,sl.keepAttr=!0,sl.forceKeepAttr=void 0,Ob("uponSanitizeAttribute",Ue,sl),so=sl.attrValue,sl.forceKeepAttr)continue;if(!sl.keepAttr){aR(vg,Ue);continue}if(!Id&&Ed(/\/>/i,so)){aR(vg,Ue);continue}Vi&&(so=ef(so,dn," "),so=ef(so,Mo," "),so=ef(so,pr," "));const WG=Ui(Ue.nodeName);if(!zG(WG,Yc,so)){aR(vg,Ue);continue}if(DG&&(Yc==="id"||Yc==="name")&&(aR(vg,Ue),so=GG+so),we&&typeof V=="object"&&typeof V.getAttributeType=="function"&&!wj)switch(V.getAttributeType(WG,Yc)){case"TrustedHTML":{so=we.createHTML(so);break}case"TrustedScriptURL":{so=we.createScriptURL(so);break}}if(so!==nq)try{wj?Ue.setAttributeNS(wj,vg,so):Ue.setAttribute(vg,so)}catch{aR(vg,Ue)}}Ob("afterSanitizeAttributes",Ue,null)},tq=function jo(Ue){let yn;const so=LG(Ue);for(Ob("beforeSanitizeShadowDOM",Ue,null);yn=so.nextNode();)Ob("uponSanitizeShadowNode",yn,null),!HG(yn)&&(yn.content instanceof g&&jo(yn.content),UG(yn));Ob("afterSanitizeShadowDOM",Ue,null)};return s.sanitize=function(jo){let Ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yn,so,Yc,Wi;if(bj=!jo,bj&&(jo="<!-->"),typeof jo!="string"&&!YI(jo))if(typeof jo.toString=="function"){if(jo=jo.toString(),typeof jo!="string")throw kp("dirty is not a string, aborting")}else throw kp("toString is not a function");if(!s.isSupported)return jo;if(_b||yj(Ue),s.removed=[],typeof jo=="string"&&(cR=!1),cR){if(jo.nodeName){const vg=Ui(jo.nodeName);if(!Fn[vg]||Nl[vg])throw kp("root node is forbidden and cannot be sanitized in-place")}}else if(jo instanceof C)yn=IG("<!---->"),so=yn.ownerDocument.importNode(jo,!0),so.nodeType===1&&so.nodeName==="BODY"||so.nodeName==="HTML"?yn=so:yn.appendChild(so);else{if(!dy&&!Vi&&!pg&&jo.indexOf("<")===-1)return we&&jI?we.createHTML(jo):jo;if(yn=IG(jo),!yn)return dy?null:jI?Qe:""}yn&&rR&&eS(yn.firstChild);const bg=LG(cR?jo:yn);for(;Yc=bg.nextNode();)HG(Yc)||(Yc.content instanceof g&&tq(Yc.content),UG(Yc));if(cR)return jo;if(dy){if(yk)for(Wi=Kt.call(yn.ownerDocument);yn.firstChild;)Wi.appendChild(yn.firstChild);else Wi=yn;return(lo.shadowroot||lo.shadowrootmode)&&(Wi=cn.call(c,Wi,!0)),Wi}let sl=pg?yn.outerHTML:yn.innerHTML;return pg&&Fn["!doctype"]&&yn.ownerDocument&&yn.ownerDocument.doctype&&yn.ownerDocument.doctype.name&&Ed(_T,yn.ownerDocument.doctype.name)&&(sl="<!DOCTYPE "+yn.ownerDocument.doctype.name+`>
`+sl),Vi&&(sl=ef(sl,dn," "),sl=ef(sl,Mo," "),sl=ef(sl,pr," ")),we&&jI?we.createHTML(sl):sl},s.setConfig=function(jo){yj(jo),_b=!0},s.clearConfig=function(){xk=null,_b=!1},s.isValidAttribute=function(jo,Ue,yn){xk||yj({});const so=Ui(jo),Yc=Ui(Ue);return zG(so,Yc,yn)},s.addHook=function(jo,Ue){typeof Ue=="function"&&($t[jo]=$t[jo]||[],_2($t[jo],Ue))},s.removeHook=function(jo){if($t[jo])return bL($t[jo])},s.removeHooks=function(jo){$t[jo]&&($t[jo]=[])},s.removeAllHooks=function(){$t={}},s}var _L=XA();const JA=t=>_L().sanitize(t);var Uu=tinymce.util.Tools.resolve("tinymce.util.I18n");const AL={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},aM="temporary-placeholder",QA=t=>()=>xt(t,aM).getOr("!not found!"),e4=(t,s)=>{const c=t.toLowerCase();if(Uu.isRtl()){const l=ms(c,"-rtl");return Eo(s,l)?l:c}else return c},lM=(t,s)=>xt(s,e4(t,s)),t4=(t,s)=>{const c=s();return lM(t,c).getOrThunk(QA(c))},iM=(t,s,c)=>{const l=s();return lM(t,l).or(c).getOrThunk(QA(l))},OL=t=>Uu.isRtl()?Eo(AL,t):!1,OT=()=>ho("add-focusable",[Cr(t=>{cC(t.element,"svg").each(s=>Ut(s,"focusable","false"))})]),wv=(t,s,c,l)=>{var d,g;const h=OL(s)?["tox-icon--flip"]:[],C=xt(c,e4(s,c)).or(l).getOrThunk(QA(c));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(h),innerHtml:C},behaviours:Tt([...(g=t.behaviours)!==null&&g!==void 0?g:[],OT()])}},Wu=(t,s,c,l=A.none())=>wv(s,t,c(),l),DL=(t,s,c)=>{const l=c(),d=xe(t,g=>Eo(l,e4(g,l)));return wv(s,d.getOr(aM),l,A.none())},RL={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},n4=gi({name:"Notification",factory:t=>{const s=Jt("notification-text"),c=ys({dom:Qm(`<p id=${s}>${JA(t.backstageProvider.translate(t.text))}</p>`),behaviours:Tt([to.config({})])}),l=X=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${X}%`}}}),d=X=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${X}%`}}),g=ys({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(0)]},d(0)],behaviours:Tt([to.config({})])}),S={updateProgress:(X,te)=>{X.getSystem().isConnected()&&g.getOpt(X).each(ke=>{to.set(ke,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(te)]},d(te)])})},updateText:(X,te)=>{if(X.getSystem().isConnected()){const ke=c.get(X);to.set(ke,[jr(te)])}}},k=Fe([t.icon.toArray(),t.level.toArray(),t.level.bind(X=>A.from(RL[X])).toArray()]),O=ys(nl.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Wu("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:Tt([gr.config({}),ac.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:X=>{t.onAction(X)}})),B=DL(k,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),z={dom:{tag:"div",classes:["tox-notification__body"]},components:[c.asSpec()],behaviours:Tt([to.config({})])},V=[B,z];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(X=>["tox-notification","tox-notification--in",`tox-notification--${X}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Tt([gr.config({}),Kn.config({}),En.config({mode:"special",onEscape:X=>(t.onAction(X),A.some(!0))})]),components:V.concat(t.progress?[g.asSpec()]:[]).concat([O.asSpec()]),apis:S}},configFields:[os("level"),tt("progress"),os("icon"),tt("onAction"),tt("text"),tt("iconProvider"),tt("backstageProvider")],apis:{updateProgress:(t,s,c)=>{t.updateProgress(s,c)},updateText:(t,s,c)=>{t.updateText(s,c)}}});var ML=(t,s,c,l)=>{const d=s.backstage.shared,g=()=>ve.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),h=()=>{const B=kr(g());return A.some(B)},C=B=>{h().each(z=>{et(B,V=>{co(V.element,"width"),q(V.element)>z.width&&ot(V.element,"width",z.width+"px")})})};return{open:(B,z,V)=>{const X=()=>{const Ce=It=>{to.remove(It,te),ke()},we=(It,Kt)=>{la(It.element).length===0?Qe(It,Kt):We(It,Kt)},Qe=(It,Kt)=>{Or.hide(It),l.clear(),Kt&&t.focus()},We=(It,Kt)=>{Kt&&En.focusIn(It)};l.on(It=>{z();const Kt=V();Ce(It),we(It,Kt)})},te=el(n4.sketch({text:B.text,level:Jn(["success","error","warning","warn","info"],B.type)?B.type:void 0,progress:B.progressBar===!0,icon:B.icon,onAction:X,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(l.isSet()){const Ce=_i(te);l.on(we=>{to.append(we,Ce),Or.reposition(we),fr.refresh(we),C(we.components())})}else{const Ce=el(Or.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Tt([En.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),to.config({}),...X1(t)&&!d.header.isPositionedAtTop()?[]:[fr.config({contextual:{lazyContext:()=>A.some(kr(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:It=>bh(t,It.element).map(qe=>({bounds:J1(qe),optScrollEnv:A.some({currentScrollTop:qe.element.dom.scrollTop,scrollElmTop:wc(qe.element).top})})).getOrThunk(()=>({bounds:gc(),optScrollEnv:A.none()}))})]])})),we=_i(te),Qe={maxHeightFunction:np()},We={...d.anchors.banner(),overrides:Qe};l.set(Ce),c.add(Ce),Or.showWithinBounds(Ce,we,{anchor:We},h)}Zn(B.timeout)&&B.timeout>0&&bv.setEditorTimeout(t,()=>{X()},B.timeout);const ke=()=>{l.on(Ce=>{Or.reposition(Ce),fr.refresh(Ce),C(Ce.components())})};return{close:X,reposition:ke,text:Ce=>{n4.updateText(te,Ce)},settings:B,getEl:()=>te.element.dom,progressBar:{value:Ce=>{n4.updateProgress(te,Ce)}}}},close:B=>{B.close()},getArgs:B=>B.settings}};const uM={setup:(t,s)=>{const c=(d,g)=>{An(d,Mu(),{raw:g})},l=()=>t.getMenu().bind(bn.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(l().each(_f),d.preventDefault()):g===40?(l().fold(()=>{t.getMenu().each(bn.highlightFirst)},h=>{c(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&l().each(h=>{c(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var DT;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(DT||(DT={}));var fm=DT;const o4="tox-menu-nav__js",RT="tox-collection__item",NT="tox-swatch",s4={normal:o4,color:NT},MT="tox-collection__item--enabled",dM="tox-collection__group-heading",r4="tox-collection__item-icon",BT="tox-collection__item-label",PL="tox-collection__item-accessory",PT="tox-collection__item-caret",$L="tox-collection__item-checkmark",_p="tox-collection__item--active",c4="tox-collection__item-container",Q1="tox-collection__item-container--column",mM="tox-collection__item-container--row",a4="tox-collection__item-container--align-right",$T="tox-collection__item-container--align-left",FL="tox-collection__item-container--valign-top",fM="tox-collection__item-container--valign-middle",gM="tox-collection__item-container--valign-bottom",l4=t=>xt(s4,t).getOr(o4),i4=t=>t==="color"?"tox-swatches":"tox-menu",FT=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:i4(t),tieredMenu:"tox-tiered-menu"}),eb=t=>{const s=FT(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:l4(t)}},hM=(t,s,c)=>{const l=FT(c);return{tag:"div",classes:Fe([[l.menu,`tox-menu-${s}-column`],t?[l.hasIcons]:[]])}},pM=[Sd.parts.items({})],R2=(t,s,c)=>{const l=FT(c);return{dom:{tag:"div",classes:Fe([[l.tieredMenu]])},markers:eb(c)}},u4=W([os("data"),_e("inputAttributes",{}),_e("inputStyles",{}),_e("tag","input"),_e("inputClasses",[]),Zo("onSetValue"),_e("styles",{}),_e("eventOrder",{}),ba("inputBehaviours",[qt,Kn]),_e("selectOnFocus",!0)]),bM=t=>Tt([Kn.config({onFocus:t.selectOnFocus?s=>{const c=s.element,l=Um(c);c.dom.setSelectionRange(0,l.length)}:oe})]),vM=t=>({...bM(t),...va(t.inputBehaviours,[qt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Um(s.element),setValue:(s,c)=>{Um(s.element)!==c&&zf(s.element,c)}},onSetValue:t.onSetValue})])}),yM=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),IL=(t,s)=>({uid:t.uid,dom:yM(t),components:[],behaviours:vM(t),eventOrder:t.eventOrder}),tb=gi({name:"Input",configFields:u4(),factory:IL}),CM=Jt("refetch-trigger-event"),d4=Jt("redirect-menu-item-interaction"),Sv="tox-menu__searcher",N2=t=>Ar(t.element,`.${Sv}`).bind(s=>t.getSystem().getByDom(s).toOptional()),wM=N2,LL=(t,s)=>{qt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},SM=t=>{const s=qt.getValue(t),c=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:c,selectionEnd:l}},HL=(t,s)=>{Vr(s.element,"id").each(c=>Ut(t.element,"aria-activedescendant",c))},zL=t=>{const s=(d,g)=>(g.cut(),A.none()),c=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return An(d,d4,h),A.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[RT]},components:[tb.sketch({inputClasses:[Sv,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Tt([ho(l,[st(Xd(),d=>{xo(d,CM)}),st(Mu(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),En.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:c,onEscape:c,onUp:c,onDown:c})]),eventOrder:{keydown:[l,En.name()]}})]}},nb="tox-collection--results__js",xM=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Jt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},IT=(t,s)=>c=>{const l=mn(c,s);return Pe(l,d=>({dom:t,components:d}))},VL=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Sd.parts.items({preprocess:t!=="auto"?IT({tag:"div",classes:["tox-swatches__row"]},t):Rt})]}]}),TM=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Sd.parts.items({preprocess:IT({tag:"div",classes:["tox-collection__group"]},t)})]}),m4=(t,s)=>{const c=[];let l=[];return et(t,(d,g)=>{s(d,g)?(l.length>0&&c.push(l),l=[],(Eo(d.dom,"innerHtml")||d.components&&d.components.length>0)&&l.push(d)):l.push(d)}),l.length>0&&c.push(l),Pe(c,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},f4=(t,s,c)=>Sd.parts.items({preprocess:l=>{const d=Pe(l,c);return t!=="auto"&&t>1?IT({tag:"div",classes:["tox-collection__group"]},t)(d):m4(d,(g,h)=>s[h].type==="separator")}}),g4=(t,s,c=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[f4(t,s,Rt)]}),EM=(t,s,c=!0)=>{const l=Jt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",nb].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[f4(t,s,xM)]}},kM=(t,s,c)=>{const l=Jt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[zL({i18n:Uu.translate,placeholder:c.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],nb],attributes:{id:l}},components:[f4(t,s,xM)]}]}},_M=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Sd.parts.items({preprocess:c=>m4(c,(l,d)=>t[d].type==="separator")})]}),LT=t=>bs(t,s=>"icon"in s&&s.icon!==void 0),vh=t=>A.none(),UL=(t,s,c,l,d)=>{const g=_M(c);return{value:t,dom:g.dom,components:g.components,items:c}},h4=(t,s,c,l,d)=>{const g=()=>d.menuType!=="searchable"?g4(l,c):d.searchMode.searchMode==="search-with-field"?kM(l,c,d.searchMode):EM(l,c);if(d.menuType==="color"){const h=VL(l);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"&&l==="auto"){const h=g4(l,c);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="listpreview"&&l!=="auto"){const h=TM(l);return{value:t,dom:h.dom,components:h.components,items:c}}else return{value:t,dom:hM(s,l,d.menuType),components:pM,items:c}},Ec=Tc("type"),HT=Tc("name"),p4=Tc("label"),yh=Tc("text"),AM=Tc("title"),OM=Tc("icon"),M2=Tc("value"),WL=Ll("fetch"),ZL=Ll("getSubmenuItems"),Ap=Ll("onAction"),DM=Ll("onItemAction"),ob=Wr("onSetup",()=>oe),jL=Nc("name"),Ch=Nc("text"),GL=Nc("role"),kd=Nc("icon"),xv=Nc("tooltip"),zT=Nc("label"),VT=Nc("shortcut"),qL=Du("select"),UT=oc("active",!1),KL=oc("borderless",!1),_d=oc("enabled",!0),Tv=oc("primary",!1),RM=t=>_e("columns",t),b4=_e("meta",{}),v4=Wr("onAction",oe),sb=t=>La("type",t),y4=t=>Rc("name","name",ko(()=>Jt(`${t}-name`)),Wt),YL=t=>Rc("value","value",ko(()=>Jt(`${t}-value`)),xi()),C4=Pn([Ec,Ch]),NM=t=>Nr("separatormenuitem",C4,t),XL=Pn([sb("autocompleteitem"),UT,_d,b4,M2,Ch,kd]),JL=t=>Nr("Autocompleter.Separator",C4,t),QL=t=>Nr("Autocompleter.Item",XL,t),Al=[_d,xv,kd,Ch,ob],tf=Pn([Ec,Ap,VT].concat(Al)),MM=t=>Nr("toolbarbutton",tf,t),B2=[UT].concat(Al),w4=Pn(B2.concat([Ec,Ap,VT])),BM=t=>Nr("ToggleButton",w4,t),PM=[Wr("predicate",gt),Vl("scope","node",["node","editor"]),Vl("position","selection",["node","selection","line"])],P2=Al.concat([sb("contextformbutton"),Tv,Ap,as("original",Rt)]),WT=B2.concat([sb("contextformbutton"),Tv,Ap,as("original",Rt)]),S4=Al.concat([sb("contextformbutton")]),e8=B2.concat([sb("contextformtogglebutton")]),nf=Vc("type",{contextformbutton:P2,contextformtogglebutton:WT}),t8=Pn([sb("contextform"),Wr("initValue",W("")),zT,Hl("commands",nf),Ou("launch",Vc("type",{contextformbutton:S4,contextformtogglebutton:e8}))].concat(PM)),n8=t=>Nr("ContextForm",t8,t),Ad=Pn([sb("contexttoolbar"),Tc("items")].concat(PM)),$2=t=>Nr("ContextToolbar",Ad,t),gm=[Ec,Tc("src"),Nc("alt"),w("classes",[],Wt)],o8=Pn(gm),Js=[Ec,yh,jL,w("classes",["tox-collection__item-label"],Wt)],Ev=Pn(Js),F2=xc(()=>Kd("type",{cardimage:o8,cardtext:Ev,cardcontainer:$M})),$M=Pn([Ec,La("direction","horizontal"),La("align","left"),La("valign","middle"),Hl("items",F2)]),Op=[_d,Ch,GL,VT,YL("menuitem"),b4],x4=Pn([Ec,zT,Hl("items",F2),ob,v4].concat(Op)),s8=t=>Nr("cardmenuitem",x4,t),T4=Pn([Ec,UT,kd].concat(Op)),r8=t=>Nr("choicemenuitem",T4,t),E4=[Ec,Tc("fancytype"),v4],FM=[_e("initData",{})].concat(E4),k4=[Du("select"),_("initData",{},[oc("allowCustomColors",!0),La("storageKey","default"),Ru("colors",xi())])].concat(E4),IM=Vc("fancytype",{inserttable:FM,colorswatch:k4}),ZT=t=>Nr("fancymenuitem",IM,t),c8=Pn([Ec,ob,v4,kd].concat(Op)),a8=t=>Nr("menuitem",c8,t),l8=Pn([Ec,ZL,ob,kd].concat(Op)),i8=t=>Nr("nestedmenuitem",l8,t),u8=Pn([Ec,kd,UT,ob,Ap].concat(Op)),LM=t=>Nr("togglemenuitem",u8,t),_4=(t,s,c)=>{const l=Ra(t.element,"."+c);if(l.length>0){const d=Re(l,g=>{const h=g.dom.getBoundingClientRect().top,C=l[0].dom.getBoundingClientRect().top;return Math.abs(h-C)>s}).getOr(l.length);return A.some({numColumns:d,numRows:Math.ceil(l.length/d)})}else return A.none()},HM=(t,s)=>Tt([ho(t,s)]),kv={namedEvents:HM,unnamedEvents:t=>HM(Jt("unnamed-events"),t)},m8=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),zM="silver.readonly",VM=Pn([Bb("readonly")]),_v=(t,s)=>{const l=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&et(d,g=>{g.broadcastOn([cm()],{target:l})}),et(d,g=>{g.broadcastOn([zM],{readonly:s})})},A4=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&_v(s,!0)}),t.on("SwitchMode",()=>_v(s,t.mode.isReadOnly())),BN(t)&&t.mode.set("readonly")},Ca=()=>Zl.config({channels:{[zM]:{schema:VM,onReceive:(t,s)=>{i.set(t,s.readonly)}}}}),hm={item:t=>i.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>i.config({disabled:t}),splitButton:t=>i.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>i.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},I2=(t,s)=>{const c=t.getApi(s);return l=>{l(c)}},Ol=(t,s)=>Cr(c=>{I2(t,c)(d=>{const g=t.onSetup(d);Ot(g)&&s.set(g)})}),Dp=(t,s)=>Qd(c=>I2(t,c)(s.get())),O4=(t,s)=>Bu((c,l)=>{I2(t,c)(t.onAction),!t.triggersSubmenu&&s===fm.CLOSE_ON_EXECUTE&&(c.getSystem().isConnected()&&xo(c,e1()),l.stop())}),UM={[ou()]:["disabling","alloy.base.behaviour","toggling","item-events"]},rb=vc,Av=(t,s,c,l)=>{const d=hn(oe);return{type:"item",dom:s.dom,components:rb(s.optComponents),data:t.data,eventOrder:UM,hasSubmenu:t.triggersSubmenu,itemBehaviours:Tt([ho("item-events",[O4(t,c),Ol(t,d),Dp(t,d)]),hm.item(()=>!t.enabled||l.isDisabled()),Ca(),to.config({})].concat(t.itemBehaviours))}},cb=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),jT=t=>{const s=G1.os.isMacOS()||G1.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=Pe(g,C=>{const S=C.toLowerCase().trim();return Eo(d,S)?d[S]:C});return s?h.join(""):h.join("+")},GT=(t,s,c=[r4])=>Wu(t,{tag:"div",classes:c},s),WM=t=>({dom:{tag:"div",classes:[BT]},components:[jr(Uu.translate(t))]}),ZM=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),f8=(t,s)=>({dom:{tag:"div",classes:[BT]},components:[{dom:{tag:t.tag,styles:t.styles},components:[jr(Uu.translate(s))]}]}),g8=t=>({dom:{tag:"div",classes:[PL]},components:[jr(jT(t))]}),jM=t=>GT("checkmark",t,[$L]),GM=t=>GT("chevron-right",t,[PT]),qM=t=>GT("chevron-down",t,[PT]),KM=(t,s)=>{const c=t.direction==="vertical"?Q1:mM,l=t.align==="left"?$T:a4;return{dom:{tag:"div",classes:[c4,c,l,(()=>{switch(t.valign){case"top":return FL;case"middle":return fM;case"bottom":return gM}})()]},components:s}},h8=(t,s,c)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:c.getOr("")}}}),p8=(t,s,c)=>{const l="custom",d="remove",g=t.value,h=t.iconContent.map(k=>iM(k,s.icons,c)),C=t.ariaLabel.map(k=>({"aria-label":s.translate(k),"data-mce-name":k})).getOr({});return{dom:(()=>{const k=NT,O=h.getOr(""),B={tag:"div",attributes:C,classes:[k]};return g===l?{...B,tag:"button",classes:[...B.classes,"tox-swatches__picker-btn"],innerHtml:O}:g===d?{...B,classes:[...B.classes,"tox-swatch--remove"],innerHtml:O}:Xn(g)?{...B,attributes:{...B.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:O}:B})(),optComponents:[]}},YM=t=>{const s=t.map(c=>({attributes:{id:Jt("menu-item"),"aria-label":Uu.translate(c)}})).getOr({});return{tag:"div",classes:[o4,RT],...s}},Ov=(t,s,c,l)=>{const d={tag:"div",classes:[r4]},g=z=>Wu(z,d,s.icons,l),h=()=>A.some({dom:d}),C=c?t.iconContent.map(g).orThunk(h):A.none(),S=t.checkMark,k=A.from(t.meta).fold(()=>WM,z=>Eo(z,"style")?Xt(f8,z.style):WM),O=t.htmlContent.fold(()=>t.textContent.map(k),z=>A.some(ZM(z,[BT])));return{dom:YM(t.ariaLabel),optComponents:[C,O,t.shortcutContent.map(g8),S,t.caret]}},L2=(t,s,c,l=A.none())=>t.presets==="color"?p8(t,s,l):Ov(t,s,c,l),D4=(t,s,c)=>xt(t,"tooltipWorker").map(l=>[ac.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:np}}),mode:"follow-highlight",onShow:(d,g)=>{l(h=>{ac.setComponents(d,[nC({element:ve.fromDom(h)})])})}})]).getOrThunk(()=>c.map(l=>[ac.config({...s.providers.tooltips.getConfig({tooltipText:l}),mode:"follow-highlight"})]).getOr([])),XM=t=>j1.DOM.encode(t),R4=(t,s)=>{const c=Uu.translate(t),l=XM(c);if(s.length>0){const d=new RegExp(m8(s),"gi");return l.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return l},JM=(t,s,c,l,d,g,h,C=!0)=>{const S=L2({presets:l,textContent:A.none(),htmlContent:c?t.text.map(O=>R4(O,s)):A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:t.value},h.providers,C,t.icon),k=t.text.filter(O=>!c&&O!=="");return Av({data:cb(t),enabled:t.enabled,getApi:W({}),onAction:O=>d(t.value,t.meta),onSetup:W(oe),triggersSubmenu:!1,itemBehaviours:D4(t,h,k)},S,g,h.providers)},qT=(t,s)=>Pe(t,c=>{switch(c.type){case"cardcontainer":return KM(c,qT(c.items,s));case"cardimage":return h8(c.src,c.classes,c.alt);case"cardtext":const d=c.name.exists(g=>Jn(s.cardText.highlightOn,g))?A.from(s.cardText.matchText).getOr(""):"";return ZM(R4(c.text,d),c.classes)}}),N4=(t,s,c,l)=>{const d=h=>({isEnabled:()=>!i.isDisabled(h),setEnabled:C=>{i.set(h,!C),et(Ra(h.element,"*"),S=>{h.getSystem().getByDom(S).each(k=>{k.hasConfigured(i)&&i.set(k,!C)})})}}),g={dom:YM(t.label),optComponents:[A.some({dom:{tag:"div",classes:[c4,mM]},components:qT(t.items,l)})]};return Av({data:cb({text:A.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(l.itemBehaviours).getOr([])},g,s,c.providers)},M4=(t,s,c,l,d,g,h,C=!0)=>{const S=B=>({setActive:z=>{_o.set(B,z)},isActive:()=>_o.isOn(B),isEnabled:()=>!i.isDisabled(B),setEnabled:z=>i.set(B,!z)}),k=L2({presets:c,textContent:s?t.text:A.none(),htmlContent:A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:A.none(),checkMark:s?A.some(jM(h.icons)):A.none(),caret:A.none(),value:t.value},h,C),O=t.text.filter(W(!s)).map(B=>ac.config(h.tooltips.getConfig({tooltipText:h.translate(B)})));return tr(Av({data:cb(t),enabled:t.enabled,getApi:S,onAction:B=>l(t.value),onSetup:B=>(B.setActive(d),oe),triggersSubmenu:!1,itemBehaviours:[...O.toArray()]},k,g,h),{toggling:{toggleClass:MT,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},B4=Vx(mT(),TA()),QM=t=>({value:nB(t)}),P4=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,eB=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,tB=t=>P4.test(t)||eB.test(t),nB=t=>rl(t,"#").toUpperCase(),oB=t=>tB(t)?A.some({value:nB(t)}):A.none(),sB=t=>({value:t.value.replace(P4,(c,l,d,g)=>l+l+d+d+g+g)}),rB=t=>{const s=sB(t),c=eB.exec(s.value);return c===null?["FFFFFF","FF","FF","FF"]:c},$4=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},H2=t=>{const s=$4(t.red)+$4(t.green)+$4(t.blue);return QM(s)},cB=Math.min,aB=Math.max,KT=Math.round,b8=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,v8=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,ab=(t,s,c,l)=>({red:t,green:s,blue:c,alpha:l}),F4=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},lB=t=>{let s,c,l;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=aB(0,cB(g,1)),h=aB(0,cB(h,1)),g===0)return s=c=l=KT(255*h),ab(s,c,l,1);const C=d/60,S=h*g,k=S*(1-Math.abs(C%2-1)),O=h-S;switch(Math.floor(C)){case 0:s=S,c=k,l=0;break;case 1:s=k,c=S,l=0;break;case 2:s=0,c=S,l=k;break;case 3:s=0,c=k,l=S;break;case 4:s=k,c=0,l=S;break;case 5:s=S,c=0,l=k;break;default:s=c=l=0}return s=KT(255*(s+O)),c=KT(255*(c+O)),l=KT(255*(l+O)),ab(s,c,l,1)},z2=t=>{const s=rB(t),c=parseInt(s[1],16),l=parseInt(s[2],16),d=parseInt(s[3],16);return ab(c,l,d,1)},I4=(t,s,c,l)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(c,10),C=parseFloat(l);return ab(d,g,h,C)},L4=t=>{const s=b8.exec(t);if(s!==null)return A.some(I4(s[1],s[2],s[3],"1"));const c=v8.exec(t);return c!==null?A.some(I4(c[1],c[2],c[3],c[4])):A.none()},iB=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,uB=ab(255,0,0,1),y8=t=>{t.dispatch("SkinLoaded")},C8=(t,s)=>{t.dispatch("SkinLoadError",s)},YT=t=>{t.dispatch("ResizeEditor")},XT=(t,s)=>{t.dispatch("ResizeContent",s)},w8=(t,s)=>{t.dispatch("ScrollContent",s)},dB=(t,s)=>{t.dispatch("TextColorChange",s)},S8=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},x8=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),T8=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},E8=(t,s)=>{t.dispatch("StylesTextUpdate",s)},H4=(t,s)=>{t.dispatch("AlignTextUpdate",s)},mB=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},fB=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},k8=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},gB=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},_8=t=>{t.dispatch("ToggleSidebar")},A8=t=>{t.dispatch("ToggleView")},JT=(t,s)=>()=>{t(),s()},ql=t=>lb(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),O8=(t,s)=>c=>{const l=zc(),d=()=>{c.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,c.setActive);l.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),l.clear()}},QT=(t,s)=>c=>{const l=ql(t)(c),d=O8(t,s)(c);return()=>{l(),d()}},lb=(t,s,c)=>l=>{const d=()=>c(l),g=()=>{c(l),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},hB=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},mu=(t,s)=>()=>t.execCommand(s);var ib=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const V2={},z4=(t,s=10)=>{const c=ib.getItem(t),l=rt(c)?JSON.parse(c):[],g=(k=>s-k.length<0?k.slice(0,s):k)(l),h=k=>{je(g,k).each(C),g.unshift(k),g.length>s&&g.pop(),ib.setItem(t,JSON.stringify(g))},C=k=>{g.splice(k,1)};return{add:h,state:()=>g.slice(0)}},eE=t=>xt(V2,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,c=ib.getItem(s);if(Go(c)){const d=ib.getItem("tinymce-custom-colors");ib.setItem(s,Xn(d)?d:"[]")}const l=z4(s,10);return V2[t]=l,l}),pB=t=>Pe(eE(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),bB=(t,s)=>{eE(t).add(s)},U2=(t,s,c)=>({hue:t,saturation:s,value:c}),W2=t=>{let s=0,c=0,l=0;const d=t.red/255,g=t.green/255,h=t.blue/255,C=Math.min(d,Math.min(g,h)),S=Math.max(d,Math.max(g,h));if(C===S)return l=C,U2(0,0,l*100);const k=d===C?g-h:h===C?d-g:h-d;return s=d===C?3:h===C?1:5,s=60*(s-k/(S-C)),c=(S-C)/S,l=S,U2(Math.round(s),Math.round(c*100),Math.round(l*100))},V4=t=>W2(z2(t)),Z2=t=>H2(lB(t)),vB=t=>oB(t).orThunk(()=>L4(t).map(H2)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const c=s.getContext("2d");c.clearRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.fillStyle=t,c.fillRect(0,0,1,1);const l=c.getImageData(0,0,1,1).data,d=l[0],g=l[1],h=l[2],C=l[3];return H2(ab(d,g,h,C))}),U4="forecolor",W4="hilitecolor",D8=5,R8=t=>{const s=[];for(let c=0;c<t.length;c+=2)s.push({text:t[c+1],value:"#"+vB(t[c]).value,icon:"checkmark",type:"choiceitem"});return s},sg=t=>s=>s.options.get(t),Z4="#000000",N8=t=>{const s=t.options.register,c=d=>nt(d,rt)?{value:R8(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},l=d=>Zn(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:c,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:c}),s("color_map_foreground",{processor:c}),s("color_cols",{processor:l,default:j4(t)}),s("color_cols_foreground",{processor:l,default:yB(t,U4)}),s("color_cols_background",{processor:l,default:yB(t,W4)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:Z4}),s("color_default_background",{processor:"string",default:Z4})},tE=(t,s)=>s===U4&&t.options.isSet("color_map_foreground")?sg("color_map_foreground")(t):s===W4&&t.options.isSet("color_map_background")?sg("color_map_background")(t):sg("color_map")(t),j4=(t,s="default")=>Math.max(D8,Math.ceil(Math.sqrt(tE(t,s).length))),yB=(t,s)=>{const c=sg("color_cols")(t),l=j4(t,s);return c===j4(t)?l:c},CB=(t,s="default")=>Math.round(s===U4?sg("color_cols_foreground")(t):s===W4?sg("color_cols_background")(t):sg("color_cols")(t)),wB=sg("custom_colors"),M8=sg("color_default_foreground"),SB=sg("color_default_background"),B8="rgba(0, 0, 0, 0)",P8=t=>L4(t).exists(s=>s.alpha!==0),rg=t=>Ei(t,s=>{if(Dn(s)){const c=fs(s,"background-color");return fn(P8(c),c)}else return A.none()}).getOr(B8),xB=(t,s)=>{const c=ve.fromDom(t.selection.getStart()),l=s==="hilitecolor"?rg(c):fs(c,"color");return L4(l).map(d=>"#"+H2(d).value)},$8=(t,s,c)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:c}),t.nodeChanged()})},G4=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},Na=t=>{t.addCommand("mceApplyTextcolor",(s,c)=>{$8(t,s,c)}),t.addCommand("mceRemoveTextcolor",s=>{G4(t,s)})},TB=t=>{const s="choiceitem",c={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[c,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[c]},q4=(t,s,c,l)=>{c==="custom"?DB(t)(g=>{g.each(h=>{bB(s,h),t.execCommand("mceApplyTextcolor",s,h),l(h)})},xB(t,s).getOr(Z4)):c==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",s)):(l(c),t.execCommand("mceApplyTextcolor",s,c))},K4=(t,s,c)=>t.concat(pB(s).concat(TB(c))),EB=(t,s,c)=>l=>{l(K4(t,s,c))},Y4=(t,s,c)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,c)},kB=(t,s)=>{t.setTooltip(s)},_B=(t,s)=>c=>{const l=xB(t,s);return br(l,c.toUpperCase())},X4=(t,s,c)=>{if(se(c))return s==="forecolor"?"Text color":"Background color";const l=s==="forecolor"?"Text color {0}":"Background color {0}",d=K4(tE(t,s),s,!1),g=xe(d,h=>h.value===c).getOr({text:""}).text;return t.translate([l,t.translate(g)])},AB=(t,s,c,l)=>{t.ui.registry.addSplitButton(s,{tooltip:X4(t,c,l.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:_B(t,c),columns:CB(t,c),fetch:EB(tE(t,c),c,wB(t)),onAction:d=>{q4(t,c,l.get(),oe)},onItemAction:(d,g)=>{q4(t,c,g,h=>{l.set(h),dB(t,{name:s,color:h})})},onSetup:d=>{Y4(d,s,l.get());const g=h=>{h.name===s&&(Y4(d,h.name,h.color),kB(d,X4(t,c,h.color)))};return t.on("TextColorChange",g),JT(ql(t)(d),()=>{t.off("TextColorChange",g)})}})},OB=(t,s,c,l,d)=>{t.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(kB(g,X4(t,c,d.get())),Y4(g,s,d.get()),ql(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:_B(t,c),initData:{storageKey:c},onAction:g=>{q4(t,c,g.value,h=>{d.set(h),dB(t,{name:s,color:h})})}}]})},DB=t=>(s,c)=>{let l=!1;const d=C=>{const k=C.getData().colorpicker;l?(s(A.from(k)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",k]))},g=(C,S)=>{S.name==="hex-valid"&&(l=S.value)},h={colorpicker:c};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:oe,onCancel:()=>{s(A.none())}})},F8=t=>{Na(t);const s=M8(t),c=SB(t),l=hn(s),d=hn(c);AB(t,"forecolor","forecolor",l),AB(t,"backcolor","hilitecolor",d),OB(t,"forecolor","forecolor","Text color",l),OB(t,"backcolor","hilitecolor","Background color",d)},J4=(t,s,c,l,d,g,h,C)=>{const S=LT(s),O=I8(s,c,l,d!=="color"?"normal":"color",g,h,C);return h4(t,S,O,l,{menuType:d})},I8=(t,s,c,l,d,g,h)=>vc(Pe(t,C=>C.type==="choiceitem"?r8(C).fold(vh,S=>A.some(M4(S,c===1,l,s,g(S.value),d,h,LT(t)))):A.none())),nE=(t,s)=>{const c=eb(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+c.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?Ar(d.element,"[aria-checked=true]"):A.none()}},L8=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${NT}`:`.${RT}`}},H8=(t,s)=>{const c=z8(t,s),l=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...J4(Jt("menu-value"),c,C=>{t.onAction({value:C})},l,d,fm.CLOSE_ON_EXECUTE,t.select.getOr(gt),s.shared.providers),markers:eb(d),movement:nE(l,d),showMenuRole:!1};return{type:"widget",data:{value:Jt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[B4.widget(Sd.sketch(h))]}},z8=(t,s)=>{const c=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>K4(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,c),l=>l.concat(TB(c)))},RB=Jt("cell-over"),NB=Jt("cell-execute"),V8=t=>(s,c)=>t.shared.providers.translate(["{0} columns, {1} rows",c,s]),U8=(t,s,c)=>{const l=h=>An(h,RB,{row:t,col:s}),d=h=>An(h,NB,{row:t,col:s}),g=(h,C)=>{C.stop(),d(h)};return el({dom:{tag:"div",attributes:{role:"button","aria-label":c}},behaviours:Tt([ho("insert-table-picker-cell",[st(ni(),Kn.focus),st(ou(),d),st($g(),g),st(gd(),g)]),_o.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Kn.config({onFocus:l})])})},W8=(t,s,c)=>{const l=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<c;h++){const C=t(d+1,h+1);g.push(U8(d,h,C))}l.push(g)}return l},Z8=(t,s,c,l,d)=>{for(let g=0;g<l;g++)for(let h=0;h<d;h++)_o.set(t[g][h],g<=s&&h<=c)},j8=t=>ie(t,s=>Pe(s,_i)),Q4=(t,s)=>jr(`${s}x${t}`),MB={inserttable:(t,s)=>{const d=V8(s),g=W8(d,10,10),h=Q4(0,0),C=ys({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:Tt([to.config({})])});return{type:"widget",data:{value:Jt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[B4.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:j8(g).concat(C.asSpec()),behaviours:Tt([ho("insert-table-picker",[Cr(S=>{to.set(C.get(S),[h])}),Sy(RB,(S,k,O)=>{const{row:B,col:z}=O.event;Z8(g,B,z,10,10),to.set(C.get(S),[Q4(B+1,z+1)])}),Sy(NB,(S,k,O)=>{const{row:B,col:z}=O.event;xo(S,e1()),t.onAction({numRows:B+1,numColumns:z+1})})]),En.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:H8},G8=(t,s)=>xt(MB,t.fancytype).map(c=>c(t,s)),q8=(t,s,c,l=!0,d=!1)=>{const g=d?qM(c.icons):GM(c.icons),h=S=>({isEnabled:()=>!i.isDisabled(S),setEnabled:k=>i.set(S,!k),setIconFill:(k,O)=>{Ar(S.element,`svg path[class="${k}"], rect[class="${k}"]`).each(B=>{Ut(B,"fill",O)})},setTooltip:k=>{const O=c.translate(k);Ut(S.element,"aria-label",O)}}),C=L2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.some(g),checkMark:A.none(),shortcutContent:t.shortcut},c,l);return Av({data:cb(t),getApi:h,enabled:t.enabled,onAction:oe,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,c)},K8=(t,s,c,l=!0)=>{const d=h=>({isEnabled:()=>!i.isDisabled(h),setEnabled:C=>i.set(h,!C)}),g=L2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.none(),checkMark:A.none(),shortcutContent:t.shortcut},c,l);return Av({data:cb(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c)},BB=t=>({type:"separator",dom:{tag:"div",classes:[RT,dM]},components:t.text.map(jr).toArray()}),Y8=(t,s,c,l=!0)=>{const d=h=>({setActive:C=>{_o.set(h,C)},isActive:()=>_o.isOn(h),isEnabled:()=>!i.isDisabled(h),setEnabled:C=>i.set(h,!C)}),g=L2({iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,checkMark:A.some(jM(c.icons)),caret:A.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},c,l);return tr(Av({data:cb(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c),{toggling:{toggleClass:MT,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},X8=JM,PB=BB,J8=K8,$B=q8,Q8=Y8,FB=G8,e7=N4;var n7=Object.freeze({__proto__:null,getCoupled:(t,s,c,l)=>c.getOrCreate(t,s,l),getExistingCoupled:(t,s,c,l)=>c.getExisting(t,s,l)}),o7=[ls("others",Qi(uo.value,xi()))],s7=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if(gs(g.others).length===0)throw new Error("Cannot find any known coupled components");return xt(t,h)},c=(g,h,C)=>s(h,C).getOrThunk(()=>{const k=xt(h.others,C).getOrDie("No information found for coupled component: "+C)(g),O=g.getSystem().build(k);return t[C]=O,O}),l=(g,h,C)=>s(h,C).orThunk(()=>(xt(h.others,C).getOrDie("No information found for coupled component: "+C),A.none())),d=W({});return si({readState:d,getExisting:l,getOrCreate:c})}});const bc=Oa({fields:o7,name:"coupling",apis:n7,state:s7}),e3=t=>{let s=A.none(),c=[];const l=k=>e3(O=>{d(B=>{O(k(B))})}),d=k=>{h()?S(k):c.push(k)},g=k=>{h()||(s=A.some(k),C(c),c=[])},h=()=>s.isSome(),C=k=>{et(k,S)},S=k=>{s.each(O=>{setTimeout(()=>{k(O)},0)})};return t(g),{get:d,map:l,isReady:h}},r7={nu:e3,pure:t=>e3(s=>{s(t)})},c7=t=>{setTimeout(()=>{throw t},0)},Dv=t=>{const s=S=>{t().then(S,c7)};return{map:S=>Dv(()=>t().then(S)),bind:S=>Dv(()=>t().then(k=>S(k).toPromise())),anonBind:S=>Dv(()=>t().then(()=>S.toPromise())),toLazy:()=>r7.nu(s),toCached:()=>{let S=null;return Dv(()=>(S===null&&(S=t()),S))},toPromise:t,get:s}},ol={nu:t=>Dv(()=>new Promise(t)),pure:t=>Dv(()=>Promise.resolve(t))},IB=W("sink"),LB=W(Ni({name:IB(),overrides:W({dom:{tag:"div"},behaviours:Tt([tl.config({useFixed:$e})]),events:dr([pd(Mu()),pd(Qr()),pd($g())])})})),HB=(t,s)=>{const c=t.getHotspot(s).getOr(s),l="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:c,overrides:d}),g=>({type:l,hotspot:c,overrides:d,layouts:g}))},a7=(t,s,c)=>{const l=t.fetch;return l(c).map(s)},l7=(t,s,c,l,d,g,h)=>{const C=a7(t,s,l),S=n3(l,t);return C.map(k=>k.bind(O=>{const B=O.menus[O.primary];return A.from(B).each(z=>{t.listRole.each(V=>{z.role=V})}),A.from(xp.sketch({...g.menu(),uid:h1(""),data:O,highlightOnOpen:h,onOpenMenu:(z,V)=>{const X=S().getOrDie();tl.position(X,V,{anchor:c}),Xo.decloak(d)},onOpenSubmenu:(z,V,X)=>{const te=S().getOrDie();tl.position(te,X,{anchor:{type:"submenu",item:V}}),Xo.decloak(d)},onRepositionMenu:(z,V,X)=>{const te=S().getOrDie();tl.position(te,V,{anchor:c}),et(X,ke=>{tl.position(te,ke.triggeredMenu,{anchor:{type:"submenu",item:ke.triggeringItem}})})},onEscape:()=>(Kn.focus(l),Xo.close(d),A.some(!0))}))}))},Rv=(t,s,c,l,d,g,h)=>{const C=HB(t,c);return l7(t,s,C,c,l,d,h).map(k=>(k.fold(()=>{Xo.isOpen(l)&&Xo.close(l)},O=>{Xo.cloak(l),Xo.open(l,O),g(l)}),l))},i7=(t,s,c,l,d,g,h)=>(Xo.close(l),ol.pure(l)),t3=(t,s,c,l,d,g)=>{const h=bc.getCoupled(c,"sandbox");return(Xo.isOpen(h)?i7:Rv)(t,s,c,h,l,d,g)},u7=(t,s,c)=>{const l=Jo.getCurrent(s).getOr(s),d=q(t.element);c?ot(l.element,"min-width",d+"px"):hu(l.element,d)},n3=(t,s)=>t.getSystem().getByUid(s.uid+"-"+IB()).map(c=>()=>uo.value(c)).getOrThunk(()=>s.lazySink.fold(()=>()=>uo.error(new Error("No internal sink is specified, nor could an external sink be found")),c=>()=>c(t))),o3=t=>{Xo.getState(t).each(s=>{xp.repositionMenus(s)})},s3=(t,s,c)=>{const l=aC(),d=(C,S)=>{const k=HB(t,s);l.link(s.element),t.matchWidth&&u7(k.hotspot,S,t.useMinWidth),t.onOpen(k,C,S),c!==void 0&&c.onOpen!==void 0&&c.onOpen(C,S)},g=(C,S)=>{l.unlink(s.element),h().getOr(S).element.dom.dispatchEvent(new window.FocusEvent("focusout")),c!==void 0&&c.onClose!==void 0&&c.onClose(C,S)},h=n3(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id}},behaviours:iu.augment(t.sandboxBehaviours,[qt.config({store:{mode:"memory",initialValue:s}}),Xo.config({onOpen:d,onClose:g,isPartOf:(C,S,k)=>Xg(S,k)||Xg(s,k),getAttachPoint:()=>h().getOrDie()}),Jo.config({find:C=>Xo.getState(C).bind(S=>Jo.getCurrent(S))}),Zl.config({channels:{...ng({isExtraPart:gt}),...zC({doReposition:o3})}})])}},zB=t=>{const s=bc.getCoupled(t,"sandbox");o3(s)},oE=()=>[_e("sandboxClasses",[]),iu.field("sandboxBehaviours",[Jo,Zl,Xo,qt])],d7=W([tt("dom"),tt("fetch"),Zo("onOpen"),Wl("onExecute"),_e("getHotspot",A.some),_e("getAnchorOverrides",W({})),qf(),ba("dropdownBehaviours",[_o,bc,En,Kn]),tt("toggleClass"),_e("eventOrder",{}),os("lazySink"),_e("matchWidth",!1),_e("useMinWidth",!1),os("role"),os("listRole")].concat(oE())),m7=W([uu({schema:[Yh(),_e("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),LB()]),f7=(t,s,c,l)=>{const d=O=>xt(t.dom,"attributes").bind(B=>xt(B,O)),g=O=>{Xo.getState(O).each(B=>{xp.highlightPrimary(B)})},h=(O,B,z)=>t3(t,Rt,O,l,B,z),C=O=>{h(O,g,pc.HighlightMenuAndItem).get(oe)},S={expand:O=>{_o.isOn(O)||h(O,oe,pc.HighlightNone).get(oe)},open:O=>{_o.isOn(O)||h(O,oe,pc.HighlightMenuAndItem).get(oe)},refetch:O=>bc.getExistingCoupled(O,"sandbox").fold(()=>h(O,oe,pc.HighlightMenuAndItem).map(oe),z=>Rv(t,Rt,O,z,l,oe,pc.HighlightMenuAndItem).map(oe)),isOpen:_o.isOn,close:O=>{_o.isOn(O)&&h(O,oe,pc.HighlightMenuAndItem).get(oe)},repositionMenus:O=>{_o.isOn(O)&&zB(O)}},k=(O,B)=>(_f(O),A.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:va(t.dropdownBehaviours,[_o.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),bc.config({others:{sandbox:O=>s3(t,O,{onOpen:()=>_o.on(O),onClose:()=>_o.off(O)})}}),En.config({mode:"special",onSpace:k,onEnter:k,onDown:(O,B)=>{if(Od.isOpen(O)){const z=bc.getCoupled(O,"sandbox");g(z)}else Od.open(O);return A.some(!0)},onEscape:(O,B)=>Od.isOpen(O)?(Od.close(O),A.some(!0)):A.none()}),Kn.config({})]),events:uT(A.some(C)),eventOrder:{...t.eventOrder,[ou()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),O=>({role:O})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Od=ml({name:"Dropdown",configFields:d7(),partFields:m7(),factory:f7,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),g7=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},h7=t=>{const s=qt.getValue(t),c=N2(t).map(SM);Od.refetch(s).get(()=>{const l=bc.getCoupled(s,"sandbox");c.each(d=>N2(l).each(g=>LL(g,d)))})},sE=(t,s)=>{p7(t).each(c=>{yy(t,c.element,s.event.eventType,s.event.interactionEvent)})},p7=t=>Xo.getState(t).bind(bn.getHighlighted).bind(bn.getHighlighted),rE=t=>ri(t.element,nb)?A.some(t.element):Ar(t.element,"."+nb),VB=(t,s,c)=>{wM(t).each(l=>{HL(l,c),rE(s).each(g=>{Vr(g,"id").each(h=>Ut(l.element,"aria-controls",h))})}),Ut(c.element,"aria-selected","true")},b7=(t,s,c)=>{Ut(c.element,"aria-selected","false")},v7=t=>{wM(t).each(s=>Kn.focus(s))},y7=t=>bc.getExistingCoupled(t,"sandbox").bind(N2).map(SM).map(c=>c.fetchPattern).getOr("");var r3;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(r3||(r3={}));const cE=(t,s,c,l,d)=>{const g=c.shared.providers,h=C=>d?{...C,shortcut:A.none(),icon:C.text.isSome()?A.none():C.icon}:C;switch(t.type){case"menuitem":return a8(t).fold(vh,C=>A.some(J8(h(C),s,g,l)));case"nestedmenuitem":return i8(t).fold(vh,C=>A.some($B(h(C),s,g,l,d)));case"togglemenuitem":return LM(t).fold(vh,C=>A.some(Q8(h(C),s,g,l)));case"separator":return NM(t).fold(vh,C=>A.some(PB(C)));case"fancymenuitem":return ZT(t).fold(vh,C=>FB(C,c));default:return A.none()}},Nv=(t,s,c,l,d,g,h)=>{const C=l===1,S=!C||LT(t);return vc(Pe(t,k=>{switch(k.type){case"separator":return JL(k).fold(vh,O=>A.some(PB(O)));case"cardmenuitem":return s8(k).fold(vh,O=>A.some(e7({...O,onAction:B=>{O.onAction(B),c(O.value,O.meta)}},d,g,{itemBehaviours:D4(O.meta,g,A.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return QL(k).fold(vh,O=>A.some(X8(O,s,C,"normal",c,d,g,S)))}}))},c3=(t,s,c,l,d,g)=>{const h=LT(s),C=vc(Pe(s,O=>{const B=V=>d?!Eo(V,"text"):h,z=V=>cE(V,c,l,B(V),d);return O.type==="nestedmenuitem"&&O.getSubmenuItems().length<=0?z({...O,enabled:!1}):z(O)})),S=g7(g);return(d?UL:h4)(t,h,C,1,S)},aE=t=>xp.singleData(t.value,t),C7=(t,s,c,l)=>{const d=nE(s,l),g=eb(l);return{data:aE({...t,movement:d,menuBehaviours:kv.unnamedEvents(s!=="auto"?[]:[Cr((h,C)=>{_4(h,4,g.item).each(({numColumns:S,numRows:k})=>{En.setGridSize(h,k,S)})})])}),menu:{markers:eb(l),fakeFocus:c===r3.ContentFocus}}},w7=t=>T1.create(ve.fromDom(t.startContainer),t.startOffset,ve.fromDom(t.endContainer),t.endOffset),S7={register:(t,s)=>{const c=Jt("autocompleter"),l=hn(!1),d=hn(!1),g=Es(),h=el(Or.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:c}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Tt([ho("dismissAutocompleter",[st(Ef(),()=>B()),st(kf(),(ae,Ce)=>{Vr(Ce.event.target,"id").each(we=>Ut(ve.fromDom(t.getBody()),"aria-activedescendant",we))})])]),lazySink:s.getSink})),C=()=>Or.isOpen(h),S=d.get,k=()=>{if(C()){Or.hide(h),t.dom.remove(c,!1);const ae=ve.fromDom(t.getBody());Vr(ae,"aria-owns").filter(Ce=>Ce===c).each(()=>{P(ae,"aria-owns"),P(ae,"aria-activedescendant")})}},O=()=>Or.getContent(h).bind(ae=>Po(ae.components(),0)),B=()=>t.execCommand("mceAutocompleterClose"),z=ae=>{const Ce=As(ae,we=>A.from(we.columns)).getOr(1);return ie(ae,we=>{const Qe=we.items;return Nv(Qe,we.matchText,(We,It)=>{const Kt={hide:()=>B(),reload:qe=>{k(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:qe})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(qe=>{l.set(!0),we.onAction(Kt,qe,We,It),l.set(!1)})},Ce,fm.BUBBLE_TO_SANDBOX,s,we.highlightOn)})},V=(ae,Ce)=>{const we=As(ae,Qe=>A.from(Qe.columns)).getOr(1);Or.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(w7),root:ve.fromDom(t.getBody())}},C7(h4("autocompleter-value",!0,Ce,we,{menuType:"normal"}),we,r3.ContentFocus,"normal")),O().each(bn.highlightFirst)},X=ae=>{const Ce=z(ae);Ce.length>0?(V(ae,Ce),Ut(ve.fromDom(t.getBody()),"aria-owns",c),t.inline||te()):k()},te=()=>{t.dom.get(c)&&t.dom.remove(c,!1);const ae=t.getDoc().documentElement,Ce=t.selection.getNode(),we=jb(h.element);eo(we,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Ce.offsetTop}px`,left:`${Ce.offsetLeft}px`}),t.dom.add(ae,we.dom),Ar(we,'[role="menu"]').each(Qe=>{co(Qe,"position"),co(Qe,"max-height")})};t.on("AutocompleterStart",({lookupData:ae})=>{d.set(!0),l.set(!1),X(ae)}),t.on("AutocompleterUpdate",({lookupData:ae})=>X(ae)),t.on("AutocompleterUpdateActiveRange",({range:ae})=>g.set(ae)),t.on("AutocompleterEnd",()=>{k(),d.set(!1),l.set(!1),g.clear()});const ke={cancelIfNecessary:B,isMenuOpen:C,isActive:S,isProcessingAction:l.get,getMenu:O};uM.setup(ke,t)}},j2=(t,s,c)=>$u(t,s,c).isSome(),UB=(t,s)=>{let c=null;return{cancel:()=>{c!==null&&(clearTimeout(c),c=null)},schedule:(...g)=>{c=setTimeout(()=>{t.apply(null,g),c=null},s)}}},WB=5,x7=400,ZB=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?A.none():A.some(s.touches[0])},T7=(t,s)=>{const c=Math.abs(t.clientX-s.x),l=Math.abs(t.clientY-s.y);return c>WB||l>WB},E7=t=>{const s=Es(),c=hn(!1),l=UB(k=>{t.triggerEvent(Ja(),k),c.set(!0)},x7),d=k=>(ZB(k).each(O=>{l.cancel();const B={x:O.clientX,y:O.clientY,target:k.target};l.schedule(k),c.set(!1),s.set(B)}),A.none()),g=k=>(l.cancel(),ZB(k).each(O=>{s.on(B=>{T7(O,B)&&s.clear()})}),A.none()),h=k=>{l.cancel();const O=B=>es(B.target,k.target);return s.get().filter(O).map(B=>c.get()?(k.prevent(),!1):t.triggerEvent(gd(),k))},C=vs([{key:tu(),value:d},{key:ns(),value:g},{key:or(),value:h}]);return{fireIfReady:(k,O)=>xt(C,O).bind(B=>B(k))}},jB=t=>t.raw.which===Mr[0]&&!Jn(["input","textarea"],cs(t.target))&&!j2(t.target,'[contenteditable="true"]'),Mv=(t,s)=>{const c={stopBackspace:!0,...s},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=E7(c),g=Pe(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),V=>kl(t,V,X=>{d.fireIfReady(X,V).each(ke=>{ke&&X.kill()}),c.triggerEvent(V,X)&&X.kill()})),h=Es(),C=kl(t,"paste",V=>{d.fireIfReady(V,"paste").each(te=>{te&&V.kill()}),c.triggerEvent("paste",V)&&V.kill(),h.set(setTimeout(()=>{c.triggerEvent(Fm(),V)},0))}),S=kl(t,"keydown",V=>{c.triggerEvent("keydown",V)?V.kill():c.stopBackspace&&jB(V)&&V.prevent()}),k=kl(t,"focusin",V=>{c.triggerEvent("focusin",V)&&V.kill()}),O=Es(),B=kl(t,"focusout",V=>{c.triggerEvent("focusout",V)&&V.kill(),O.set(setTimeout(()=>{c.triggerEvent(Tf(),V)},0))});return{unbind:()=>{et(g,V=>{V.unbind()}),S.unbind(),k.unbind(),B.unbind(),C.unbind(),h.on(clearTimeout),O.on(clearTimeout)}}},Rp=(t,s)=>{const c=xt(t,"target").getOr(s);return hn(c)},k7=(t,s)=>{const c=hn(!1),l=hn(!1);return{stop:()=>{c.set(!0)},cut:()=>{l.set(!0)},isStopped:c.get,isCut:l.get,event:t,setSource:s.set,getSource:s.get}},GB=t=>{const s=hn(!1);return{stop:()=>{s.set(!0)},cut:oe,isStopped:s.get,isCut:gt,event:t,setSource:le("Cannot set source of a broadcasted event"),getSource:le("Cannot get source of a broadcasted event")}},Bv=K.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),G2=(t,s,c,l,d,g)=>{const h=t(s,l),C=k7(c,d);return h.fold(()=>(g.logEventNoHandlers(s,l),Bv.complete()),S=>{const k=S.descHandler;return Jh(k)(C),C.isStopped()?(g.logEventStopped(s,S.element,k.purpose),Bv.stopped()):C.isCut()?(g.logEventCut(s,S.element,k.purpose),Bv.complete()):Ac(S.element).fold(()=>(g.logNoParent(s,S.element,k.purpose),Bv.complete()),B=>(g.logEventResponse(s,S.element,k.purpose),Bv.resume(B)))})},qB=(t,s,c,l,d,g)=>G2(t,s,c,l,d,g).fold($e,h=>qB(t,s,c,h,d,g),gt),q2=(t,s,c,l,d)=>{const g=Rp(c,l);return G2(t,s,c,l,g,d)},K2=(t,s,c)=>{const l=GB(s);return et(t,d=>{const g=d.descHandler;Jh(g)(l)}),l.isStopped()},_7=(t,s,c,l)=>KB(t,s,c,c.target,l),KB=(t,s,c,l,d)=>{const g=Rp(c,l);return qB(t,s,c,l,g,d)},A7=(t,s)=>({element:t,descHandler:s}),O7=(t,s)=>({id:t,descHandler:s}),D7=()=>{const t={},s=(h,C,S)=>{xs(S,(k,O)=>{const B=t[O]!==void 0?t[O]:{};B[C]=Xh(k,h),t[O]=B})},c=(h,C)=>vd(C).bind(S=>xt(h,S)).map(S=>A7(C,S));return{registerId:s,unregisterId:h=>{xs(t,(C,S)=>{Eo(C,h)&&delete C[h]})},filterByType:h=>xt(t,h).map(C=>ca(C,(S,k)=>O7(k,S))).getOr([]),find:(h,C,S)=>xt(t,C).bind(k=>Ei(S,O=>c(k,O),h))}},R7=()=>{const t=D7(),s={},c=k=>{const O=k.element;return vd(O).getOrThunk(()=>xS("uid-",k.element))},l=(k,O)=>{const B=s[O];if(B===k)g(k);else throw new Error('The tagId "'+O+'" is already used by: '+m1(B.element)+`
Cannot use it for: `+m1(k.element)+`
The conflicting element is`+(Yt(B.element)?" ":" not ")+"already in the DOM")},d=k=>{const O=c(k);Pr(s,O)&&l(k,O);const B=[k];t.registerId(B,O,k.events),s[O]=k},g=k=>{vd(k.element).each(O=>{delete s[O],t.unregisterId(O)})};return{find:(k,O,B)=>t.find(k,O,B),filter:k=>t.filterByType(k),register:d,unregister:g,getById:k=>xt(s,k)}},of=gi({name:"Container",factory:t=>{const{attributes:s,...c}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...c},components:t.components,behaviours:P1(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[_e("components",[]),ba("containerBehaviours",[]),_e("events",{}),_e("domModification",{}),_e("eventOrder",{})]}),Y2=t=>{const s=ae=>Ac(t.element).fold($e,Ce=>es(ae,Ce)),c=R7(),l=(ae,Ce)=>c.find(s,ae,Ce),d=Mv(t.element,{triggerEvent:(ae,Ce)=>Hm(ae,Ce.target,we=>_7(l,ae,Ce,we))}),g={debugInfo:W("real"),triggerEvent:(ae,Ce,we)=>{Hm(ae,Ce,Qe=>KB(l,ae,we,Ce,Qe))},triggerFocus:(ae,Ce)=>{vd(ae).fold(()=>{Ai(ae)},we=>{Hm($m(),ae,Qe=>(q2(l,$m(),{originator:Ce,kill:oe,prevent:oe,target:ae},ae,Qe),!1))})},triggerEscape:(ae,Ce)=>{g.triggerEvent("keydown",ae.element,Ce.event)},getByUid:ae=>te(ae),getByDom:ae=>ke(ae),build:el,buildOrPatch:c0,addToGui:ae=>{S(ae)},removeFromGui:ae=>{k(ae)},addToWorld:ae=>{h(ae)},removeFromWorld:ae=>{C(ae)},broadcast:ae=>{z(ae)},broadcastOn:(ae,Ce)=>{V(ae,Ce)},broadcastEvent:(ae,Ce)=>{X(ae,Ce)},isConnected:$e},h=ae=>{ae.connect(g),No(ae.element)||(c.register(ae),et(ae.components(),h),g.triggerEvent(t1(),ae.element,{target:ae.element}))},C=ae=>{No(ae.element)||(et(ae.components(),C),c.unregister(ae)),ae.disconnect()},S=ae=>{Iu(t,ae)},k=ae=>{qm(ae)},O=()=>{d.unbind(),qa(t.element)},B=ae=>{const Ce=c.filter(nu());et(Ce,we=>{const Qe=we.descHandler;Jh(Qe)(ae)})},z=ae=>{B({universal:!0,data:ae})},V=(ae,Ce)=>{B({universal:!1,channels:ae,data:Ce})},X=(ae,Ce)=>{const we=c.filter(ae);return K2(we,Ce)},te=ae=>c.getById(ae).fold(()=>uo.error(new Error('Could not find component with uid: "'+ae+'" in system.')),uo.value),ke=ae=>{const Ce=vd(ae).getOr("not found");return te(Ce)};return h(t),{root:t,element:t.element,destroy:O,add:S,remove:k,getByUid:te,getByDom:ke,addToWorld:h,removeFromWorld:C,broadcast:z,broadcastOn:V,broadcastEvent:X}},N7=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Pe(t.items,s.interpreter)}),M7=W([_e("prefix","form-field"),ba("fieldBehaviours",[Jo,qt])]),B7=W([Ni({schema:[tt("dom")],name:"label"}),Ni({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[tt("text")],name:"aria-descriptor"}),Wa({factory:{sketch:t=>{const s=ao(t,["factory"]);return t.factory.sketch(s)}},schema:[tt("factory")],name:"field"})]),YB=(t,s,c,l)=>{const d=va(t.fieldBehaviours,[Jo.config({find:C=>Ct(C,t,"field")}),qt.config({store:{mode:"manual",getValue:C=>Jo.getCurrent(C).bind(qt.getValue),setValue:(C,S)=>{Jo.getCurrent(C).each(k=>{qt.setValue(k,S)})}}})]),g=dr([Cr((C,S)=>{const k=Gx(C,t,["label","field","aria-descriptor"]);k.field().each(O=>{const B=Jt(t.prefix);k.label().each(z=>{Ut(z.element,"for",B),Ut(O.element,"id",B)}),k["aria-descriptor"]().each(z=>{const V=Jt(t.prefix);Ut(z.element,"id",V),Ut(O.element,"aria-describedby",V)})})})]),h={getField:C=>Ct(C,t,"field"),getLabel:C=>Ct(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},Hs=ml({name:"FormField",configFields:M7(),partFields:B7(),factory:YB,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var P7=tinymce.util.Tools.resolve("tinymce.html.Entities");const X2=(t,s,c,l)=>{const d=$7(t,s,c,l);return Hs.sketch(d)},XB=(t,s)=>X2(t,s,[],[]),$7=(t,s,c,l)=>({dom:JB(c),components:t.toArray().concat([s]),fieldBehaviours:Tt(l)}),F7=()=>JB([]),JB=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Np=(t,s)=>Hs.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[jr(s.translate(t))]}),Fi=Jt("form-component-change"),Pv=Jt("form-close"),wh=Jt("form-cancel"),cg=Jt("form-action"),J2=Jt("form-submit"),l3=Jt("form-block"),i3=Jt("form-unblock"),QB=Jt("form-tabchange"),u3=Jt("form-resize"),$v=(t,s,c)=>{const l=t.label.map(V=>Np(V,s)),d=s.icons(),g=V=>{var X;return(X=d[V])!==null&&X!==void 0?X:V},h=V=>(X,te)=>{$u(te.event.target,"[data-collection-item-value]").each(ke=>{V(X,te,ke,gn(ke,"data-collection-item-value"))})},C=(V,X)=>{const te=Pe(X,Ce=>{const we=Uu.translate(Ce.text),Qe=t.columns===1?`<div class="tox-collection__item-label">${we}</div>`:"",We=`<div class="tox-collection__item-icon">${g(Ce.icon)}</div>`,It={_:" "," - ":" ","-":" "},Kt=we.replace(/\_| \- |\-/g,cn=>It[cn]),qe=s.isDisabled()?" tox-collection__item--state-disabled":"";return`<div data-mce-tooltip="${Kt}" class="tox-collection__item${qe}" tabindex="-1" data-collection-item-value="${P7.encodeAllRaw(Ce.value)}" aria-label="${Kt}">${We}${Qe}</div>`}),ke=t.columns!=="auto"&&t.columns>1?mn(te,t.columns):[te],ae=Pe(ke,Ce=>`<div class="tox-collection__group">${Ce.join("")}</div>`);Bf(V.element,ae.join(""))},S=h((V,X,te,ke)=>{X.stop(),s.isDisabled()||An(V,cg,{name:t.name,value:ke})}),k=[st(ni(),h((V,X,te)=>{Ai(te)})),st($g(),S),st(gd(),S),st(md(),h((V,X,te)=>{Ar(V.element,"."+_p).each(ke=>{Zr(ke,_p)}),mr(te,_p)})),st(Yd(),h(V=>{Ar(V.element,"."+_p).each(X=>{Zr(X,_p),g0(X)})})),Bu(h((V,X,te,ke)=>{An(V,cg,{name:t.name,value:ke})}))],O=(V,X)=>Pe(Ra(V.element,".tox-collection__item"),X),B=Hs.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Rt},behaviours:Tt([i.config({disabled:s.isDisabled,onDisabled:V=>{O(V,X=>{mr(X,"tox-collection__item--state-disabled"),Ut(X,"aria-disabled",!0)})},onEnabled:V=>{O(V,X=>{Zr(X,"tox-collection__item--state-disabled"),P(X,"aria-disabled")})}}),Ca(),to.config({}),ac.config({...s.tooltips.getConfig({tooltipText:"",onShow:V=>{Ar(V.element,"."+_p+"[data-mce-tooltip]").each(X=>{Vr(X,"data-mce-tooltip").each(te=>{ac.setComponents(V,s.tooltips.getComponents({tooltipText:te}))})})}}),mode:"children-keyboard-focus",anchor:V=>({type:"node",node:Ar(V.element,"."+_p).orThunk(()=>Tl(".tox-collection__item")),root:V.element,layouts:{onLtr:W([jc,Zc,Wc,Is,rc,za]),onRtl:W([jc,Zc,Wc,Is,rc,za])},bubble:Fu(0,-2,{})})}),qt.config({store:{mode:"memory",initialValue:c.getOr([])},onSetValue:(V,X)=>{C(V,X),t.columns==="auto"&&_4(V,5,"tox-collection__item").each(({numRows:te,numColumns:ke})=>{En.setGridSize(V,te,ke)}),xo(V,u3)}}),gr.config({}),En.config(L8(t.columns,"normal")),ho("collection-events",k)]),eventOrder:{[ou()]:["disabling","alloy.base.behaviour","collection-events"],[md()]:["collection-events","tooltipping"]}});return X2(l,B,["tox-form__group--collection"],[])},I7=["input","textarea"],eP=t=>{const s=cs(t);return Jn(I7,s)},tP=(t,s)=>{const c=s.getRoot(t).getOr(t.element);Zr(c,s.invalidClass),s.notify.each(l=>{eP(t.element)&&Ut(t.element,"aria-invalid",!1),l.getContainer(t).each(d=>{Bf(d,l.validHtml)}),l.onValid(t)})},Q2=(t,s,c,l)=>{const d=s.getRoot(t).getOr(t.element);mr(d,s.invalidClass),s.notify.each(g=>{eP(t.element)&&Ut(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{Bf(h,l)}),g.onInvalid(t,l)})},Zu=(t,s,c)=>s.validator.fold(()=>ol.pure(uo.value(!0)),l=>l.validate(t)),ew=(t,s,c)=>(s.notify.each(l=>{l.onValidate(t)}),Zu(t,s).map(l=>t.getSystem().isConnected()?l.fold(d=>(Q2(t,s,c,d),uo.error(d)),d=>(tP(t,s),uo.value(d))):uo.error("No longer in system")));var H7=Object.freeze({__proto__:null,markValid:tP,markInvalid:Q2,query:Zu,run:ew,isInvalid:(t,s)=>{const c=s.getRoot(t).getOr(t.element);return ri(c,s.invalidClass)}}),z7=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(c=>dr([st(c.onEvent,l=>{ew(l,t,s).get(Rt)})].concat(c.validateOnLoad?[Cr(l=>{ew(l,t,s).get(oe)})]:[]))).getOr({})}),V7=[tt("invalidClass"),_e("getRoot",A.none),lr("notify",[_e("aria","alert"),_e("getContainer",A.none),_e("validHtml",""),Zo("onValid"),Zo("onInvalid"),Zo("onValidate")]),lr("validator",[tt("validate"),_e("onEvent","input"),_e("validateOnLoad",!0)])];const sf=Oa({fields:V7,name:"invalidating",active:z7,apis:H7,extra:{validation:t=>s=>{const c=qt.getValue(s);return ol.pure(t(c))}}});var W7=Object.freeze({__proto__:null,events:()=>dr([cS(gy(),$e)]),exhibit:()=>oi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Fv=Oa({fields:[],name:"unselecting",active:W7}),Z7=(t,s)=>Od.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Tt([hm.button(s.providers.isDisabled),Ca(),Fv.config({}),gr.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:c=>ol.nu(l=>t.fetch(l)).map(l=>A.from(aE(tr(J4(Jt("menu-value"),l,d=>{t.onItemAction(c,d)},t.columns,t.presets,fm.CLOSE_ON_EXECUTE,gt,s.providers),{movement:nE(t.columns,t.presets)})))),parts:{menu:R2(!1,1,t.presets)}}),d3=Jt("color-input-change"),m3=Jt("color-swatch-change"),f3=Jt("color-picker-cancel"),j7=(t,s,c,l)=>{const d=Hs.parts.field({factory:tb,inputClasses:["tox-textfield"],data:l,onSetValue:k=>sf.run(k).get(oe),inputBehaviours:Tt([i.config({disabled:s.providers.isDisabled}),Ca(),gr.config({}),sf.config({invalidClass:"tox-textbox-field-invalid",getRoot:k=>aa(k.element),notify:{onValid:k=>{const O=qt.getValue(k);An(k,d3,{color:O})}},validator:{validateOnLoad:!1,validate:k=>{const O=qt.getValue(k);if(O.length===0)return ol.pure(uo.value(!0));{const B=ve.fromTag("span");ot(B,"background-color",O);const z=Us(B,"background-color").fold(()=>uo.error("blah"),V=>uo.value(O));return ol.pure(z)}}}})]),selectOnFocus:!1}),g=t.label.map(k=>Np(k,s.providers)),h=(k,O)=>{An(k,m3,{value:O})},C=(k,O)=>{S.getOpt(k).each(B=>{O==="custom"?c.colorPicker(z=>{z.fold(()=>xo(B,f3),V=>{h(B,V),bB(t.storageKey,V)})},"#ffffff"):O==="remove"?h(B,""):h(B,O)})},S=ys(Z7({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[rc,Wc,jc],onLtr:()=>[Wc,rc,jc]},components:[],fetch:EB(c.getColors(t.storageKey),t.storageKey,c.hasCustomColors()),columns:c.getColorCols(t.storageKey),presets:"color",onItemAction:C},s));return Hs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,S.asSpec()]}]),fieldBehaviours:Tt([ho("form-field-events",[st(d3,(k,O)=>{S.getOpt(k).each(B=>{ot(B.element,"background-color",O.event.color)}),An(k,Fi,{name:t.name})}),st(m3,(k,O)=>{Hs.getField(k).each(B=>{qt.setValue(B,O.event.value),Jo.getCurrent(k).each(Kn.focus)})}),st(f3,(k,O)=>{Hs.getField(k).each(B=>{Jo.getCurrent(k).each(Kn.focus)})})])])})},G7=Ni({schema:[tt("dom")],name:"label"}),Mp=t=>Ni({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),l=>({events:dr([Hg(tu(),(d,g,h)=>l(d,h),[s]),Hg(Qr(),(d,g,h)=>l(d,h),[s]),Hg(Hh(),(d,g,h)=>{h.mouseIsDown.get()&&l(d,h)},[s])])}))}),q7=Mp("top-left"),K7=Mp("top"),Y7=Mp("top-right"),g3=Mp("right"),X7=Mp("bottom-right"),J7=Mp("bottom"),nP=Mp("bottom-left"),Q7=Mp("left"),eH=Wa({name:"thumb",defaults:W({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:dr([zg(tu(),t,"spectrum"),zg(ns(),t,"spectrum"),zg(or(),t,"spectrum"),zg(Qr(),t,"spectrum"),zg(Hh(),t,"spectrum"),zg(Pm(),t,"spectrum")])})}),lE=t=>zu(t.event),tH=Wa({schema:[as("mouseIsDown",()=>hn(!1))],name:"spectrum",overrides:t=>{const c=t.model.manager,l=(d,g)=>c.getValueFromEvent(g).map(h=>c.setValueFrom(d,t,h));return{behaviours:Tt([En.config({mode:"special",onLeft:(d,g)=>c.onLeft(d,t,lE(g)),onRight:(d,g)=>c.onRight(d,t,lE(g)),onUp:(d,g)=>c.onUp(d,t,lE(g)),onDown:(d,g)=>c.onDown(d,t,lE(g))}),gr.config({}),Kn.config({})]),events:dr([st(tu(),l),st(ns(),l),st(Qr(),l),st(Hh(),(d,g)=>{t.mouseIsDown.get()&&l(d,g)})])}}});var nH=[G7,Q7,g3,K7,J7,q7,Y7,nP,X7,eH,tH];const tw=W("slider.change.value"),oP=t=>t.type.indexOf("touch")!==-1,iE=t=>{const s=t.event.raw;if(oP(s)){const c=s;return c.touches!==void 0&&c.touches.length===1?A.some(c.touches[0]).map(l=>ar(l.clientX,l.clientY)):A.none()}else{const c=s;return c.clientX!==void 0?A.some(c).map(l=>ar(l.clientX,l.clientY)):A.none()}},oH="top",sH="right",rH="bottom",cH="left",ub=t=>t.model.minX,db=t=>t.model.minY,nw=t=>t.model.minX-1,ow=t=>t.model.minY-1,Bp=t=>t.model.maxX,Sh=t=>t.model.maxY,uE=t=>t.model.maxX+1,sw=t=>t.model.maxY+1,sP=(t,s,c)=>s(t)-c(t),h3=t=>sP(t,Bp,ub),p3=t=>sP(t,Sh,db),rP=t=>h3(t)/2,dE=t=>p3(t)/2,ju=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,cP=t=>t.snapToGrid,Iv=t=>t.snapStart,aP=t=>t.rounded,Lv=(t,s)=>t[s+"-edge"]!==void 0,lP=t=>Lv(t,cH),iP=t=>Lv(t,sH),uP=t=>Lv(t,oH),b3=t=>Lv(t,rH),xh=t=>t.model.value.get(),ag=(t,s)=>({x:t,y:s}),Gu=(t,s)=>{An(t,tw(),{value:s})},v3=(t,s)=>{Gu(t,ag(nw(s),ow(s)))},aH=(t,s)=>{Gu(t,ow(s))},qu=(t,s)=>{Gu(t,ag(rP(s),ow(s)))},lH=(t,s)=>{Gu(t,ag(uE(s),ow(s)))},iH=(t,s)=>{Gu(t,uE(s))},dP=(t,s)=>{Gu(t,ag(uE(s),dE(s)))},mP=(t,s)=>{Gu(t,ag(uE(s),sw(s)))},uH=(t,s)=>{Gu(t,sw(s))},dH=(t,s)=>{Gu(t,ag(rP(s),sw(s)))},mH=(t,s)=>{Gu(t,ag(nw(s),sw(s)))},fH=(t,s)=>{Gu(t,nw(s))},gH=(t,s)=>{Gu(t,ag(nw(s),dE(s)))},y3=(t,s,c,l)=>t<s?t:t>c?c:t===s?s-1:Math.max(s,t-l),C3=(t,s,c,l)=>t>c?t:t<s?s:t===c?c+1:Math.min(c,t+l),w3=(t,s,c)=>Math.max(s,Math.min(c,t)),hH=(t,s,c,l,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/l)*l;return w3(s+h,s-1,c+1)},g=>{const h=(t-g)%l,C=Math.round(h/l),S=Math.floor((t-g)/l),k=Math.floor((c-g)/l),O=Math.min(k,S+C),B=g+O*l;return Math.max(g,B)}),pH=(t,s,c)=>Math.min(c,Math.max(t,s))-s,fP=t=>{const{min:s,max:c,range:l,value:d,step:g,snap:h,snapStart:C,rounded:S,hasMinEdge:k,hasMaxEdge:O,minBound:B,maxBound:z,screenRange:V}=t,X=k?s-1:s,te=O?c+1:c;if(d<B)return X;if(d>z)return te;{const ke=pH(d,B,z),ae=w3(ke/V*l+s,X,te);return h&&ae>=s&&ae<=c?hH(ae,s,c,g,C):S?Math.round(ae):ae}},S3=t=>{const{min:s,max:c,range:l,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:C,maxOffset:S,centerMinEdge:k,centerMaxEdge:O}=t;return d<s?g?0:k:d>c?h?C:O:(d-s)/l*S},rw="top",x3="right",T3="bottom",mE="left",gP="width",E3="height",lg=t=>t.element.dom.getBoundingClientRect(),Ku=(t,s)=>t[s],Th=t=>{const s=lg(t);return Ku(s,mE)},k3=t=>{const s=lg(t);return Ku(s,x3)},cw=t=>{const s=lg(t);return Ku(s,rw)},_3=t=>{const s=lg(t);return Ku(s,T3)},hP=t=>{const s=lg(t);return Ku(s,gP)},pP=t=>{const s=lg(t);return Ku(s,E3)},aw=(t,s,c)=>(t+s)/2-c,bP=(t,s)=>{const c=lg(t),l=lg(s),d=Ku(c,mE),g=Ku(c,x3),h=Ku(l,mE);return aw(d,g,h)},vP=(t,s)=>{const c=lg(t),l=lg(s),d=Ku(c,rw),g=Ku(c,T3),h=Ku(l,rw);return aw(d,g,h)},lw=(t,s)=>{An(t,tw(),{value:s})},fE=(t,s,c)=>{const l={min:ub(s),max:Bp(s),range:h3(s),value:c,step:ju(s),snap:cP(s),snapStart:Iv(s),rounded:aP(s),hasMinEdge:lP(s),hasMaxEdge:iP(s),minBound:Th(t),maxBound:k3(t),screenRange:hP(t)};return fP(l)},A3=(t,s,c)=>{const l=fE(t,s,c);return lw(t,l),l},yP=(t,s)=>{const c=ub(s);lw(t,c)},pi=(t,s)=>{const c=Bp(s);lw(t,c)},CP=(t,s,c,l)=>{const g=(t>0?C3:y3)(xh(c),ub(c),Bp(c),ju(c,l));return lw(s,g),A.some(g)},wP=t=>(s,c,l)=>CP(t,s,c,l).map($e),bH=t=>iE(t).map(c=>c.left),SP=(t,s,c,l,d)=>{const h=hP(t),C=l.bind(O=>A.some(bP(O,t))).getOr(0),S=d.bind(O=>A.some(bP(O,t))).getOr(h),k={min:ub(s),max:Bp(s),range:h3(s),value:c,hasMinEdge:lP(s),hasMaxEdge:iP(s),minBound:Th(t),minOffset:0,maxBound:k3(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return S3(k)},O3=(t,s,c,l,d,g)=>{const h=SP(s,g,c,l,d);return Th(s)-Th(t)+h},vH=(t,s,c,l)=>{const d=xh(c),g=O3(t,l.getSpectrum(t),d,l.getLeftEdge(t),l.getRightEdge(t),c),h=q(s.element)/2;ot(s.element,"left",g-h+"px")},yH=wP(-1),xP=wP(1),ig=A.none,D3=A.none,TP={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some(iH),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some(fH)};var gE=Object.freeze({__proto__:null,setValueFrom:A3,setToMin:yP,setToMax:pi,findValueOfOffset:fE,getValueFromEvent:bH,findPositionOfValue:O3,setPositionFromValue:vH,onLeft:yH,onRight:xP,onUp:ig,onDown:D3,edgeActions:TP});const Hv=(t,s)=>{An(t,tw(),{value:s})},R3=(t,s,c)=>{const l={min:db(s),max:Sh(s),range:p3(s),value:c,step:ju(s),snap:cP(s),snapStart:Iv(s),rounded:aP(s),hasMinEdge:uP(s),hasMaxEdge:b3(s),minBound:cw(t),maxBound:_3(t),screenRange:pP(t)};return fP(l)},CH=(t,s,c)=>{const l=R3(t,s,c);return Hv(t,l),l},wH=(t,s)=>{const c=db(s);Hv(t,c)},SH=(t,s)=>{const c=Sh(s);Hv(t,c)},xH=(t,s,c,l)=>{const g=(t>0?C3:y3)(xh(c),db(c),Sh(c),ju(c,l));return Hv(s,g),A.some(g)},EP=t=>(s,c,l)=>xH(t,s,c,l).map($e),TH=t=>iE(t).map(c=>c.top),kP=(t,s,c,l,d)=>{const h=pP(t),C=l.bind(O=>A.some(vP(O,t))).getOr(0),S=d.bind(O=>A.some(vP(O,t))).getOr(h),k={min:db(s),max:Sh(s),range:p3(s),value:c,hasMinEdge:uP(s),hasMaxEdge:b3(s),minBound:cw(t),minOffset:0,maxBound:_3(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return S3(k)},N3=(t,s,c,l,d,g)=>{const h=kP(s,g,c,l,d);return cw(s)-cw(t)+h},ug=(t,s,c,l)=>{const d=xh(c),g=N3(t,l.getSpectrum(t),d,l.getTopEdge(t),l.getBottomEdge(t),c),h=$s(s.element)/2;ot(s.element,"top",g-h+"px")},hE=A.none,EH=A.none,kH=EP(-1),_P=EP(1),AP={"top-left":A.none(),top:A.some(aH),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some(uH),"bottom-left":A.none(),left:A.none()};var M3=Object.freeze({__proto__:null,setValueFrom:CH,setToMin:wH,setToMax:SH,findValueOfOffset:R3,getValueFromEvent:TH,findPositionOfValue:N3,setPositionFromValue:ug,onLeft:hE,onRight:EH,onUp:kH,onDown:_P,edgeActions:AP});const mb=(t,s)=>{An(t,tw(),{value:s})},Pp=(t,s)=>({x:t,y:s}),iw=(t,s,c)=>{const l=fE(t,s,c.left),d=R3(t,s,c.top),g=Pp(l,d);return mb(t,g),g},OP=(t,s,c,l,d)=>{const g=t>0?C3:y3,h=s?xh(l).x:g(xh(l).x,ub(l),Bp(l),ju(l,d)),C=s?g(xh(l).y,db(l),Sh(l),ju(l,d)):xh(l).y;return mb(c,Pp(h,C)),A.some(h)},uw=(t,s)=>(c,l,d)=>OP(t,s,c,l,d).map($e),DP=(t,s)=>{const c=ub(s),l=db(s);mb(t,Pp(c,l))},RP=(t,s)=>{const c=Bp(s),l=Sh(s);mb(t,Pp(c,l))},_H=t=>iE(t),AH=(t,s,c,l)=>{const d=xh(c),g=O3(t,l.getSpectrum(t),d.x,l.getLeftEdge(t),l.getRightEdge(t),c),h=N3(t,l.getSpectrum(t),d.y,l.getTopEdge(t),l.getBottomEdge(t),c),C=q(s.element)/2,S=$s(s.element)/2;ot(s.element,"left",g-C+"px"),ot(s.element,"top",h-S+"px")},OH=uw(-1,!1),DH=uw(1,!1),RH=uw(-1,!0),NP=uw(1,!0),MP={"top-left":A.some(v3),top:A.some(qu),"top-right":A.some(lH),right:A.some(dP),"bottom-right":A.some(mP),bottom:A.some(dH),"bottom-left":A.some(mH),left:A.some(gH)};var NH=Object.freeze({__proto__:null,setValueFrom:iw,setToMin:DP,setToMax:RP,getValueFromEvent:_H,setPositionFromValue:AH,onLeft:OH,onRight:DH,onUp:RH,onDown:NP,edgeActions:MP});const BP=[_e("stepSize",1),_e("speedMultiplier",10),_e("onChange",oe),_e("onChoose",oe),_e("onInit",oe),_e("onDragStart",oe),_e("onDragEnd",oe),_e("snapToGrid",!1),_e("rounded",!0),os("snapStart"),ls("model",Vc("mode",{x:[_e("minX",0),_e("maxX",100),as("value",t=>hn(t.mode.minX)),tt("getInitialValue"),Gs("manager",gE)],y:[_e("minY",0),_e("maxY",100),as("value",t=>hn(t.mode.minY)),tt("getInitialValue"),Gs("manager",M3)],xy:[_e("minX",0),_e("maxX",100),_e("minY",0),_e("maxY",100),as("value",t=>hn({x:t.mode.minX,y:t.mode.minY})),tt("getInitialValue"),Gs("manager",NH)]})),ba("sliderBehaviours",[En,qt]),as("mouseIsDown",()=>hn(!1))],Dd=ml({name:"Slider",configFields:BP,partFields:nH,factory:(t,s,c,l)=>{const d=We=>Mi(We,t,"thumb"),g=We=>Mi(We,t,"spectrum"),h=We=>Ct(We,t,"left-edge"),C=We=>Ct(We,t,"right-edge"),S=We=>Ct(We,t,"top-edge"),k=We=>Ct(We,t,"bottom-edge"),O=t.model,B=O.manager,z=(We,It)=>{B.setPositionFromValue(We,It,t,{getLeftEdge:h,getRightEdge:C,getTopEdge:S,getBottomEdge:k,getSpectrum:g})},V=(We,It)=>{O.value.set(It);const Kt=d(We);z(We,Kt)},X=(We,It)=>{V(We,It);const Kt=d(We);return t.onChange(We,Kt,It),A.some(!0)},te=We=>{B.setToMin(We,t)},ke=We=>{B.setToMax(We,t)},ae=We=>{const It=()=>{Ct(We,t,"thumb").each(qe=>{const cn=O.value.get();t.onChoose(We,qe,cn)})},Kt=t.mouseIsDown.get();t.mouseIsDown.set(!1),Kt&&It()},Ce=(We,It)=>{It.stop(),t.mouseIsDown.set(!0),t.onDragStart(We,d(We))},we=(We,It)=>{It.stop(),t.onDragEnd(We,d(We)),ae(We)},Qe=We=>{Ct(We,t,"spectrum").map(En.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:va(t.sliderBehaviours,[En.config({mode:"special",focusIn:Qe}),qt.config({store:{mode:"manual",getValue:We=>O.value.get(),setValue:V}}),Zl.config({channels:{[G0()]:{onReceive:ae}}})]),events:dr([st(tw(),(We,It)=>{X(We,It.event.value)}),Cr((We,It)=>{const Kt=O.getInitialValue();O.value.set(Kt);const qe=d(We);z(We,qe);const cn=g(We);t.onInit(We,qe,cn,O.value.get())}),st(tu(),Ce),st(or(),we),st(Qr(),(We,It)=>{Qe(We),Ce(We,It)}),st(Pm(),we)]),apis:{resetToMin:te,resetToMax:ke,setValue:V,refresh:z},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,c)=>{t.setValue(s,c)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),fb=Jt("rgb-hex-update"),PP=Jt("slider-update"),B3=Jt("palette-update"),MH=(t,s)=>{const c=Dd.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=Dd.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Dd.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:W(0)},components:[c,l],sliderBehaviours:Tt([Kn.config({})]),onChange:(d,g,h)=>{Ut(d.element,"aria-valuenow",Math.floor(360-h*3.6)),An(d,PP,{value:h})}})},$P="form",BH=[ba("formBehaviours",[qt])],FP=t=>"<alloy.field."+t+">",IP=t=>{const s=(()=>{const g=[];return{field:(C,S)=>(g.push(C),Wx($P,FP(C),S)),record:W(g)}})(),c=t(s),l=s.record(),d=Pe(l,g=>Wa({name:g,pname:FP(g)}));return og($P,BH,d,LP,c)},PH=(t,s)=>t.fold(()=>uo.error(s),uo.value),LP=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:va(t.formBehaviours,[qt.config({store:{mode:"manual",getValue:c=>{const l=XC(c,t);return bo(l,(d,g)=>d().bind(h=>{const C=Jo.getCurrent(h);return PH(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+m1(h.element)))}).map(qt.getValue))},setValue:(c,l)=>{xs(l,(d,g)=>{Ct(c,t,g).each(h=>{Jo.getCurrent(h).each(C=>{qt.setValue(C,d)})})})}}})]),apis:{getField:(c,l)=>Ct(c,t,l).bind(Jo.getCurrent)}}),$p={getField:Xb((t,s,c)=>t.getField(s,c)),sketch:IP},dg=Jt("valid-input"),pE=Jt("invalid-input"),P3=Jt("validating-input"),bE="colorcustom.rgb.",$3={isEnabled:$e,setEnabled:oe,immediatelyShow:oe,immediatelyHide:oe},HP=(t,s,c,l,d,g)=>{const h=(te,ke)=>{const ae=ke.get();te!==ae.isEnabled()&&(ae.setEnabled(te),te?ae.immediatelyShow():ae.immediatelyHide())},C=(te,ke,ae)=>sf.config({invalidClass:s("invalid"),notify:{onValidate:Ce=>{An(Ce,P3,{type:te})},onValid:Ce=>{h(!1,ae),An(Ce,dg,{type:te,value:qt.getValue(Ce)})},onInvalid:Ce=>{h(!0,ae),An(Ce,pE,{type:te,value:qt.getValue(Ce)})}},validator:{validate:Ce=>{const we=qt.getValue(Ce),Qe=ke(we)?uo.value(!0):uo.error(t("aria.input.invalid"));return ol.pure(Qe)},validateOnLoad:!1}}),S=(te,ke,ae,Ce,we)=>{const Qe=hn($3),We=t(bE+"range"),It=Hs.parts.label({dom:{tag:"label",attributes:{"aria-label":Ce}},components:[jr(ae)]}),Kt=Hs.parts.field({data:we,factory:tb,inputAttributes:{type:"text",...ke==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Tt([C(ke,te,Qe),gr.config({}),ac.config({...d({tooltipText:"",onSetup:hs=>{Qe.set({isEnabled:()=>ac.isEnabled(hs),setEnabled:ln=>ac.setEnabled(hs,ln),immediatelyShow:()=>ac.immediateOpenClose(hs,!0),immediatelyHide:()=>ac.immediateOpenClose(hs,!1)}),ac.setEnabled(hs,!1)},onShow:(hs,ln)=>{ac.setComponents(hs,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[jr(t(ke==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:hs=>{sf.isInvalid(hs)&&sf.run(hs).get(oe)}}),qe=Jt("aria-invalid"),cn=ys(g("invalid",A.some(qe),"warning")),$t=ys({dom:{tag:"div",classes:[s("invalid-icon")]},components:[cn.asSpec()]}),dn=[It,Kt,$t.asSpec()],Mo=ke!=="hex"?[Hs.parts["aria-descriptor"]({text:We})]:[],pr=dn.concat(Mo);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:pr}},k=(te,ke)=>{const ae=H2(ke);return $p.getField(te,"hex").each(Ce=>{Kn.isFocused(Ce)||qt.setValue(te,{hex:ae.value})}),ae},O=(te,ke)=>{const ae=ke.red,Ce=ke.green,we=ke.blue;qt.setValue(te,{red:ae,green:Ce,blue:we})},B=ys({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),z=(te,ke)=>{B.getOpt(te).each(ae=>{ot(ae.element,"background-color","#"+ke.value)})};return gi({factory:()=>{const te={red:hn(A.some(255)),green:hn(A.some(255)),blue:hn(A.some(255)),hex:hn(A.some("ffffff"))},ke=(ln,pt)=>{const Lt=z2(pt);O(ln,Lt),Qe(Lt)},ae=ln=>te[ln].get(),Ce=(ln,pt)=>{te[ln].set(pt)},we=()=>ae("red").bind(ln=>ae("green").bind(pt=>ae("blue").map(Lt=>ab(ln,pt,Lt,1)))),Qe=ln=>{const pt=ln.red,Lt=ln.green,Yn=ln.blue;Ce("red",A.some(pt)),Ce("green",A.some(Lt)),Ce("blue",A.some(Yn))},We=(ln,pt)=>{const Lt=pt.event;Lt.type!=="hex"?Ce(Lt.type,A.none()):l(ln)},It=(ln,pt)=>{c(ln);const Lt=QM(pt);Ce("hex",A.some(Lt.value));const Yn=z2(Lt);O(ln,Yn),Qe(Yn),An(ln,fb,{hex:Lt}),z(ln,Lt)},Kt=(ln,pt,Lt)=>{const Yn=parseInt(Lt,10);Ce(pt,A.some(Yn)),we().each(Fn=>{const xn=k(ln,Fn);An(ln,fb,{hex:xn}),z(ln,xn)})},qe=ln=>ln.type==="hex",cn=(ln,pt)=>{const Lt=pt.event;qe(Lt)?It(ln,Lt.value):Kt(ln,Lt.type,Lt.value)},$t=ln=>({label:t(bE+ln+".label"),description:t(bE+ln+".description")}),dn=$t("red"),Mo=$t("green"),pr=$t("blue"),hs=$t("hex");return tr($p.sketch(ln=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[ln.field("red",Hs.sketch(S(F4,"red",dn.label,dn.description,255))),ln.field("green",Hs.sketch(S(F4,"green",Mo.label,Mo.description,255))),ln.field("blue",Hs.sketch(S(F4,"blue",pr.label,pr.description,255))),ln.field("hex",Hs.sketch(S(tB,"hex",hs.label,hs.description,"ffffff"))),B.asSpec()],formBehaviours:Tt([sf.config({invalidClass:s("form-invalid")}),ho("rgb-form-events",[st(dg,cn),st(pE,We),st(P3,We)])])})),{apis:{updateHex:(ln,pt)=>{qt.setValue(ln,{hex:pt.value}),ke(ln,pt),z(ln,pt)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(te,ke,ae)=>{te.updateHex(ke,ae)}},extraApis:{}})},vE=(t,s)=>{const c=Dd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=Dd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(k,O)=>{const{width:B,height:z}=k,V=k.getContext("2d");if(V===null)return;V.fillStyle=O,V.fillRect(0,0,B,z);const X=V.createLinearGradient(0,0,B,0);X.addColorStop(0,"rgba(255,255,255,1)"),X.addColorStop(1,"rgba(255,255,255,0)"),V.fillStyle=X,V.fillRect(0,0,B,z);const te=V.createLinearGradient(0,0,0,z);te.addColorStop(0,"rgba(0,0,0,0)"),te.addColorStop(1,"rgba(0,0,0,1)"),V.fillStyle=te,V.fillRect(0,0,B,z)},g=(k,O)=>{const B=k.components()[0].element.dom,z=U2(O,100,100),V=lB(z);d(B,iB(V))},h=(k,O)=>{const B=W2(z2(O));Dd.setValue(k,{x:B.saturation,y:100-B.value}),Ut(k.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",B.saturation,B.value]))};return gi({factory:k=>{const O=W({x:0,y:0}),B=(X,te,ke)=>{Zn(ke)||Ut(X.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(ke.x),Math.floor(100-ke.y)])),An(X,B3,{value:ke})},z=(X,te,ke,ae)=>{d(ke.element.dom,iB(uB))},V=Tt([Jo.config({find:A.some}),Kn.config({})]);return Dd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:O},rounded:!1,components:[c,l],onChange:B,onInit:z,sliderBehaviours:V})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(k,O,B)=>{g(O,B)},setThumb:(k,O,B)=>{h(O,B)}},extraApis:{}})},zP=(t,s,c,l)=>{const d=h=>{const C=HP(t,s,h.onValidHex,h.onInvalidHex,c,l),S=vE(t,s),k=qe=>(100-qe)/100*360,O=qe=>100-qe/360*100,B={paletteRgba:hn(uB),paletteHue:hn(0)},z=ys(MH(t,s)),V=ys(S.sketch({})),X=ys(C.sketch({})),te=(qe,cn,$t)=>{V.getOpt(qe).each(dn=>{S.setHue(dn,$t)})},ke=(qe,cn)=>{X.getOpt(qe).each($t=>{C.updateHex($t,cn)})},ae=(qe,cn,$t)=>{z.getOpt(qe).each(dn=>{Dd.setValue(dn,O($t))})},Ce=(qe,cn)=>{V.getOpt(qe).each($t=>{S.setThumb($t,cn)})},we=(qe,cn)=>{const $t=z2(qe);B.paletteRgba.set($t),B.paletteHue.set(cn)},Qe=(qe,cn,$t,dn)=>{we(cn,$t),et(dn,Mo=>{Mo(qe,cn,$t)})},We=()=>{const qe=[ke];return(cn,$t)=>{const dn=$t.event.value,Mo=B.paletteHue.get(),pr=U2(Mo,dn.x,100-dn.y),hs=Z2(pr);Qe(cn,hs,Mo,qe)}},It=()=>{const qe=[te,ke];return(cn,$t)=>{const dn=k($t.event.value),Mo=B.paletteRgba.get(),pr=W2(Mo),hs=U2(dn,pr.saturation,pr.value),ln=Z2(hs);Qe(cn,ln,dn,qe)}},Kt=()=>{const qe=[te,ae,Ce];return(cn,$t)=>{const dn=$t.event.hex,Mo=V4(dn);Qe(cn,dn,Mo.hue,qe)}};return{uid:h.uid,dom:h.dom,components:[V.asSpec(),z.asSpec(),X.asSpec()],behaviours:Tt([ho("colour-picker-events",[st(fb,Kt()),st(B3,We()),st(PP,It())]),Jo.config({find:qe=>X.getOpt(qe)}),En.config({mode:"acyclic"})])}};return gi({name:"ColourPicker",configFields:[tt("dom"),_e("onValidHex",oe),_e("onInvalidHex",oe)],factory:d})},pm={self:()=>Jo.config({find:A.some}),memento:t=>Jo.config({find:t.getOpt}),childAt:t=>Jo.config({find:s=>zr(s.element,t).bind(c=>s.getSystem().getByDom(c).toOptional())})},FH=Pn([_e("preprocess",Rt),_e("postprocess",Rt)]),IH=(t,s)=>{const c=Fa("RepresentingConfigs.memento processors",FH,s);return qt.config({store:{mode:"manual",getValue:l=>{const d=t.get(l),g=qt.getValue(d);return c.postprocess(g)},setValue:(l,d)=>{const g=c.preprocess(d),h=t.get(l);qt.setValue(h,g)}}})},Fp=(t,s,c)=>qt.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:s,setValue:c}}),F3=(t,s,c)=>Fp(t,l=>s(l.element),(l,d)=>c(l.element,d)),LH=t=>F3(t,Pu,Bf),yE=t=>qt.config({store:{mode:"memory",initialValue:t}}),HH={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},CE=t=>s=>rt(s)?t.translate(HH[s]):t.translate(s),zH=(t,s,c)=>{const l=k=>"tox-"+k,d=(k,O,B=k,z=k)=>Wu(B,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+k],attributes:{title:s.translate(z),"aria-live":"polite",...O.fold(()=>({}),V=>({id:V}))}},s.icons),g=zP(CE(s),l,s.tooltips.getConfig,d),h=k=>{An(k,cg,{name:"hex-valid",value:!0})},C=k=>{An(k,cg,{name:"hex-valid",value:!1})},S=ys(g.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:C}));return{dom:{tag:"div"},components:[S.asSpec()],behaviours:Tt([Fp(c,k=>{const O=S.get(k);return Jo.getCurrent(O).bind(V=>qt.getValue(V).hex).map(V=>"#"+rl(V,"#")).getOr("")},(k,O)=>{const B=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,z=A.from(B.exec(O)).bind(te=>Po(te,1)),V=S.get(k);Jo.getCurrent(V).fold(()=>{},te=>{qt.setValue(te,{hex:z.getOr("")}),$p.getField(te,"hex").each(ke=>{xo(ke,Xd())})})}),pm.self()])}};var VH=tinymce.util.Tools.resolve("tinymce.Resource");const I3=t=>Eo(t,"init"),VP=t=>{const s=Es(),c=ys({dom:{tag:t.tag}}),l=Es(),d=!I3(t)&&t.onFocus.isSome()?[Kn.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),gr.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Tt([ho("custom-editor-events",[Cr(g=>{c.getOpt(g).each(h=>{(I3(t)?t.init(h.element.dom):VH.load(t.scriptId,t.scriptUrl).then(C=>C(h.element.dom,t.settings))).then(C=>{l.on(S=>{C.setValue(S)}),l.clear(),s.set(C)})})})]),Fp(A.none(),()=>s.get().fold(()=>l.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>l.set(h),C=>C.setValue(h))}),pm.self()].concat(d)),components:[c.asSpec()]}};var Eh=tinymce.util.Tools.resolve("tinymce.util.Tools");const UH=(t,s)=>{const c=Eh.explode(s.getOption("images_file_types")),l=d=>bs(c,g=>tc(d.name.toLowerCase(),`.${g.toLowerCase()}`));return io(zs(t),l)},L3=(t,s,c)=>{const l=(z,V)=>{V.stop()},d=z=>(V,X)=>{et(z,te=>{te(V,X)})},g=(z,V)=>{var X;if(!i.isDisabled(z)){const te=V.event.raw;C(z,(X=te.dataTransfer)===null||X===void 0?void 0:X.files)}},h=(z,V)=>{const X=V.event.raw.target;C(z,X.files)},C=(z,V)=>{V&&(qt.setValue(z,UH(V,s)),An(z,Fi,{name:t.name}))},S=ys({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Tt([ho("input-file-events",[pd($g()),pd(gd())])])}),k=z=>({uid:z.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Tt([yE(c.getOr([])),pm.self(),i.config({}),_o.config({toggleClass:"dragenter",toggleOnExecute:!1}),ho("dropzone-events",[st("dragenter",d([l,_o.toggle])),st("dragleave",d([l,_o.toggle])),st("dragover",l),st("drop",d([l,g])),st(zh(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[jr(s.translate("Drop an image here"))]},nl.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[jr(s.translate("Browse for an image")),S.asSpec()],action:V=>{S.get(V).element.dom.click()},buttonBehaviours:Tt([gr.config({}),hm.button(s.isDisabled),Ca()])})]}]}),O=t.label.map(z=>Np(z,s)),B=Hs.parts.field({factory:{sketch:k}});return X2(O,B,["tox-form__group--stretched"],[])},WH=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Pe(t.items,s.interpreter)}),UP=(t,s)=>{let c=null,l=null;return{cancel:()=>{Uo(c)||(clearTimeout(c),c=null,l=null)},throttle:(...h)=>{l=h,Uo(c)&&(c=setTimeout(()=>{const C=l;c=null,l=null,t.apply(null,C)},s))}}},ZH=(t,s)=>{let c=null;return{cancel:()=>{Uo(c)||(clearTimeout(c),c=null)},throttle:(...g)=>{Uo(c)&&(c=setTimeout(()=>{c=null,t.apply(null,g)},s))}}},H3=(t,s)=>{let c=null;const l=()=>{Uo(c)||(clearTimeout(c),c=null)};return{cancel:l,throttle:(...g)=>{l(),c=setTimeout(()=>{c=null,t.apply(null,g)},s)}}},z3=Jt("alloy-fake-before-tabstop"),wE=Jt("alloy-fake-after-tabstop"),V3=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Tt([Kn.config({ignore:!0}),gr.config({})])}),WP=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[V3([z3]),s,V3([wE])],behaviours:Tt([pm.childAt(1)])}),ZP=(t,s)=>{An(t,Mu(),{raw:{which:9,shiftKey:s}})},jH=(t,s)=>{const c=s.element;ri(c,z3)?ZP(t,!0):ri(c,wE)&&ZP(t,!1)},dw=t=>j2(t,["."+z3,"."+wE].join(","),gt),mw=Jt("update-dialog"),jP=Jt("update-title"),U3=Jt("update-body"),GP=Jt("update-footer"),qP=Jt("body-send-message"),SE=Jt("dialog-focus-shifted"),W3=wo().browser,fw=W3.isSafari(),GH=W3.isFirefox(),KP=fw||GH,qH=W3.isChromium(),KH=({scrollTop:t,scrollHeight:s,clientHeight:c})=>Math.ceil(t)+c>=s,xE=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),YH=(t,s)=>{const c=t.body;return A.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!qH&&!fw||Xn(c)&&(c.scrollTop!==0||Math.abs(c.scrollHeight-c.clientHeight)>1))?c:t.documentElement)},YP=(t,s,c)=>{const l=t.dom;A.from(l.contentDocument).fold(c,d=>{let g=0;const h=YH(d,s).map(S=>(g=S.scrollTop,S)).forall(KH),C=()=>{const S=l.contentWindow;Xn(S)&&(h?xE(S,"bottom"):!h&&KP&&g!==0&&xE(S,g))};fw&&l.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),fw||C()})},gw=fn(KP,fw?500:200).map(t=>UP(YP,t)),Z3=(t,s)=>{const c=hn(t.getOr(""));return{getValue:l=>c.get(),setValue:(l,d)=>{if(c.get()!==d){const g=l.element,h=()=>Ut(g,"srcdoc",d);s?gw.fold(W(YP),C=>C.throttle)(g,d,h):h()}c.set(d)}}},XH=(t,s,c)=>{const l="tox-dialog__iframe",d=t.transparent?[]:[`${l}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(B=>({title:B})).getOr({}),...c.map(B=>({srcdoc:B})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=Z3(c,t.streamContent),S=t.label.map(B=>Np(B,s)),k=B=>WP(A.from(g),{uid:B.uid,dom:{tag:"iframe",attributes:h,classes:[l,...d]},behaviours:Tt([gr.config({}),Kn.config({}),Fp(c,C.getValue,C.setValue),Zl.config({channels:{[SE]:{onReceive:(z,V)=>{V.newFocus.each(X=>{aa(z.element).each(te=>{(es(z.element,X)?mr:Zr)(te,"tox-navobj-bordered-focus")})})}}}})])}),O=Hs.parts.field({factory:{sketch:k}});return X2(S,O,["tox-form__group--stretched"],[])},JH=t=>new Promise((s,c)=>{const l=()=>{g(),s(t)},d=[kl(t,"load",l),kl(t,"error",()=>{g(),c("Unable to load data from image: "+t.dom.src)})],g=()=>et(d,h=>h.unbind());t.dom.complete&&l()}),j3=(t,s,c,l,d)=>{const g=c*d,h=l*d,C=Math.max(0,t/2-g/2),S=Math.max(0,s/2-h/2);return{left:C.toString()+"px",top:S.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},QH=(t,s,c)=>{const l=q(t),d=$s(t);return Math.min(l/s,d/c,1)},G3=(t,s)=>{const c=hn(s.getOr({url:""})),l=ys({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(S=>({src:S.url})).getOr({})}}),d=ys({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),g=(S,k)=>{const O={url:k.url};k.zoom.each(z=>O.zoom=z),k.cachedWidth.each(z=>O.cachedWidth=z),k.cachedHeight.each(z=>O.cachedHeight=z),c.set(O);const B=()=>{const{cachedWidth:z,cachedHeight:V,zoom:X}=O;if(!zn(z)&&!zn(V)){if(zn(X)){const ke=QH(S.element,z,V);O.zoom=ke}const te=j3(q(S.element),$s(S.element),z,V,O.zoom);d.getOpt(S).each(ke=>{eo(ke.element,te)})}};l.getOpt(S).each(z=>{const V=z.element;k.url!==gn(V,"src")&&(Ut(V,"src",k.url),Zr(S.element,"tox-imagepreview__loaded")),B(),JH(V).then(X=>{S.getSystem().isConnected()&&(mr(S.element,"tox-imagepreview__loaded"),O.cachedWidth=X.dom.naturalWidth,O.cachedHeight=X.dom.naturalHeight,B())})})},h={};t.height.each(S=>h.height=S);const C=s.map(S=>({url:S.url,zoom:A.from(S.zoom),cachedWidth:A.from(S.cachedWidth),cachedHeight:A.from(S.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Tt([pm.self(),Fp(C,()=>c.get(),g)])}},XP=(t,s,c)=>{const l="tox-label",d=t.align==="center"?[`${l}--center`]:[],g=t.align==="end"?[`${l}--end`]:[],h=ys({dom:{tag:"label",classes:[l,...d,...g]},components:[jr(s.providers.translate(t.label))]}),C=Pe(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...C],behaviours:Tt([pm.self(),to.config({}),LH(A.none()),En.config({mode:"acyclic"}),ho("label",[Cr(S=>{t.for.each(k=>{c(k).each(O=>{h.getOpt(S).each(B=>{var z;const V=(z=gn(O.element,"id"))!==null&&z!==void 0?z:Jt("form-field");Ut(O.element,"id",V),Ut(B.element,"for",V)})})})})])])}},JP=Jt("toolbar.button.execute"),e9=t=>Bu((s,c)=>{I2(t,s)(l=>{An(s,JP,{buttonApi:l}),t.onAction(l)})}),Ip=Jt("common-button-display-events"),q3={[ou()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[yl()]:["toolbar-button-events",Ip],[su()]:["toolbar-button-events","dropdown-events","tooltipping"],[Qr()]:["focusing","alloy.base.behaviour",Ip]},K3=t=>ot(t.element,"width",fs(t.element,"width")),Y3=(t,s,c)=>Wu(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:c},s),TE=(t,s)=>Y3(t,s,[]),Lp=(t,s)=>Y3(t,s,[to.config({})]),X3=(t,s,c)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[jr(c.translate(t))],behaviours:Tt([to.config({})])}),Yu=Jt("update-menu-text"),Hp=Jt("update-menu-icon"),J3=(t,s,c,l)=>{const d=hn(oe),g=t.text.map(te=>ys(X3(te,s,c.providers))),h=t.icon.map(te=>ys(Lp(te,c.providers.icons))),C=(te,ke)=>{const ae=qt.getValue(te);return Kn.focus(ae),An(ae,"keydown",{raw:ke.event.raw}),Od.close(ae),A.some(!0)},S=t.role.fold(()=>({}),te=>({role:te})),k=A.from(t.listRole).map(te=>({listRole:te})).getOr({}),O=t.ariaLabel.fold(()=>({}),te=>({"aria-label":c.providers.translate(te)})),B=Wu("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},c.providers.icons),z=Jt("common-button-display-events"),V="dropdown-events";return ys(Od.sketch({...t.uid?{uid:t.uid}:{},...S,...k,dom:{tag:"button",classes:[s,`${s}--select`].concat(Pe(t.classes,te=>`${s}--${te}`)),attributes:{...O,...Xn(l)?{"data-mce-name":l}:{}}},components:rb([h.map(te=>te.asSpec()),g.map(te=>te.asSpec()),A.some(B)]),matchWidth:!0,useMinWidth:!0,onOpen:(te,ke,ae)=>{t.searchable&&v7(ae)},dropdownBehaviours:Tt([...t.dropdownBehaviours,hm.button(()=>t.disabled||c.providers.isDisabled()),Ca(),Fv.config({}),to.config({}),...t.tooltip.map(te=>ac.config(c.providers.tooltips.getConfig({tooltipText:c.providers.translate(te)}))).toArray(),ho(V,[Ol(t,d),Dp(t,d)]),ho(z,[Cr((te,ke)=>t.listRole==="listbox"?oe:K3(te))]),ho("menubutton-update-display-text",[st(Yu,(te,ke)=>{g.bind(ae=>ae.getOpt(te)).each(ae=>{to.set(ae,[jr(c.providers.translate(ke.event.text))])})}),st(Hp,(te,ke)=>{h.bind(ae=>ae.getOpt(te)).each(ae=>{to.set(ae,[Lp(ke.event.icon,c.providers.icons)])})})])]),eventOrder:tr(q3,{[Qr()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[yl()]:["toolbar-button-events",ac.name(),V,z]}),sandboxBehaviours:Tt([En.config({mode:"special",onLeft:C,onRight:C}),ho("dropdown-sandbox-events",[st(CM,(te,ke)=>{h7(te),ke.stop()}),st(d4,(te,ke)=>{sE(te,ke),ke.stop()})])]),lazySink:c.getSink,toggleClass:`${s}--active`,parts:{menu:{...R2(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:VB,onCollapseMenu:(te,ke,ae)=>{bn.getHighlighted(ae).each(Ce=>{VB(te,ae,Ce)})},onDehighlightItem:b7}}},getAnchorOverrides:()=>({maxHeightFunction:(te,ke)=>{cx()(te,ke-10)}}),fetch:te=>ol.nu(Xt(t.fetch,te))})).asSpec()},t9=t=>rt(t),QP=t=>t.type==="separator",e5=t=>Eo(t,"getSubmenuItems"),n9={type:"separator"},t5=(t,s)=>{const c=it(t,(l,d)=>t9(d)?d===""?l:d==="|"?l.length>0&&!QP(l[l.length-1])?l.concat([n9]):l:Eo(s,d.toLowerCase())?l.concat([s[d.toLowerCase()]]):l:l.concat([d]),[]);return c.length>0&&QP(c[c.length-1])&&c.pop(),c},o9=(t,s)=>{const c=t.getSubmenuItems(),l=EE(c,s),d=tr(l.menus,{[t.value]:l.items}),g=tr(l.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},s9=t=>{const s=xt(t,"value").getOrThunk(()=>Jt("generated-menu-item"));return tr({value:s},t)},EE=(t,s)=>{const c=t5(rt(t)?t.split(" "):t,s);return To(c,(l,d)=>{if(e5(d)){const g=s9(d),h=o9(g,s);return{menus:tr(l.menus,h.menus),items:[h.item,...l.items],expansions:tr(l.expansions,h.expansions)}}else return{...l,items:[d,...l.items]}},{menus:{},expansions:{},items:[]})},r9=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),c9=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),zv=(t,s,c,l)=>{const d=Jt("primary-menu"),g=EE(t,c.shared.providers.menuItems());if(g.items.length===0)return A.none();const h=r9(l),C=c3(d,g.items,s,c,l.isHorizontalMenu,h),S=c9(l),k=bo(g.menus,(B,z)=>c3(z,B,s,c,!1,S)),O=tr(k,po(d,C));return A.from(xp.tieredData(d,O,g.expansions))},Vv=t=>!Eo(t,"items"),n5="data-value",Q3=(t,s,c,l,d)=>Pe(c,g=>Vv(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===l,onAction:()=>{qt.setValue(t,g.value),An(t,Fi,{name:s}),Kn.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>Q3(t,s,g.items,l,d)}),eO=(t,s)=>As(t,c=>Vv(c)?fn(c.value===s,c):eO(c.items,s)),o5=(t,s,c)=>{const l=bs(t.items,k=>!Vv(k)),d=s.shared.providers,g=c.bind(k=>eO(t.items,k)).orThunk(()=>Ms(t.items).filter(Vv)),h=t.label.map(k=>Np(k,d)),C=Hs.parts.field({dom:{},factory:{sketch:k=>J3({uid:k.uid,text:g.map(O=>O.text),icon:A.none(),tooltip:A.none(),role:fn(!l,"combobox"),...l?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(O,B)=>{const z=Q3(O,t.name,t.items,qt.getValue(O),l);B(zv(z,fm.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:A.none()}))},onSetup:W(oe),getApi:W({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[gr.config({}),Fp(g.map(O=>O.value),O=>gn(O.element,n5),(O,B)=>{eO(t.items,B).each(z=>{Ut(O.element,n5,z.value),An(O,Yu,{text:z.text})})})]},"tox-listbox",s.shared)}}),S={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return Hs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Fe([h.toArray(),[S]]),fieldBehaviours:Tt([i.config({disabled:W(!t.enabled),onDisabled:k=>{Hs.getField(k).each(i.disable)},onEnabled:k=>{Hs.getField(k).each(i.enable)}})])})},a9=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Pe(t.items,s.shared.interpreter)}),l9=(t,s)=>{const c=Pe(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),l=t.data.map(d=>po("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:c,behaviours:va(t.selectBehaviours,[Kn.config({}),qt.config({store:{mode:"manual",getValue:d=>Um(d.element),setValue:(d,g)=>{const h=Ms(t.options);xe(t.options,S=>S.value===g).isSome()?zf(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(S=>zf(d.element,S.value))},...l}})])}},i9=gi({name:"HtmlSelect",configFields:[tt("options"),ba("selectBehaviours",[Kn,qt]),_e("selectClasses",[]),_e("selectAttributes",{}),os("data")],factory:l9}),u9=(t,s,c)=>{const l=Pe(t.items,S=>({text:s.translate(S.text),value:S.value})),d=t.label.map(S=>Np(S,s)),g=Hs.parts.field({dom:{},...c.map(S=>({data:S})).getOr({}),selectAttributes:{size:t.size},options:l,factory:i9,selectBehaviours:Tt([i.config({disabled:()=>!t.enabled||s.isDisabled()}),gr.config({}),ho("selectbox-change",[st(zh(),(S,k)=>{An(S,Fi,{name:t.name})})])])}),h=t.size>1?A.none():A.some(Wu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:Fe([[g],h.toArray()])};return Hs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Fe([d.toArray(),[C]]),fieldBehaviours:Tt([i.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:S=>{Hs.getField(S).each(i.disable)},onEnabled:S=>{Hs.getField(S).each(i.enable)}}),Ca()])})},d9=W([_e("field1Name","field1"),_e("field2Name","field2"),nm("onLockedChange"),qg(["lockClass"]),_e("locked",!1),iu.field("coupledFieldBehaviours",[Jo,qt])]),s5=(t,s,c)=>Ct(t,s,c).bind(Jo.getCurrent),r5=(t,s)=>Wa({factory:Hs,name:t,overrides:c=>({fieldBehaviours:Tt([ho("coupled-input-behaviour",[st(Xd(),l=>{s5(l,c,s).each(d=>{Ct(l,c,"lock").each(g=>{_o.isOn(g)&&c.onLockedChange(l,d,g)})})})])])})}),m9=W([r5("field1","field2"),r5("field2","field1"),Wa({factory:nl,schema:[tt("dom")],name:"lock",overrides:t=>({buttonBehaviours:Tt([_o.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),c5=(t,s,c,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:iu.augment(t.coupledFieldBehaviours,[Jo.config({find:A.some}),qt.config({store:{mode:"manual",getValue:d=>{const g=uh(d,t,["field1","field2"]);return{[t.field1Name]:qt.getValue(g.field1()),[t.field2Name]:qt.getValue(g.field2())}},setValue:(d,g)=>{const h=uh(d,t,["field1","field2"]);Pr(g,t.field1Name)&&qt.setValue(h.field1(),g[t.field1Name]),Pr(g,t.field2Name)&&qt.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>Ct(d,t,"field1"),getField2:d=>Ct(d,t,"field2"),getLock:d=>Ct(d,t,"lock")}}),Xu=ml({name:"FormCoupledInputs",configFields:d9(),partFields:m9(),factory:c5,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),f9=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},c=d=>d in s?s[d]:1;let l=t.value.toFixed(c(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},tO=t=>{const c=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(c!==null){const l=parseFloat(c[1]),d=c[2];return uo.value({value:l,unit:d})}else return uo.error(t)},nO=(t,s)=>{const c={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=d=>Eo(c,d);return t.unit===s?A.some(t.value):l(t.unit)&&l(s)?c[t.unit]===c[s]?A.some(t.value):A.some(t.value/c[t.unit]*c[s]):A.none()},oO=t=>A.none(),g9=(t,s)=>c=>nO(c,s).map(l=>({value:l*t,unit:s})),h9=(t,s)=>{const c=tO(t).toOptional(),l=tO(s).toOptional();return Fc(c,l,(d,g)=>nO(d,g.unit).map(h=>g.value/h).map(h=>g9(h,g.unit)).getOr(oO)).getOr(oO)},a5=(t,s)=>{let c=oO;const l=Jt("ratio-event"),d=V=>Wu(V,{tag:"span",classes:["tox-icon","tox-lock-icon__"+V]},s.icons),g=t.label.getOr("Constrain proportions"),h=s.translate(g),C=Xu.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":h,"data-mce-name":g}},components:[d("lock"),d("unlock")],buttonBehaviours:Tt([i.config({disabled:()=>!t.enabled||s.isDisabled()}),Ca(),gr.config({}),ac.config(s.tooltips.getConfig({tooltipText:h}))])}),S=V=>({dom:{tag:"div",classes:["tox-form__group"]},components:V}),k=V=>Hs.parts.field({factory:tb,inputClasses:["tox-textfield"],inputBehaviours:Tt([i.config({disabled:()=>!t.enabled||s.isDisabled()}),Ca(),gr.config({}),ho("size-input-events",[st(md(),(X,te)=>{An(X,l,{isField1:V})}),st(zh(),(X,te)=>{An(X,Fi,{name:t.name})})])]),selectOnFocus:!1}),O=V=>({dom:{tag:"label",classes:["tox-label"]},components:[jr(s.translate(V))]}),B=Xu.parts.field1(S([Hs.parts.label(O("Width")),k(!0)])),z=Xu.parts.field2(S([Hs.parts.label(O("Height")),k(!1)]));return Xu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[B,z,S([O(Jg),C])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(V,X,te)=>{tO(qt.getValue(V)).each(ke=>{c(ke).each(ae=>{qt.setValue(X,f9(ae))})})},coupledFieldBehaviours:Tt([i.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:V=>{Xu.getField1(V).bind(Hs.getField).each(i.disable),Xu.getField2(V).bind(Hs.getField).each(i.disable),Xu.getLock(V).each(i.disable)},onEnabled:V=>{Xu.getField1(V).bind(Hs.getField).each(i.enable),Xu.getField2(V).bind(Hs.getField).each(i.enable),Xu.getLock(V).each(i.enable)}}),Ca(),ho("size-input-events2",[st(l,(V,X)=>{const te=X.event.isField1,ke=te?Xu.getField1(V):Xu.getField2(V),ae=te?Xu.getField2(V):Xu.getField1(V),Ce=ke.map(qt.getValue).getOr(""),we=ae.map(qt.getValue).getOr("");c=h9(Ce,we)})])])})},l5=(t,s,c)=>{const l=Dd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[jr(s.translate(t.label))]}),d=Dd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Dd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Dd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:W(c.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,d,g],sliderBehaviours:Tt([pm.self(),Kn.config({})]),onChoose:(h,C,S)=>{An(h,Fi,{name:t.name,value:S})},onChange:(h,C,S)=>{An(h,Fi,{name:t.name,value:S})}})},i5=(t,s)=>{const c=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),l=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Pe(C,c)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:Pe(C,d)}),h=C=>({dom:{tag:"tbody"},components:Pe(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),h(t.cells)],behaviours:Tt([gr.config({}),Kn.config({})])}},hw=(t,s)=>{const c=t.label.map(V=>Np(V,s)),l=[i.config({disabled:()=>t.disabled||s.isDisabled()}),Ca(),En.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:V=>(xo(V,J2),A.some(!0))}),ho("textfield-change",[st(Xd(),(V,X)=>{An(V,Fi,{name:t.name})}),st(Fm(),(V,X)=>{An(V,Fi,{name:t.name})})]),gr.config({})],d=t.validation.map(V=>sf.config({getRoot:X=>aa(X.element),invalidClass:"tox-invalid",validator:{validate:X=>{const te=qt.getValue(X),ke=V.validator(te);return ol.pure(ke===!0?uo.value(te):uo.error(ke))},validateOnLoad:V.validateOnLoad}})).toArray(),g=t.placeholder.fold(W({}),V=>({placeholder:s.translate(V)})),h=t.inputMode.fold(W({}),V=>({inputmode:V})),C={...g,...h,"data-mce-name":t.name},S=Hs.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(V=>({data:V})).getOr({}),inputAttributes:C,inputClasses:[t.classname],inputBehaviours:Tt(Fe([l,d])),selectOnFocus:!1,factory:tb}),k=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[S]}:S,B=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),z=[i.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:V=>{Hs.getField(V).each(i.disable)},onEnabled:V=>{Hs.getField(V).each(i.enable)}}),Ca()];return X2(c,k,B,z)},p9=(t,s,c)=>hw({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:A.none(),maximized:t.maximized,data:c},s),b9=(t,s,c)=>hw({name:t.name,multiline:!0,label:t.label,inputMode:A.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:A.none(),maximized:t.maximized,data:c},s),pw=(t,s)=>s.getAnimationRoot.fold(()=>t.element,c=>c(t)),kh=t=>t.dimension.property,zp=(t,s)=>t.dimension.getDimension(s),kE=(t,s)=>{const c=pw(t,s);ci(c,[s.shrinkingClass,s.growingClass])},sO=(t,s)=>{Zr(t.element,s.openClass),mr(t.element,s.closedClass),ot(t.element,kh(s),"0px"),Jc(t.element)},rO=(t,s)=>{Zr(t.element,s.closedClass),mr(t.element,s.openClass),co(t.element,kh(s))},cO=(t,s,c,l)=>{c.setCollapsed(),ot(t.element,kh(s),zp(s,t.element)),kE(t,s),sO(t,s),s.onStartShrink(t),s.onShrunk(t)},u5=(t,s,c,l)=>{const d=l.getOrThunk(()=>zp(s,t.element));c.setCollapsed(),ot(t.element,kh(s),d),Jc(t.element);const g=pw(t,s);Zr(g,s.growingClass),mr(g,s.shrinkingClass),sO(t,s),s.onStartShrink(t)},d5=(t,s,c)=>{const l=zp(s,t.element);(l==="0px"?cO:u5)(t,s,c,A.some(l))},m5=(t,s,c)=>{const l=pw(t,s),d=ri(l,s.shrinkingClass),g=zp(s,t.element);rO(t,s);const h=zp(s,t.element);(d?()=>{ot(t.element,kh(s),g),Jc(t.element)}:()=>{sO(t,s)})(),Zr(l,s.shrinkingClass),mr(l,s.growingClass),rO(t,s),ot(t.element,kh(s),h),c.setExpanded(),s.onStartGrow(t)},f5=(t,s,c)=>{if(c.isExpanded()){co(t.element,kh(s));const l=zp(s,t.element);ot(t.element,kh(s),l)}},v9=(t,s,c)=>{c.isExpanded()||m5(t,s,c)},y9=(t,s,c)=>{c.isExpanded()&&d5(t,s,c)},no=(t,s,c)=>{c.isExpanded()&&cO(t,s,c)},bw=(t,s,c)=>c.isExpanded(),g5=(t,s,c)=>c.isCollapsed(),aO=(t,s,c)=>{const l=pw(t,s);return ri(l,s.growingClass)===!0},lO=(t,s,c)=>{const l=pw(t,s);return ri(l,s.shrinkingClass)===!0};var vw=Object.freeze({__proto__:null,refresh:f5,grow:v9,shrink:y9,immediateShrink:no,hasGrown:bw,hasShrunk:g5,isGrowing:aO,isShrinking:lO,isTransitioning:(t,s,c)=>aO(t,s)||lO(t,s),toggleGrow:(t,s,c)=>{(c.isExpanded()?d5:m5)(t,s,c)},disableTransitions:kE,immediateGrow:(t,s,c)=>{c.isExpanded()||(rO(t,s),ot(t.element,kh(s),zp(s,t.element)),kE(t,s),c.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),x9=Object.freeze({__proto__:null,exhibit:(t,s,c)=>{const l=s.expanded;return oi(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:po(s.dimension.property,"0px")})},events:(t,s)=>dr([Vh(fd(),(c,l)=>{l.event.raw.propertyName===t.dimension.property&&(kE(c,t),s.isExpanded()&&co(c.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(c))})])}),T9=[tt("closedClass"),tt("openClass"),tt("shrinkingClass"),tt("growingClass"),os("getAnimationRoot"),Zo("onShrunk"),Zo("onStartShrink"),Zo("onGrown"),Zo("onStartGrow"),_e("expanded",!1),ls("dimension",Vc("property",{width:[Gs("property","width"),Gs("getDimension",t=>q(t)+"px")],height:[Gs("property","height"),Gs("getDimension",t=>$s(t)+"px")]}))],h5=Object.freeze({__proto__:null,init:t=>{const s=hn(t.expanded),c=()=>"expanded: "+s.get();return si({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Xt(s.set,!1),setExpanded:Xt(s.set,!0),readState:c})}});const Kl=Oa({fields:T9,name:"sliding",active:x9,apis:vw,state:h5}),iO=t=>({isEnabled:()=>!i.isDisabled(t),setEnabled:s=>i.set(t,!s),setActive:s=>{const c=t.element;s?(mr(c,"tox-tbtn--enabled"),Ut(c,"aria-pressed",!0)):(Zr(c,"tox-tbtn--enabled"),P(c,"aria-pressed"))},isActive:()=>ri(t.element,"tox-tbtn--enabled"),setText:s=>{An(t,Yu,{text:s})},setIcon:s=>An(t,Hp,{icon:s})}),yw=(t,s,c,l,d=!0,g)=>J3({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(h,C)=>{const S={pattern:t.search.isSome()?y7(h):""};t.fetch(k=>{C(zv(k,fm.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:t.search}))},S,iO(h))},onSetup:t.onSetup,getApi:iO,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[gr.config({})]:[]]},s,c.shared,g),E9=(t,s,c)=>{const l=g=>h=>{const C=!h.isActive();h.setActive(C),g.storage.set(C),c.shared.getSink().each(S=>{s().getOpt(S).each(k=>{Ai(k.element),An(k,cg,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(Pe(t,h=>{const C=h.text.fold(()=>({}),S=>({text:S}));return{type:h.type,active:!1,...C,onAction:l(h),onSetup:d(h)}}))}},p5=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[jr(t)]}),b5=Jt("leaf-label-event-id"),uO=({leaf:t,onLeafAction:s,visible:c,treeId:l,selectedId:d,backstage:g})=>{const h=t.menu.map(S=>yw(S,"tox-mbtn",g,A.none(),c)),C=[p5(t.title)];return h.each(S=>C.push(S)),nl.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(c?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:S=>{s(t.id),S.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[Mu()]:[b5,"keying"]},buttonBehaviours:Tt([...c?[gr.config({})]:[],_o.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Zl.config({channels:{[`update-active-item-${l}`]:{onReceive:(S,k)=>{(k.value===t.id?_o.on:_o.off)(S)}}}}),ho(b5,[Cr((S,k)=>{d.each(O=>{(O===t.id?_o.on:_o.off)(S)})}),st(Mu(),(S,k)=>{const O=k.event.raw.code==="ArrowLeft",B=k.event.raw.code==="ArrowRight";O?(Vf(S.element,".tox-tree--directory").each(z=>{S.getSystem().getByDom(z).each(V=>{cC(z,".tox-tree--directory__label").each(X=>{V.getSystem().getByDom(X).each(Kn.focus)})})}),k.stop()):B&&k.stop()})])])})},k9=(t,s,c)=>Wu(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:c},s),_9=(t,s)=>k9(t,s,[]),v5=Jt("directory-label-event-id"),A9=({directory:t,visible:s,noChildren:c,backstage:l})=>{const d=t.menu.map(C=>yw(C,"tox-mbtn",l,A.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[_9("chevron-right",l.shared.providers.icons)]},p5(t.title)];d.each(C=>{g.push(C)});const h=C=>{Vf(C.element,".tox-tree--directory").each(S=>{C.getSystem().getByDom(S).each(k=>{const O=!_o.isOn(k);_o.toggle(k),An(C,"expand-tree-node",{expanded:O,node:t.id})})})};return nl.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[Mu()]:[v5,"keying"]},buttonBehaviours:Tt([...s?[gr.config({})]:[],ho(v5,[st(Mu(),(C,S)=>{const k=S.event.raw.code==="ArrowRight",O=S.event.raw.code==="ArrowLeft";k&&c&&S.stop(),(k||O)&&Vf(C.element,".tox-tree--directory").each(B=>{C.getSystem().getByDom(B).each(z=>{!_o.isOn(z)&&k||_o.isOn(z)&&O?(h(C),S.stop()):O&&!_o.isOn(z)&&(Vf(z.element,".tox-tree--directory").each(V=>{cC(V,".tox-tree--directory__label").each(X=>{z.getSystem().getByDom(X).each(Kn.focus)})}),S.stop())})})})])])})},O9=({children:t,onLeafAction:s,visible:c,treeId:l,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(C=>C.type==="leaf"?uO({leaf:C,selectedId:g,onLeafAction:s,visible:c,treeId:l,backstage:h}):dO({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:c,treeId:l,backstage:h})),behaviours:Tt([Kl.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:c}),to.config({})])}),y5=Jt("directory-event-id"),dO=({directory:t,onLeafAction:s,labelTabstopping:c,treeId:l,backstage:d,expandedIds:g,selectedId:h})=>{const{children:C}=t,S=hn(g),k=B=>C.map(z=>z.type==="leaf"?uO({leaf:z,selectedId:h,onLeafAction:s,visible:B,treeId:l,backstage:d}):dO({directory:z,expandedIds:S.get(),selectedId:h,onLeafAction:s,labelTabstopping:B,treeId:l,backstage:d})),O=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[A9({directory:t,visible:c,noChildren:t.children.length===0,backstage:d}),O9({children:C,expandedIds:g,selectedId:h,onLeafAction:s,visible:O,treeId:l,backstage:d})],behaviours:Tt([ho(y5,[Cr((B,z)=>{_o.set(B,O)}),st("expand-tree-node",(B,z)=>{const{expanded:V,node:X}=z.event;S.set(V?[...S.get(),X]:S.get().filter(te=>te!==X))})]),_o.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(B,z)=>{const V=B.components()[1],X=k(z);z?Kl.grow(V):Kl.shrink(V),to.set(V,X)}})])}},D9=Jt("tree-event-id"),R9=(t,s)=>{const c=t.onLeafAction.getOr(oe),l=t.onToggleExpand.getOr(oe),d=t.defaultExpandedIds,g=hn(d),h=hn(t.defaultSelectedId),C=Jt("tree-id"),S=(k,O)=>t.items.map(B=>B.type==="leaf"?uO({leaf:B,selectedId:k,onLeafAction:c,visible:!0,treeId:C,backstage:s}):dO({directory:B,selectedId:k,onLeafAction:c,expandedIds:O,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:S(h.get(),g.get()),behaviours:Tt([En.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),ho(D9,[st("expand-tree-node",(k,O)=>{const{expanded:B,node:z}=O.event;g.set(B?[...g.get(),z]:g.get().filter(V=>V!==z)),l(g.get(),{expanded:B,node:z})})]),Zl.config({channels:{[`update-active-item-${C}`]:{onReceive:(k,O)=>{h.set(A.some(O.value)),to.set(k,S(A.some(O.value),g.get()))}}}}),to.config({})])}};var N9=Object.freeze({__proto__:null,events:(t,s)=>{const l=t.stream.streams.setup(t,s);return dr([st(t.event,l),Qd(()=>s.cancel())].concat(t.cancelEvent.map(d=>[st(d,()=>s.cancel())]).getOr([])))}});const C5=t=>{const s=hn(null);return si({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var M9=Object.freeze({__proto__:null,throttle:C5,init:t=>t.stream.streams.state(t)});const B9=(t,s)=>{const c=t.stream,l=H3(t.onStream,c.delay);return s.setTimer(l),(d,g)=>{l.throttle(d,g),c.stopEvent&&g.stop()}};var P9=[ls("stream",Vc("mode",{throttle:[tt("delay"),_e("stopEvent",!0),Gs("streams",{setup:B9,state:C5})]})),_e("event","input"),os("cancelEvent"),nm("onStream")];const mO=Oa({fields:P9,name:"streaming",active:N9,state:M9}),Cw=(t,s,c)=>{const l=qt.getValue(c);qt.setValue(s,l),S5(s)},w5=(t,s)=>{const c=t.element,l=Um(c),d=c.dom;gn(c,"type")!=="number"&&s(d,l)},S5=t=>{w5(t,(s,c)=>s.setSelectionRange(c.length,c.length))},$9=(t,s)=>{w5(t,(c,l)=>c.setSelectionRange(s,l.length))},F9=(t,s,c)=>{if(t.selectsOver){const l=qt.getValue(s),d=t.getDisplayText(l),g=qt.getValue(c);return t.getDisplayText(g).indexOf(d)===0?A.some(()=>{Cw(t,s,c),$9(s,d.length)}):A.none()}else return A.none()},fO=W("alloy.typeahead.itemexecute"),I9=(t,s,c,l)=>{const d=(B,z,V)=>{t.previewing.set(!1);const X=bc.getCoupled(B,"sandbox");if(Xo.isOpen(X))Jo.getCurrent(X).each(te=>{bn.getHighlighted(te).fold(()=>{V(te)},()=>{Jd(X,te.element,"keydown",z)})});else{const te=ke=>{Jo.getCurrent(ke).each(V)};Rv(t,h(B),B,X,l,te,pc.HighlightMenuAndItem).get(oe)}},g=bM(t),h=B=>z=>z.map(V=>{const X=Ta(V.menus),te=ie(X,ae=>io(ae.items,Ce=>Ce.type==="item"));return qt.getState(B).update(Pe(te,ae=>ae.data)),V}),C=B=>Jo.getCurrent(B),S="typeaheadevents",k=[Kn.config({}),qt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:B=>Um(B.element),getFallbackEntry:B=>({value:B,meta:{}}),setValue:(B,z)=>{zf(B.element,t.model.getDisplayText(z))},...t.initialData.map(B=>po("initialValue",B)).getOr({})}}),mO.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(B,z)=>{const V=bc.getCoupled(B,"sandbox");if(Kn.isFocused(B)&&Um(B.element).length>=t.minChars){const te=C(V).bind(ae=>bn.getHighlighted(ae).map(qt.getValue));t.previewing.set(!0);const ke=ae=>{C(V).each(Ce=>{te.fold(()=>{t.model.selectsOver&&bn.highlightFirst(Ce)},we=>{bn.highlightBy(Ce,Qe=>qt.getValue(Qe).value===we.value),bn.getHighlighted(Ce).orThunk(()=>(bn.highlightFirst(Ce),A.none()))})})};Rv(t,h(B),B,V,l,ke,pc.HighlightJustMenu).get(oe)}},cancelEvent:hy()}),En.config({mode:"special",onDown:(B,z)=>(d(B,z,bn.highlightFirst),A.some(!0)),onEscape:B=>{const z=bc.getCoupled(B,"sandbox");return Xo.isOpen(z)?(Xo.close(z),A.some(!0)):A.none()},onUp:(B,z)=>(d(B,z,bn.highlightLast),A.some(!0)),onEnter:B=>{const z=bc.getCoupled(B,"sandbox"),V=Xo.isOpen(z);if(V&&!t.previewing.get())return C(z).bind(X=>bn.getHighlighted(X)).map(X=>(An(B,fO(),{item:X}),!0));{const X=qt.getValue(B);return xo(B,hy()),t.onExecute(z,B,X),V&&Xo.close(z),A.some(!0)}}}),_o.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),bc.config({others:{sandbox:B=>s3(t,B,{onOpen:()=>_o.on(B),onClose:()=>{t.lazyTypeaheadComp.get().each(z=>P(z.element,"aria-activedescendant")),_o.off(B)}})}}),ho(S,[Cr(B=>{t.lazyTypeaheadComp.set(A.some(B))}),Qd(B=>{t.lazyTypeaheadComp.set(A.none())}),Bu(B=>{const z=oe;t3(t,h(B),B,l,z,pc.HighlightMenuAndItem).get(oe)}),st(fO(),(B,z)=>{const V=bc.getCoupled(B,"sandbox");Cw(t.model,B,z.event.item),xo(B,hy()),t.onItemExecute(B,V,z.event.item,qt.getValue(B)),Xo.close(V),S5(B)})].concat(t.dismissOnBlur?[st(Tf(),B=>{const z=bc.getCoupled(B,"sandbox");El(z.element).isNone()&&Xo.close(z)})]:[]))],O={[su()]:[qt.name(),mO.name(),S],...t.eventOrder};return{uid:t.uid,dom:yM(tr(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...va(t.typeaheadBehaviours,k)},eventOrder:O}},x5=W([os("lazySink"),tt("fetch"),_e("minChars",5),_e("responseTime",1e3),Zo("onOpen"),_e("getHotspot",A.some),_e("getAnchorOverrides",W({})),_e("layouts",A.none()),_e("eventOrder",{}),_("model",{},[_e("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),_e("selectsOver",!0),_e("populateFromBrowse",!0)]),Zo("onSetValue"),Wl("onExecute"),Zo("onItemExecute"),_e("inputClasses",[]),_e("inputAttributes",{}),_e("inputStyles",{}),_e("matchWidth",!0),_e("useMinWidth",!1),_e("dismissOnBlur",!0),qg(["openClass"]),os("initialData"),os("listRole"),ba("typeaheadBehaviours",[Kn,qt,mO,En,_o,bc]),as("lazyTypeaheadComp",()=>hn(A.none)),as("previewing",()=>hn(!0))].concat(u4()).concat(oE())),L9=W([uu({schema:[Yh()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,c,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{F9(t.model,d,l).fold(()=>{t.model.selectsOver?(bn.dehighlight(c,l),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&Cw(t.model,d,l),Vr(l.element,"id").each(g=>Ut(d.element,"aria-activedescendant",g))})},onExecute:(s,c)=>t.lazyTypeaheadComp.get().map(l=>(An(l,fO(),{item:c}),!0)),onHover:(s,c)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&Cw(t.model,l,c)})}})})]),T5=ml({name:"Typeahead",configFields:x5(),partFields:L9(),factory:I9}),bm=t=>({...t,toCached:()=>bm(t.toCached()),bindFuture:S=>bm(t.bind(k=>k.fold(O=>ol.pure(uo.error(O)),O=>S(O)))),bindResult:S=>bm(t.map(k=>k.bind(S))),mapResult:S=>bm(t.map(k=>k.map(S))),mapError:S=>bm(t.map(k=>k.mapError(S))),foldResult:(S,k)=>t.map(O=>O.fold(S,k)),withTimeout:(S,k)=>bm(ol.nu(O=>{let B=!1;const z=setTimeout(()=>{B=!0,O(uo.error(k()))},S);t.get(V=>{B||(clearTimeout(z),O(V))})}))}),gO=t=>bm(ol.nu(t)),hO=t=>bm(ol.pure(uo.value(t))),V9={nu:gO,wrap:bm,pure:hO,value:hO,error:t=>bm(ol.pure(uo.error(t))),fromResult:t=>bm(ol.pure(t)),fromFuture:t=>bm(t.map(uo.value)),fromPromise:t=>gO(s=>{t.then(c=>{s(uo.value(c))},c=>{s(uo.error(c))})})},ww=(t,s,c=[],l,d,g,h)=>{const C=s.fold(()=>({}),O=>({action:O})),S={buttonBehaviours:Tt([hm.button(()=>!t.enabled||h.isDisabled()),Ca(),gr.config({}),...g.map(O=>ac.config(h.tooltips.getConfig({tooltipText:h.translate(O)}))).toArray(),ho("button press",[wy("click")])].concat(c)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},k=tr(S,{dom:l});return tr(k,{components:d})},U9=(t,s,c,l=[],d)=>{const g=t.tooltip.map(k=>({"aria-label":c.translate(k)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=t.icon.map(k=>TE(k,c.icons)),S=rb([C]);return ww(t,s,l,h,S,t.tooltip,c)},pO=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},vm=(t,s,c,l=[],d=[])=>{const g=c.translate(t.text),h=t.icon.map(V=>TE(V,c.icons)),C=[h.getOrThunk(()=>jr(g))],S=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),B={tag:"button",classes:[...pO(S),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},z=t.icon.map(W(g));return ww(t,s,l,B,C,z,c)},Sw=(t,s,c,l=[],d=[])=>{const g=vm(t,A.some(s),c,l,d);return nl.sketch(g)},xw=(t,s)=>c=>{s==="custom"?An(c,cg,{name:t,value:{}}):s==="submit"?xo(c,J2):s==="cancel"&&xo(c,wh)},W9=(t,s)=>s==="menu",bO=(t,s)=>s==="custom"||s==="cancel"||s==="submit",Z9=(t,s)=>s==="togglebutton",vO=(t,s,c)=>{var l,d;const g=t.icon.map(we=>Lp(we,s.icons)).map(ys),h=we=>{An(we,cg,{name:t.name,value:{setIcon:Qe=>{g.map(We=>We.getOpt(we).each(It=>{to.set(It,[Lp(Qe,s.icons)])}))}}})},C=t.buttonType.getOr(t.primary?"primary":"secondary"),S={...t,name:(l=t.name)!==null&&l!==void 0?l:"",primary:C==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},k=S.tooltip.or(t.text).map(we=>({"aria-label":s.translate(we)})).getOr({}),O=pO(C??"secondary"),B=t.icon.isSome()&&t.text.isSome(),z={tag:"button",classes:[...O.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...B?["tox-button--icon-and-text"]:[]],attributes:{...k,...Xn(c)?{"data-mce-name":c}:{}}},V=[],X=s.translate(t.text.getOr("")),te=jr(X),ae=[...rb([g.map(we=>we.asSpec())]),...t.text.isSome()?[te]:[]],Ce=ww(S,A.some(h),V,z,ae,t.tooltip,s);return nl.sketch(Ce)},Tw=(t,s,c)=>{if(W9(t,s)){const l=()=>h,d=t,g={...t,type:"menubutton",search:A.none(),onSetup:C=>(C.setEnabled(t.enabled),oe),fetch:E9(d.items,l,c)},h=ys(yw(g,"tox-tbtn",c,A.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(bO(t,s)){const l=xw(t.name,s),d={...t,borderless:!1};return Sw(d,l,c.shared.providers,[])}else{if(Z9(t,s))return vO(t,c.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw new Error("Unknown footer button type")}},yO=(t,s)=>{const c=xw(t.name,"custom");return XB(A.none(),Hs.parts.field({factory:nl,...vm(t,A.some(c),s,[yE(""),pm.self()])}))},j9={type:"separator"},G9=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:oe}),_E=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:oe}),q9=t=>Pe(t,G9),K9=(t,s)=>io(s,c=>c.type===t),AE=(t,s)=>q9(K9(t,s)),Y9=t=>AE("header",t.targets),X9=t=>AE("anchor",t.targets),k5=t=>A.from(t.anchorTop).map(s=>_E("<top>",s)).toArray(),_5=t=>A.from(t.anchorBottom).map(s=>_E("<bottom>",s)).toArray(),J9=t=>Pe(t,s=>_E(s,s)),Q9=t=>it(t,(s,c)=>s.length===0||c.length===0?s.concat(c):s.concat(j9,c),[]),CO=(t,s)=>{const c=t.toLowerCase();return io(s,l=>{var d;const g=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,h=(d=l.value)!==null&&d!==void 0?d:"";return rr(g.toLowerCase(),c)||rr(h.toLowerCase(),c)})},ez=(t,s,c)=>{var l,d;const g=qt.getValue(s),h=(d=(l=g==null?void 0:g.meta)===null||l===void 0?void 0:l.text)!==null&&d!==void 0?d:g.value;return c.getLinkInformation().fold(()=>[],S=>{const k=CO(h,J9(c.getHistory(t)));return t==="file"?Q9([k,CO(h,Y9(S)),CO(h,Fe([k5(S),X9(S),_5(S)]))]):k})},wO=Jt("aria-invalid"),rf=(t,s,c,l)=>{const d=s.shared.providers,g=Ce=>{const we=qt.getValue(Ce);c.addToHistory(we.value,t.filetype)},h={...l.map(Ce=>({initialData:Ce})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":wO,type:"url"},minChars:0,responseTime:0,fetch:Ce=>{const we=ez(t.filetype,Ce,c),Qe=zv(we,fm.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:A.none()});return ol.pure(Qe)},getHotspot:Ce=>X.getOpt(Ce),onSetValue:(Ce,we)=>{Ce.hasConfigured(sf)&&sf.run(Ce).get(oe)},typeaheadBehaviours:Tt([...c.getValidationHandler().map(Ce=>sf.config({getRoot:we=>aa(we.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(we,Qe)=>{O.getOpt(we).each(We=>{Ut(We.element,"title",d.translate(Qe))})}},validator:{validate:we=>{const Qe=qt.getValue(we);return V9.nu(We=>{Ce({type:t.filetype,url:Qe.value},It=>{if(It.status==="invalid"){const Kt=uo.error(It.message);We(Kt)}else{const Kt=uo.value(It.message);We(Kt)}})})},validateOnLoad:!1}})).toArray(),i.config({disabled:()=>!t.enabled||d.isDisabled()}),gr.config({}),ho("urlinput-events",[st(Xd(),Ce=>{const we=Um(Ce.element),Qe=we.trim();Qe!==we&&zf(Ce.element,Qe),t.filetype==="file"&&An(Ce,Fi,{name:t.name})}),st(zh(),Ce=>{An(Ce,Fi,{name:t.name}),g(Ce)}),st(Fm(),Ce=>{An(Ce,Fi,{name:t.name}),g(Ce)})])]),eventOrder:{[Xd()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Ce=>Ce.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:R2(!1,1,"normal")},onExecute:(Ce,we,Qe)=>{An(we,J2,{})},onItemExecute:(Ce,we,Qe,We)=>{g(Ce),An(Ce,Fi,{name:t.name})}},C=Hs.parts.field({...h,factory:T5}),S=t.label.map(Ce=>Np(Ce,d)),O=ys(((Ce,we,Qe=Ce,We=Ce)=>Wu(Qe,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Ce],attributes:{title:d.translate(We),"aria-live":"polite",...we.fold(()=>({}),It=>({id:It}))}},d.icons))("invalid",A.some(wO),"warning")),B=ys({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[O.asSpec()]}),z=c.getUrlPicker(t.filetype),V=Jt("browser.url.event"),X=ys({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,B.asSpec()],behaviours:Tt([i.config({disabled:()=>!t.enabled||d.isDisabled()})])}),te=ys(Sw({name:t.name,icon:A.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:A.none(),borderless:!0},Ce=>xo(Ce,V),d,[],["tox-browse-url"])),ke=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Fe([[X.asSpec()],z.map(()=>te.asSpec()).toArray()])}),ae=Ce=>{Jo.getCurrent(Ce).each(we=>{const Qe=qt.getValue(we),We={fieldname:t.name,...Qe};z.each(It=>{It(We).get(Kt=>{qt.setValue(we,Kt),An(Ce,Fi,{name:t.name})})})})};return Hs.sketch({dom:F7(),components:S.toArray().concat([ke()]),fieldBehaviours:Tt([i.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:Ce=>{Hs.getField(Ce).each(i.disable),te.getOpt(Ce).each(i.disable)},onEnabled:Ce=>{Hs.getField(Ce).each(i.enable),te.getOpt(Ce).each(i.enable)}}),Ca(),ho("url-input-events",[st(V,ae)])])})},SO=(t,s)=>{const c=t4(t.icon,s.icons);return of.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:c},components:t.url?[nl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:c,attributes:{title:s.translate(t.iconTooltip)}},action:l=>An(l,cg,{name:"alert-banner",value:t.url}),buttonBehaviours:Tt([OT()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},tz=(t,s)=>{t.dom.checked=s},nz=t=>t.dom.checked,oz=(t,s,c)=>{const l=S=>(S.element.dom.click(),A.some(!0)),d=Hs.parts.field({factory:{sketch:Rt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Tt([pm.self(),i.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:S=>{aa(S.element).each(k=>mr(k,"tox-checkbox--disabled"))},onEnabled:S=>{aa(S.element).each(k=>Zr(k,"tox-checkbox--disabled"))}}),gr.config({}),Kn.config({}),F3(c,nz,tz),En.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),ho("checkbox-events",[st(zh(),(S,k)=>{An(S,Fi,{name:t.name})})])])}),g=Hs.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[jr(s.translate(t.label))],behaviours:Tt([Fv.config({})])}),h=S=>Wu(S==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},s.icons),C=ys({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return Hs.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:Tt([i.config({disabled:()=>!t.enabled||s.isDisabled()}),Ca()])})},sz=(t,s)=>{const c=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],l=ho("htmlpanel",[Cr(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?of.sketch({dom:{tag:"div",classes:c,innerHtml:t.html},containerBehaviours:Tt([ac.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{Ar(d.element,"[data-mce-tooltip]:hover").orThunk(()=>El(d.element)).each(g=>{Vr(g,"data-mce-tooltip").each(h=>{ac.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:Ar(d.element,"[data-mce-tooltip]:hover").orThunk(()=>El(d.element).filter(g=>Vr(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:W([jc,Zc,Wc,Is,rc,za]),onRtl:W([jc,Zc,Wc,Is,rc,za])},bubble:Fu(0,-2,{})})}),l])}):of.sketch({dom:{tag:"div",classes:c,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Tt([gr.config({}),Kn.config({}),l])})},wa=t=>(s,c,l,d,g)=>xt(c,"name").fold(()=>t(c,d,A.none(),g),h=>s.field(h,t(c,d,xt(l,h),g))),A5=t=>(s,c,l,d,g)=>{const h=tr(c,{source:"dynamic"});return wa(t)(s,h,l,d,g)},O5={bar:wa((t,s)=>N7(t,s.shared)),collection:wa((t,s,c)=>$v(t,s.shared.providers,c)),alertbanner:wa((t,s)=>SO(t,s.shared.providers)),input:wa((t,s,c)=>p9(t,s.shared.providers,c)),textarea:wa((t,s,c)=>b9(t,s.shared.providers,c)),label:wa((t,s,c,l)=>XP(t,s.shared,l)),iframe:A5((t,s,c)=>XH(t,s.shared.providers,c)),button:wa((t,s)=>yO(t,s.shared.providers)),checkbox:wa((t,s,c)=>oz(t,s.shared.providers,c)),colorinput:wa((t,s,c)=>j7(t,s.shared,s.colorinput,c)),colorpicker:wa((t,s,c)=>zH(t,s.shared.providers,c)),dropzone:wa((t,s,c)=>L3(t,s.shared.providers,c)),grid:wa((t,s)=>WH(t,s.shared)),listbox:wa((t,s,c)=>o5(t,s,c)),selectbox:wa((t,s,c)=>u9(t,s.shared.providers,c)),sizeinput:wa((t,s)=>a5(t,s.shared.providers)),slider:wa((t,s,c)=>l5(t,s.shared.providers,c)),urlinput:wa((t,s,c)=>rf(t,s,s.urlinput,c)),customeditor:wa(VP),htmlpanel:wa((t,s)=>sz(t,s.shared.providers)),imagepreview:wa((t,s,c)=>G3(t,c)),table:wa((t,s)=>i5(t,s.shared.providers)),tree:wa((t,s)=>R9(t,s)),panel:wa((t,s)=>a9(t,s))},nG={field:(t,s)=>s,record:W([])},rz=(t,s,c,l,d)=>{const g=tr(l,{shared:{interpreter:h=>ja(t,h,c,g,d)}});return ja(t,s,c,g,d)},ja=(t,s,c,l,d)=>xt(O5,s.type).fold(()=>s,g=>g(t,s,c,l,d)),OE=(t,s,c,l)=>ja(nG,t,s,c,l),Vp="layout-inset",Uv=t=>t.x,D5=(t,s)=>t.x+t.width/2-s.width/2,xO=(t,s)=>t.x+t.width-s.width,TO=t=>t.y,EO=(t,s)=>t.y+t.height-s.height,R5=(t,s)=>t.y+t.height/2-s.height/2,DE=(t,s,c)=>ha(xO(t,s),EO(t,s),c.insetSouthwest(),Qt(),"southwest",Da(t,{right:0,bottom:3}),Vp),RE=(t,s,c)=>ha(Uv(t),EO(t,s),c.insetSoutheast(),i0(),"southeast",Da(t,{left:1,bottom:3}),Vp),Ew=(t,s,c)=>ha(xO(t,s),TO(t),c.insetNorthwest(),iC(),"northwest",Da(t,{right:0,top:2}),Vp),Wv=(t,s,c)=>ha(Uv(t),TO(t),c.insetNortheast(),l0(),"northeast",Da(t,{left:1,top:2}),Vp),fu=(t,s,c)=>ha(D5(t,s),TO(t),c.insetNorth(),b1(),"north",Da(t,{top:2}),Vp),Zv=(t,s,c)=>ha(D5(t,s),EO(t,s),c.insetSouth(),uC(),"south",Da(t,{bottom:3}),Vp),kO=(t,s,c)=>ha(xO(t,s),R5(t,s),c.insetEast(),HS(),"east",Da(t,{right:0}),Vp),N5=(t,s,c)=>ha(Uv(t),R5(t,s),c.insetWest(),LS(),"west",Da(t,{left:1}),Vp),M5=t=>{switch(t){case"north":return fu;case"northeast":return Wv;case"northwest":return Ew;case"south":return Zv;case"southeast":return RE;case"southwest":return DE;case"east":return kO;case"west":return N5}},B5=(t,s,c,l,d)=>YS(l).map(M5).getOr(fu)(t,s,c,l,d),cz=t=>{switch(t){case"north":return Zv;case"northeast":return RE;case"northwest":return DE;case"south":return fu;case"southeast":return Wv;case"southwest":return Ew;case"east":return N5;case"west":return kO}},P5=(t,s,c,l,d)=>YS(l).map(cz).getOr(fu)(t,s,c,l,d),NE={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},oG=(t,s,c)=>{const d={maxHeightFunction:np()},g=()=>({type:"node",root:ia(Fr(t())),node:A.from(t()),bubble:Fu(12,12,NE),layouts:{onRtl:()=>[Wv],onLtr:()=>[Ew]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:Fu(-12,12,NE),layouts:{onRtl:()=>[Wc,rc,jc],onLtr:()=>[rc,Wc,jc]},overrides:d});return()=>c()?g():h()},az=(t,s,c,l)=>{const g={maxHeightFunction:np()},h=()=>({type:"node",root:ia(Fr(s())),node:A.from(s()),bubble:Fu(12,12,NE),layouts:{onRtl:()=>[fu],onLtr:()=>[fu]},overrides:g}),C=()=>t?{type:"node",root:ia(Fr(s())),node:A.from(s()),bubble:Fu(0,-Bl(s()),NE),layouts:{onRtl:()=>[Zc],onLtr:()=>[Zc]},overrides:g}:{type:"hotspot",hotspot:c(),bubble:Fu(0,0,NE),layouts:{onRtl:()=>[Zc],onLtr:()=>[Zc]},overrides:g};return()=>l()?h():C()},lz=(t,s,c)=>{const l=()=>({type:"node",root:ia(Fr(t())),node:A.from(t()),layouts:{onRtl:()=>[fu],onLtr:()=>[fu]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[jc],onLtr:()=>[jc]}});return()=>c()?l():d()},iz=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const c=t.selection.getRng(),l=t.model.table.getSelectedCells();if(l.length>1){const d=l[0],g=l[l.length-1],h={firstCell:ve.fromDom(d),lastCell:ve.fromDom(g)};return A.some(h)}return A.some(Yf.range(ve.fromDom(c.startContainer),c.startOffset,ve.fromDom(c.endContainer),c.endOffset))}}),$5=t=>s=>({type:"node",root:t(),node:s}),_O=(t,s,c,l)=>{const d=yv(t),g=()=>ve.fromDom(t.getBody()),h=()=>ve.fromDom(t.getContentAreaContainer()),C=()=>d||!l();return{inlineDialog:oG(h,s,C),inlineBottomDialog:az(t.inline,h,c,C),banner:lz(h,s,C),cursor:iz(t,g),node:$5(g)}},uz=t=>(s,c)=>{DB(t)(s,c)},dz=t=>()=>wB(t),F5=t=>s=>tE(t,s),mz=t=>s=>CB(t,s),fz=t=>({colorPicker:uz(t),hasCustomColors:dz(t),getColors:F5(t),getColorCols:mz(t)}),gz=t=>()=>jN(t),hz=t=>({isDraggableModal:gz(t)}),AO=t=>{const s=hn(w2(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},OO=t=>Pr(t,"items"),I5=t=>Pr(t,"format"),L5=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],pz=t=>Eo(t,"items"),bz=t=>Eo(t,"block"),H5=t=>Eo(t,"inline"),vz=t=>Eo(t,"selector"),kw=t=>it(t,(s,c)=>{if(pz(c)){const l=kw(c.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:c.title,items:l.formats}])}}else if(H5(c)||bz(c)||vz(c)){const d=`custom-${rt(c.name)?c.name:c.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:c}]),formats:s.formats.concat([{title:c.title,format:d,icon:c.icon}])}}else return{...s,formats:s.formats.concat(c)}},{customFormats:[],formats:[]}),yz=(t,s)=>{const c=kw(s),l=d=>{et(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?l(c.customFormats):t.on("init",()=>{l(c.customFormats)}),c.formats},_w=t=>PN(t).map(s=>{const c=yz(t,s);return $N(t)?L5.concat(c):c}).getOr(L5),Cz=t=>{const s=gs(t);return s.length===1&&Jn(s,"title")},ME=(t,s,c)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:c(t.format)}),jv=(t,s,c,l)=>{const d=S=>ME(S,c,l),g=S=>{const k=C(S.items);return{...S,type:"submenu",getStyleItems:W(k)}},h=S=>{const k=rt(S.name)?S.name:Jt(S.title),O=`custom-${k}`,B={...S,type:"formatter",format:O,isSelected:c(O),getStylePreview:l(O)};return t.formatter.register(k,B),B},C=S=>Pe(S,k=>OO(k)?g(k):I5(k)?d(k):Cz(k)?{...k,type:"separator"}:h(k));return C(s)},z5=t=>{const s=C=>()=>t.formatter.match(C),c=C=>()=>{const S=t.formatter.get(C);return S!==void 0?A.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):A.none()},l=hn([]),d=hn([]),g=hn(!1);return t.on("PreInit",C=>{const S=_w(t),k=jv(t,S,s,c);l.set(k)}),t.on("addStyleModifications",C=>{const S=jv(t,C.items,s,c);d.set(S),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:l.get(),S=d.get();return C.concat(S)}}},wz=t=>{let l=0;const d=()=>l>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[jr(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:W(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(S,k)=>{l++,C.onShow&&C.onShow(S,k)},onHide:(S,k)=>{l--,C.onHide&&C.onHide(S,k)},onSetup:C.onSetup}),getComponents:g}},V5=t=>Xn(t)&&t.nodeType===1,U5=Eh.trim,DO=t=>s=>!!(V5(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),Sz=DO("true"),RO=DO("false"),Aw=(t,s,c,l,d)=>({type:t,title:s,url:c,level:l,attach:d}),xz=t=>{let s=t;for(;s=s.parentNode;){const c=s.contentEditable;if(c&&c!=="inherit")return Sz(s)}return!1},Tz=(t,s)=>Pe(Ra(ve.fromDom(s),t),c=>c.dom),gb=t=>t.innerText||t.textContent,W5=t=>t.id?t.id:Jt("h"),Ez=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,Z5=t=>Ez(t)&&PE(t),BE=t=>t&&/^(H[1-6])$/.test(t.nodeName),PE=t=>xz(t)&&!RO(t),kz=t=>BE(t)&&PE(t),_z=t=>BE(t)?parseInt(t.nodeName.substr(1),10):0,Az=t=>{var s;const c=W5(t),l=()=>{t.id=c};return Aw("header",(s=gb(t))!==null&&s!==void 0?s:"","#"+c,_z(t),l)},NO=t=>{const s=t.id||t.name,c=gb(t);return Aw("anchor",c||"#"+s,"#"+s,0,oe)},Oz=t=>Pe(io(t,kz),Az),Dz=t=>Pe(io(t,Z5),NO),Rz=t=>Tz("h1,h2,h3,h4,h5,h6,a:not([href])",t),Nz=t=>U5(t.title).length>0,Mz={find:t=>{const s=Rz(t);return io(Oz(s).concat(Dz(s)),Nz)}},j5="tinymce-url-history",MO=5,G5=t=>rt(t)&&/^https?/.test(t),Ow=t=>mo(t)&&t.length<=MO&&_n(t,G5),q5=t=>Hn(t)&&yo(t,s=>!Ow(s)).isNone(),K5=()=>{const t=ib.getItem(j5);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(c){if(c instanceof SyntaxError)return{};throw c}return q5(s)?s:{}},BO=t=>{if(!q5(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));ib.setItem(j5,JSON.stringify(t))},Y5=t=>{const s=K5();return xt(s,t).getOr([])},Bz=(t,s)=>{if(!G5(t))return;const c=K5(),l=xt(c,s).getOr([]),d=io(l,g=>g!==t);c[s]=[t].concat(d).slice(0,MO),BO(c)},X5=t=>!!t,Pz=t=>bo(Eh.makeMap(t,/[, ]/),X5),PO=t=>A.from(UN(t)),$z=t=>{const s=A.from(_A(t)).filter(X5).map(Pz);return PO(t).fold(gt,c=>s.fold($e,l=>gs(l).length>0?l:!1))},Fz=(t,s)=>{const c=$z(t);return Wo(c)?c?PO(t):A.none():c[s]?PO(t):A.none()},Iz=(t,s)=>Fz(t,s).map(c=>l=>ol.nu(d=>{const g=(C,S)=>{if(!rt(C))throw new Error("Expected value to be string");if(S!==void 0&&!Hn(S))throw new Error("Expected meta to be a object");d({value:C,meta:S})},h={filetype:s,fieldname:l.fieldname,...A.from(l.meta).getOr({})};c.call(t,g,l.value,h)})),J5=t=>A.from(t).filter(rt).getOrUndefined(),Lz=t=>AA(t)?A.some({targets:Mz.find(t.getBody()),anchorTop:J5(ZN(t)),anchorBottom:J5(bT(t))}):A.none(),rG=t=>A.from(WN(t)),Hz=t=>({getHistory:Y5,addToHistory:Bz,getLinkInformation:()=>Lz(t),getValidationHandler:()=>rG(t),getUrlPicker:s=>Iz(t,s)}),Q5=(t,s,c,l)=>{const d=hn(!1),g=AO(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Uu.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get,tooltips:wz(t.dialog)},C=Hz(s),S=z5(s),k=fz(s),O=hz(s),B=()=>d.get(),z=ae=>d.set(ae),V={shared:{providers:h,anchors:_O(s,c,l,g.isPositionedAtTop),header:g},urlinput:C,styles:S,colorinput:k,dialog:O,isContextMenuOpen:B,setContextMenuState:z},X=ae=>A.none(),te={...V,shared:{...V.shared,interpreter:ae=>OE(ae,{},te,X),getSink:t.popup}},ke={...V,shared:{...V.shared,interpreter:ae=>OE(ae,{},ke,X),getSink:t.dialog}};return{popup:te,dialog:ke}},e$=(t,s,c)=>{const l=(qe,cn)=>{et([s,...c],$t=>{$t.broadcastEvent(qe,cn)})},d=(qe,cn)=>{et([s,...c],$t=>{$t.broadcastOn([qe],cn)})},g=qe=>d(cm(),{target:qe.target}),h=Ql(),C=kl(h,"touchstart",g),S=kl(h,"touchmove",qe=>l(n1(),qe)),k=kl(h,"touchend",qe=>l(py(),qe)),O=kl(h,"mousedown",g),B=kl(h,"mouseup",qe=>{qe.raw.button===0&&d(G0(),{target:qe.target})}),z=qe=>d(cm(),{target:ve.fromDom(qe.target)}),V=qe=>{qe.button===0&&d(G0(),{target:ve.fromDom(qe.target)})},X=()=>{et(t.editorManager.get(),qe=>{t!==qe&&qe.dispatch("DismissPopups",{relatedTarget:t})})},te=qe=>l(Fg(),pC(qe)),ke=qe=>{d(rh(),{}),l(hd(),pC(qe))},ae=Fr(ve.fromDom(t.getElement())),Ce=hC(ae,"scroll",qe=>{requestAnimationFrame(()=>{const cn=t.getContainer();if(cn!=null){const dn=bh(t,s.element).map(Mo=>[Mo.element,...Mo.others]).getOr([]);bs(dn,Mo=>es(Mo,qe.target))&&(t.dispatch("ElementScroll",{target:qe.target.dom}),l(oS(),qe))}})}),we=()=>d(rh(),{}),Qe=qe=>{qe.state&&d(cm(),{target:ve.fromDom(t.getContainer())})},We=qe=>{d(cm(),{target:ve.fromDom(qe.relatedTarget.getContainer())})},It=qe=>t.dispatch("focusin",qe),Kt=qe=>t.dispatch("focusout",qe);t.on("PostRender",()=>{t.on("click",z),t.on("tap",z),t.on("mouseup",V),t.on("mousedown",X),t.on("ScrollWindow",te),t.on("ResizeWindow",ke),t.on("ResizeEditor",we),t.on("AfterProgressState",Qe),t.on("DismissPopups",We),et([s,...c],qe=>{qe.element.dom.addEventListener("focusin",It),qe.element.dom.addEventListener("focusout",Kt)})}),t.on("remove",()=>{t.off("click",z),t.off("tap",z),t.off("mouseup",V),t.off("mousedown",X),t.off("ScrollWindow",te),t.off("ResizeWindow",ke),t.off("ResizeEditor",we),t.off("AfterProgressState",Qe),t.off("DismissPopups",We),et([s,...c],qe=>{qe.element.dom.removeEventListener("focusin",It),qe.element.dom.removeEventListener("focusout",Kt)}),O.unbind(),C.unbind(),S.unbind(),k.unbind(),B.unbind(),Ce.unbind()}),t.on("detach",()=>{et([s,...c],$C),et([s,...c],qe=>qe.destroy())})},qc=qx,cf=gR,zz=W([_e("shell",!1),tt("makeItem"),_e("setupItem",oe),iu.field("listBehaviours",[to])]),Vz=Ni({name:"items",overrides:()=>({behaviours:Tt([to.config({})])})}),Uz=W([Vz]),Wz=W("CustomList"),Zz=(t,s,c,l)=>{const d=(C,S)=>{h(C).fold(()=>{throw new Error("Custom List was defined to not be a shell, but no item container was specified in components")},k=>{const O=to.contents(k),B=S.length,z=B-O.length,V=z>0?bt(z,()=>t.makeItem()):[],X=O.slice(B);et(X,ke=>to.remove(k,ke)),et(V,ke=>to.append(k,ke));const te=to.contents(k);et(te,(ke,ae)=>{t.setupItem(C,ke,S[ae],ae)})})},g=t.shell?{behaviours:[to.config({})],components:[]}:{behaviours:[],components:s},h=C=>t.shell?A.some(C):Ct(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:va(t.listBehaviours,g.behaviours),apis:{setItems:d}}},t$=ml({name:Wz(),configFields:zz(),partFields:Uz(),factory:Zz,apis:{setItems:(t,s,c)=>{t.setItems(s,c)}}}),hb=W([tt("dom"),_e("shell",!0),ba("toolbarBehaviours",[to])]),Gz=W([Ni({name:"groups",overrides:()=>({behaviours:Tt([to.config({})])})})]),n$=(t,s,c,l)=>{const d=(C,S)=>{g(C).fold(()=>{throw new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},k=>{to.set(k,S)})},g=C=>t.shell?A.some(C):Ct(C,t,"groups"),h=t.shell?{behaviours:[to.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:va(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:oe},domModification:{attributes:{role:"group"}}}},af=ml({name:"Toolbar",configFields:hb(),partFields:Gz(),factory:n$,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)}}}),qz=oe,Kz=gt,Up=W([]);var o$=Object.freeze({__proto__:null,setup:qz,isDocked:Kz,getBehaviours:Up});const pb=W(Jt("toolbar-height-change")),Rd={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},$O="tox-tinymce--toolbar-sticky-on",FO="tox-tinymce--toolbar-sticky-off",s$=(t,s)=>{const c=mc(s),d=Cc(s).dom.innerHeight,g=ka(c),h=ve.fromDom(t.elm),C=pl(h),S=$s(h),k=C.y,O=k+S,B=wc(s),z=$s(s),V=B.top,X=V+z,te=Math.abs(V-g.top)<2,ke=Math.abs(X-(g.top+d))<2;if(te&&k<X)sd(g.left,k-z,c);else if(ke&&O>V){const ae=k-d+S+z;sd(g.left,ae,c)}},IO=(t,s)=>Jn(fr.getModes(t),s),LO=t=>{const s=l=>Bl(l)+(parseInt(fs(l,"margin-top"),10)||0)+(parseInt(fs(l,"margin-bottom"),10)||0),c=t.element;aa(c).each(l=>{const d="padding-"+fr.getModes(t)[0];if(fr.isDocked(t)){const g=q(l);ot(c,"width",g+"px"),ot(l,d,s(c)+"px")}else co(c,"width"),co(l,d)})},r$=(t,s)=>{s?(Zr(t,Rd.fadeOutClass),Zh(t,[Rd.transitionClass,Rd.fadeInClass])):(Zr(t,Rd.fadeInClass),Zh(t,[Rd.fadeOutClass,Rd.transitionClass]))},c$=(t,s)=>{const c=ve.fromDom(t.getContainer());s?(mr(c,$O),Zr(c,FO)):(mr(c,FO),Zr(c,$O))},Yz=(t,s)=>{const c=mc(s);Cd(c).filter(l=>!es(s,l)).filter(l=>es(l,ve.fromDom(c.dom.body))||yc(t,l)).each(()=>Ai(s))},Xz=(t,s)=>El(t).orThunk(()=>s().toOptional().bind(c=>El(c.element))),Gv=(t,s,c)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{c().each(fr.reset)}),t.on("ResizeWindow ResizeEditor",()=>{c().each(LO)}),t.on("SkinLoaded",()=>{c().each(l=>{fr.isDocked(l)?fr.reset(l):fr.refresh(l)})}),t.on("FullscreenStateChanged",()=>{c().each(fr.reset)})),t.on("AfterScrollIntoView",l=>{c().each(d=>{fr.refresh(d);const g=d.element;ER(g)&&s$(l,g)})}),t.on("PostRender",()=>{c$(t,!1)})},Dw=t=>t().map(fr.isDocked).getOr(!1),HO=()=>[Zl.config({channels:{[pb()]:{onReceive:LO}}})],a$=(t,s)=>{const c=Es(),l=s.getSink,d=C=>{l().each(S=>C(S.element))},g=C=>{t.inline||LO(C),c$(t,fr.isDocked(C)),C.getSystem().broadcastOn([rh()],{}),l().each(S=>S.getSystem().broadcastOn([rh()],{}))},h=t.inline?[]:HO();return[Kn.config({}),fr.config({contextual:{lazyContext:C=>{const S=Bl(C.element),k=t.inline?t.getContentAreaContainer():t.getContainer();return A.from(k).map(O=>{const B=kr(ve.fromDom(O));return bh(t,C.element).fold(()=>{const V=B.height-S,X=B.y+(IO(C,"top")?0:S);return yr(B.x,X,B.width,V)},V=>{const X=cd(B,J1(V)),te=IO(C,"top")?X.y:X.y+S;return yr(X.x,te,X.width,X.height-S)})})},onShow:()=>{d(C=>r$(C,!0))},onShown:C=>{d(S=>ci(S,[Rd.transitionClass,Rd.fadeInClass])),c.get().each(S=>{Yz(C.element,S),c.clear()})},onHide:C=>{Xz(C.element,l).fold(c.clear,c.set),d(S=>r$(S,!1))},onHidden:()=>{d(C=>ci(C,[Rd.transitionClass]))},...Rd},lazyViewport:C=>bh(t,C.element).fold(()=>{const k=gc(),O=zN(t),B=k.y+(IO(C,"top")?O:0),z=k.height-(IO(C,"bottom")?O:0);return{bounds:yr(k.x,B,k.width,z),optScrollEnv:A.none()}},k=>({bounds:J1(k),optScrollEnv:A.some({currentScrollTop:k.element.dom.scrollTop,scrollElmTop:wc(k.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var Jz=Object.freeze({__proto__:null,setup:Gv,isDocked:Dw,getBehaviours:a$});const zO=t=>{const s=t.editor,c=t.sticky?a$:Up;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Tt(c(s,t.sharedBackstage))}},Qz=Pn([Ec,ls("items",yf([Xp([HT,Hl("items",Wt)]),Wt]))].concat(Al)),Rw=t=>Nr("GroupToolbarButton",Qz,t),l$=[Nc("text"),Nc("tooltip"),Nc("icon"),zl("search",!1,yf([ei,Pn([Nc("placeholder")])],t=>Wo(t)?t?A.some({placeholder:A.none()}):A.none():A.some(t))),Ll("fetch"),Wr("onSetup",()=>oe)],i$=Pn([Ec,...l$]),u$=t=>Nr("menubutton",i$,t),eV=Pn([Ec,xv,kd,Ch,qL,WL,ob,Vl("presets","normal",["normal","color","listpreview"]),RM(1),Ap,DM]),tV=t=>Nr("SplitButton",eV,t);var VO=gi({factory:(t,s)=>{const c=(d,g)=>{const h=Pe(g,C=>{const S={type:"menubutton",text:C.text,fetch:O=>{O(C.getItems())}},k=u$(S).mapError(O=>Au(O)).getOrDie();return yw(k,"tox-mbtn",s.backstage,A.some("menuitem"))});to.set(d,h)},l={focus:En.focusIn,setMenus:c};return{uid:t.uid,dom:t.dom,components:[],behaviours:Tt([to.config({}),ho("menubar-events",[Cr(d=>{t.onSetup(d)}),st(ni(),(d,g)=>{Ar(d.element,".tox-mbtn--active").each(h=>{$u(g.event.target,".tox-mbtn").each(C=>{es(h,C)||d.getSystem().getByDom(h).each(S=>{d.getSystem().getByDom(C).each(k=>{Od.expand(k),Od.close(S),Kn.focus(k)})})})})}),st(Ig(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{Od.isOpen(h)&&(Od.expand(C),Od.close(h))})})})]),En.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),A.some(!0))}),gr.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[tt("dom"),tt("uid"),tt("onEscape"),tt("backstage"),_e("onSetup",oe)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,c)=>{t.setMenus(s,c)}}});const d$="⚡️Upgrade",m$="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",UO=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:m$,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:d$}}]}),f$="container",$E=[ba("slotBehaviours",[])],Nw=t=>"<alloy.field."+t+">",g$=t=>{const s=(()=>{const g=[];return{slot:(C,S)=>(g.push(C),Wx(f$,Nw(C),S)),record:W(g)}})(),c=t(s),l=s.record(),d=Pe(l,g=>Wa({name:g,pname:Nw(g)}));return og(f$,$E,d,nV,c)},nV=(t,s)=>{const c=te=>H1(t),l=(te,ke)=>Ct(te,t,ke),d=(te,ke)=>(ae,Ce)=>Ct(ae,t,Ce).map(we=>te(we,Ce)).getOr(ke),g=te=>(ke,ae)=>{et(ae,Ce=>te(ke,Ce))},h=(te,ke)=>gn(te.element,"aria-hidden")!=="true",C=(te,ke)=>{if(!h(te)){const ae=te.element;co(ae,"display"),P(ae,"aria-hidden"),An(te,vy(),{name:ke,visible:!0})}},S=(te,ke)=>{if(h(te)){const ae=te.element;ot(ae,"display","none"),Ut(ae,"aria-hidden","true"),An(te,vy(),{name:ke,visible:!1})}},k=d(h,!1),O=d(S),B=g(O),z=te=>B(te,c()),V=d(C),X={getSlotNames:c,getSlot:l,isShowing:k,hideSlot:O,hideAllSlots:z,showSlot:V};return{uid:t.uid,dom:t.dom,components:s,behaviours:P1(t.slotBehaviours),apis:X}},Dl={...bo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,c)=>t.getSlot(s,c),isShowing:(t,s,c)=>t.isShowing(s,c),hideSlot:(t,s,c)=>t.hideSlot(s,c),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,c)=>t.showSlot(s,c)},t=>Xb(t)),sketch:g$},oV=Pn([kd,xv,Wr("onShow",oe),Wr("onHide",oe),ob]),WO=t=>Nr("sidebar",oV,t),ZO=t=>{const{sidebars:s}=t.ui.registry.getAll();et(gs(s),c=>{const l=s[c],d=()=>br(A.from(t.queryCommandValue("ToggleSidebar")),c);t.ui.registry.addToggleButton(c,{icon:l.icon,tooltip:l.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,c),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}}})})},sV=t=>({element:()=>t.element.dom}),jO=(t,s)=>{const c=Pe(gs(s),l=>{const d=s[l],g=vt(WO(d));return{name:l,getApi:sV,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Pe(c,l=>{const d=hn(oe);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:kv.unnamedEvents([Ol(l,d),Dp(l,d),st(vy(),(g,h)=>{const C=h.event;xe(c,k=>k.name===C.name).each(k=>{(C.visible?k.onShow:k.onHide)(k.getApi(g))})})])})})},rV=t=>Dl.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:jO(s,t),slotBehaviours:kv.unnamedEvents([Cr(c=>Dl.hideAllSlots(c))])})),cV=(t,s,c)=>{Jo.getCurrent(t).each(d=>{to.set(d,[rV(s)]);const g=c==null?void 0:c.toLowerCase();rt(g)&&Eo(s,g)&&Jo.getCurrent(d).each(h=>{Dl.showSlot(h,g),Kl.immediateGrow(d),co(d.element,"width"),FE(t.element,"region")})})},FE=(t,s)=>{Ut(t,"role",s)},aV=(t,s)=>{Jo.getCurrent(t).each(l=>{Jo.getCurrent(l).each(g=>{Kl.hasGrown(l)?Dl.isShowing(g,s)?(Kl.shrink(l),FE(t.element,"presentation")):(Dl.hideAllSlots(g),Dl.showSlot(g,s),FE(t.element,"region")):(Dl.hideAllSlots(g),Dl.showSlot(g,s),Kl.grow(l),FE(t.element,"region"))})})},lV=t=>Jo.getCurrent(t).bind(c=>Kl.isGrowing(c)||Kl.hasGrown(c)?Jo.getCurrent(c).bind(g=>xe(Dl.getSlotNames(g),h=>Dl.isShowing(g,h))):A.none()),h$=Jt("FixSizeEvent"),p$=Jt("AutoSizeEvent"),b$=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Tt([gr.config({}),Kn.config({}),Kl.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Jo.getCurrent(s).each(Dl.hideAllSlots),xo(s,p$)},onGrown:s=>{xo(s,p$)},onStartGrow:s=>{An(s,h$,{width:Us(s.element,"width").getOr("")})},onStartShrink:s=>{An(s,h$,{width:q(s.element)+"px"})}}),to.config({}),Jo.config({find:s=>{const c=to.contents(s);return Ms(c)}})])}],behaviours:Tt([pm.childAt(0),ho("sidebar-sliding-events",[st(h$,(s,c)=>{ot(s.element,"width",c.event.width)}),st(p$,(s,c)=>{co(s.element,"width")})])])});var uV=Object.freeze({__proto__:null,block:(t,s,c,l)=>{Ut(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=Tt([En.config({mode:"special",onTab:()=>A.some(!0),onShiftTab:()=>A.some(!0)}),Kn.config({})]),h=l(d,g),C=d.getSystem().build(h);to.append(d,_i(C)),C.hasConfigured(En)&&s.focus&&En.focusIn(C),c.isBlocked()||s.onBlock(t),c.blockWith(()=>to.remove(d,C))},unblock:(t,s,c)=>{P(t.element,"aria-busy"),c.isBlocked()&&s.onUnblock(t),c.clear()},isBlocked:(t,s,c)=>c.isBlocked()}),dV=[Wr("getRoot",A.none),oc("focus",!0),Zo("onBlock"),Zo("onUnblock")],mV=Object.freeze({__proto__:null,init:()=>{const t=pf(),s=c=>{t.set({destroy:c})};return si({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const ym=Oa({fields:dV,name:"blocking",apis:uV,state:mV}),fV=t=>(s,c)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Qm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),v$=t=>Jo.getCurrent(t).each(s=>Ai(s.element,!0)),gV=(t,s)=>{const c="tabindex",l=`data-mce-${c}`;A.from(t.iframeElement).map(ve.fromDom).each(d=>{s?(Vr(d,c).each(g=>Ut(d,l,g)),Ut(d,c,-1)):(P(d,c),Vr(d,l).each(g=>{Ut(d,c,g),P(d,l)}))})},mG=(t,s,c,l)=>{const d=s.element;if(gV(t,c),c)ym.block(s,fV(l)),co(d,"display"),P(d,"aria-hidden"),t.hasFocus()&&v$(s);else{const g=Jo.getCurrent(s).exists(h=>v1(h.element));ym.unblock(s),ot(d,"display","none"),Ut(d,"aria-hidden","true"),g&&t.focus()}},fG=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Tt([to.config({}),ym.config({focus:!1}),Jo.config({find:s=>Ms(s.components())})]),components:[]}),y$=t=>t.type==="focusin",C$=t=>y$(t)?(t.composed?Ms(t.composedPath()):A.from(t.target)).map(ve.fromDom).filter(Dn).exists(c=>ri(c,"mce-pastebin")):!1,hV=(t,s,c)=>{const l=hn(!1),d=Es(),g=C=>{l.get()&&!C$(C)&&(C.preventDefault(),v$(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const h=C=>{C!==l.get()&&(l.set(C),mG(t,s(),C,c.providers),S8(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),Zn(C.time)){const S=bv.setEditorTimeout(t,()=>h(C.state),C.time);d.set(S)}else h(C.state),d.clear()})},pV=(t,s)=>it(t,(d,g)=>s(g,d.len).fold(W(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,Ii=(t,s,c)=>({within:t,extra:s,withinWidth:c}),w$=(t,s,c)=>{const l=pV(t,(C,S)=>{const k=c(C);return A.some({element:C,start:S,finish:S+k,width:k})}),d=io(l,C=>C.finish<=s),g=To(d,(C,S)=>C+S.width,0),h=l.slice(d.length);return{within:d,extra:h,withinWidth:g}},Mw=t=>Pe(t,s=>s.element),S$=(t,s,c)=>{const l=Mw(t.concat(s));return Ii(l,[],c)},bV=(t,s,c,l)=>{const d=Mw(t).concat([c]);return Ii(d,Mw(s),l)},Bw=(t,s,c)=>Ii(Mw(t),[],c),vV=(t,s,c)=>{const l=w$(s,t,c);return l.extra.length===0?A.some(l):A.none()},IE=(t,s,c,l)=>{const d=vV(t,s,c).getOrThunk(()=>w$(s,t-c(l),c)),g=d.within,h=d.extra,C=d.withinWidth;return h.length===1&&h[0].width<=c(l)?S$(g,h,C):h.length>=1?bV(g,h,l,C):Bw(g,h,C)},x$=(t,s)=>{const c=Pe(s,l=>_i(l));af.setGroups(t,c)},LE=t=>As(t,s=>El(s.element).bind(c=>s.getSystem().getByDom(c).toOptional())),T$=(t,s,c)=>{const l=s.builtGroups.get();if(l.length===0)return;const d=Mi(t,s,"primary"),g=bc.getCoupled(t,"overflowGroup");ot(d.element,"visibility","hidden");const h=l.concat([g]),C=LE(h);c([]),x$(d,h);const S=q(d.element),k=IE(S,s.builtGroups.get(),O=>Math.ceil(O.element.dom.getBoundingClientRect().width),g);k.extra.length===0?(to.remove(d,g),c([])):(x$(d,k.within),c(k.extra)),co(d.element,"visibility"),Jc(d.element),C.each(Kn.focus)},E$=W([ba("splitToolbarBehaviours",[bc]),as("builtGroups",()=>hn([]))]),Nd=W([qg(["overflowToggledClass"]),Du("getOverflowBounds"),tt("lazySink"),as("overflowGroups",()=>hn([])),Zo("onOpened"),Zo("onClosed")].concat(E$())),yV=W([Wa({factory:af,schema:hb(),name:"primary"}),uu({schema:hb(),name:"overflow"}),uu({name:"overflow-button"}),uu({name:"overflow-group"})]),qv=W((t,s)=>{Ae(t,Math.floor(s))}),k$=W([qg(["toggledClass"]),tt("lazySink"),Ll("fetch"),Du("getBounds"),lr("fireDismissalEventInstead",[_e("event",Ef())]),qf(),Zo("onToggled")]),_$=W([uu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Tt([_o.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),uu({factory:af,schema:hb(),name:"toolbar",overrides:t=>({toolbarBehaviours:Tt([En.config({mode:"cyclic",onEscape:s=>(Ct(s,t,"button").each(Kn.focus),A.none())})])})})]),HE=Es(),A$=(t,s)=>{HE.set(!0),GO(t,s),HE.clear()},GO=(t,s)=>{const c=bc.getCoupled(t,"toolbarSandbox");Xo.isOpen(c)?Xo.close(c):Xo.open(c,s.toolbar())},qO=(t,s,c,l)=>{const d=c.getBounds.map(h=>h()),g=c.lazySink(t).getOrDie();tl.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:qv()}}},d)},O$=(t,s,c,l,d)=>{af.setGroups(s,d),qO(t,s,c,l),_o.on(t)},CV=(t,s,c)=>{const l=aC(),d=(h,C)=>{const S=HE.get().getOr(!1);c.fetch().get(k=>{O$(t,C,c,s.layouts,k),l.link(t.element),S||En.focusIn(C)})},g=()=>{_o.off(t),HE.get().getOr(!1)||Kn.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:Tt([En.config({mode:"special",onEscape:h=>(Xo.close(h),A.some(!0))}),Xo.config({onOpen:d,onClose:g,isPartOf:(h,C,S)=>Xg(C,S)||Xg(t,S),getAttachPoint:()=>c.lazySink(t).getOrDie()}),Zl.config({channels:{...ng({isExtraPart:gt,...c.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...zC({doReposition:()=>{Xo.getState(bc.getCoupled(t,"toolbarSandbox")).each(h=>{qO(t,h,c,s.layouts)})}})}})])}},Wp=ml({name:"FloatingToolbarButton",factory:(t,s,c,l)=>({...nl.sketch({...l.button(),action:d=>{GO(d,l)},buttonBehaviours:iu.augment({dump:l.button().buttonBehaviours},[bc.config({others:{toolbarSandbox:d=>CV(d,c,t)}})])}),apis:{setGroups:(d,g)=>{Xo.getState(bc.getCoupled(d,"toolbarSandbox")).each(h=>{O$(d,h,t,c.layouts,g)})},reposition:d=>{Xo.getState(bc.getCoupled(d,"toolbarSandbox")).each(g=>{qO(d,g,t,c.layouts)})},toggle:d=>{GO(d,l)},toggleWithoutFocusing:d=>{A$(d,l)},getToolbar:d=>Xo.getState(bc.getCoupled(d,"toolbarSandbox")),isOpen:d=>Xo.isOpen(bc.getCoupled(d,"toolbarSandbox"))}}),configFields:k$(),partFields:_$(),apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),wV=W([tt("items"),qg(["itemSelector"]),ba("tgroupBehaviours",[En])]),D$=W([cv({name:"items",unit:"item"})]),R$=(t,s,c,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:va(t.tgroupBehaviours,[En.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),Pw=ml({name:"ToolbarGroup",configFields:wV(),partFields:D$(),factory:R$}),N$=t=>Pe(t,s=>_i(s)),M$=(t,s,c)=>{T$(t,c,l=>{c.overflowGroups.set(l),s.getOpt(t).each(d=>{Wp.setGroups(d,N$(l))})})},B$=(t,s,c,l)=>{const d=ys(Wp.sketch({fetch:()=>ol.nu(g=>{g(N$(t.overflowGroups.get()))}),layouts:{onLtr:()=>[rc,Wc],onRtl:()=>[Wc,rc],onBottomLtr:()=>[za,Is],onBottomRtl:()=>[Is,za]},getBounds:c.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:va(t.splitToolbarBehaviours,[bc.config({others:{overflowGroup:()=>Pw.sketch({...l["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(Pe(h,g.getSystem().build)),M$(g,d,t)},refresh:g=>M$(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{Wp.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(Wp.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(Wp.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{Wp.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(Wp.getToolbar)},domModification:{attributes:{role:"group"}}}},KO=ml({name:"SplitFloatingToolbar",configFields:Nd(),partFields:yV(),factory:B$,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),P$=W([qg(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Zo("onOpened"),Zo("onClosed")].concat(E$())),SV=W([Wa({factory:af,schema:hb(),name:"primary"}),Wa({factory:af,schema:hb(),name:"overflow",overrides:t=>({toolbarBehaviours:Tt([Kl.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Ct(s,t,"overflow-button").each(c=>{_o.off(c)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Ct(s,t,"overflow-button").each(_o.on)}}),En.config({mode:"acyclic",onEscape:s=>(Ct(s,t,"overflow-button").each(Kn.focus),A.some(!0))})])})}),uu({name:"overflow-button",overrides:t=>({buttonBehaviours:Tt([_o.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),uu({name:"overflow-group"})]),xV=(t,s)=>Ct(t,s,"overflow").map(Kl.hasGrown).getOr(!1),YO=(t,s,c)=>{Ct(t,s,"overflow-button").each(l=>{Ct(t,s,"overflow").each(d=>{if(zE(t,s),Kl.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{c||En.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{c||Kn.focus(l),g(h),s.onClosed=g}}Kl.toggleGrow(d)})})},zE=(t,s)=>{Ct(t,s,"overflow").each(c=>{T$(t,s,l=>{const d=Pe(l,g=>_i(g));af.setGroups(c,d)}),Ct(t,s,"overflow-button").each(l=>{Kl.hasGrown(c)&&_o.on(l)}),Kl.refresh(c)})},TV=(t,s,c,l)=>{const d="alloy.toolbar.toggle",g=(h,C)=>{const S=Pe(C,h.getSystem().build);t.builtGroups.set(S)};return{uid:t.uid,dom:t.dom,components:s,behaviours:va(t.splitToolbarBehaviours,[bc.config({others:{overflowGroup:h=>Pw.sketch({...l["overflow-group"](),items:[nl.sketch({...l["overflow-button"](),action:C=>{xo(h,d)}})]})}}),ho("toolbar-toggle-events",[st(d,h=>{YO(h,t,!1)})])]),apis:{setGroups:(h,C)=>{g(h,C),zE(h,t)},refresh:h=>zE(h,t),toggle:h=>{YO(h,t,!1)},toggleWithoutFocusing:h=>{YO(h,t,!0)},isOpen:h=>xV(h,t)},domModification:{attributes:{role:"group"}}}},XO=ml({name:"SplitSlidingToolbar",configFields:P$(),partFields:SV(),factory:TV,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),$$=t=>{const s=t.title.fold(()=>({}),c=>({attributes:{title:c}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[Pw.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Tt([gr.config({}),Kn.config({})])}},VE=t=>Pw.sketch($$(t)),F$=(t,s)=>{const c=Cr(l=>{const d=Pe(t.initGroups,VE);af.setGroups(l,d)});return Tt([hm.toolbarButton(t.providers.isDisabled),Ca(),En.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),ho("toolbar-events",[c])])},I$=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":$$({title:A.none(),items:[]}),"overflow-button":U9({name:"more",icon:A.some("more-drawer"),enabled:!0,tooltip:A.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:A.none(),borderless:!1},A.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:F$(t,s)}},EV=t=>{const s=I$(t),c=4,l=KO.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return KO.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=pl(d),h=Ml(d),C=pl(h),S=Math.max(h.dom.scrollHeight,C.height);return yr(g.x+c,C.y,g.width-c*2,S)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},kV=t=>{const s=XO.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),c=XO.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=I$(t);return XO.sketch({...l,components:[s,c],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([pb()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([pb()],{type:"closed"}),t.onToggled(d,!1)}})},UE=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return af.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===xd.scrolling?["tox-toolbar--scrolling"]:[])},components:[af.parts.groups({})],toolbarBehaviours:F$(t,s)})},L$=[Ch,kd,Nc("tooltip"),Vl("buttonType","secondary",["primary","secondary"]),oc("borderless",!1),Ll("onAction")],H$=[...L$,yh,Ia("type",["button"])],_V=[...L$,oc("active",!1),Ia("type",["togglebutton"])],z$={button:H$,togglebutton:_V},JO=[Ia("type",["group"]),w("buttons",[],Vc("type",z$))],AV=Vc("type",{...z$,group:JO}),WE=Pn([w("buttons",[],AV),Ll("onShow"),Ll("onHide")]),OV=t=>Nr("view",WE,t),V$=(t,s)=>{var c,l;const d=t.type==="togglebutton",g=t.icon.map(we=>Lp(we,s.icons)).map(ys),C=we=>{const Qe=Kt=>{g.map(qe=>qe.getOpt(we).each(cn=>{to.set(cn,[Lp(Kt,s.icons)])}))},We=Kt=>{const qe=we.element;Kt?(mr(qe,"tox-button--enabled"),Ut(qe,"aria-pressed",!0)):(Zr(qe,"tox-button--enabled"),P(qe,"aria-pressed"))},It=()=>ri(we.element,"tox-button--enabled");if(d)return t.onAction({setIcon:Qe,setActive:We,isActive:It});if(t.type==="button")return t.onAction({setIcon:Qe})},S={...t,name:d?t.text.getOr(t.icon.getOr("")):(c=t.text)!==null&&c!==void 0?c:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:A.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},k=pO((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),O=d?t.text.map(s.translate):A.some(s.translate(t.text)),B=O.map(jr),z=S.tooltip.or(O).map(we=>({"aria-label":s.translate(we)})).getOr({}),V=g.map(we=>we.asSpec()),X=rb([V,B]),te=t.icon.isSome()&&B.isSome(),ke={tag:"button",classes:k.concat(...t.icon.isSome()&&!te?["tox-button--icon"]:[]).concat(...te?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:z},ae=[],Ce=ww(S,A.some(C),ae,ke,X,t.tooltip,s);return nl.sketch(Ce)},U$=(t,s)=>V$(t,s),DV=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Pe(t.buttons,c=>U$(c,s))}),RV=wo().deviceType,NV=RV.isPhone(),MV=RV.isTablet(),QO=t=>{let s=!1;const c=Pe(t.buttons,l=>l.type==="group"?(s=!0,DV(l,t.providers)):U$(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...NV||MV?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Tt([Kn.config({}),En.config({mode:"flow",selector:"button, .tox-button",focusInside:Jm.OnEnterOrSpaceMode})]),components:s?c:[of.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),of.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:c})]}},BV=t=>({uid:t.uid,behaviours:Tt([Kn.config({}),gr.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),ZE=(t,s,c,l)=>{const d={getPane:g=>qc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:Tt([Kn.config({}),En.config({mode:"cyclic",focusInside:Jm.OnEnterOrSpaceMode})]),apis:d}};var bb=ml({name:"silver.View",configFields:[tt("viewConfig")],partFields:[Ni({factory:{sketch:QO},schema:[tt("buttons"),tt("providers")],name:"header"}),Ni({factory:{sketch:BV},schema:[],name:"pane"})],factory:ZE,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const W$=(t,s,c)=>ca(s,(l,d)=>{const g=vt(OV(l));return t.slot(d,bb.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[bb.parts.header({buttons:g.buttons,providers:c})]:[],bb.parts.pane({})]}))}),eD=(t,s)=>Dl.sketch(c=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:W$(c,t,s),slotBehaviours:kv.unnamedEvents([Cr(l=>Dl.hideAllSlots(l))])})),Z$=t=>xe(Dl.getSlotNames(t),s=>Dl.isShowing(t,s)),j$=t=>{const s=t.element;ot(s,"display","none"),Ut(s,"aria-hidden","true")},Kv=t=>{const s=t.element;co(s,"display"),P(s,"aria-hidden")},G$=t=>({getContainer:W(t)}),q$=(t,s,c)=>{Dl.getSlot(t,s).each(l=>{bb.getPane(l).each(d=>{c(l)(G$(d.element.dom))})})},PV=(t,s)=>q$(t,s,bb.getOnShow),$V=(t,s)=>q$(t,s,bb.getOnHide);var jE=gi({factory:(t,s)=>{const g={setViews:(h,C)=>{to.set(h,[eD(C,s.backstage.shared.providers)])},whichView:h=>Jo.getCurrent(h).bind(Z$),toggleView:(h,C,S,k)=>Jo.getCurrent(h).exists(O=>{const B=Z$(O),z=B.exists(X=>k===X),V=Dl.getSlot(O,k).isSome();return V&&(Dl.hideAllSlots(O),z?(j$(h),C()):(S(),Kv(h),Dl.showSlot(O,k),PV(O,k)),B.each(X=>$V(O,X))),V})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Tt([to.config({}),Jo.config({find:h=>{const C=to.contents(h);return Ms(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[tt("backstage")],apis:{setViews:(t,s,c)=>t.setViews(s,c),toggleView:(t,s,c,l,d)=>t.toggleView(s,c,l,d),whichView:(t,s)=>t.whichView(s)}});const FV=(t,s,c)=>{let l=!1;const d=h=>{yd(h,".tox-statusbar").each(C=>{fs(C,"display")==="none"&&gn(C,"aria-hidden")==="true"?(co(C,"display"),P(C,"aria-hidden")):(ot(C,"display","none"),Ut(C,"aria-hidden","true"))})},g={getSocket:h=>qc.getPart(h,t,"socket"),setSidebar:(h,C,S)=>{qc.getPart(h,t,"sidebar").each(k=>cV(k,C,S))},toggleSidebar:(h,C)=>{qc.getPart(h,t,"sidebar").each(S=>aV(S,C))},whichSidebar:h=>qc.getPart(h,t,"sidebar").bind(lV).getOrNull(),getHeader:h=>qc.getPart(h,t,"header"),getToolbar:h=>qc.getPart(h,t,"toolbar"),setToolbar:(h,C)=>{qc.getPart(h,t,"toolbar").each(S=>{const k=Pe(C,VE);S.getApis().setGroups(S,k)})},setToolbars:(h,C)=>{qc.getPart(h,t,"multiple-toolbar").each(S=>{const k=Pe(C,O=>Pe(O,VE));t$.setItems(S,k)})},refreshToolbar:h=>{qc.getPart(h,t,"toolbar").each(S=>S.getApis().refresh(S))},toggleToolbarDrawer:h=>{qc.getPart(h,t,"toolbar").each(C=>{Yo(C.getApis().toggle,S=>S(C))})},toggleToolbarDrawerWithoutFocusing:h=>{qc.getPart(h,t,"toolbar").each(C=>{Yo(C.getApis().toggleWithoutFocusing,S=>S(C))})},isToolbarDrawerToggled:h=>qc.getPart(h,t,"toolbar").bind(C=>A.from(C.getApis().isOpen).map(S=>S(C))).getOr(!1),getThrobber:h=>qc.getPart(h,t,"throbber"),focusToolbar:h=>{qc.getPart(h,t,"toolbar").orThunk(()=>qc.getPart(h,t,"multiple-toolbar")).each(S=>{En.focusIn(S)})},setMenubar:(h,C)=>{qc.getPart(h,t,"menubar").each(S=>{VO.setMenus(S,C)})},focusMenubar:h=>{qc.getPart(h,t,"menubar").each(C=>{VO.focus(C)})},setViews:(h,C)=>{qc.getPart(h,t,"viewWrapper").each(S=>{jE.setViews(S,C)})},toggleView:(h,C)=>qc.getPart(h,t,"viewWrapper").exists(S=>jE.toggleView(S,()=>g.showMainView(h),()=>g.hideMainView(h),C)),whichView:h=>qc.getPart(h,t,"viewWrapper").bind(jE.whichView).getOrNull(),hideMainView:h=>{l=g.isToolbarDrawerToggled(h),l&&g.toggleToolbarDrawer(h),qc.getPart(h,t,"editorContainer").each(C=>{const S=C.element;d(S),ot(S,"display","none"),Ut(S,"aria-hidden","true")})},showMainView:h=>{l&&g.toggleToolbarDrawer(h),qc.getPart(h,t,"editorContainer").each(C=>{const S=C.element;d(S),co(S,"display"),P(S,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},Y$=cf.optional({factory:VO,name:"menubar",schema:[tt("backstage")]}),X$=t=>t.type===xd.sliding?kV:t.type===xd.floating?EV:UE,GE=cf.optional({factory:{sketch:t=>t$.sketch({uid:t.uid,dom:t.dom,listBehaviours:Tt([En.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>UE({type:t.type,uid:Jt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),A.some(!0))}),setupItem:(s,c,l,d)=>{af.setGroups(c,l)},shell:!0})},name:"multiple-toolbar",schema:[tt("dom"),tt("onEscape")]}),tD=cf.optional({factory:{sketch:t=>{const s=X$(t),c={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),A.some(!0)),onToggled:(l,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(c)}},name:"toolbar",schema:[tt("dom"),tt("onEscape"),tt("getSink")]}),IV=cf.optional({factory:{sketch:zO},name:"header",schema:[tt("dom")]}),LV=cf.optional({factory:{sketch:UO},name:"promotion",schema:[tt("dom")]}),J$=cf.optional({name:"socket",schema:[tt("dom")]}),HV=cf.optional({factory:{sketch:b$},name:"sidebar",schema:[tt("dom")]}),zV=cf.optional({factory:{sketch:fG},name:"throbber",schema:[tt("dom")]}),VV=cf.optional({factory:jE,name:"viewWrapper",schema:[tt("backstage")]}),Q$=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),UV=cf.optional({factory:{sketch:Q$},name:"editorContainer",schema:[]});var hr=ml({name:"OuterContainer",factory:FV,configFields:[tt("dom"),tt("behaviours")],partFields:[IV,Y$,tD,GE,J$,HV,LV,zV,VV,UV],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,c,l)=>{t.setSidebar(s,c,l)},toggleSidebar:(t,s,c)=>{t.toggleSidebar(s,c)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,c)=>{t.setToolbar(s,c)},setToolbars:(t,s,c)=>{t.setToolbars(s,c)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,c)=>{t.setMenubar(s,c)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,c)=>{t.setViews(s,c)},toggleView:(t,s,c)=>t.toggleView(s,c),whichView:(t,s)=>t.whichView(s)}});const nD="file edit view insert format tools table help",eF={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},WV=(t,s,c)=>{const l=hT(c).split(/[ ,]/);return{text:t.title,getItems:()=>ie(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:bs(l,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},qE=t=>t.split(" "),tF=(t,s)=>{const c={...eF,...s.menus},l=gs(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?qE(nD):qE(s.menubar===!1?"":s.menubar),g=io(d,C=>{const S=Eo(eF,C);return l?S||xt(s.menus,C).exists(k=>Eo(k,"items")):S}),h=Pe(g,C=>{const S=c[C];return WV({title:S.title,items:qE(S.items)},s,t)});return io(h,C=>{const S=k=>rt(k)||k.type!=="separator";return C.getItems().length>0&&bs(C.getItems(),S)})},nF=t=>{const s=()=>{t._skinLoaded=!0,y8(t)};return()=>{t.initialized?s():t.on("init",s)}},ZV=(t,s)=>()=>C8(t,{message:s}),oD=(t,s,c)=>(t.on("remove",()=>c.unload(s)),c.load(s)),sD=(t,s,c,l)=>(t.on("remove",()=>l.unloadRawCss(s)),l.loadRawCss(s,c)),jV=async(t,s)=>{const l="ui/"+CT(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(l);if(rt(d))sD(t,l,d,t.ui.styleSheetLoader);else{const g=t.editorManager.suffix,h=s+`/skin${g}.css`;return oD(t,h,t.ui.styleSheetLoader)}},GV=async(t,s)=>{if(U(ve.fromDom(t.getElement()))){const d="ui/"+CT(t).getOr("default")+"/skin.shadowdom.css",g=tinymce.Resource.get(d);if(rt(g))sD(t,d,g,j1.DOM.styleSheetLoader);else{const h=t.editorManager.suffix,C=s+`/skin.shadowdom${h}.css`;return oD(t,C,j1.DOM.styleSheetLoader)}}},oF=async(t,s)=>{const c=()=>{const d=NA(s),g=s.editorManager.suffix;d&&s.contentCSS.push(d+(t?"/content.inline":"/content")+`${g}.css`)};CT(s).fold(c,d=>{const g="ui/"+d+(t?"/content.inline":"/content")+".css",h=tinymce.Resource.get(g);rt(h)?sD(s,g,h,s.ui.styleSheetLoader):c()});const l=NA(s);if(!RA(s)&&rt(l))return Promise.all([jV(s,l),GV(s,l)]).then()},sF=(t,s)=>oF(t,s).then(nF(s),ZV(s,"Skin could not be loaded")),qV=Xt(sF,!1),KV=Xt(sF,!0),Zp=(t,s,c)=>se(c)?t.translate(s):t.translate([s,t.translate(c)]),rD=(t,s)=>{const c=(h,C,S,k)=>{const O=t.shared.providers.translate(h.title);if(h.type==="separator")return A.some({type:"separator",text:O});if(h.type==="submenu"){const B=ie(h.getStyleItems(),z=>l(z,C,k));return C===0&&B.length<=0?A.none():A.some({type:"nestedmenuitem",text:O,enabled:B.length>0,getSubmenuItems:()=>ie(h.getStyleItems(),z=>l(z,C,k))})}else return A.some({type:"togglemenuitem",text:O,icon:h.icon,active:h.isSelected(k),enabled:!S,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),B=>({meta:{style:B}}))})},l=(h,C,S)=>{const k=h.type==="formatter"&&s.isInvalid(h);return C===0?k?[]:c(h,C,!1,S).toArray():c(h,C,k,S).toArray()},d=h=>{const C=s.getCurrentValue(),S=s.shouldHide?0:1;return ie(h,k=>l(k,S,C))};return{validateItems:d,getFetch:(h,C)=>(S,k)=>{const O=C(),B=d(O),z=zv(B,fm.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:A.none()});k(z)}}},Yv=(t,s)=>{const c=s.dataset,l=c.type==="basic"?()=>Pe(c.data,d=>ME(d,s.isSelectedFor,s.getPreviewFor)):c.getData;return{items:rD(t,s),getStyleItems:l}},$w=(t,s,c,l,d,g)=>{const{items:h,getStyleItems:C}=Yv(s,c),S=hn(c.tooltip),k=B=>({getComponent:W(B),setTooltip:z=>{const V=s.shared.providers.translate(z);Ut(B.element,"aria-label",V),S.set(z)}}),O=B=>{const z=V=>B.setTooltip(Zp(t,l(V.value),V.value));return t.on(d,z),JT(lb(t,"NodeChange",V=>{const X=V.getComponent();c.updateText(X),i.set(V.getComponent(),!t.selection.isEditable())})(B),()=>t.off(d,z))};return J3({text:c.icon.isSome()?A.none():c.text,icon:c.icon,ariaLabel:A.some(c.tooltip),tooltip:A.none(),role:A.none(),fetch:h.getFetch(s,C),onSetup:O,getApi:k,columns:1,presets:"normal",classes:c.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[ac.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(c.tooltip),onShow:B=>{if(c.tooltip!==S.get()){const z=s.shared.providers.translate(S.get());ac.setComponents(B,s.shared.providers.tooltips.getComponents({tooltipText:z}))}}})})]},"tox-tbtn",s.shared,g)},YV=t=>Pe(t,s=>{let c=s,l=s;const d=s.split("=");return d.length>1&&(c=d[0],l=d[1]),{title:c,format:l}}),XV=t=>({type:"basic",data:t});var Xv;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Xv||(Xv={}));const JV=(t,s)=>s===Xv.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),cD=(t,s,c)=>{const l=t.options.get(s);return{type:"basic",data:YV(JV(l,c))}},QV="Align",rF=W("Alignment {0}"),aD="left",Jv=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],KE=t=>{const s=()=>xe(Jv,C=>t.formatter.match(C.format)),c=C=>()=>t.formatter.match(C),l=C=>A.none,d=C=>{const k=s().fold(W(aD),O=>O.title.toLowerCase());An(C,Hp,{icon:`align-${k}`}),H4(t,{value:k})},g=XV(Jv),h=C=>()=>xe(Jv,S=>S.format===C.format).each(S=>t.execCommand(S.command));return{tooltip:Zp(t,rF(),aD),text:A.none(),icon:A.some("align-left"),isSelectedFor:c,getCurrentValue:A.none,getPreviewFor:l,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},cF=(t,s)=>$w(t,s,KE(t),rF,"AlignTextUpdate","align"),jp=(t,s)=>{const c=Yv(s,KE(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(QV),onSetup:ql(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},lD=(t,s)=>{const c=s(),l=Pe(c,d=>d.format);return A.from(t.formatter.closest(l)).bind(d=>xe(c,g=>g.format===d))},eU="Blocks",aF=W("Block {0}"),iD="Paragraph",lF=t=>{const s=g=>()=>t.formatter.match(g),c=g=>()=>{const h=t.formatter.get(g);return h?A.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):A.none()},l=g=>{const C=lD(t,()=>d.data).fold(W(iD),S=>S.title);An(g,Yu,{text:C}),k8(t,{value:C})},d=cD(t,"block_formats",Xv.SemiColon);return{tooltip:Zp(t,aF(),iD),text:A.some(iD),icon:A.none(),isSelectedFor:s,getCurrentValue:A.none,getPreviewFor:c,onAction:hB(t),updateText:l,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},tU=(t,s)=>$w(t,s,lF(t),aF,"BlocksTextUpdate","blocks"),nU=(t,s)=>{const c=Yv(s,lF(t));t.ui.registry.addNestedMenuItem("blocks",{text:eU,onSetup:ql(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},oU="Fonts",uD=W("Font {0}"),dD="System Font",sU=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],YE=t=>{const s=t.split(/\s*,\s*/);return Pe(s,c=>c.replace(/^['"]+|['"]+$/g,""))},iF=(t,s)=>s.length>0&&_n(s,c=>t.indexOf(c.toLowerCase())>-1),rU=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const c=YE(t.toLowerCase());return iF(c,sU)||iF(c,s)}else return!1},uF=t=>{const s=()=>{const S=X=>X?YE(X)[0]:"",k=t.queryCommandValue("FontName"),O=C.data,B=k?k.toLowerCase():"",z=XN(t);return{matchOpt:xe(O,X=>{const te=X.format;return te.toLowerCase()===B||S(te).toLowerCase()===S(B).toLowerCase()}).orThunk(()=>fn(rU(B,z),{title:dD,format:B})),font:k}},c=S=>k=>k.exists(O=>O.format===S),l=()=>{const{matchOpt:S}=s();return S},d=S=>()=>A.some({tag:"div",styles:S.indexOf("dings")===-1?{"font-family":S}:{}}),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,S.format)})},h=S=>{const{matchOpt:k,font:O}=s(),B=k.fold(W(O),z=>z.title);An(S,Yu,{text:B}),gB(t,{value:B})},C=cD(t,"font_family_formats",Xv.SemiColon);return{tooltip:Zp(t,uD(),dD),text:A.some(dD),icon:A.none(),isSelectedFor:c,getCurrentValue:l,getPreviewFor:d,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:gt}},cU=(t,s)=>$w(t,s,uF(t),uD,"FontFamilyTextUpdate","fontfamily"),aU=(t,s)=>{const c=Yv(s,uF(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(oU),onSetup:ql(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},lU={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},dF=(()=>{const t="[0-9]+",c="[eE]"+("[+-]?"+t),l="\\.",d=C=>`(?:${C})?`,h=`[+-]?(?:${["Infinity",t+l+d(t)+d(c),l+t+d(c),t+d(c)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),mF=(t,s)=>bs(s,c=>bs(lU[c],l=>t===l)),Fw=(t,s)=>A.from(dF.exec(t)).bind(l=>{const d=Number(l[1]),g=l[2];return mF(g,s)?A.some({value:d,unit:g}):A.none()}),iU=(t,s)=>Fw(t,s).map(({value:c,unit:l})=>c+l),mD={tab:W(9),escape:W(27),enter:W(13),backspace:W(8),delete:W(46),left:W(37),up:W(38),right:W(39),down:W(40),space:W(32),home:W(36),end:W(35),pageUp:W(33),pageDown:W(34)},uU=(t,s,c,l)=>{let d=A.none();const g=we=>we.map(Qe=>qt.getValue(Qe)).getOr(""),h=lb(t,"NodeChange SwitchMode",we=>{const Qe=we.getComponent();d=A.some(Qe),c.updateInputValue(Qe),i.set(Qe,!t.selection.isEditable())}),C=we=>({getComponent:W(we)}),S=hn(oe),k=Jt("custom-number-input-events"),O=(we,Qe,We)=>{const It=g(d),Kt=c.getNewValue(It,we),qe=It.length-`${Kt}`.length,cn=d.map(dn=>dn.element.dom.selectionStart-qe),$t=d.map(dn=>dn.element.dom.selectionEnd-qe);c.onAction(Kt,We),d.each(dn=>{qt.setValue(dn,Kt),Qe&&(cn.each(Mo=>dn.element.dom.selectionStart=Mo),$t.each(Mo=>dn.element.dom.selectionEnd=Mo))})},B=(we,Qe)=>O((We,It)=>We-It,we,Qe),z=(we,Qe)=>O((We,It)=>We+It,we,Qe),V=we=>aa(we.element).fold(A.none,Qe=>(Ai(Qe),A.some(!0))),X=we=>v1(we.element)?(vi(we.element).each(Qe=>Ai(Qe)),A.some(!0)):A.none(),te=(we,Qe,We,It)=>{const Kt=hn(oe),qe=s.shared.providers.translate(We),cn=Jt("altExecuting"),$t=lb(t,"NodeChange SwitchMode",Mo=>{i.set(Mo.getComponent(),!t.selection.isEditable())}),dn=Mo=>{i.isDisabled(Mo)||we(!0)};return nl.sketch({dom:{tag:"button",attributes:{"aria-label":qe,"data-mce-name":Qe},classes:It.concat(Qe)},components:[TE(Qe,s.shared.providers.icons)],buttonBehaviours:Tt([i.config({}),ac.config(s.shared.providers.tooltips.getConfig({tooltipText:qe})),ho(cn,[Ol({onSetup:$t,getApi:C},Kt),Dp({getApi:C},Kt),st(Mu(),(Mo,pr)=>{(pr.event.raw.keyCode===mD.space()||pr.event.raw.keyCode===mD.enter())&&(i.isDisabled(Mo)||we(!1))}),st($g(),dn),st(or(),dn)])]),eventOrder:{[Mu()]:[cn,"keying"],[$g()]:[cn,"alloy.base.behaviour"],[or()]:[cn,"alloy.base.behaviour"],[yl()]:["alloy.base.behaviour",cn,"tooltipping"],[su()]:[cn,"tooltipping"]}})},ke=ys(te(we=>B(!1,we),"minus","Decrease font size",[])),ae=ys(te(we=>z(!1,we),"plus","Increase font size",[])),Ce=ys({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[tb.sketch({inputBehaviours:Tt([i.config({}),ho(k,[Ol({onSetup:h,getApi:C},S),Dp({getApi:C},S)]),ho("input-update-display-text",[st(Yu,(we,Qe)=>{qt.setValue(we,Qe.event.text)}),st(Yd(),we=>{c.onAction(qt.getValue(we))}),st(zh(),we=>{c.onAction(qt.getValue(we))})]),En.config({mode:"special",onEnter:we=>(O(Rt,!0,!0),A.some(!0)),onEscape:V,onUp:we=>(z(!0,!1),A.some(!0)),onDown:we=>(B(!0,!1),A.some(!0)),onLeft:(we,Qe)=>(Qe.cut(),A.none()),onRight:(we,Qe)=>(Qe.cut(),A.none())})])})],behaviours:Tt([Kn.config({}),En.config({mode:"special",onEnter:X,onSpace:X,onEscape:V}),ho("input-wrapper-events",[st(ni(),we=>{et([ke,ae],Qe=>{const We=ve.fromDom(Qe.get(we).element.dom);v1(We)&&g0(We)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Xn(l)?{"data-mce-name":l}:{}}},components:[ke.asSpec(),Ce.asSpec(),ae.asSpec()],behaviours:Tt([Kn.config({}),En.config({mode:"flow",focusInside:Jm.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:we=>v1(we.element)?A.none():(Ai(we.element),A.some(!0))})])}},dU="Font sizes",fF=W("Font size {0}"),fD="12pt",mU={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},gF={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},fU=(t,s)=>{const c=Math.pow(10,s);return Math.round(t*c)/c},gU=(t,s)=>/[0-9.]+px$/.test(t)?fU(parseInt(t,10)*72/96,s||0)+"pt":xt(gF,t).getOr(t),hU=t=>xt(mU,t).getOr(""),hF=t=>{const s=()=>{let S=A.none();const k=C.data,O=t.queryCommandValue("FontSize");if(O)for(let B=3;S.isNone()&&B>=0;B--){const z=gU(O,B),V=hU(z);S=xe(k,X=>X.format===O||X.format===z||X.format===V)}return{matchOpt:S,size:O}},c=S=>k=>k.exists(O=>O.format===S),l=()=>{const{matchOpt:S}=s();return S},d=W(A.none),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,S.format)})},h=S=>{const{matchOpt:k,size:O}=s(),B=k.fold(W(O),z=>z.title);An(S,Yu,{text:B}),mB(t,{value:B})},C=cD(t,"font_size_formats",Xv.Space);return{tooltip:Zp(t,fF(),fD),text:A.some(fD),icon:A.none(),isSelectedFor:c,getPreviewFor:d,getCurrentValue:l,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:gt}},pU=(t,s)=>$w(t,s,hF(t),fF,"FontSizeTextUpdate","fontsize"),bU=t=>{var s;const c={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:c},vU=16,pF=t=>t>=0,yU=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:l=>An(l,Yu,{text:s()}),onAction:(l,d)=>t.execCommand("FontSize",!1,l,{skip_focus:!d}),getNewValue:(l,d)=>{Fw(l,["unsupportedLength","empty"]);const g=s(),h=Fw(l,["unsupportedLength","empty"]).or(Fw(g,["unsupportedLength","empty"])),C=h.map(z=>z.value).getOr(vU),S=pT(t),k=h.map(z=>z.unit).filter(z=>z!=="").getOr(S),O=d(C,bU(k).step),B=`${pF(O)?O:C}${k}`;return B!==g&&fB(t,{value:B}),B}}},CU=(t,s)=>uU(t,s,yU(t),"fontsizeinput"),wU=(t,s)=>{const c=Yv(s,hF(t));t.ui.registry.addNestedMenuItem("fontsize",{text:dU,onSetup:ql(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},SU="Formats",bF=t=>se(t)?"Formats":"Format {0}",vF=(t,s)=>{const c="Formats",l=h=>()=>t.formatter.match(h),d=h=>()=>{const C=t.formatter.get(h);return C!==void 0?A.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):A.none()},g=h=>{const C=B=>OO(B)?ie(B.items,C):I5(B)?[{title:B.title,format:B.format}]:[],S=ie(_w(t),C),O=lD(t,W(S)).fold(W({title:c,tooltipLabel:""}),B=>({title:B.title,tooltipLabel:B.title}));An(h,Yu,{text:O.title}),E8(t,{value:O.tooltipLabel})};return{tooltip:Zp(t,bF(""),""),text:A.some(c),icon:A.none(),isSelectedFor:l,getCurrentValue:A.none,getPreviewFor:d,onAction:hB(t),updateText:g,shouldHide:FN(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},xU=(t,s)=>{const c={type:"advanced",...s.styles};return $w(t,s,vF(t,c),bF,"StylesTextUpdate","styles")},yF=(t,s)=>{const c={type:"advanced",...s.styles},l=Yv(s,vF(t,c));t.ui.registry.addNestedMenuItem("styles",{text:SU,onSetup:ql(t),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},TU=W([tt("toggleClass"),tt("fetch"),nm("onExecute"),_e("getHotspot",A.some),_e("getAnchorOverrides",W({})),qf(),nm("onItemExecute"),os("lazySink"),tt("dom"),Zo("onOpen"),ba("splitDropdownBehaviours",[bc,En,Kn]),_e("matchWidth",!1),_e("useMinWidth",!1),_e("eventOrder",{}),os("role"),os("listRole")].concat(oE())),EU=Wa({factory:nl,schema:[tt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Tt([Kn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(_f)},buttonBehaviours:Tt([_o.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),CF=Wa({factory:nl,schema:[tt("dom")],name:"button",defaults:()=>({buttonBehaviours:Tt([Kn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(c=>{t.onExecute(c,s)})}})}),kU=W([EU,CF,Ni({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[tt("text")],name:"aria-descriptor"}),uu({schema:[Yh()],name:"menu",defaults:t=>({onExecute:(s,c)=>{s.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,s,c)})}})}),LB()]),wF=(t,s,c,l)=>{const d=O=>{Jo.getCurrent(O).each(B=>{bn.highlightFirst(B),En.focusIn(B)})},g=O=>{t3(t,Rt,O,l,d,pc.HighlightMenuAndItem).get(oe)},h=O=>(g(O),A.some(!0)),C=O=>{const B=Mi(O,t,"button");return _f(B),A.some(!0)},S={...dr([Cr((O,B)=>{Ct(O,t,"aria-descriptor").each(V=>{const X=Jt("aria");Ut(V.element,"id",X),Ut(O.element,"aria-describedby",X)})})]),...uT(A.some(g))},k={repositionMenus:O=>{_o.isOn(O)&&zB(O)}};return{uid:t.uid,dom:t.dom,components:s,apis:k,eventOrder:{...t.eventOrder,[ou()]:["disabling","toggling","alloy.base.behaviour"]},events:S,behaviours:va(t.splitDropdownBehaviours,[bc.config({others:{sandbox:O=>{const B=Mi(O,t,"arrow");return s3(t,O,{onOpen:()=>{_o.on(B),_o.on(O)},onClose:()=>{_o.off(B),_o.off(O)}})}}}),En.config({mode:"special",onSpace:C,onEnter:C,onDown:h}),Kn.config({}),_o.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},Iw=ml({name:"SplitDropdown",configFields:TU(),partFields:kU(),factory:wF,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),SF=t=>({isEnabled:()=>!i.isDisabled(t),setEnabled:s=>i.set(t,!s),setText:s=>An(t,Yu,{text:s}),setIcon:s=>An(t,Hp,{icon:s})}),_U=t=>({setActive:s=>{_o.set(t,s)},isActive:()=>_o.isOn(t),isEnabled:()=>!i.isDisabled(t),setEnabled:s=>i.set(t,!s),setText:s=>An(t,Yu,{text:s}),setIcon:s=>An(t,Hp,{icon:s})}),xF=(t,s)=>t.map(c=>({"aria-label":s.translate(c)})).getOr({}),vb=Jt("focus-button"),gD=(t,s,c,l,d,g)=>{const h=s.map(S=>ys(X3(S,"tox-tbtn",d))),C=t.map(S=>ys(Lp(S,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...xF(c,d),...Xn(g)?{"data-mce-name":g}:{}}},components:rb([C.map(S=>S.asSpec()),h.map(S=>S.asSpec())]),eventOrder:{[Qr()]:["focusing","alloy.base.behaviour",Ip],[yl()]:[Ip,"toolbar-group-button-events"]},buttonBehaviours:Tt([hm.toolbarButton(d.isDisabled),Ca(),ho(Ip,[Cr((S,k)=>K3(S)),st(Yu,(S,k)=>{h.bind(O=>O.getOpt(S)).each(O=>{to.set(O,[jr(d.translate(k.event.text))])})}),st(Hp,(S,k)=>{C.bind(O=>O.getOpt(S)).each(O=>{to.set(O,[Lp(k.event.icon,d.icons)])})}),st(Qr(),(S,k)=>{k.event.prevent(),xo(S,vb)})])].concat(l.getOr([])))}},AU=(t,s,c,l,d)=>{const g=s.shared,h=hn(oe),C={toolbarButtonBehaviours:[],getApi:SF,onSetup:t.onSetup},S=[ho("toolbar-group-button-events",[Ol(C,h),Dp(C,h)])];return Wp.sketch({lazySink:g.getSink,fetch:()=>ol.nu(k=>{k(Pe(c(t.items),VE))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:gD(t.icon,t.text,t.tooltip,A.some(S),g.providers,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},TF=(t,s,c,l)=>{var d;const g=hn(oe),h=gD(t.icon,t.text,t.tooltip,A.none(),c,l);return nl.sketch({dom:h.dom,components:h.components,eventOrder:q3,buttonBehaviours:{...Tt([ho("toolbar-button-events",[e9({onAction:t.onAction,getApi:s.getApi}),Ol(s,g),Dp(s,g)]),...t.tooltip.map(C=>ac.config(c.tooltips.getConfig({tooltipText:c.translate(C)+t.shortcut.map(S=>` (${jT(S)})`).getOr("")}))).toArray(),hm.toolbarButton(()=>!t.enabled||c.isDisabled()),Ca()].concat(s.toolbarButtonBehaviours)),[Ip]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[Ip]}})},OU=(t,s,c)=>EF(t,s,[],c),EF=(t,s,c,l)=>TF(t,{toolbarButtonBehaviours:c.length>0?[ho("toolbarButtonWith",c)]:[],getApi:SF,onSetup:t.onSetup},s,l),DU=(t,s,c)=>kF(t,s,[],c),kF=(t,s,c,l)=>TF(t,{toolbarButtonBehaviours:[to.config({}),_o.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(c.length>0?[ho("toolbarToggleButtonWith",c)]:[]),getApi:_U,onSetup:t.onSetup},s,l),RU=(t,s,c)=>l=>ol.nu(d=>s.fetch(d)).map(d=>A.from(aE(tr(J4(Jt("menu-value"),d,g=>{s.onItemAction(t(l),g)},s.columns,s.presets,fm.CLOSE_ON_EXECUTE,s.select.getOr(gt),c),{movement:nE(s.columns,s.presets),menuBehaviours:kv.unnamedEvents(s.columns!=="auto"?[]:[Cr((g,h)=>{_4(g,4,l4(s.presets)).each(({numRows:C,numColumns:S})=>{En.setGridSize(g,C,S)})})])})))),hD=(t,s,c)=>{const l=hn(t.tooltip.getOr("")),d=C=>({isEnabled:()=>!i.isDisabled(C),setEnabled:S=>i.set(C,!S),setIconFill:(S,k)=>{Ar(C.element,`svg path[class="${S}"], rect[class="${S}"]`).each(O=>{Ut(O,"fill",k)})},setActive:S=>{Ut(C.element,"aria-pressed",S),Ar(C.element,"span").each(k=>{C.getSystem().getByDom(k).each(O=>_o.set(O,S))})},isActive:()=>Ar(C.element,"span").exists(S=>C.getSystem().getByDom(S).exists(_o.isOn)),setText:S=>Ar(C.element,"span").each(k=>C.getSystem().getByDom(k).each(O=>An(O,Yu,{text:S}))),setIcon:S=>Ar(C.element,"span").each(k=>C.getSystem().getByDom(k).each(O=>An(O,Hp,{icon:S}))),setTooltip:S=>{const k=s.providers.translate(S);Ut(C.element,"aria-label",k),l.set(S)}}),g=hn(oe),h={getApi:d,onSetup:t.onSetup};return Iw.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...xF(t.tooltip,s.providers),...Xn(c)?{"data-mce-name":c}:{}}},onExecute:C=>{const S=d(C);S.isEnabled()&&t.onAction(S)},onItemExecute:(C,S,k)=>{},splitDropdownBehaviours:Tt([hm.splitButton(s.providers.isDisabled),Ca(),ho("split-dropdown-events",[Cr((C,S)=>K3(C)),st(vb,Kn.focus),Ol(h,g),Dp(h,g)]),Fv.config({}),...t.tooltip.map(C=>ac.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(C),onShow:S=>{if(l.get()!==C){const k=s.providers.translate(l.get());ac.setComponents(S,s.providers.tooltips.getComponents({tooltipText:k}))}}})})).toArray()]),eventOrder:{[yl()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[su()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:RU(d,t,s.providers),parts:{menu:R2(!1,t.columns,t.presets)},components:[Iw.parts.button(gD(t.icon,t.text,A.none(),A.some([_o.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),Iw.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:t4("chevron-down",s.providers.icons)},buttonBehaviours:Tt([hm.splitButton(s.providers.isDisabled),Ca(),OT()])}),Iw.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},NU=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Lw=(t,s)=>(c,l,d,g)=>{const h=t(c).mapError(C=>Au(C)).getOrDie();return s(h,l,d,g)},_F={button:Lw(MM,(t,s,c,l)=>OU(t,s.shared.providers,l)),togglebutton:Lw(BM,(t,s,c,l)=>DU(t,s.shared.providers,l)),menubutton:Lw(u$,(t,s,c,l)=>yw(t,"tox-tbtn",s,A.none(),!1,l)),splitbutton:Lw(tV,(t,s,c,l)=>hD(t,s.shared,l)),grouptoolbarbutton:Lw(Rw,(t,s,c,l)=>{const d=c.ui.registry.getAll().buttons,g=C=>Hw(c,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,A.none()),h={[wC]:s.shared.header.isPositionedAtTop()?Oi.TopToBottom:Oi.BottomToTop};switch(Y1(c)){case xd.floating:return AU(t,s,g,h,l);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},AF=(t,s,c,l)=>xt(_F,t.type).fold(()=>A.none(),d=>A.some(d(t,s,c,l))),OF={styles:xU,fontsize:pU,fontsizeinput:CU,fontfamily:cU,blocks:tU,align:cF},MU=t=>{const s=Pe(NU,c=>{const l=io(c.items,d=>Eo(t,d)||Eo(OF,d));return{name:c.name,items:l}});return io(s,c=>c.items.length>0)},BU=t=>{const s=t.split("|");return Pe(s,c=>({items:c.trim().split(" ")}))},PU=t=>nt(t,s=>Eo(s,"name")&&Eo(s,"items")),$U=t=>{const s=t.toolbar,c=t.buttons;return s===!1?[]:s===void 0||s===!0?MU(c):rt(s)?BU(s):PU(s)?s:[]},FU=(t,s,c,l,d,g)=>xt(s,c.toLowerCase()).orThunk(()=>g.bind(h=>As(h,C=>xt(s,C+c.toLowerCase())))).fold(()=>xt(OF,c.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!l?A.none():AF(h,d,t,c.toLowerCase())),Hw=(t,s,c,l)=>{const d=$U(s),g=Pe(d,h=>{const C=ie(h.items,S=>S.trim().length===0?[]:FU(t,s.buttons,S,s.allowToolbarGroups,c,l).toArray());return{title:A.from(t.translate(h.name)),items:C}});return io(g,h=>h.items.length>0)},DF=(t,s,c,l)=>{const d=s.mainUi.outerContainer,g=c.toolbar,h=c.buttons;if(nt(g,rt)){const C=g.map(S=>{const k={toolbar:S,buttons:h,allowToolbarGroups:c.allowToolbarGroups};return Hw(t,k,l,A.none())});hr.setToolbars(d,C)}else hr.setToolbar(d,Hw(t,c,l,A.none()))},RF=wo(),IU=RF.os.isiOS()&&RF.os.version.major<=12,LU=(t,s)=>{const{uiMotherships:c}=s,l=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=hn(ar(d.innerWidth,d.innerHeight)),C=hn(ar(g.offsetWidth,g.offsetHeight)),S=()=>{const z=h.get();(z.left!==d.innerWidth||z.top!==d.innerHeight)&&(h.set(ar(d.innerWidth,d.innerHeight)),XT(t))},k=()=>{const z=t.getDoc().documentElement,V=C.get();(V.left!==z.offsetWidth||V.top!==z.offsetHeight)&&(C.set(ar(z.offsetWidth,z.offsetHeight)),XT(t))},O=z=>{w8(t,z)};l.bind(d,"resize",S),l.bind(d,"scroll",O);const B=hC(ve.fromDom(t.getBody()),"load",k);t.on("hide",()=>{et(c,z=>{ot(z.element,"display","none")})}),t.on("show",()=>{et(c,z=>{co(z.element,"display")})}),t.on("NodeChange",k),t.on("remove",()=>{B.unbind(),l.unbind(d,"resize",S),l.unbind(d,"scroll",O),d=null})},XE=(t,s,c)=>{Ep(t)&&oh(c.mainUi.mothership.element,c.popupUi.mothership),N1(s,c.dialogUi.mothership)};var JE=Object.freeze({__proto__:null,render:(t,s,c,l,d)=>{const{mainUi:g,uiMotherships:h}=s,C=hn(0),S=g.outerContainer;qV(t);const k=ve.fromDom(d.targetNode),O=ia(Fr(k));oh(k,g.mothership),XE(t,O,s),t.on("SkinLoaded",()=>{hr.setSidebar(S,c.sidebar,vT(t)),DF(t,s,c,l),C.set(t.getWin().innerWidth),hr.setMenubar(S,tF(t,c)),hr.setViews(S,c.views),LU(t,s)});const B=hr.getSocket(S).getOrDie("Could not find expected socket element");if(IU){eo(B.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const te=ZH(()=>{t.dispatch("ScrollContent")},20),ke=kl(B.element,"scroll",te.throttle);t.on("remove",ke.unbind)}A4(t,s),t.addCommand("ToggleSidebar",(te,ke)=>{hr.toggleSidebar(S,ke),_8(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var te;return(te=hr.whichSidebar(S))!==null&&te!==void 0?te:""}),t.addCommand("ToggleView",(te,ke)=>{if(hr.toggleView(S,ke)){const ae=S.element;g.mothership.broadcastOn([cm()],{target:ae}),et(h,Ce=>{Ce.broadcastOn([cm()],{target:ae})}),Uo(hr.whichView(S))&&(t.focus(),t.nodeChanged(),hr.refreshToolbar(S)),A8(t)}}),t.addQueryValueHandler("ToggleView",()=>{var te;return(te=hr.whichView(S))!==null&&te!==void 0?te:""});const z=Y1(t),V=()=>{hr.refreshToolbar(s.mainUi.outerContainer)};(z===xd.sliding||z===xd.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const te=t.getWin().innerWidth;te!==C.get()&&(V(),C.set(te))});const X={setEnabled:te=>{_v(s,!te)},isEnabled:()=>!i.isDisabled(S)};return{iframeContainer:B.element.dom,editorContainer:S.element.dom,api:X}}});const zw=t=>/^[0-9\.]+(|px)$/i.test(""+t)?A.some(parseInt(""+t,10)):A.none(),QE=t=>Zn(t)?t+"px":t,ek=(t,s,c)=>{const l=s.filter(g=>t<g),d=c.filter(g=>t>g);return l.or(d).getOr(t)},HU=t=>{const s=g2(t),c=vv(t),l=gT(t);return zw(s).map(d=>ek(d,c,l))},zU=t=>HU(t).getOr(g2(t)),NF=t=>{const s=EA(t),c=K1(t),l=h2(t);return zw(s).map(d=>ek(d,c,l))},VU=t=>NF(t).getOr(EA(t)),{ToolbarLocation:Qv,ToolbarMode:pD}=eM,MF=40,BF=(t,s,c,l,d)=>{const{mainUi:g,uiMotherships:h}=c,C=j1.DOM,S=yv(t),k=X1(t),O=h2(t).or(NF(t)),B=l.shared.header,z=B.isPositionedAtTop,V=150,X=Y1(t),te=X===pD.sliding||X===pD.floating,ke=hn(!1),ae=()=>ke.get()&&!t.removed,Ce=ln=>te?ln.fold(W(0),pt=>pt.components().length>1?$s(pt.components()[1].element):0):0,we=ln=>{switch(p2(t)){case Qv.auto:const pt=hr.getToolbar(g.outerContainer),Lt=Ce(pt),Yn=$s(ln.element)-Lt,Fn=kr(s);if(Fn.y>Yn)return"top";{const lo=Ml(s),er=Math.max(lo.dom.scrollHeight,$s(lo));return Fn.bottom<er-Yn||gc().bottom<Fn.bottom-Yn?"bottom":"top"}case Qv.bottom:return"bottom";case Qv.top:default:return"top"}},Qe=ln=>{d.on(pt=>{fr.setModes(pt,[ln]),B.setDockingMode(ln);const Lt=z()?Oi.TopToBottom:Oi.BottomToTop;Ut(pt.element,wC,Lt)})},We=()=>{d.on(ln=>{const pt=O.getOrThunk(()=>Wd().width-ll(s).left-10);ot(ln.element,"max-width",pt+"px")})},It=(ln,pt)=>{d.on(Lt=>{const Yn=hr.getToolbar(g.outerContainer),Fn=Ce(Yn),xn=kr(s),lo=Kt(t,g.outerContainer.element),er=()=>lo.fold(()=>xn.x,gl=>{const nd=kr(gl);return es(gl,Co())?xn.x:xn.x-nd.x}),Cs=()=>lo.fold(()=>z()?Math.max(xn.y-$s(Lt.element)+Fn,0):xn.bottom,gl=>{var nd;const Id=kr(gl),Vi=(nd=gl.dom.scrollTop)!==null&&nd!==void 0?nd:0,_b=es(gl,Co())?Math.max(xn.y-$s(Lt.element)+Fn,0):xn.y-Id.y+Vi-$s(Lt.element)+Fn;return z()?_b:xn.bottom}),Nl=er(),td=fn(ln,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(gl=>gl>V).map(gl=>{const nd=pt.getOr(ka()),Id=window.innerWidth-(Nl-nd.left),Vi=Math.max(Math.min(gl,Id),V);return Id<gl&&ot(g.outerContainer.element,"width",Vi+"px"),{width:Vi+"px"}}).getOr({width:"max-content"}),df={position:"absolute",left:Math.round(Nl)+"px",top:Cs()+"px"};eo(g.outerContainer.element,{...df,...td})})},Kt=(ln,pt)=>Ep(ln)?Df(pt):A.none(),qe=()=>{et(h,ln=>{ln.broadcastOn([rh()],{})})},cn=()=>!S&&(wc(g.outerContainer.element).left+J(g.outerContainer.element)>=window.innerWidth-MF||Us(g.outerContainer.element,"width").isSome())?(ot(g.outerContainer.element,"position","absolute"),ot(g.outerContainer.element,"left","0px"),co(g.outerContainer.element,"width"),!0):!1,$t=ln=>{if(!ae())return;S||We();const pt=ka(),Lt=S?!1:cn();if(te&&hr.refreshToolbar(g.outerContainer),!S){const Yn=ka(),Fn=fn(pt.left!==Yn.left,pt);It(Lt,Fn),Fn.each(xn=>{sd(xn.left,Yn.top)})}k&&d.on(ln),qe()},dn=()=>S||!k||!ae()?!1:d.get().exists(ln=>{const pt=B.getDockingMode(),Lt=we(ln);return Lt!==pt?(Qe(Lt),!0):!1});return{isVisible:ae,isPositionedAtTop:z,show:()=>{ke.set(!0),ot(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),et(h,ln=>{co(ln.element,"display")}),dn(),Ep(t)?$t(ln=>fr.isDocked(ln)?fr.reset(ln):fr.refresh(ln)):$t(fr.refresh)},hide:()=>{ke.set(!1),ot(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),et(h,ln=>{ot(ln.element,"display","none")})},update:$t,updateMode:()=>{dn()&&$t(fr.reset)},repositionPopups:qe}},bD=(t,s)=>{const c=kr(t);return{pos:s?c.y:c.bottom,bounds:c}},UU=(t,s,c,l)=>{const d=hn(bD(s,c.isPositionedAtTop())),g=k=>{const{pos:O,bounds:B}=bD(s,c.isPositionedAtTop()),{pos:z,bounds:V}=d.get(),X=B.height!==V.height||B.width!==V.width;d.set({pos:O,bounds:B}),X&&XT(t,k),c.isVisible()&&(z!==O?c.update(fr.reset):X&&(c.updateMode(),c.repositionPopups()))};l||(t.on("activate",c.show),t.on("deactivate",c.hide)),t.on("SkinLoaded ResizeWindow",()=>c.update(fr.reset)),t.on("NodeChange keydown",k=>{requestAnimationFrame(()=>g(k))});let h=0;const C=H3(()=>c.update(fr.refresh),33);t.on("ScrollWindow",()=>{const k=ka().left;k!==h&&(h=k,C.throttle()),c.updateMode()}),Ep(t)&&t.on("ElementScroll",k=>{c.update(fr.refresh)});const S=zc();S.set(hC(ve.fromDom(t.getBody()),"load",k=>g(k.raw))),t.on("remove",()=>{S.clear()})};var ZU=Object.freeze({__proto__:null,render:(t,s,c,l,d)=>{const{mainUi:g}=s,h=Es(),C=ve.fromDom(d.targetNode),S=BF(t,C,s,l,h),k=HN(t);KV(t);const O=()=>{if(h.isSet()){S.show();return}h.set(hr.getHeader(g.outerContainer).getOrDie());const z=BA(t);Ep(t)?(oh(C,g.mothership),oh(C,s.popupUi.mothership)):N1(z,g.mothership),N1(z,s.dialogUi.mothership);const V=()=>{DF(t,s,c,l),hr.setMenubar(g.outerContainer,tF(t,c)),S.show(),UU(t,C,S,k),t.nodeChanged()};k?t.once("SkinLoaded",V):V()};t.on("show",O),t.on("hide",S.hide),k||(t.on("focus",O),t.on("blur",S.hide)),t.on("init",()=>{(t.hasFocus()||k)&&O()}),A4(t,s);const B={show:O,hide:S.hide,setEnabled:z=>{_v(s,!z)},isEnabled:()=>!i.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:B}}});const jU=()=>{const t=Es(),s=Es(),c=Es();return{dialogUi:t,popupUi:s,mainUi:c,getUiMotherships:()=>{const g=t.get().map(C=>C.mothership),h=s.get().map(C=>C.mothership);return g.fold(()=>h.toArray(),C=>h.fold(()=>[C],S=>es(C.element,S.element)?[C]:[C,S]))},lazyGetInOuterOrDie:(g,h)=>()=>c.get().bind(C=>h(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},GU="contexttoolbar-show",PF="contexttoolbar-hide",qU=t=>({hide:()=>xo(t,e1()),getValue:()=>qt.getValue(t)}),ey=(t,s)=>st(JP,(c,l)=>{const d=t.get(c),g=qU(d);s.onAction(g,l.event.buttonApi)}),KU=(t,s,c)=>{const{primary:l,...d}=s.original,g=vt(MM({...d,type:"button",onAction:oe}));return EF(g,c,[ey(t,s)])},YU=(t,s,c)=>{const{primary:l,...d}=s.original,g=vt(BM({...d,type:"togglebutton",onAction:oe}));return kF(g,c,[ey(t,s)])},XU=t=>t.type==="contextformtogglebutton",$F=(t,s,c)=>XU(s)?YU(t,s,c):KU(t,s,c),JU=(t,s,c)=>{const l=Pe(s,h=>ys($F(t,h,c)));return{asSpecs:()=>Pe(l,h=>h.asSpec()),findPrimary:h=>As(s,(C,S)=>C.primary?A.from(l[S]).bind(k=>k.getOpt(h)).filter(Ne(i.isDisabled)):A.none())}},vD=(t,s)=>{const c=t.label.fold(()=>({}),g=>({"aria-label":g})),l=ys(tb.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:c,selectOnFocus:!0,inputBehaviours:Tt([En.config({mode:"special",onEnter:g=>d.findPrimary(g).map(h=>(_f(h),!0)),onLeft:(g,h)=>(h.cut(),A.none()),onRight:(g,h)=>(h.cut(),A.none())})])})),d=JU(l,t.commands,s);return[{title:A.none(),items:[l.asSpec()]},{title:A.none(),items:d.asSpecs()}]},QU={renderContextForm:(t,s,c)=>UE({type:t,uid:Jt("context-toolbar"),initGroups:vD(s,c),onEscape:A.none,cyclicKeying:!0,providers:c}),buildInitGroups:vD},FF=(t,s,c)=>s.bottom-t.y>=c&&t.bottom-s.y>=c,eW=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const c=Ci(ve.fromDom(t.startContainer),t.startOffset).element;return(No(c)?Ac(c):A.some(c)).filter(Dn).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},yD=t=>{const s=t.selection.getRng(),c=eW(s);if(t.inline){const l=ka();return yr(l.left+c.left,l.top+c.top,c.width,c.height)}else{const l=pl(ve.fromDom(t.getBody()));return yr(l.x+c.left,l.y+c.top,c.width,c.height)}},Vw=(t,s)=>s.filter(c=>Yt(c)&&Lc(c)).map(pl).getOrThunk(()=>yD(t)),IF=(t,s,c)=>{const l=Math.max(t.x+c,s.x),d=Math.min(t.right-c,s.right);return{x:l,width:d-l}},tW=(t,s,c,l,d,g)=>{const h=ve.fromDom(t.getContainer()),C=Ar(h,".tox-editor-header").getOr(h),S=kr(C),k=S.y>=s.bottom,O=l&&!k;if(t.inline&&O)return{y:Math.max(S.bottom+g,c.y),bottom:c.bottom};if(t.inline&&!O)return{y:c.y,bottom:Math.min(S.y-g,c.bottom)};const B=d==="line"?kr(h):s;return O?{y:Math.max(S.bottom+g,c.y),bottom:Math.min(B.bottom-g,c.bottom)}:{y:Math.max(B.y+g,c.y),bottom:Math.min(S.y-g,c.bottom)}},LF=(t,s,c,l=0)=>{const d=Wd(window),g=kr(ve.fromDom(t.getContentAreaContainer())),h=yT(t)||y2(t)||C2(t),{x:C,width:S}=IF(g,d,l);if(t.inline&&!h)return yr(C,d.y,S,d.height);{const k=s.header.isPositionedAtTop(),{y:O,bottom:B}=tW(t,g,d,k,c,l);return yr(C,O,S,B-O)}},Uw=12,tk={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},CD={maxHeightFunction:np(),maxWidthFunction:qv()},HF=(t,s)=>{const c=t.selection.getRng(),l=Ci(ve.fromDom(c.startContainer),c.startOffset);return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&es(l.element,s)},nW=(t,s,c)=>{const l=Us(t,"position");ot(t,"position",s);const d=c(t);return l.each(g=>ot(t,"position",g)),d},yb=t=>t==="node",nk=(t,s,c,l,d)=>{const g=yD(t),h=l.lastElement().exists(C=>es(c,C));if(HF(t,c))return h?B5:fu;if(h)return nW(s,l.getMode(),()=>FF(g,kr(s),-20)&&!l.isReposition()?P5:B5);{const C=l.getMode()==="fixed"?d.y+ka().top:d.y,S=$s(s)+Uw;return C+S<=g.y?fu:Zv}},ok=(t,s,c,l)=>{const d=S=>(k,O,B,z,V)=>{const X=nk(t,z,S,c,V),te={...k,y:V.y,height:V.height};return{...X(te,O,B,z,V),alwaysFit:!0}},g=S=>yb(l)?[d(S)]:[];return s?{onLtr:S=>[jc,Wc,rc,Is,za,Zc].concat(g(S)),onRtl:S=>[jc,rc,Wc,za,Is,Zc].concat(g(S))}:{onLtr:S=>[Zc,jc,Is,Wc,za,rc].concat(g(S)),onRtl:S=>[Zc,jc,za,rc,Is,Wc].concat(g(S))}},wD=(t,s,c,l)=>s==="line"?{bubble:Fu(Uw,0,tk),layouts:{onLtr:()=>[u0],onRtl:()=>[d0]},overrides:CD}:{bubble:Fu(0,Uw,tk,1/Uw),layouts:ok(t,c,l,s),overrides:CD},Ww=(t,s)=>{const c=io(s,g=>g.predicate(t.dom)),{pass:l,fail:d}=Ss(c,g=>g.type==="contexttoolbar");return{contextToolbars:l,contextForms:d}},zF=t=>{if(t.length<=1)return t;{const s=g=>bs(t,h=>h.position===g),c=g=>io(t,h=>h.position===g),l=s("selection"),d=s("node");if(l||d)if(d&&l){const g=c("node"),h=Pe(c("selection"),C=>({...C,position:"node"}));return g.concat(h)}else return c(l?"selection":"node");else return c("line")}},sk=t=>{if(t.length<=1)return t;{const s=l=>xe(t,d=>d.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>io(t,d=>d.position===l))}},VF=(t,s,c)=>{const l=Ww(t,s);if(l.contextForms.length>0)return A.some({elem:t,toolbars:[l.contextForms[0]]});{const d=Ww(t,c);if(d.contextForms.length>0)return A.some({elem:t,toolbars:[d.contextForms[0]]});if(l.contextToolbars.length>0||d.contextToolbars.length>0){const g=zF(l.contextToolbars.concat(d.contextToolbars));return A.some({elem:t,toolbars:g})}else return A.none()}},UF=(t,s,c)=>t(s)?A.none():eu(s,l=>{if(Dn(l)){const{contextToolbars:d,contextForms:g}=Ww(l,c.inNodeScope),h=g.length>0?g:sk(d);return h.length>0?A.some({elem:l,toolbars:h}):A.none()}else return A.none()},t),SD=(t,s)=>{const c=ve.fromDom(s.getBody()),l=h=>es(h,c),d=h=>!l(h)&&!yc(c,h),g=ve.fromDom(s.selection.getNode());return d(g)?A.none():VF(g,t.inNodeScope,t.inEditorScope).orThunk(()=>UF(l,g,t))},oW=(t,s)=>{const c={},l=[],d=[],g={},h={},C=(O,B)=>{const z=vt(n8(B));c[O]=z,z.launch.map(V=>{g["form:"+O]={...B.launch,type:V.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(z)}}}),z.scope==="editor"?d.push(z):l.push(z),h[O]=z},S=(O,B)=>{$2(B).each(z=>{B.scope==="editor"?d.push(z):l.push(z),h[O]=z})},k=gs(t);return et(k,O=>{const B=t[O];B.type==="contextform"?C(O,B):B.type==="contexttoolbar"&&S(O,B)}),{forms:c,inNodeScope:l,inEditorScope:d,lookupTable:h,formNavigators:g}},xD=Jt("forward-slide"),WF=Jt("backward-slide"),TD=Jt("change-slide-event"),ty="tox-pop--resizing",ZF=t=>{const s=hn([]);return Or.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:c=>{s.set([]),Or.getContent(c).each(l=>{co(l.element,"visibility")}),Zr(c.element,ty),co(c.element,"width")},inlineBehaviours:Tt([ho("context-toolbar-events",[Vh(fd(),(c,l)=>{l.event.raw.propertyName==="width"&&(Zr(c.element,ty),co(c.element,"width"))}),st(TD,(c,l)=>{const d=c.element;co(d,"width");const g=q(d);Or.setContent(c,l.event.contents),mr(d,ty);const h=q(d);ot(d,"width",g+"px"),Or.getContent(c).each(C=>{l.event.focus.bind(S=>(Ai(S),El(d))).orThunk(()=>(En.focusIn(C),Cd(Fr(d))))}),setTimeout(()=>{ot(c.element,"width",h+"px")},0)}),st(xD,(c,l)=>{Or.getContent(c).each(d=>{s.set(s.get().concat([{bar:d,focus:Cd(Fr(c.element))}]))}),An(c,TD,{contents:l.event.forwardContents,focus:A.none()})}),st(WF,(c,l)=>{ra(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),An(c,TD,{contents:_i(d.bar),focus:d.focus})})})]),En.config({mode:"special",onEscape:c=>ra(s.get()).fold(()=>t.onEscape(),l=>(xo(c,WF),A.some(!0)))})]),lazySink:()=>uo.value(t.sink)})},ED="tox-pop--transition",sW=(t,s,c,l)=>{const d=l.backstage,g=d.shared,h=wo().deviceType.isTouch,C=Es(),S=Es(),k=Es(),O=el(ZF({sink:c,onEscape:()=>(t.focus(),A.some(!0))})),B=()=>{const $t=k.get().getOr("node"),dn=yb($t)?1:0;return LF(t,g,$t,dn)},z=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),V=$t=>br(Fc($t,C.get(),es),!0),X=()=>{if(z()){const $t=B(),dn=br(k.get(),"node")?Vw(t,C.get()):yD(t);return $t.height<=0||!FF(dn,$t,.01)}else return!0},te=()=>{C.clear(),S.clear(),k.clear(),Or.hide(O)},ke=()=>{if(Or.isOpen(O)){const $t=O.element;co($t,"display"),X()?ot($t,"display","none"):(S.set(0),Or.reposition(O))}},ae=$t=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[$t],behaviours:Tt([En.config({mode:"acyclic"}),ho("pop-dialog-wrap-events",[Cr(dn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>En.focusIn(dn))}),Qd(dn=>{t.shortcuts.remove("ctrl+F9")})])])}),Ce=Ye(()=>oW(s,$t=>{const dn=We([$t]);An(O,xD,{forwardContents:ae(dn)})})),we=($t,dn)=>Hw(t,{buttons:$t,toolbar:dn.items,allowToolbarGroups:!1},l.backstage,A.some(["form:"])),Qe=($t,dn)=>QU.buildInitGroups($t,dn),We=$t=>{const{buttons:dn}=t.ui.registry.getAll(),Mo=Ce(),pr={...dn,...Mo.formNavigators},hs=Y1(t)===xd.scrolling?xd.scrolling:xd.default,ln=Fe(Pe($t,pt=>pt.type==="contexttoolbar"?we(pr,pt):Qe(pt,g.providers)));return UE({type:hs,uid:Jt("context-toolbar"),initGroups:ln,onEscape:A.none,cyclicKeying:!0,providers:g.providers})},It=($t,dn)=>{const Mo=$t==="node"?g.anchors.node(dn):g.anchors.cursor(),pr=wD(t,$t,h(),{lastElement:C.get,isReposition:()=>br(S.get(),0),getMode:()=>tl.getMode(c)});return tr(Mo,pr)},Kt=($t,dn)=>{if(cn.cancel(),!z())return;const Mo=We($t),pr=$t[0].position,hs=It(pr,dn);k.set(pr),S.set(1);const ln=O.element;co(ln,"display"),V(dn)||(Zr(ln,ED),tl.reset(c,O)),Or.showWithinBounds(O,ae(Mo),{anchor:hs,transition:{classes:[ED],mode:"placement"}},()=>A.some(B())),dn.fold(C.clear,C.set),X()&&ot(ln,"display","none")};let qe=!1;const cn=H3(()=>{if(!(!t.hasFocus()||t.removed||qe))if(ri(O.element,ED))cn.throttle();else{const $t=Ce();SD($t,t).fold(te,dn=>{Kt(dn.toolbars,A.some(dn.elem))})}},17);t.on("init",()=>{t.on("remove",te),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",ke),t.on("click keyup focus SetContent",cn.throttle),t.on(PF,te),t.on(GU,$t=>{const dn=Ce();xt(dn.lookupTable,$t.toolbarKey).each(Mo=>{Kt([Mo],fn($t.target!==t,$t.target)),Or.getContent(O).each(En.focusIn)})}),t.on("focusout",$t=>{bv.setEditorTimeout(t,()=>{El(c.element).isNone()&&El(O.element).isNone()&&te()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&te()}),t.on("ExecCommand",({command:$t})=>{$t.toLowerCase()==="toggleview"&&te()}),t.on("AfterProgressState",$t=>{$t.state?te():t.hasFocus()&&cn.throttle()}),t.on("dragstart",()=>{qe=!0}),t.on("dragend drop",()=>{qe=!1}),t.on("NodeChange",$t=>{El(O.element).fold(cn.throttle,oe)})})},rW=t=>{et([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],c=>{t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onAction:mu(t,c.cmd),onSetup:QT(t,c.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:ql(t),onAction:mu(t,"JustifyNone")})},jF=(t,s)=>{const c=()=>{const l=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Es();return Pe(l,h=>({type:"togglemenuitem",text:s.display(h),onSetup:C=>{const S=O=>{O&&(g.on(B=>B.setActive(!1)),g.set(C)),C.setActive(O)};S(br(d,s.hash(h)));const k=s.watcher(t,h,S);return()=>{g.clear(),k()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(c()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:c,onSetup:s.onMenuSetup})},cW=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:JN,hash:s=>iU(s,["fixed","relative","empty"]).getOr(s),display:Rt,watcher:(s,c,l)=>s.formatter.formatChanged("lineheight",l,!1,{value:c}).unbind,getCurrent:s=>A.from(s.queryCommandValue("LineHeight")),setCurrent:(s,c)=>s.execCommand("LineHeight",!1,c),onToolbarSetup:ql(t),onMenuSetup:ql(t)}),GF=t=>A.from(IN(t)).map(c=>({name:"language",text:"Language",icon:"language",getOptions:W(c),hash:l=>zn(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,d,g)=>{var h;return l.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:l=>{const d=ve.fromDom(l.selection.getNode());return Ei(d,g=>A.some(g).filter(Dn).bind(h=>Vr(h,"lang").map(S=>{const k=Vr(h,"data-mce-lang").getOrUndefined();return{code:S,customCode:k,title:""}})))},setCurrent:(l,d)=>l.execCommand("Lang",!1,d),onToolbarSetup:l=>{const d=zc();return l.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",l.setActive,!0)),JT(d.clear,ql(t)(l))},onMenuSetup:ql(t)})),qF=t=>{jF(t,cW(t)),GF(t).each(s=>jF(t,s))},KF=(t,s)=>{jp(t,s),aU(t,s),yF(t,s),nU(t,s),wU(t,s)},YF=t=>lb(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),aW=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:YF(t),onAction:mu(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:ql(t),onAction:mu(t,"indent")})},XF=t=>{aW(t)},kD=(t,s)=>c=>{c.setActive(s.get());const l=d=>{s.set(d.state),c.setActive(d.state)};return t.on("PastePlainTextToggle",l),JT(()=>t.off("PastePlainTextToggle",l),ql(t)(c))},lW=t=>{const s=hn(DA(t)),c=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:c,onSetup:kD(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:c,onSetup:kD(t,s)})},JF=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},iW=t=>{Eh.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,c)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:QT(t,s.name),onAction:JF(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const c="h"+s,l=`Access+${s}`;t.ui.registry.addToggleButton(c,{text:c.toUpperCase(),tooltip:"Heading "+s,onSetup:QT(t,c),onAction:JF(t,c),shortcut:l})}},uW=t=>{Eh.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:mu(t,s.action),shortcut:s.shortcut})}),Eh.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:ql(t),onAction:mu(t,s.action)})})},dW=t=>{Eh.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:mu(t,s.action),onSetup:QT(t,s.name)})})},mW=t=>{iW(t),uW(t),dW(t)},fW=t=>{Eh.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:mu(t,s.action)})}),Eh.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:ql(t),onAction:mu(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:ql(t),onAction:JF(t,"code")})},gW=t=>{mW(t),fW(t)},rk=(t,s)=>lb(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",c=>{c.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),hW=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:rk(t,"hasUndo"),onAction:mu(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:rk(t,"hasRedo"),onAction:mu(t,"redo")})},pW=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:rk(t,"hasUndo"),onAction:mu(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:rk(t,"hasRedo"),onAction:mu(t,"redo"),shortcut:"Meta+Y"})},bW=t=>{hW(t),pW(t)},vW=t=>lb(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),yW=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:vW(t),onAction:mu(t,"mceToggleVisualAid")})},CW=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:mu(t,"mceToggleVisualAid")})},QF=t=>{CW(t),yW(t)},wW=(t,s)=>{rW(t),gW(t),KF(t,s),bW(t),F8(t),QF(t),XF(t),qF(t),lW(t)},SW=t=>rt(t)?t.split(/[ ,]/):t,eI=t=>s=>s.options.get(t),xW=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:c=>c===!1?{value:[],valid:!0}:rt(c)||nt(c,rt)?{value:SW(c),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},tI=eI("contextmenu_never_use_native"),TW=eI("contextmenu_avoid_overlap"),EW=t=>nI(t).length===0,nI=t=>{const s=t.ui.registry.getAll().contextMenus,c=t.options.get("contextmenu");return t.options.isSet("contextmenu")?c:io(c,l=>Eo(s,l))},Zw=(t,s)=>({type:"makeshift",x:t,y:s}),_D=(t,s,c)=>Zw(t.x+s,t.y+c),oI=t=>t.type==="longpress"||t.type.indexOf("touch")===0,kW=t=>{if(oI(t)){const s=t.touches[0];return Zw(s.pageX,s.pageY)}else return Zw(t.pageX,t.pageY)},AD=t=>{if(oI(t)){const s=t.touches[0];return Zw(s.clientX,s.clientY)}else return Zw(t.clientX,t.clientY)},sI=(t,s)=>{const c=j1.DOM.getPos(t);return _D(s,c.x,c.y)},rI=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?kW(s):sI(t.getContentAreaContainer(),AD(s)):cI(t),cI=t=>({type:"selection",root:ve.fromDom(t.selection.getNode())}),_W=t=>({type:"node",node:A.some(ve.fromDom(t.selection.getNode())),root:ve.fromDom(t.getBody())}),aI=(t,s,c)=>{switch(c){case"node":return _W(t);case"point":return rI(t,s);case"selection":return cI(t)}},AW=(t,s,c,l,d,g)=>{const h=c(),C=aI(t,s,g);zv(h,fm.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:A.none()}).map(S=>{s.preventDefault(),Or.showMenuAt(d,{anchor:C},{menu:{markers:eb("normal")},data:S})})},OW={onLtr:()=>[jc,Wc,rc,Is,za,Zc,fu,Zv,Wv,RE,Ew,DE],onRtl:()=>[jc,rc,Wc,za,Is,Zc,fu,Zv,Ew,DE,Wv,RE]},OD=12,DW={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},lI=(t,s)=>{const c=t.selection;if(c.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],d=c.getRng();return Mc(t.getWin(),Yf.domRange(d)).exists(h=>h.left<=l.clientX&&h.right>=l.clientX&&h.top<=l.clientY&&h.bottom>=l.clientY)}},RW=t=>{const s=t.selection.getRng(),c=()=>{bv.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",c);const l=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",l,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",c),t.off("longpresscancel",d),t.off("mousedown",l)}},NW=(t,s,c)=>{const l=aI(t,s,c);return{bubble:Fu(0,c==="point"?OD:0,DW),layouts:OW,overrides:{maxWidthFunction:qv(),maxHeightFunction:np()},...l}},DD=(t,s,c,l,d,g,h)=>{const C=NW(t,s,g);zv(c,fm.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:A.none()}).map(S=>{s.preventDefault();const k=h?pc.HighlightMenuAndItem:pc.HighlightNone;Or.showMenuWithinBounds(d,{anchor:C},{menu:{markers:eb("normal"),highlightOnOpen:k},data:S,type:"horizontal"},()=>A.some(LF(t,l.shared,g==="node"?"node":"selection"))),t.dispatch(PF)})},MW=(t,s,c,l,d,g)=>{const h=wo(),C=h.os.isiOS(),S=h.os.isMacOS(),k=h.os.isAndroid(),O=h.deviceType.isTouch(),B=()=>!(k||C||S&&O),z=()=>{const V=c();DD(t,s,V,l,d,g,B())};if((S||C)&&g!=="node"){const V=()=>{RW(t),z()};lI(t,s)?V():(t.once("selectionchange",V),t.once("touchend",()=>t.off("selectionchange",V)))}else z()},RD=t=>rt(t)?t==="|":t.type==="separator",ND={type:"separator"},iI=t=>{const s=c=>({text:c.text,icon:c.icon,enabled:c.enabled,shortcut:c.shortcut});if(rt(t))return t;switch(t.type){case"separator":return ND;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return rt(l)?l:Pe(l,iI)}};default:const c=t;return{type:"menuitem",...s(c),onAction:ut(c.onAction)}}},ck=(t,s)=>{if(s.length===0)return t;const l=ra(t).filter(d=>!RD(d)).fold(()=>[],d=>[ND]);return t.concat(l).concat(s).concat([ND])},BW=(t,s,c)=>{const l=it(s,(d,g)=>xt(t,g.toLowerCase()).map(h=>{const C=h.update(c);if(rt(C)&&ue(cr(C)))return ck(d,C.split(" "));if(mo(C)&&C.length>0){const S=Pe(C,iI);return ck(d,S)}else return d}).getOrThunk(()=>d.concat([g])),[]);return l.length>0&&RD(l[l.length-1])&&l.pop(),l},PW=(t,s)=>s.ctrlKey&&!tI(t),$W=t=>t.type==="longpress"||Eo(t,"touches"),uI=(t,s)=>!$W(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),dI=(t,s)=>uI(t,s)?t.selection.getStart(!0):s.target,mI=(t,s)=>{const c=TW(t),l=uI(t,s)?"selection":"point";if(ue(c)){const d=dI(t,s);return j2(ve.fromDom(d),c)?"node":l}else return l},FW=(t,s,c)=>{const d=wo().deviceType.isTouch,g=el(Or.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>c.setContextMenuState(!0),onHide:()=>c.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Tt([ho("dismissContextMenu",[st(Ef(),(S,k)=>{Xo.close(S),t.focus()})])])})),h=()=>Or.hide(g),C=S=>{if(tI(t)&&S.preventDefault(),PW(t,S)||EW(t))return;const k=mI(t,S),O=()=>{const z=dI(t,S),V=t.ui.registry.getAll(),X=nI(t);return BW(V.contextMenus,X,z)};(d()?MW:AW)(t,S,O,c,g,k)};t.on("init",()=>{const S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(S,h),t.on("longpress contextmenu",C)})},MD=K.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),ak=t=>s=>s.translate(-t.left,-t.top),lk=t=>s=>s.translate(t.left,t.top),_h=t=>(s,c)=>it(t,(l,d)=>d(l),ar(s,c)),ik=(t,s,c)=>t.fold(_h([lk(c),ak(s)]),_h([ak(s)]),_h([])),ny=(t,s,c)=>t.fold(_h([lk(c)]),_h([]),_h([lk(s)])),fI=(t,s,c)=>t.fold(_h([]),_h([ak(c)]),_h([lk(s),ak(c)])),gI=(t,s,c,l,d,g)=>{const h=ny(t,d,g),C=ny(s,d,g);return Math.abs(h.left-C.left)<=c&&Math.abs(h.top-C.top)<=l},IW=(t,s,c,l,d,g)=>{const h=ny(t,d,g),C=ny(s,d,g),S=Math.abs(h.left-C.left),k=Math.abs(h.top-C.top);return ar(S,k)},BD=(t,s,c)=>{const l=t.fold((d,g)=>({position:A.some("absolute"),left:A.some(d+"px"),top:A.some(g+"px")}),(d,g)=>({position:A.some("absolute"),left:A.some(d-c.left+"px"),top:A.some(g-c.top+"px")}),(d,g)=>({position:A.some("fixed"),left:A.some(d+"px"),top:A.some(g+"px")}));return{right:A.none(),bottom:A.none(),...l}},LW=(t,s,c)=>t.fold((l,d)=>uk(l+s,d+c),(l,d)=>Ju(l+s,d+c),(l,d)=>Gp(l+s,d+c)),PD=(t,s,c,l)=>{const d=(g,h)=>(C,S)=>{const k=g(s,c,l);return h(C.getOr(k.left),S.getOr(k.top))};return t.fold(d(fI,uk),d(ny,Ju),d(ik,Gp))},uk=MD.offset,Ju=MD.absolute,Gp=MD.fixed,hI=(t,s)=>{const c=gn(t,s);return zn(c)?NaN:parseInt(c,10)},HW=(t,s)=>{const c=t.element,l=hI(c,s.leftAttr),d=hI(c,s.topAttr);return isNaN(l)||isNaN(d)?A.none():A.some(ar(l,d))},zW=(t,s,c)=>{const l=t.element;Ut(l,s.leftAttr,c.left+"px"),Ut(l,s.topAttr,c.top+"px")},VW=(t,s)=>{const c=t.element;P(c,s.leftAttr),P(c,s.topAttr)},pI=(t,s,c,l)=>HW(t,s).fold(()=>c,d=>Gp(d.left+l.left,d.top+l.top)),UW=(t,s,c,l,d,g)=>{const h=pI(t,s,c,l),C=s.mustSnap?ZW(t,s,h,d,g):jW(t,s,h,d,g),S=ik(h,d,g);return zW(t,s,S),C.fold(()=>({coord:Gp(S.left,S.top),extra:A.none()}),k=>({coord:k.output,extra:k.extra}))},WW=(t,s)=>{VW(t,s)},bI=(t,s,c,l)=>As(t,d=>{const g=d.sensor;return gI(s,g,d.range.left,d.range.top,c,l)?A.some({output:PD(d.output,s,c,l),extra:d.extra}):A.none()}),ZW=(t,s,c,l,d)=>{const g=s.getSnapPoints(t);return bI(g,c,l,d).orThunk(()=>it(g,(S,k)=>{const O=k.sensor,B=IW(c,O,k.range.left,k.range.top,l,d);return S.deltas.fold(()=>({deltas:A.some(B),snap:A.some(k)}),z=>{const V=(B.left+B.top)/2,X=(z.left+z.top)/2;return V<=X?{deltas:A.some(B),snap:A.some(k)}:S})},{deltas:A.none(),snap:A.none()}).snap.map(S=>({output:PD(S.output,c,l,d),extra:S.extra})))},jW=(t,s,c,l,d)=>{const g=s.getSnapPoints(t);return bI(g,c,l,d)},GW=(t,s,c)=>({coord:PD(t.output,t.output,s,c),extra:t.extra});var qW=Object.freeze({__proto__:null,snapTo:(t,s,c,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=mc(t.element),h=ka(g),C=Dy(d),S=GW(l,h,C),k=BD(S.coord,h,C);Vs(d,k)}}});const $D="data-initial-z-index",KW=t=>{Ac(t.element).filter(Dn).each(s=>{Vr(s,$D).fold(()=>co(s,"z-index"),c=>ot(s,"z-index",c)),P(s,$D)})},vI=t=>{Ac(t.element).filter(Dn).each(s=>{Us(s,"z-index").each(c=>{Ut(s,$D,c)}),ot(s,"z-index",fs(t.element,"z-index"))})},FD=(t,s)=>{t.getSystem().addToGui(s),vI(s)},YW=t=>{KW(t),t.getSystem().removeFromGui(t)},oy=(t,s,c)=>t.getSystem().build(of.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:c}));var XW=lr("snaps",[tt("getSnapPoints"),Zo("onSensor"),tt("leftAttr"),tt("topAttr"),_e("lazyViewport",gc),_e("mustSnap",!1)]);const ID=[_e("useFixed",gt),tt("blockerClass"),_e("getTarget",Rt),_e("onDrag",oe),_e("repositionTarget",!0),_e("onDrop",oe),Wr("getBounds",gc),XW],LD=t=>dc(Us(t,"left"),Us(t,"top"),Us(t,"position"),(s,c,l)=>(l==="fixed"?Gp:uk)(parseInt(s,10),parseInt(c,10))).getOrThunk(()=>{const s=wc(t);return Ju(s.left,s.top)}),JW=(t,s,c,l,d)=>{const g=d.bounds,h=ny(s,c,l),C=ii(h.left,g.x,g.x+g.width-d.width),S=ii(h.top,g.y,g.y+g.height-d.height),k=Ju(C,S);return s.fold(()=>{const O=fI(k,c,l);return uk(O.left,O.top)},W(k),()=>{const O=ik(k,c,l);return Gp(O.left,O.top)})},QW=(t,s,c,l,d,g,h)=>{const C=s.fold(()=>{const S=LW(c,g.left,g.top),k=ik(S,l,d);return Gp(k.left,k.top)},S=>{const k=UW(t,S,c,g,l,d);return k.extra.each(O=>{S.onSensor(t,O)}),k.coord});return JW(t,C,l,d,h)},eZ=(t,s,c,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=mc(t.element),h=ka(g),C=Dy(d),S=LD(d),k=QW(t,s.snaps,S,h,C,l,c),O=BD(k,h,C);Vs(d,O)}s.onDrag(t,d,l)},yI=(t,s)=>({bounds:t.getBounds(),height:Bl(s.element),width:J(s.element)}),HD=(t,s,c,l,d)=>{const g=c.update(l,d),h=c.getStartData().getOrThunk(()=>yI(s,t));g.each(C=>{eZ(t,s,h,C)})},CI=(t,s,c,l)=>{s.each(YW),c.snaps.each(g=>{WW(t,g)});const d=c.getTarget(t.element);l.reset(),c.onDrop(t,d)},zD=t=>(s,c)=>{const l=d=>{c.setStartData(yI(s,d))};return dr([st(Fg(),d=>{c.getStartData().each(()=>l(d))}),...t(s,c,l)])},tZ=t=>dr([st(Qr(),t.forceDrop),st(Pm(),t.drop),st(Hh(),(s,c)=>{t.move(c.event)}),st(Bm(),t.delayDrop)]);var nZ=Object.freeze({__proto__:null,getData:t=>A.from(ar(t.x,t.y)),getDelta:(t,s)=>ar(s.left-t.left,s.top-t.top)});const wI=(t,s,c)=>[st(Qr(),(l,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>CI(l,A.some(k),t,s),C=UB(h,200),S={drop:h,delayDrop:C.schedule,forceDrop:h,move:B=>{C.cancel(),HD(l,t,s,nZ,B)}},k=oy(l,t.blockerClass,tZ(S));(()=>{c(l),FD(l,k)})()})],oZ=[...ID,Gs("dragger",{handlers:zD(wI)})],sZ=t=>dr([st(tu(),t.forceDrop),st(or(),t.drop),st(Xa(),t.drop),st(ns(),(s,c)=>{t.move(c.event)})]),rZ=t=>{const s=t[0];return A.some(ar(s.clientX,s.clientY))};var jw=Object.freeze({__proto__:null,getData:t=>{const c=t.raw.touches;return c.length===1?rZ(c):A.none()},getDelta:(t,s)=>ar(s.left-t.left,s.top-t.top)});const SI=(t,s,c)=>{const l=Es(),d=g=>{CI(g,l.get(),t,s),l.clear()};return[st(tu(),(g,h)=>{h.stop();const C=()=>d(g),S={drop:C,delayDrop:oe,forceDrop:C,move:B=>{HD(g,t,s,jw,B)}},k=oy(g,t.blockerClass,sZ(S));l.set(k),(()=>{c(g),FD(g,k)})()}),st(ns(),(g,h)=>{h.stop(),HD(g,t,s,jw,h.event)}),st(or(),(g,h)=>{h.stop(),d(g)}),st(Xa(),d)]},cZ=[...ID,Gs("dragger",{handlers:zD(SI)})],aZ=(t,s,c)=>[...wI(t,s,c),...SI(t,s,c)],lZ=[...ID,Gs("dragger",{handlers:zD(aZ)})];var uZ=Object.freeze({__proto__:null,mouse:oZ,touch:cZ,mouseOrTouch:lZ}),dZ=Object.freeze({__proto__:null,init:()=>{let t=A.none(),s=A.none();const c=()=>{t=A.none(),s=A.none()},l=(S,k)=>{const O=t.map(B=>S.getDelta(B,k));return t=A.some(k),O},d=(S,k)=>S.getData(k).bind(O=>l(S,O)),g=S=>{s=A.some(S)},h=()=>s,C=W({});return si({readState:C,reset:c,update:d,getStartData:h,setStartData:g})}});const Cb=uS({branchKey:"mode",branches:uZ,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:A.from(t.extra)})},state:dZ,apis:qW}),VD=40,sy=VD/2,UD=(t,s,c,l,d,g)=>t.fold(()=>Cb.snap({sensor:Ju(c-sy,l-sy),range:ar(d,g),output:Ju(A.some(c),A.some(l)),extra:{td:s}}),h=>{const C=c-sy,S=l-sy,k=VD,O=VD,B=h.element.dom.getBoundingClientRect();return Cb.snap({sensor:Ju(C,S),range:ar(k,O),output:Ju(A.some(c-B.width/2),A.some(l-B.height/2)),extra:{td:s}})}),xI=(t,s,c)=>{const l=(d,g)=>d.exists(h=>es(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;l(s.get(),h)||(s.set(h),c(h))},mustSnap:!0}},TI=t=>ys(nl.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Tt([Cb.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Fv.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),mZ=(t,s)=>{const c=hn([]),l=hn([]),d=hn(!1),g=Es(),h=Es(),C=Kt=>{const qe=pl(Kt);return UD(V.getOpt(s),Kt,qe.x,qe.y,qe.width,qe.height)},S=()=>Pe(c.get(),Kt=>C(Kt)),k=Kt=>{const qe=pl(Kt);return UD(X.getOpt(s),Kt,qe.right,qe.bottom,qe.width,qe.height)},O=()=>Pe(l.get(),Kt=>k(Kt)),B=xI(S,g,Kt=>{h.get().each(qe=>{t.dispatch("TableSelectorChange",{start:Kt,finish:qe})})}),z=xI(O,h,Kt=>{g.get().each(qe=>{t.dispatch("TableSelectorChange",{start:qe,finish:Kt})})}),V=TI(B),X=TI(z),te=el(V.asSpec()),ke=el(X.asSpec()),ae=(Kt,qe,cn,$t)=>{const dn=qe.dom.getBoundingClientRect();co(Kt.element,"display");const Mo=Cc(ve.fromDom(t.getBody())).dom.innerHeight,pr=cn(dn),hs=$t(dn,Mo);(pr||hs)&&ot(Kt.element,"display","none")},Ce=(Kt,qe,cn,$t)=>{const dn=cn(qe);Cb.snapTo(Kt,dn),ae(Kt,qe,hs=>hs[$t]<0,(hs,ln)=>hs[$t]>ln)},we=Kt=>Ce(te,Kt,C,"top"),Qe=()=>g.get().each(we),We=Kt=>Ce(ke,Kt,k,"bottom"),It=()=>h.get().each(We);if(wo().deviceType.isTouch()){const Kt=qe=>Pe(qe,ve.fromDom);t.on("TableSelectionChange",qe=>{d.get()||(Iu(s,te),Iu(s,ke),d.set(!0));const cn=ve.fromDom(qe.start),$t=ve.fromDom(qe.finish);g.set(cn),h.set($t),A.from(qe.otherCells).each(dn=>{c.set(Kt(dn.upOrLeftCells)),l.set(Kt(dn.downOrRightCells)),we(cn),We($t)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Qe(),It()}),t.on("TableSelectionClear",()=>{d.get()&&(qm(te),qm(ke),d.set(!1)),g.clear(),h.clear()})}};var fZ=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const gZ=(t,s)=>{const c=A.from(gn(t,"id")).getOrThunk(()=>{const l=Jt("aria");return Ut(s,"id",l),l});Ut(t,"aria-describedby",c)},hZ=t=>{P(t,"aria-describedby")},pZ=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",bZ=(t,s,c)=>{var l;const d=(l=s.delimiter)!==null&&l!==void 0?l:"›",g=(k,O,B)=>nl.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":B}},components:[jr(k)],action:z=>{t.focus(),t.selection.select(O),t.nodeChanged()},buttonBehaviours:Tt([ac.config({...c.tooltips.getConfig({tooltipText:c.translate(["Select the {0} element",O.nodeName.toLowerCase()]),onShow:(z,V)=>{gZ(z.element,V.element)},onHide:z=>{hZ(z.element)}})}),hm.button(c.isDisabled),Ca()])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[jr(` ${d} `)]}),C=k=>it(k,(O,B,z)=>{const V=g(B.name,B.element,z);return z===0?O.concat([V]):O.concat([h(),V])},[]),S=k=>{const O=[];let B=k.length;for(;B-- >0;){const z=k[B];if(z.nodeType===1&&!pZ(z)){const V=x8(t,z);if(V.isDefaultPrevented()||O.push({name:V.name,element:z}),V.isPropagationStopped())break}}return O};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Tt([En.config({mode:"flow",selector:"div[role=button]"}),i.config({disabled:c.isDisabled}),Ca(),gr.config({}),to.config({}),ho("elementPathEvents",[Cr((k,O)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>En.focusIn(k)),t.on("NodeChange",B=>{const z=S(B.parents),V=z.length>0?C(z):[];to.set(k,V)})})])]),components:[]}};var qp;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(qp||(qp={}));const vZ=(t,s,c,l,d)=>{const g={height:ek(l+s.top,vv(t),gT(t))};return c===qp.Both&&(g.width=ek(d+s.left,K1(t),h2(t))),g},EI=(t,s,c)=>{const l=ve.fromDom(t.getContainer()),d=vZ(t,s,c,$s(l),q(l));xs(d,(g,h)=>{Zn(g)&&ot(l,h,QE(g))}),YT(t)},yZ=t=>{const s=KN(t);return s===!1?qp.None:s==="both"?qp.Both:qp.Vertical},dk=(t,s,c,l)=>{const g=ar(c*20,l*20);return EI(t,g,s),A.some(!0)},CZ=(t,s)=>{const c=yZ(t);if(c===qp.None)return A.none();const l=c===qp.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return A.some(Wu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(l),"data-mce-name":"resize-handle"},behaviours:[Cb.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,h)=>EI(t,h,c),blockerClass:"tox-blocker"}),En.config({mode:"special",onLeft:()=>dk(t,c,-1,0),onRight:()=>dk(t,c,1,0),onUp:()=>dk(t,c,0,-1),onDown:()=>dk(t,c,0,1)}),gr.config({}),Kn.config({}),ac.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},kI=(t,s)=>{const c=(l,d,g)=>to.set(l,[jr(s.translate(["{0} "+g,d[g]]))]);return nl.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Tt([hm.button(s.isDisabled),Ca(),gr.config({}),to.config({}),qt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),ho("wordcount-events",[Bu(l=>{const d=qt.getValue(l),g=d.mode==="words"?"characters":"words";qt.setValue(l,{mode:g,count:d.count}),c(l,d.count,g)}),Cr(l=>{t.on("wordCountUpdate",d=>{const{mode:g}=qt.getValue(l);qt.setValue(l,{mode:g,count:d.wordCount}),c(l,d.wordCount,g)})})])]),eventOrder:{[ou()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},wZ=(t,s)=>{const c=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",fZ.trim()])},behaviours:Tt([Kn.config({})])}]}),l=()=>{const C=jT("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[jr(Uu.translate(["Press {0} for help",C]))]}},d=()=>{const C=[];return t.hasPlugin("wordcount")&&C.push(kI(t,s)),OA(t)&&C.push(c()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],S=v2(t),k=qN(t),O=OA(t)||t.hasPlugin("wordcount"),B=()=>{const z="tox-statusbar__text-container--flex-start",V="tox-statusbar__text-container--flex-end",X="tox-statusbar__text-container--space-around";if(S){const te="tox-statusbar__text-container-3-cols";return!O&&!k?[te,X]:O&&!k?[te,V]:[te,z]}return[O&&!k?V:z]};return k&&C.push(bZ(t,{},s)),S&&C.push(l()),O&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...B()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),S=CZ(t,s);return C.concat(S.toArray())})()}},_I=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),SZ=(t,s)=>{const c=t.inline,l=c?ZU:JE,d=X1(t)?Jz:o$,g=jU(),h=Es(),C=Es(),S=Es(),z=wo().deviceType.isTouch()?["tox-platform-touch"]:[],V=w2(t),X=Y1(t),te=ys({dom:{tag:"div",classes:["tox-anchorbar"]}}),ke=ys({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),ae=()=>g.mainUi.get().map(xn=>xn.outerContainer).bind(hr.getHeader),Ce=()=>uo.fromOption(g.dialogUi.get().map(xn=>xn.sink),"UI has not been rendered"),we=()=>uo.fromOption(g.popupUi.get().map(xn=>xn.sink),"(popup) UI has not been rendered"),Qe=g.lazyGetInOuterOrDie("anchor bar",te.getOpt),We=g.lazyGetInOuterOrDie("bottom anchor bar",ke.getOpt),It=g.lazyGetInOuterOrDie("toolbar",hr.getToolbar),Kt=g.lazyGetInOuterOrDie("throbber",hr.getThrobber),qe=Q5({popup:we,dialog:Ce},t,Qe,We),cn=()=>{const xn={attributes:{[wC]:V?Oi.BottomToTop:Oi.TopToBottom}},lo=hr.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:qe.popup,onEscape:()=>{t.focus()}}),er=hr.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:qe.popup.shared.getSink,providers:qe.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:_b=>{T8(t,_b)},type:X,lazyToolbar:It,lazyHeader:()=>ae().getOrDie("Could not find header element"),...xn}),Cs=hr.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:qe.popup.shared.providers,onEscape:()=>{t.focus()},type:X}),Nl=C2(t),td=y2(t),df=yT(t),gl=YN(t),nd=$t(),Id=Nl||td||df,Vi=()=>Nl?[Cs]:td?[er]:[],pg=gl?[nd,lo]:[lo];return hr.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Id?[]:["tox-editor-header--empty"]),...xn},components:Fe([df?pg:[],Vi(),yv(t)?[]:[te.asSpec()]]),sticky:X1(t),editor:t,sharedBackstage:qe.popup.shared})},$t=()=>hr.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),dn=()=>{const xn=hr.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),lo=hr.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[xn,lo]}},Mo=()=>{const xn=BA(t),lo=es(Co(),xn)&&fs(xn,"display")==="grid",er={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(z),attributes:{...Uu.isRtl()?{dir:"rtl"}:{}}},behaviours:Tt([tl.config({useFixed:()=>d.isDocked(ae)})])},Cs={dom:{styles:{width:document.body.clientWidth+"px"}},events:dr([st(hd(),df=>{ot(df.element,"width",document.body.clientWidth+"px")})])},Nl=el(tr(er,lo?Cs:{})),td=Y2(Nl);return C.set(td),{sink:Nl,mothership:td}},pr=()=>{const xn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(z),attributes:{...Uu.isRtl()?{dir:"rtl"}:{}}},behaviours:Tt([tl.config({useFixed:()=>d.isDocked(ae),getBounds:()=>s.getPopupSinkBounds()})])},lo=el(xn),er=Y2(lo);return S.set(er),{sink:lo,mothership:er}},hs=()=>{const xn=cn(),lo=dn(),er=hr.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:qe.popup}),Cs=hr.parts.viewWrapper({backstage:qe.popup}),Nl=GN(t)&&!c?A.some(wZ(t,qe.popup.shared.providers)):A.none(),td=Fe([V?[]:[xn],c?[]:[lo],V?[xn]:[]]),df=hr.parts.editorContainer({components:Fe([td,c?[]:[ke.asSpec()]])}),gl=S2(t),nd={role:"application",...Uu.isRtl()?{dir:"rtl"}:{},...gl?{"aria-hidden":"true"}:{}},Id=el(hr.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(c?["tox-tinymce-inline"]:[]).concat(V?["tox-tinymce--toolbar-bottom"]:[]).concat(z),styles:{visibility:"hidden",...gl?{opacity:"0",border:"0"}:{}},attributes:nd},components:[df,...c?[]:[Cs,...Nl.toArray()],er],behaviours:Tt([Ca(),i.config({disableClass:"tox-tinymce--disabled"}),En.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Vi=Y2(Id);return h.set(Vi),{mothership:Vi,outerContainer:Id}},ln=xn=>{const lo=QE(zU(t)),er=QE(VU(t));return t.inline||(Xc("div","width",er)&&ot(xn.element,"width",er),Xc("div","height",lo)?ot(xn.element,"height",lo):ot(xn.element,"height","400px")),lo},pt=xn=>{t.addShortcut("alt+F9","focus menubar",()=>{hr.focusMenubar(xn)}),t.addShortcut("alt+F10","focus toolbar",()=>{hr.focusToolbar(xn)}),t.addCommand("ToggleToolbarDrawer",(lo,er)=>{er!=null&&er.skipFocus?hr.toggleToolbarDrawerWithoutFocusing(xn):hr.toggleToolbarDrawer(xn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>hr.isToolbarDrawerToggled(xn))},Lt=xn=>{const{mainUi:lo,popupUi:er,uiMotherships:Cs}=xn;bo(kA(t),(dy,yk)=>{t.ui.registry.addGroupToolbarButton(yk,dy)});const{buttons:Nl,menuItems:td,contextToolbars:df,sidebars:gl,views:nd}=t.ui.registry.getAll(),Id=MA(t),Vi={menuItems:td,menus:QN(t),menubar:VN(t),toolbar:Id.getOrThunk(()=>b2(t)),allowToolbarGroups:X===xd.floating,buttons:Nl,sidebar:gl,views:nd};pt(lo.outerContainer),e$(t,lo.mothership,Cs),d.setup(t,qe.popup.shared,ae),wW(t,qe.popup),FW(t,qe.popup.shared.getSink,qe.popup),ZO(t),hV(t,Kt,qe.popup.shared),sW(t,df,er.sink,{backstage:qe.popup}),mZ(t,er.sink);const pg=t.getElement(),_b=ln(lo.outerContainer),rR={targetNode:pg,height:_b};return l.render(t,xn,Vi,qe.popup,rR)},Yn=xn=>(S.set(xn.mothership),xn),Fn=()=>{const xn=hs(),lo=Mo(),er=Ep(t)?pr():Yn(lo);g.dialogUi.set(lo),g.popupUi.set(er),g.mainUi.set(xn);const Cs={popupUi:er,dialogUi:lo,mainUi:xn,uiMotherships:g.getUiMotherships()};return Lt(Cs)};return{popups:{backstage:qe.popup,getMothership:()=>_I("popups",S)},dialogs:{backstage:qe.dialog,getMothership:()=>_I("dialogs",C)},renderUI:Fn}},xZ=t=>t.dom.textContent,TZ=(t,s)=>{const c=Vr(t,"id").fold(()=>{const l=Jt("dialog-label");return Ut(s,"id",l),l},Rt);Ut(t,"aria-labelledby",c)},EZ=W([tt("lazySink"),os("dragBlockClass"),Wr("getBounds",gc),_e("useTabstopAt",$e),_e("firstTabstop",0),_e("eventOrder",{}),ba("modalBehaviours",[En]),Wl("onExecute"),qb("onEscape")]),WD={sketch:Rt},kZ=W([Ni({name:"draghandle",overrides:(t,s)=>({behaviours:Tt([Cb.config({mode:"mouse",getTarget:c=>Vf(c,'[role="dialog"]').getOr(c),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Wa({schema:[tt("dom")],name:"title"}),Wa({factory:WD,schema:[tt("dom")],name:"close"}),Wa({factory:WD,schema:[tt("dom")],name:"body"}),Ni({factory:WD,schema:[tt("dom")],name:"footer"}),uu({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[_e("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),_e("components",[])],name:"blocker"})]),AI=(t,s,c,l)=>{const d=Es(),g=X=>{d.set(X);const te=t.lazySink(X).getOrDie(),ke=l.blocker(),ae=te.getSystem().build({...ke,components:ke.components.concat([_i(X)]),behaviours:Tt([Kn.config({}),ho("dialog-blocker-events",[Vh(md(),()=>{ym.isBlocked(X)?oe():En.focusIn(X)})])])});Iu(te,ae),En.focusIn(X)},h=X=>{d.clear(),Ac(X.element).each(te=>{X.getSystem().getByDom(te).each(ke=>{qm(ke)})})},C=X=>Mi(X,t,"body"),S=X=>Ct(X,t,"footer"),k=(X,te)=>{ym.block(X,te)},O=X=>{ym.unblock(X)},B=Jt("modal-events"),z={...t.eventOrder,[yl()]:[B].concat(t.eventOrder["alloy.system.attached"]||[])},V=wo();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:C,getFooter:S,setIdle:O,setBusy:k},eventOrder:z,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:va(t.modalBehaviours,[to.config({}),En.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),ym.config({getRoot:d.get}),ho(B,[Cr(X=>{const te=Mi(X,t,"title").element,ke=xZ(te);V.os.isMacOS()&&Xn(ke)?Ut(X.element,"aria-label",ke):TZ(X.element,te)})])])}},oa=ml({name:"ModalDialog",configFields:EZ(),partFields:kZ(),factory:AI,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,c)=>{t.setBusy(s,c)},setIdle:(t,s)=>{t.setIdle(s)}}}),wb=Pn([Ec,HT].concat(Op)),_Z=ei,Gw=[y4("button"),kd,Vl("align","end",["start","end"]),Tv,_d,Fh("buttonType",["primary","secondary"])],qw=[...Gw,yh],ZD=[Ia("type",["submit","cancel","custom"]),...qw],AZ=[Ia("type",["menu"]),Ch,xv,kd,Hl("items",wb),...Gw],OZ=[...Gw,Ia("type",["togglebutton"]),xv,kd,Ch,oc("active",!1)],DZ=Vc("type",{submit:ZD,cancel:ZD,custom:ZD,menu:AZ,togglebutton:OZ}),RZ=[Ec,yh,Ia("level",["info","warn","error","success"]),OM,_e("url","")],Sb=Pn(RZ),OI=t=>[Ec,t],NZ=[Ec,yh,_d,y4("button"),kd,KL,Fh("buttonType",["primary","secondary","toolbar"]),Tv],MZ=Pn(NZ),ry=[Ec,HT],lf=ry.concat([zT]),BZ=ry.concat([p4,_d]),PZ=Pn(BZ),$Z=ei,FZ=lf.concat([RM("auto")]),jD=Pn(FZ),Kw=Xp([M2,yh,OM]),GD=lf.concat([La("storageKey","default")]),mk=Pn(GD),xb=Wt,IZ=Pn(lf),DI=Wt,RI=ry.concat([La("tag","textarea"),Tc("scriptId"),Tc("scriptUrl"),Du("onFocus"),fy("settings",void 0)]),NI=ry.concat([La("tag","textarea"),Ll("init")]),LZ=Mg(t=>Nr("customeditor.old",Ya(NI),t).orThunk(()=>Nr("customeditor.new",Ya(RI),t))),HZ=Wt,kG=Pn(lf),MI=Rm(),KD=t=>[Ec,Bg("columns"),t],zZ=[Ec,Tc("html"),Vl("presets","presentation",["presentation","document"]),Wr("onInit",oe),oc("stretched",!1)],VZ=Pn(zZ),UZ=lf.concat([oc("border",!1),oc("sandboxed",!0),oc("streamContent",!1),oc("transparent",!0)]),BI=Pn(UZ),WZ=Wt,ZZ=Pn(ry.concat([Nc("height")])),jZ=Pn([Tc("url"),Nm("zoom"),Nm("cachedWidth"),Nm("cachedHeight")]),YD=lf.concat([Nc("inputMode"),Nc("placeholder"),oc("maximized",!1),_d]),XD=Pn(YD),GZ=Wt,PI=t=>[Ec,p4,t,Vl("align","start",["start","center","end"]),Nc("for")],qZ=[yh,M2],KZ=[yh,Hl("items",Cf("items",()=>JD))],JD=yf([Pn(qZ),Pn(KZ)]),YZ=lf.concat([Hl("items",JD),_d]),XZ=Pn(YZ),Tb=Wt,$I=lf.concat([Pb("items",[yh,M2]),Sf("size",1),_d]),JZ=Pn($I),fk=Wt,cy=lf.concat([oc("constrain",!0),_d]),gk=Pn(cy),QD=Pn([Tc("width"),Tc("height")]),hk=ry.concat([p4,Sf("min",0),Sf("max",0)]),Li=Pn(hk),pk=qd,FI=[Ec,Hl("header",Wt),Hl("cells",Il(Wt))],II=Pn(FI),QZ=lf.concat([Nc("placeholder"),oc("maximized",!1),_d]),ej=Pn(QZ),Kp=Wt,tj=[Ia("type",["directory","leaf"]),AM,Tc("id"),Ou("menu",i$)],eR=Pn(tj),ay=tj.concat([Hl("children",Cf("children",()=>Kd("type",{directory:Yw,leaf:eR})))]),Yw=Pn(ay),LI=Kd("type",{directory:Yw,leaf:eR}),nj=[Ec,Hl("items",LI),Du("onLeafAction"),Du("onToggleExpand"),w("defaultExpandedIds",[],Wt),Nc("defaultSelectedId")],oj=Pn(nj),sj=lf.concat([Vl("filetype","file",["image","media","file"]),_d,Nc("picker_text")]),rj=Pn(sj),ly=Pn([M2,b4]),HI=t=>Rc("items","items",Ka(),Il(Mg(s=>Nr(`Checking item of ${t}`,tR,s).fold(c=>uo.error(Au(c)),c=>uo.value(c))))),tR=xc(()=>Kd("type",{alertbanner:Sb,bar:Pn(OI(HI("bar"))),button:MZ,checkbox:PZ,colorinput:mk,colorpicker:IZ,dropzone:kG,grid:Pn(KD(HI("grid"))),iframe:BI,input:XD,listbox:XZ,selectbox:JZ,sizeinput:gk,slider:Li,textarea:ej,urlinput:rj,customeditor:LZ,htmlpanel:VZ,imagepreview:ZZ,collection:jD,label:Pn(PI(HI("label"))),table:II,tree:oj,panel:aj})),cj=[Ec,_e("classes",[]),Hl("items",tR)],aj=Pn(cj),lj=[y4("tab"),AM,Hl("items",tR)],ij=[Ec,Pb("tabs",lj)],Xw=Pn(ij),uj=qw,dj=DZ,zI=Pn([Tc("title"),ls("body",Kd("type",{panel:aj,tabpanel:Xw})),La("size","normal"),w("buttons",[],dj),_e("initialData",{}),Wr("onAction",oe),Wr("onChange",oe),Wr("onSubmit",oe),Wr("onClose",oe),Wr("onCancel",oe),Wr("onTabChange",oe)]),mj=t=>Nr("dialog",zI,t),AG=Pn([Ia("type",["cancel","custom"]),...uj]),e=Pn([Tc("title"),Tc("url"),Nm("height"),Nm("width"),Ru("buttons",AG),Wr("onAction",oe),Wr("onCancel",oe),Wr("onClose",oe),Wr("onMessage",oe)]),n=t=>Nr("dialog",e,t),o=t=>Hn(t)?[t].concat(ie(Ta(t),o)):mo(t)?ie(t,o):[],r=t=>rt(t.type)&&rt(t.name),a={checkbox:$Z,colorinput:xb,colorpicker:DI,dropzone:MI,input:GZ,iframe:WZ,imagepreview:jZ,selectbox:fk,sizeinput:QD,slider:pk,listbox:Tb,size:QD,textarea:Kp,urlinput:ly,customeditor:HZ,collection:Kw,togglemenuitem:_Z},u=t=>A.from(a[t.type]),f=t=>io(o(t),r),b=t=>{const s=f(t),c=ie(s,l=>u(l).fold(()=>[],d=>[ls(l.name,d)]));return Pn(c)},y=t=>{var s;const c=vt(mj(t)),l=b(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:c,dataValidator:l,initialData:d}},E={open:(t,s)=>{const c=y(s);return t(c.internalDialog,c.initialData,c.dataValidator)},openUrl:(t,s)=>{const c=vt(n(s));return t(c)},redial:t=>y(t)};var M=Object.freeze({__proto__:null,events:(t,s)=>{const c=(l,d)=>{t.updateState.each(g=>{const h=g(l,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?gv:fv)(l,h)})};return dr([st(nu(),(l,d)=>{const g=d;if(!g.universal){const h=t.channel;Jn(g.channels,h)&&c(l,g.data)}}),Cr((l,d)=>{t.initialData.each(g=>{c(l,g)})})])}}),j=Object.freeze({__proto__:null,getState:(t,s,c)=>c}),ee=[tt("channel"),os("renderComponents"),os("updateState"),os("initialData"),oc("reuseDom",!0)],ne=Object.freeze({__proto__:null,init:()=>{const t=hn(A.none()),s=()=>t.set(A.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const ge=Oa({fields:ee,name:"reflecting",active:M,apis:j,state:ne}),Ee=t=>{const s=[],c={};return xs(t,(l,d)=>{l.fold(()=>{s.push(d)},g=>{c[d]=g})}),s.length>0?uo.error(s):uo.value(c)},Se=(t,s,c,l)=>{const d=ys($p.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Pe(t.items,h=>rz(g,h,s,c,l))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:Tt([En.config({mode:"acyclic",useTabstopAt:Ne(dw)}),pm.memento(d),IH(d,{postprocess:g=>Ee(g).fold(h=>({}),Rt)}),ho("dialog-body-panel",[st(md(),(g,h)=>{g.getSystem().broadcastOn([SE],{newFocus:A.some(h.event.target)})})])])}},Me=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:uT(t.action),behaviours:va(t.tabButtonBehaviours,[Kn.config({}),En.config({mode:"execution",useSpace:!0,useEnter:!0}),qt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),lt=gi({name:"TabButton",configFields:[_e("uid",void 0),tt("value"),Rc("dom","dom",vf(()=>({attributes:{role:"tab",id:Jt("aria"),"aria-selected":"false"}})),xi()),os("action"),_e("domModification",{}),ba("tabButtonBehaviours",[Kn,En,qt]),tt("view")],factory:Me}),At=W([tt("tabs"),tt("dom"),_e("clickToDismiss",!1),ba("tabbarBehaviours",[bn,En]),qg(["tabClass","selectedClass"])]),Gt=cv({factory:lt,name:"tabs",unit:"tab",overrides:t=>{const s=(l,d)=>{bn.dehighlight(l,d),An(l,rS(),{tabbar:l,button:d})},c=(l,d)=>{bn.highlight(l,d),An(l,sS(),{tabbar:l,button:d})};return{action:l=>{const d=l.getSystem().getByUid(t.uid).getOrDie(),g=bn.isHighlighted(d,l);(g&&t.clickToDismiss?s:g?oe:c)(d,l)},domModification:{classes:[t.markers.tabClass]}}}}),Ge=W([Gt]),Le=(t,s,c,l)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:va(t.tabbarBehaviours,[bn.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Ut(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Ut(g.element,"aria-selected","false")}}),En.config({mode:"flow",getInitial:d=>bn.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),ct=ml({name:"Tabbar",configFields:At(),partFields:Ge(),factory:Le}),on=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:va(t.tabviewBehaviours,[to.config({})]),domModification:{attributes:{role:"tabpanel"}}}),wn=gi({name:"Tabview",configFields:[ba("tabviewBehaviours",[to])],factory:on}),Ro=W([_e("selectFirst",!0),Zo("onChangeTab"),Zo("onDismissTab"),_e("tabs",[]),ba("tabSectionBehaviours",[])]),Fo=Wa({factory:ct,schema:[tt("dom"),dd("markers",[tt("tabClass"),tt("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),_s=Wa({factory:wn,name:"tabview"}),Zs=W([Fo,_s]),lc=(t,s,c,l)=>{const d=h=>{const C=qt.getValue(h);Ct(h,t,"tabview").each(S=>{xe(t.tabs,O=>O.value===C).each(O=>{const B=O.view();Vr(h.element,"id").each(z=>{Ut(S.element,"aria-labelledby",z)}),to.set(S,B),t.onChangeTab(S,h,B)})})},g=(h,C)=>{Ct(h,t,"tabbar").each(S=>{C(S).each(_f)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:P1(t.tabSectionBehaviours),events:dr(Fe([t.selectFirst?[Cr((h,C)=>{g(h,bn.getFirst)})]:[],[st(sS(),(h,C)=>{const S=C.event.button;d(S)}),st(rS(),(h,C)=>{const S=C.event.button;t.onDismissTab(h,S)})]])),apis:{getViewItems:h=>Ct(h,t,"tabview").map(C=>to.contents(C)).getOr([]),showTab:(h,C)=>{g(h,k=>{const O=bn.getCandidates(k);return xe(O,z=>qt.getValue(z)===C).filter(z=>!bn.isHighlighted(k,z))})}}}},Kc=ml({name:"TabSection",configFields:Ro(),partFields:Zs(),factory:lc,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,c)=>{t.showTab(s,c)}}}),Qs=(t,s,c)=>Pe(t,(l,d)=>{to.set(c,t[d].view());const g=s.dom.getBoundingClientRect();return to.set(c,[]),g.height}),Pt=t=>Ms(ir(t,(s,c)=>s>c?-1:s<c?1:0)),vn=(t,s,c)=>{const l=Ml(t).dom,d=Vf(t,".tox-dialog-wrap").getOr(t),g=fs(d,"position")==="fixed";let h;g?h=Math.max(l.clientHeight,window.innerHeight):h=Math.max(l.offsetHeight,l.scrollHeight);const C=$s(s),k=s.dom.offsetLeft>=c.dom.offsetLeft+q(c)?Math.max($s(c),C):C,O=parseInt(fs(t,"margin-top"),10)||0,B=parseInt(fs(t,"margin-bottom"),10)||0,V=$s(t)+O+B-k;return h-V},is=(t,s)=>{Ms(t).each(c=>Kc.showTab(s,c.value))},zt=(t,s)=>{ot(t,"height",s+"px"),ot(t,"flex-basis",s+"px")},On=(t,s,c)=>{Vf(t,'[role="dialog"]').each(l=>{Ar(l,'[role="tablist"]').each(d=>{c.get().map(g=>(ot(s,"height","0"),ot(s,"flex-basis","0"),Math.min(g,vn(l,s,d)))).each(g=>{zt(s,g)})})})},Ao=t=>Ar(t,'[role="tabpanel"]'),Zt=t=>{const s=Es();return{extraEvents:[Cr(d=>{const g=d.element;Ao(g).each(h=>{ot(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(C=>{const S=Qs(t,h,C);Pt(S).fold(s.clear,s.set)}),On(g,h,s),co(h,"visibility"),is(t,d),requestAnimationFrame(()=>{On(g,h,s)})})}),st(hd(),d=>{const g=d.element;Ao(g).each(h=>{On(g,h,s)})}),st(u3,(d,g)=>{const h=d.element;Ao(h).each(C=>{const S=Cd(Fr(C));ot(C,"visibility","hidden");const k=Us(C,"height").map(z=>parseInt(z,10));co(C,"height"),co(C,"flex-basis");const O=C.dom.getBoundingClientRect().height;k.forall(z=>O>z)?(s.set(O),On(h,C,s)):k.each(z=>{zt(C,z)}),co(C,"visibility"),S.each(Ai)})})],selectFirst:!1}},Oo="send-data-to-section",Io="send-data-to-view",Sa=(t,s,c,l)=>{const d=hn({}),g=O=>{const B=qt.getValue(O),z=Ee(B).getOr({}),V=d.get(),X=tr(V,z);d.set(X)},h=O=>{const B=d.get();qt.setValue(O,B)},C=hn(null),S=Pe(t.tabs,O=>({value:O.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[jr(c.shared.providers.translate(O.title))],view:()=>[$p.sketch(B=>({dom:{tag:"div",classes:["tox-form"]},components:Pe(O.items,z=>rz(B,z,s,c,l)),formBehaviours:Tt([En.config({mode:"acyclic",useTabstopAt:Ne(dw)}),ho("TabView.form.events",[Cr(h),Qd(g)]),Zl.config({channels:vs([{key:Oo,value:{onReceive:g}},{key:Io,value:{onReceive:h}}])})])}))]})),k=Zt(S);return Kc.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(O,B,z)=>{const V=qt.getValue(B);An(O,QB,{name:V,oldName:C.get()}),C.set(V)},tabs:S,components:[Kc.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[ct.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Tt([gr.config({})])}),Kc.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:k.selectFirst,tabSectionBehaviours:Tt([ho("tabpanel",k.extraEvents),En.config({mode:"acyclic"}),Jo.config({find:O=>Ms(Kc.getViewItems(O))}),Fp(A.none(),O=>(O.getSystem().broadcastOn([Oo],{}),d.get()),(O,B)=>{d.set(B),O.getSystem().broadcastOn([Io],{})})])})},Ns=(t,s,c,l,d,g)=>{const h=k=>{const O=k.body;switch(O.type){case"tabpanel":return[Sa(O,k.initialData,l,g)];default:return[Se(O,k.initialData,l,g)]}},C=(k,O)=>A.some({isTabPanel:()=>O.body.type==="tabpanel"}),S={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...c.map(k=>({id:k})).getOr({}),...d?S:{}}},components:[],behaviours:Tt([pm.childAt(0),ge.config({channel:`${U3}-${s}`,updateState:C,renderComponents:h,initialData:t})])}},sa=(t,s,c,l,d,g)=>Ns(t,s,A.some(c),l,d,g),Md=(t,s,c,l)=>{const d=Ns(t,s,A.none(),c,!1,l);return oa.parts.body(d)},uf=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[WP(A.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Tt([gr.config({}),Kn.config({})])})]}],behaviours:Tt([En.config({mode:"acyclic",useTabstopAt:Ne(dw)})])};return oa.parts.body(s)},Yl=G1.deviceType.isTouch(),Hi=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),Qu=(t,s)=>oa.parts.close(nl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Tt([gr.config({})])})),zi=()=>oa.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),ed=(t,s)=>oa.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Qm(`<p>${JA(s.translate(t))}</p>`)}]}]}),Sn=t=>oa.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),qo=(t,s)=>[of.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),of.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Br=t=>{const s="tox-dialog",c=s+"-wrap",l=c+"__backdrop",d=s+"__disable-scroll";return oa.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),A.some(!0)),useTabstopAt:g=>!dw(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Qm(`<div class="${c}"></div>`),components:[{dom:{tag:"div",classes:Yl?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:c,modalBehaviours:Tt([Kn.config({}),ho("dialog-events",t.dialogEvents.concat([Vh(md(),(g,h)=>{ym.isBlocked(g)?oe():En.focusIn(g)}),st(Ig(),(g,h)=>{g.getSystem().broadcastOn([SE],{newFocus:h.event.newFocus})})])),ho("scroll-lock",[Cr(()=>{mr(Co(),d)}),Qd(()=>{Zr(Co(),d)})]),...t.extraBehaviours]),eventOrder:{[ou()]:["dialog-events"],[yl()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[su()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},ic=t=>nl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Tt([gr.config({}),ac.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Wu("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{xo(s,wh)}}),Bc=(t,s,c,l)=>{const d=g=>[jr(l.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...c.map(g=>({id:g})).getOr({})}},components:[],behaviours:Tt([ge.config({channel:`${jP}-${s}`,initialData:t,renderComponents:d})])}},Ma=()=>({dom:Qm('<div class="tox-dialog__draghandle"></div>')}),Pc=(t,s,c,l)=>of.sketch({dom:Qm('<div class="tox-dialog__header"></div>'),components:[Bc(t,s,A.some(c),l),Ma(),ic(l)],containerBehaviours:Tt([Cb.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>$u(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),$c=(t,s,c)=>{const l=oa.parts.title(Bc(t,s,A.none(),c)),d=oa.parts.draghandle(Ma()),g=oa.parts.close(ic(c)),h=[l].concat(t.draggable?[d]:[]).concat([g]);return of.sketch({dom:Qm('<div class="tox-dialog__header"></div>'),components:h})},Rl=(t,s,c)=>$c({title:c.shared.providers.translate(t),draggable:c.dialog.isDraggableModal()},s,c.shared.providers),Bd=(t,s,c,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":c.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Qm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Pd=(t,s,c)=>({onClose:()=>c.closeWindow(),onBlock:l=>{const d=Ar(t().element,".tox-dialog__header").map(g=>$s(g));oa.setBusy(t(),(g,h)=>Bd(l.message,h,s,d))},onUnblock:()=>{oa.setIdle(t())}}),$d="tox-dialog--fullscreen",gu="tox-dialog--width-lg",mg="tox-dialog--width-md",Ah=t=>{switch(t){case"large":return A.some(gu);case"medium":return A.some(mg);default:return A.none()}},Eb=(t,s)=>{const c=ve.fromDom(s.element.dom);ri(c,$d)||(ci(c,[gu,mg]),Ah(t).each(l=>mr(c,l)))},bk=(t,s)=>{const c=ve.fromDom(t.element.dom),l=Dk(c),d=xe(l,g=>g===gu||g===mg).or(Ah(s));_k(c,[$d,...d.toArray()])},fg=(t,s,c)=>el(Br({...t,firstTabstop:1,lazySink:c.shared.getSink,extraBehaviours:[yE({}),...t.extraBehaviours],onEscape:l=>{xo(l,wh)},dialogEvents:s,eventOrder:{[nu()]:[ge.name(),Zl.name()],[yl()]:["scroll-lock",ge.name(),"messages","dialog-events","alloy.base.behaviour"],[su()]:["alloy.base.behaviour","dialog-events","messages",ge.name(),"scroll-lock"]}})),iy=(t,s={})=>{const c=l=>{const d=Pe(l.items,g=>{const h=xt(s,g.name).getOr(hn(!1));return{...g,storage:h}});return{...l,items:d}};return Pe(t,l=>l.type==="menu"?c(l):l)},nR=t=>it(t,(s,c)=>c.type==="menu"?it(c.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),fl=(t,s)=>[Sy(md(),jH),t(Pv,(c,l,d,g)=>{Cd(Fr(g.element)).fold(oe,g0),s.onClose(),l.onClose()}),t(wh,(c,l,d,g)=>{l.onCancel(c),xo(g,Pv)}),st(i3,(c,l)=>s.onUnblock()),st(l3,(c,l)=>s.onBlock(l.event))],kb=(t,s)=>{const c=(d,g)=>st(d,(h,C)=>{l(h,(S,k)=>{g(t(),S,C.event,h)})}),l=(d,g)=>{ge.getState(d).get().each(h=>{g(h,d)})};return[...fl(c,s),c(cg,(d,g,h)=>{g.onAction(d,{name:h.name})})]},oR=(t,s,c)=>{const l=(g,h)=>st(g,(C,S)=>{d(C,(k,O)=>{h(t(),k,S.event,C)})}),d=(g,h)=>{ge.getState(g).get().each(C=>{h(C.internalDialog,g)})};return[...fl(l,s),l(J2,(g,h)=>h.onSubmit(g)),l(Fi,(g,h,C)=>{h.onChange(g,{name:C.name})}),l(cg,(g,h,C,S)=>{const k=()=>S.getSystem().isConnected()?En.focusIn(S):void 0,O=V=>al(V,"disabled")||Vr(V,"aria-disabled").exists(X=>X==="true"),B=Fr(S.element),z=Cd(B);h.onAction(g,{name:C.name,value:C.value}),Cd(B).fold(k,V=>{O(V)||z.exists(X=>yc(V,X)&&O(X))?k():c().toOptional().filter(X=>!yc(X.element,V)).each(k)})}),l(QB,(g,h,C)=>{h.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),Qd(g=>{const h=t();qt.setValue(g,h.getData())})]},sR=(t,s)=>Tw(t,t.type,s),gg=(t,s,c)=>xe(s,l=>l.name===c).bind(l=>l.memento.getOpt(t)),Jw=(t,s)=>{const c=s.map(C=>C.footerButtons).getOr([]),l=Ss(c,C=>C.align==="start"),d=(C,S)=>of.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:Pe(S,k=>k.memento.asSpec())}),g=d("start",l.pass),h=d("end",l.fail);return[g,h]},Ie=(t,s,c)=>{const l=(d,g)=>{const h=Pe(g.buttons,S=>{const k=ys(sR(S,c));return{name:S.name,align:S.align,memento:k}}),C=S=>gg(d,h,S);return A.some({lookupByName:C,footerButtons:h})};return{dom:Qm('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Tt([ge.config({channel:`${GP}-${s}`,initialData:t,updateState:l,renderComponents:Jw})])}},He=(t,s,c)=>Ie(t,s,c),Nt=(t,s,c)=>oa.parts.footer(Ie(t,s,c)),Et=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const l=Jo.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return $p.getField(l,s).orThunk(()=>t.getFooter().bind(h=>ge.getState(h).get()).bind(h=>h.lookupByName(s)))}else return A.none()},Ln=(t,s)=>{const c=t.getRoot();return ge.getState(c).get().map(l=>vt(Nr("data",l.dataValidator,s))).getOr(s)},Vo=(t,s,c)=>{const l=X=>{const te=t.getRoot();te.getSystem().isConnected()&&X(te)},V={getData:()=>{const X=t.getRoot(),te=X.getSystem().isConnected()?t.getFormWrapper():X,ke=qt.getValue(te),ae=bo(c,Ce=>Ce.get());return{...ke,...ae}},setData:X=>{l(te=>{const ke=V.getData(),ae=tr(ke,X),Ce=Ln(t,ae),we=t.getFormWrapper();qt.setValue(we,Ce),xs(c,(Qe,We)=>{Eo(ae,We)&&Qe.set(ae[We])})})},setEnabled:(X,te)=>{Et(t,X).each(te?i.enable:i.disable)},focus:X=>{Et(t,X).each(Kn.focus)},block:X=>{if(!rt(X))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(te=>{An(te,l3,{message:X})})},unblock:()=>{l(X=>{xo(X,i3)})},showTab:X=>{l(te=>{const ke=t.getBody();ge.getState(ke).get().exists(Ce=>Ce.isTabPanel())&&Jo.getCurrent(ke).each(Ce=>{Kc.showTab(Ce,X)})})},redial:X=>{l(te=>{const ke=t.getId(),ae=s(X),Ce=iy(ae.internalDialog.buttons,c);te.getSystem().broadcastOn([`${mw}-${ke}`],ae),te.getSystem().broadcastOn([`${jP}-${ke}`],ae.internalDialog),te.getSystem().broadcastOn([`${U3}-${ke}`],ae.internalDialog),te.getSystem().broadcastOn([`${GP}-${ke}`],{...ae.internalDialog,buttons:Ce}),V.setData(ae.initialData)})},close:()=>{l(X=>{xo(X,Pv)})},toggleFullscreen:t.toggleFullscreen};return V},Gr=(t,s,c)=>{const l=Jt("dialog"),d=t.internalDialog,g=Rl(d.title,l,c),h=hn(d.size),C=we=>Et(ae,we),S=Ah(h.get()).toArray(),k=(we,Qe)=>(h.set(Qe.internalDialog.size),Eb(Qe.internalDialog.size,we),A.some(Qe)),O=Md({body:d.body,initialData:d.initialData},l,c,C),B=iy(d.buttons),z=nR(B),V=fn(B.length!==0,Nt({buttons:B},l,c)),X=oR(()=>Ce,Pd(()=>ke,c.shared.providers,s),c.shared.getSink),te={id:l,header:g,body:O,footer:V,extraClasses:S,extraBehaviours:[ge.config({channel:`${mw}-${l}`,updateState:k,initialData:t})],extraStyles:{}},ke=fg(te,X,c),ae=(()=>{const we=()=>{const We=oa.getBody(ke);return Jo.getCurrent(We).getOr(We)},Qe=()=>{bk(ke,h.get())};return{getId:W(l),getRoot:W(ke),getBody:()=>oa.getBody(ke),getFooter:()=>oa.getFooter(ke),getFormWrapper:we,toggleFullscreen:Qe}})(),Ce=Vo(ae,s.redial,z);return{dialog:ke,instanceApi:Ce}},Fd=(t,s,c,l=!1,d)=>{const g=Jt("dialog"),h=Jt("dialog-label"),C=Jt("dialog-content"),S=t.internalDialog,k=cn=>Et(Kt,cn),O=hn(S.size),B=Ah(O.get()).toArray(),z=(cn,$t)=>(O.set($t.internalDialog.size),Eb($t.internalDialog.size,cn),d(),A.some($t)),V=ys(Pc({title:S.title,draggable:!0},g,h,c.shared.providers)),X=ys(sa({body:S.body,initialData:S.initialData},g,C,c,l,k)),te=iy(S.buttons),ke=nR(te),ae=fn(te.length!==0,ys(He({buttons:te},g,c))),Ce=oR(()=>qe,{onBlock:cn=>{ym.block(We,($t,dn)=>{const Mo=V.getOpt(We).map(pr=>$s(pr.element));return Bd(cn.message,dn,c.shared.providers,Mo)})},onUnblock:()=>{ym.unblock(We)},onClose:()=>s.closeWindow()},c.shared.getSink),we="tox-dialog-inline",Qe=wo().os,We=el({dom:{tag:"div",classes:["tox-dialog",we,...B],attributes:{role:"dialog",...Qe.isMacOS()?{"aria-label":S.title}:{"aria-labelledby":h}}},eventOrder:{[nu()]:[ge.name(),Zl.name()],[ou()]:["execute-on-form"],[yl()]:["reflecting","execute-on-form"]},behaviours:Tt([En.config({mode:"cyclic",onEscape:cn=>(xo(cn,Pv),A.some(!0)),useTabstopAt:cn=>!dw(cn)&&(cs(cn)!=="button"||gn(cn,"disabled")!=="disabled"),firstTabstop:1}),ge.config({channel:`${mw}-${g}`,updateState:z,initialData:t}),Kn.config({}),ho("execute-on-form",Ce.concat([Vh(md(),(cn,$t)=>{En.focusIn(cn)}),st(Ig(),(cn,$t)=>{cn.getSystem().broadcastOn([SE],{newFocus:$t.event.newFocus})})])),ym.config({getRoot:()=>A.some(We)}),to.config({}),yE({})]),components:[V.asSpec(),X.asSpec(),...ae.map(cn=>cn.asSpec()).toArray()]}),It=()=>{bk(We,O.get())},Kt={getId:W(g),getRoot:W(We),getFooter:()=>ae.map(cn=>cn.get(We)),getBody:()=>X.get(We),getFormWrapper:()=>{const cn=X.get(We);return Jo.getCurrent(cn).getOr(cn)},toggleFullscreen:It},qe=Vo(Kt,s.redial,ke);return{dialog:We,instanceApi:qe}};var uy=tinymce.util.Tools.resolve("tinymce.util.URI");const fj=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!rt(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{An(C,l3,{message:h})})},unblock:()=>{s(h=>{xo(h,i3)})},close:()=>{s(h=>{xo(h,Pv)})},sendMessage:h=>{s(C=>{C.getSystem().broadcastOn([qP],h)})}}},vk=["insertContent","setContent","execCommand","close","block","unblock"],hg=t=>Hn(t)&&vk.indexOf(t.mceAction)!==-1,VI=t=>!hg(t)&&Hn(t)&&Eo(t,"mceAction"),UI=(t,s,c)=>{switch(c.mceAction){case"insertContent":t.insertContent(c.content);break;case"setContent":t.setContent(c.content);break;case"execCommand":const l=Wo(c.ui)?c.ui:!1;t.execCommand(c.cmd,l,c.value);break;case"close":s.close();break;case"block":s.block(c.message);break;case"unblock":s.unblock();break}},WI=(t,s,c,l)=>{const d=Jt("dialog"),g=Rl(t.title,d,l),h=uf(t),C=t.buttons.bind(we=>we.length===0?A.none():A.some(Nt({buttons:we},d,l))),S=kb(()=>Ce,Pd(()=>ae,l.shared.providers,s)),k={...t.height.fold(()=>({}),we=>({height:we+"px","max-height":we+"px"})),...t.width.fold(()=>({}),we=>({width:we+"px","max-width":we+"px"}))},O=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],B=new uy(t.url,{base_uri:new uy(window.location.href)}),z=`${B.protocol}://${B.host}${B.port?":"+B.port:""}`,V=zc(),X=(we,Qe)=>A.some(Qe),te=[ge.config({channel:`${mw}-${d}`,updateState:X,initialData:t}),ho("messages",[Cr(()=>{const we=kl(ve.fromDom(window),"message",Qe=>{if(B.isSameOrigin(new uy(Qe.raw.origin))){const We=Qe.raw.data;hg(We)?UI(c,Ce,We):VI(We)&&t.onMessage(Ce,We)}});V.set(we)}),Qd(V.clear)]),Zl.config({channels:{[qP]:{onReceive:(we,Qe)=>{Ar(we.element,"iframe").each(We=>{const It=We.dom.contentWindow;Xn(It)&&It.postMessage(Qe,z)})}}}})],ae=fg({id:d,header:g,body:h,footer:C,extraClasses:O,extraBehaviours:te,extraStyles:k},S,l),Ce=fj(ae);return{dialog:ae,instanceApi:Ce}},ZI=t=>{const s=t.shared;return{open:(l,d)=>{const g=()=>{oa.hide(k),d()},h=ys(Tw({name:"close-alert",text:"OK",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"cancel",t)),C=zi(),S=Qu(g,s.providers),k=el(Br({lazySink:()=>s.getSink(),header:Hi(C,S),body:ed(l,s.providers),footer:A.some(Sn(qo([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[st(wh,g)],eventOrder:{}}));oa.show(k);const O=h.get(k);Kn.focus(O)}}},gj=t=>{const s=t.shared;return{open:(l,d)=>{const g=z=>{oa.hide(O),d(z)},h=ys(Tw({name:"yes",text:"Yes",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"submit",t)),C=Tw({name:"no",text:"No",primary:!1,buttonType:A.some("secondary"),align:"end",enabled:!0,icon:A.none()},"cancel",t),S=zi(),k=Qu(()=>g(!1),s.providers),O=el(Br({lazySink:()=>s.getSink(),header:Hi(S,k),body:ed(l,s.providers),footer:A.some(Sn(qo([],[C,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[st(wh,()=>g(!1)),st(J2,()=>g(!0))],eventOrder:{}}));oa.show(O);const B=h.get(O);Kn.focus(B)}}},Lo=(t,s)=>vt(Nr("data",s,t)),ze=t=>j2(t,".tox-alert-dialog")||j2(t,".tox-confirm-dialog"),pn=(t,s,c)=>s&&c?[]:[fr.config({contextual:{lazyContext:()=>A.some(kr(ve.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>bh(t,l.element).map(g=>({bounds:J1(g),optScrollEnv:A.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:wc(g.element).top})})).getOrThunk(()=>({bounds:gc(),optScrollEnv:A.none()}))})],Qn=t=>{const s=t.editor,c=X1(s),l=ZI(t.backstages.dialog),d=gj(t.backstages.dialog),g=(X,te,ke)=>{if(!zn(te)){if(te.inline==="toolbar")return k(X,t.backstages.popup.shared.anchors.inlineDialog(),ke,te);if(te.inline==="bottom")return O(X,t.backstages.popup.shared.anchors.inlineBottomDialog(),ke,te);if(te.inline==="cursor")return k(X,t.backstages.popup.shared.anchors.cursor(),ke,te)}return S(X,ke)},h=(X,te)=>C(X,te),C=(X,te)=>{const ke=ae=>{const Ce=WI(ae,{closeWindow:()=>{oa.hide(Ce.dialog),te(Ce.instanceApi)}},s,t.backstages.dialog);return oa.show(Ce.dialog),Ce.instanceApi};return E.openUrl(ke,X)},S=(X,te)=>{const ke=(ae,Ce,we)=>{const Qe=Ce,It=Gr({dataValidator:we,initialData:Qe,internalDialog:ae},{redial:E.redial,closeWindow:()=>{oa.hide(It.dialog),te(It.instanceApi)}},t.backstages.dialog);return oa.show(It.dialog),It.instanceApi.setData(Qe),It.instanceApi};return E.open(ke,X)},k=(X,te,ke,ae)=>{const Ce=(we,Qe,We)=>{const It=Lo(Qe,We),Kt=Es(),qe=t.backstages.popup.shared.header.isPositionedAtTop(),cn={dataValidator:We,initialData:It,internalDialog:we},$t=()=>Kt.on(hs=>{Or.reposition(hs),(!c||!qe)&&fr.refresh(hs)}),dn=Fd(cn,{redial:E.redial,closeWindow:()=>{Kt.on(Or.hide),s.off("ResizeEditor",$t),Kt.clear(),ke(dn.instanceApi)}},t.backstages.popup,ae.ariaAttrs,$t),Mo=el(Or.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ae.persistent?{event:"doNotDismissYet"}:{},...qe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Tt([ho("window-manager-inline-events",[st(Ef(),(hs,ln)=>{xo(dn.dialog,wh)})]),...pn(s,c,qe)]),isExtraPart:(hs,ln)=>ze(ln)}));Kt.set(Mo);const pr=()=>{const hs=s.inline?Co():ve.fromDom(s.getContainer()),ln=kr(hs);return A.some(ln)};return Or.showWithinBounds(Mo,_i(dn.dialog),{anchor:te},pr),(!c||!qe)&&(fr.refresh(Mo),s.on("ResizeEditor",$t)),dn.instanceApi.setData(It),En.focusIn(dn.dialog),dn.instanceApi};return E.open(Ce,X)},O=(X,te,ke,ae)=>{const Ce=(we,Qe,We)=>{const It=Lo(Qe,We),Kt=Es(),qe=t.backstages.popup.shared.header.isPositionedAtTop(),cn={dataValidator:We,initialData:It,internalDialog:we},$t=()=>Kt.on(hs=>{Or.reposition(hs),fr.refresh(hs)}),dn=Fd(cn,{redial:E.redial,closeWindow:()=>{Kt.on(Or.hide),s.off("ResizeEditor ScrollWindow ElementScroll",$t),Kt.clear(),ke(dn.instanceApi)}},t.backstages.popup,ae.ariaAttrs,$t),Mo=el(Or.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ae.persistent?{event:"doNotDismissYet"}:{},...qe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Tt([ho("window-manager-inline-events",[st(Ef(),(hs,ln)=>{xo(dn.dialog,wh)})]),fr.config({contextual:{lazyContext:()=>A.some(kr(ve.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:hs=>bh(s,hs.element).map(pt=>({bounds:J1(pt),optScrollEnv:A.some({currentScrollTop:pt.element.dom.scrollTop,scrollElmTop:wc(pt.element).top})})).getOrThunk(()=>({bounds:gc(),optScrollEnv:A.none()}))})]),isExtraPart:(hs,ln)=>ze(ln)}));Kt.set(Mo);const pr=()=>t.backstages.popup.shared.getSink().toOptional().bind(hs=>{const ln=bh(s,hs.element),pt=15,Lt=ln.map(xn=>J1(xn)).getOr(gc()),Yn=kr(ve.fromDom(s.getContentAreaContainer())),Fn=cd(Yn,Lt);return A.some(yr(Fn.x,Fn.y,Fn.width,Fn.height-pt))});return Or.showWithinBounds(Mo,_i(dn.dialog),{anchor:te},pr),fr.refresh(Mo),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",$t),dn.instanceApi.setData(It),En.focusIn(dn.dialog),dn.instanceApi};return E.open(Ce,X)};return{open:g,openUrl:h,alert:(X,te)=>{l.open(X,te)},close:X=>{X.close()},confirm:(X,te)=>{d.open(X,te)}}},kc=t=>{MN(t),N8(t),xW(t)};var Xl=()=>{Tu.add("silver",t=>{kc(t);let s=()=>gc();const{dialogs:c,popups:l,renderUI:d}=SZ(t,{getPopupSinkBounds:()=>s()}),g=()=>{const k=d();return bh(t,l.getMothership().element).each(B=>{s=()=>J1(B)}),k};S7.register(t,l.backstage.shared);const h=Qn({editor:t,backstages:{popup:l.backstage,dialog:c.backstage}}),C=Es(),S=()=>ML(t,{backstage:l.backstage},l.getMothership(),C);return{renderUI:g,getWindowManagerImpl:W(h),getNotificationManagerImpl:S}})};Xl()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var Sr=tinymce.util.Tools.resolve("tinymce.ModelManager");const js=(i,m,p)=>{var v;return p(i,m.prototype)?!0:((v=i.constructor)===null||v===void 0?void 0:v.name)===m.name},ws=i=>{const m=typeof i;return i===null?"null":m==="object"&&Array.isArray(i)?"array":m==="object"&&js(i,String,(p,v)=>v.isPrototypeOf(p))?"string":m},us=i=>m=>ws(m)===i,Ko=i=>m=>typeof m===i,ps=i=>m=>i===m,So=us("string"),rt=us("object"),Hn=us("array"),Ho=ps(null),mo=Ko("boolean"),Uo=ps(void 0),Wo=i=>i==null,zn=i=>!Wo(i),Go=Ko("function"),Xn=Ko("number"),Ot=()=>{},Zn=(i,m)=>(...p)=>i(m.apply(null,p)),nt=(i,m)=>p=>i(m(p)),oe=i=>()=>i,ut=i=>i,oo=(i,m)=>i===m;function dt(i,...m){return(...p)=>{const v=m.concat(p);return i.apply(null,v)}}const W=i=>m=>!i(m),Rt=i=>()=>{throw new Error(i)},sn=i=>i(),Xt=oe(!1),Ne=oe(!0);class le{constructor(m,p){this.tag=m,this.value=p}static some(m){return new le(!0,m)}static none(){return le.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?le.some(m(this.value)):le.none()}bind(m){return this.tag?m(this.value):le.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:le.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return zn(m)?le.some(m):le.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}le.singletonNone=new le(!1);const Bo=Array.prototype.slice,gt=Array.prototype.indexOf,$e=Array.prototype.push,A=(i,m)=>gt.call(i,m),kn=(i,m)=>A(i,m)>-1,Ke=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const T=i[p];if(m(T,p))return!0}return!1},Vn=(i,m)=>{const p=[];for(let v=0;v<i;v++)p.push(m(v));return p},jt=(i,m)=>{const p=i.length,v=new Array(p);for(let T=0;T<p;T++){const D=i[T];v[T]=m(D,T)}return v},je=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const T=i[p];m(T,p)}},Jn=(i,m)=>{for(let p=i.length-1;p>=0;p--){const v=i[p];m(v,p)}},bs=(i,m)=>{const p=[],v=[];for(let T=0,D=i.length;T<D;T++){const I=i[T];(m(I,T)?p:v).push(I)}return{pass:p,fail:v}},bt=(i,m)=>{const p=[];for(let v=0,T=i.length;v<T;v++){const D=i[v];m(D,v)&&p.push(D)}return p},mn=(i,m,p)=>(Jn(i,(v,T)=>{p=m(p,v,T)}),p),Pe=(i,m,p)=>(je(i,(v,T)=>{p=m(p,v,T)}),p),et=(i,m,p)=>{for(let v=0,T=i.length;v<T;v++){const D=i[v];if(m(D,v))return le.some(D);if(p(D,v))break}return le.none()},F=(i,m)=>et(i,m,Xt),Ss=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const T=i[p];if(m(T,p))return le.some(p)}return le.none()},io=i=>{const m=[];for(let p=0,v=i.length;p<v;++p){if(!Hn(i[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+i);$e.apply(m,i[p])}return m},To=(i,m)=>io(jt(i,m)),it=(i,m)=>{for(let p=0,v=i.length;p<v;++p){const T=i[p];if(m(T,p)!==!0)return!1}return!0},Mt=i=>{const m=Bo.call(i,0);return m.reverse(),m},xe=(i,m)=>{const p={};for(let v=0,T=i.length;v<T;v++){const D=i[v];p[String(D)]=m(D,v)}return p},Re=(i,m)=>{const p=Bo.call(i,0);return p.sort(m),p},Fe=(i,m)=>m>=0&&m<i.length?le.some(i[m]):le.none(),ie=i=>Fe(i,0),_n=i=>Fe(i,i.length-1),Un=(i,m)=>{for(let p=0;p<i.length;p++){const v=m(i[p],p);if(v.isSome())return v}return le.none()},Bt=Object.keys,rs=Object.hasOwnProperty,ro=(i,m)=>{const p=Bt(i);for(let v=0,T=p.length;v<T;v++){const D=p[v],I=i[D];m(I,D)}},ir=(i,m)=>Po(i,(p,v)=>({k:v,v:m(p,v)})),Po=(i,m)=>{const p={};return ro(i,(v,T)=>{const D=m(v,T);p[D.k]=D.v}),p},Ms=i=>(m,p)=>{i[p]=m},ra=(i,m,p,v)=>{ro(i,(T,D)=>{(m(T,D)?p:v)(T,D)})},zs=(i,m)=>{const p={};return ra(i,m,Ms(p),Ot),p},As=(i,m)=>{const p=[];return ro(i,(v,T)=>{p.push(m(v,T))}),p},gs=i=>As(i,ut),Hr=(i,m)=>xs(i,m)?le.from(i[m]):le.none(),xs=(i,m)=>rs.call(i,m),bo=(i,m)=>xs(i,m)&&i[m]!==void 0&&i[m]!==null,xa=i=>{for(const m in i)if(rs.call(i,m))return!1;return!0},vo=typeof window<"u"?window:Function("return this;")(),ds=(i,m)=>{let p=m??vo;for(let v=0;v<i.length&&p!==void 0&&p!==null;++v)p=p[i[v]];return p},xr=(i,m)=>{const p=i.split(".");return ds(p,m)},ec=(i,m)=>xr(i,m),ca=(i,m)=>{const p=ec(i,m);if(p==null)throw new Error(i+" not available on this browser");return p},yo=Object.getPrototypeOf,Ta=i=>ca("HTMLElement",i),xt=i=>{const m=xr("ownerDocument.defaultView",i);return rt(i)&&(Ta(m).prototype.isPrototypeOf(i)||/^HTML\w*Element$/.test(yo(i).constructor.name))},Eo=8,Pr=9,br=11,uc=1,vc=3,Qo=i=>i.dom.nodeName.toLowerCase(),Fc=i=>i.dom.nodeType,dc=i=>m=>Fc(m)===i,Yo=i=>Fc(i)===Eo||Qo(i)==="#comment",fn=i=>Bs(i)&&xt(i.dom),Bs=dc(uc),qr=dc(vc),Ga=dc(Pr),rl=dc(br),ms=i=>m=>Bs(m)&&Qo(m)===i,rr=(i,m,p)=>{if(So(p)||mo(p)||Xn(p))i.setAttribute(m,p+"");else throw new Error("Attribute value was not simple")},Ps=(i,m,p)=>{rr(i.dom,m,p)},tc=(i,m)=>{const p=i.dom;ro(m,(v,T)=>{rr(p,T,v)})},Ic=(i,m)=>{ro(m,(p,v)=>{p.fold(()=>{se(i,v)},T=>{rr(i.dom,v,T)})})},cr=(i,m)=>{const p=i.dom.getAttribute(m);return p===null?void 0:p},ue=(i,m)=>le.from(cr(i,m)),se=(i,m)=>{i.dom.removeAttribute(m)},Be=i=>Pe(i.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),Ve=(i,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=i,!v.hasChildNodes()||v.childNodes.length>1){const T="HTML does not have a single root node";throw new Error(T)}return jn(v.childNodes[0])},un=(i,m)=>{const v=(m||document).createElement(i);return jn(v)},Rn=(i,m)=>{const v=(m||document).createTextNode(i);return jn(v)},jn=i=>{if(i==null)throw new Error("Node cannot be null or undefined");return{dom:i}},ve={fromHtml:Ve,fromTag:un,fromText:Rn,fromDom:jn,fromPoint:(i,m,p)=>le.from(i.dom.elementFromPoint(m,p)).map(jn)},Gn=(i,m)=>{const p=i.dom;if(p.nodeType!==uc)return!1;{const v=p;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},de=i=>i.nodeType!==uc&&i.nodeType!==Pr&&i.nodeType!==br||i.childElementCount===0,pe=(i,m)=>{const p=m===void 0?document:m.dom;return de(p)?[]:jt(p.querySelectorAll(i),ve.fromDom)},at=(i,m)=>{const p=m===void 0?document:m.dom;return de(p)?le.none():le.from(p.querySelector(i)).map(ve.fromDom)},ft=(i,m)=>i.dom===m.dom,Vt=(i,m)=>{const p=i.dom,v=m.dom;return p===v?!1:p.contains(v)},nn=Gn,rn=i=>ve.fromDom(i.dom.ownerDocument),en=i=>Ga(i)?i:rn(i),Cn=i=>ve.fromDom(en(i).dom.documentElement),Nn=i=>ve.fromDom(en(i).dom.defaultView),zo=i=>le.from(i.dom.parentNode).map(ve.fromDom),cs=i=>le.from(i.dom.parentElement).map(ve.fromDom),Os=(i,m)=>{const p=Go(m)?m:Xt;let v=i.dom;const T=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const D=v.parentNode,I=ve.fromDom(D);if(T.push(I),p(I)===!0)break;v=D}return T},_c=i=>le.from(i.dom.previousSibling).map(ve.fromDom),Lc=i=>le.from(i.dom.nextSibling).map(ve.fromDom),Dn=i=>jt(i.dom.childNodes,ve.fromDom),No=(i,m)=>{const p=i.dom.childNodes;return le.from(p[m]).map(ve.fromDom)},$o=i=>No(i,0),Kr=(i,m)=>{zo(i).each(v=>{v.dom.insertBefore(m.dom,i.dom)})},Yr=(i,m)=>{Lc(i).fold(()=>{zo(i).each(T=>{Ks(T,m)})},v=>{Kr(v,m)})},$r=(i,m)=>{$o(i).fold(()=>{Ks(i,m)},v=>{i.dom.insertBefore(m.dom,v.dom)})},Ks=(i,m)=>{i.dom.appendChild(m.dom)},od=(i,m,p)=>{No(i,p).fold(()=>{Ks(i,m)},v=>{Kr(v,m)})},Ea=(i,m)=>{Kr(i,m),Ks(m,i)},es=(i,m)=>{je(m,(p,v)=>{const T=v===0?i:m[v-1];Yr(T,p)})},yc=(i,m)=>{je(m,p=>{Ks(i,p)})},mc=i=>{i.dom.textContent="",je(Dn(i),m=>{Dr(m)})},Dr=i=>{const m=i.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Ml=i=>{const m=Dn(i);m.length>0&&es(i,m),Dr(i)},Cc=(i,m)=>ve.fromDom(i.dom.cloneNode(m)),Ac=i=>Cc(i,!1),Ba=i=>Cc(i,!0),aa=(i,m)=>{const p=ve.fromTag(m),v=Be(i);return tc(p,v),p},bi=(i,m)=>{const p=aa(i,m),v=Dn(Ba(i));return yc(p,v),p},hl=(i,m)=>{const p=aa(i,m);Yr(i,p);const v=Dn(i);return yc(p,v),Dr(i),p},cl=["tfoot","thead","tbody","colgroup"],la=i=>kn(cl,i),zr=(i,m)=>({rows:i,columns:m}),vi=(i,m)=>({row:i,column:m}),yi=(i,m,p)=>({element:i,rowspan:m,colspan:p}),Ci=(i,m,p,v)=>({element:i,rowspan:m,colspan:p,isNew:v}),Jl=(i,m,p,v,T,D)=>({element:i,rowspan:m,colspan:p,row:v,column:T,isLocked:D}),Fr=(i,m,p)=>({element:i,cells:m,section:p}),ia=(i,m,p,v)=>({element:i,cells:m,section:p,isNew:v}),U=(i,m,p)=>({element:i,isNew:m,isLocked:p}),re=(i,m,p,v)=>({element:i,cells:m,section:p,isNew:v}),Te=(i,m,p,v)=>({startRow:i,startCol:m,finishRow:p,finishCol:v}),Xe=(i,m,p)=>({element:i,colspan:m,column:p}),wt=(i,m)=>({element:i,columns:m}),Yt=i=>rl(i)&&zn(i.dom.host),Co=i=>ve.fromDom(i.dom.getRootNode()),Ts=i=>{const m=Co(i);return Yt(m)?le.some(m):le.none()},Do=i=>ve.fromDom(i.dom.host),Ut=i=>{if(zn(i.target)){const m=ve.fromDom(i.target);if(Bs(m)&&vr(m)&&i.composed&&i.composedPath){const p=i.composedPath();if(p)return ie(p)}}return le.from(i.target)},vr=i=>zn(i.dom.shadowRoot),gn=i=>{const m=qr(i)?i.dom.parentNode:i.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return Ts(ve.fromDom(m)).fold(()=>p.body.contains(m),nt(gn,Do))},Vr=()=>al(ve.fromDom(document)),al=i=>{const m=i.dom.body;if(m==null)throw new Error("Body is not available yet");return ve.fromDom(m)},P=(i,m,p)=>bt(Os(i,p),m),Y=(i,m)=>bt(Dn(i),m),fe=(i,m)=>{let p=[];return je(Dn(i),v=>{m(v)&&(p=p.concat([v])),p=p.concat(fe(v,m))}),p},Oe=(i,m,p)=>P(i,v=>Gn(v,m),p),ot=(i,m)=>Y(i,p=>Gn(p,m)),eo=(i,m)=>pe(m,i);var Vs=(i,m,p,v,T)=>i(p,v)?le.some(p):Go(T)&&T(p)?le.none():m(p,v,T);const fs=(i,m,p)=>{let v=i.dom;const T=Go(p)?p:Xt;for(;v.parentNode;){v=v.parentNode;const D=ve.fromDom(v);if(m(D))return le.some(D);if(T(D))break}return le.none()},yt=(i,m,p)=>Vs((T,D)=>D(T),fs,i,m,p),Us=(i,m)=>{const p=T=>m(ve.fromDom(T));return F(i.dom.childNodes,p).map(ve.fromDom)},fc=(i,m)=>{const p=v=>{for(let T=0;T<v.childNodes.length;T++){const D=ve.fromDom(v.childNodes[T]);if(m(D))return le.some(D);const I=p(v.childNodes[T]);if(I.isSome())return I}return le.none()};return p(i.dom)},Xc=(i,m,p)=>fs(i,v=>Gn(v,m),p),co=(i,m)=>Us(i,p=>Gn(p,m)),Jc=(i,m)=>at(m,i),Tr=(i,m,p)=>Vs((T,D)=>Gn(T,D),Xc,i,m,p),Zi=(i,m,p=oo)=>i.exists(v=>p(v,m)),$s=i=>{const m=[],p=v=>{m.push(v)};for(let v=0;v<i.length;v++)i[v].each(p);return m},Bl=(i,m)=>i!=null?m(i):le.none(),Ld=(i,m)=>i?le.some(m):le.none(),mf=(i,m)=>i.substring(m),ar=(i,m,p)=>m===""||i.length>=m.length&&i.substr(p,p+m.length)===m,Hd=(i,m)=>wc(i,m)?mf(i,m.length):i,Ir=(i,m,p=0,v)=>{const T=i.indexOf(m,p);return T!==-1?Uo(v)?!0:T+m.length<=v:!1},wc=(i,m)=>ar(i,m,0),ll=(i,m)=>ar(i,m,i.length-m.length),hu=(i=>m=>m.replace(i,""))(/^\s+|\s+$/g),q=i=>i.length>0,J=i=>{const m=parseFloat(i);return isNaN(m)?le.none():le.some(m)},Ae=i=>i.style!==void 0&&Go(i.style.getPropertyValue),Ye=(i,m,p)=>{if(!So(p))throw new Error("CSS value must be a string: "+p);Ae(i)&&i.style.setProperty(m,p)},Tn=(i,m)=>{Ae(i)&&i.style.removeProperty(m)},Wn=(i,m,p)=>{const v=i.dom;Ye(v,m,p)},ts=(i,m)=>{const p=i.dom;ro(m,(v,T)=>{Ye(p,T,v)})},Ds=(i,m)=>{const p=i.dom,T=window.getComputedStyle(p).getPropertyValue(m);return T===""&&!gn(i)?Sc(p,m):T},Sc=(i,m)=>Ae(i)?i.style.getPropertyValue(m):"",Qc=(i,m)=>{const p=i.dom,v=Sc(p,m);return le.from(v).filter(T=>T.length>0)},Lr=(i,m)=>{const p=i.dom;Tn(p,m),Zi(ue(i,"style").map(hu),"")&&se(i,"style")},ea=(i,m)=>{const p=i.dom,v=m.dom;Ae(p)&&Ae(v)&&(v.style.cssText=p.style.cssText)},Fs=(i,m,p=0)=>ue(i,m).map(v=>parseInt(v,10)).getOr(p),ua=(i,m)=>Fs(i,m,1),Hc=i=>ms("col")(i)?Fs(i,"span",1)>1:ua(i,"colspan")>1,Er=i=>ua(i,"rowspan")>1,ur=(i,m)=>parseInt(Ds(i,m),10),Ys=oe(10),pu=oe(10),bu=(i,m)=>vu(i,m,Ne),vu=(i,m,p)=>To(Dn(i),v=>Gn(v,m)?p(v)?[v]:[]:vu(v,m,p)),Cm=(i,m,p=Xt)=>{if(p(m))return le.none();if(kn(i,Qo(m)))return le.some(m);const v=T=>Gn(T,"table")||p(T);return Xc(m,i.join(","),v)},yu=(i,m)=>Cm(["td","th"],i,m),Pl=i=>bu(i,"th,td"),wm=i=>Gn(i,"colgroup")?ot(i,"col"):To(yg(i),m=>ot(m,"col")),Xr=(i,m)=>Tr(i,"table",m),Sm=i=>bu(i,"tr"),yg=i=>Xr(i).fold(oe([]),m=>ot(m,"colgroup")),wi=(i,m)=>jt(i,p=>{if(Qo(p)==="colgroup"){const v=jt(wm(p),T=>{const D=Fs(T,"span",1);return yi(T,1,D)});return Fr(p,v,"colgroup")}else{const v=jt(Pl(p),T=>{const D=Fs(T,"rowspan",1),I=Fs(T,"colspan",1);return yi(T,D,I)});return Fr(p,v,m(p))}}),Cg=i=>zo(i).map(m=>{const p=Qo(m);return la(p)?p:"tbody"}).getOr("tbody"),Cu=i=>{const m=Sm(i),v=[...yg(i),...m];return wi(v,Cg)},wg=(i,m)=>wi(i,()=>m),ji=i=>{let m=!1,p;return(...v)=>(m||(m=!0,p=i.apply(null,v)),p)},Sg=(i,m,p,v)=>{const T=i.isiOS()&&/ipad/i.test(p)===!0,D=i.isiOS()&&!T,I=i.isiOS()||i.isAndroid(),Z=I||v("(pointer:coarse)"),Q=T||!D&&I&&v("(min-device-width:768px)"),he=D||I&&!Q,De=m.isSafari()&&i.isiOS()&&/safari/i.test(p)===!1,St=!he&&!Q&&!De;return{isiPad:oe(T),isiPhone:oe(D),isTablet:oe(Q),isPhone:oe(he),isTouch:oe(Z),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:oe(De),isDesktop:oe(St)}},xm=(i,m)=>{for(let p=0;p<i.length;p++){const v=i[p];if(v.test(m))return v}},ff=(i,m)=>{const p=xm(i,m);if(!p)return{major:0,minor:0};const v=T=>Number(m.replace(p,"$"+T));return me(v(1),v(2))},wu=(i,m)=>{const p=String(m).toLowerCase();return i.length===0?gf():ff(i,p)},gf=()=>me(0,0),me=(i,m)=>({major:i,minor:m}),Gi={nu:me,detect:wu,unknown:gf},Si=(i,m)=>Un(m.brands,p=>{const v=p.brand.toLowerCase();return F(i,T=>{var D;return v===((D=T.brand)===null||D===void 0?void 0:D.toLowerCase())}).map(T=>({current:T.name,version:Gi.nu(parseInt(p.version,10),0)}))}),xg=(i,m)=>{const p=String(m).toLowerCase();return F(i,v=>v.search(p))},Yp=(i,m)=>xg(i,m).map(p=>{const v=Gi.detect(p.versionRegexes,m);return{current:p.name,version:v}}),Su=(i,m)=>xg(i,m).map(p=>{const v=Gi.detect(p.versionRegexes,m);return{current:p.name,version:v}}),wo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,nc=i=>m=>Ir(m,i),$l=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:i=>Ir(i,"edge/")&&Ir(i,"chrome")&&Ir(i,"safari")&&Ir(i,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,wo],search:i=>Ir(i,"chrome")&&!Ir(i,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:i=>Ir(i,"msie")||Ir(i,"trident")},{name:"Opera",versionRegexes:[wo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:nc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:nc("firefox")},{name:"Safari",versionRegexes:[wo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:i=>(Ir(i,"safari")||Ir(i,"mobile/"))&&Ir(i,"applewebkit")}],xu=[{name:"Windows",search:nc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:i=>Ir(i,"iphone")||Ir(i,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:nc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:nc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:nc("linux"),versionRegexes:[]},{name:"Solaris",search:nc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:nc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:nc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Tm={browsers:oe($l),oses:oe(xu)},zd="Edge",da="Chromium",Em="IE",qi="Opera",km="Firefox",Ki="Safari",Pa=()=>Tg({current:void 0,version:Gi.unknown()}),Tg=i=>{const m=i.current,p=i.version,v=T=>()=>m===T;return{current:m,version:p,isEdge:v(zd),isChromium:v(da),isIE:v(Em),isOpera:v(qi),isFirefox:v(km),isSafari:v(Ki)}},Vd={unknown:Pa,nu:Tg,edge:oe(zd),chromium:oe(da),ie:oe(Em),opera:oe(qi),firefox:oe(km),safari:oe(Ki)},Oc="Windows",qa="iOS",ka="Android",sd="Linux",Ud="macOS",Eg="Solaris",Wd="FreeBSD",Ql="ChromeOS",_m=()=>Oh({current:void 0,version:Gi.unknown()}),Oh=i=>{const m=i.current,p=i.version,v=T=>()=>m===T;return{current:m,version:p,isWindows:v(Oc),isiOS:v(qa),isAndroid:v(ka),isMacOS:v(Ud),isLinux:v(sd),isSolaris:v(Eg),isFreeBSD:v(Wd),isChromeOS:v(Ql)}},kg={unknown:_m,nu:Oh,windows:oe(Oc),ios:oe(qa),android:oe(ka),linux:oe(sd),macos:oe(Ud),solaris:oe(Eg),freebsd:oe(Wd),chromeos:oe(Ql)},hf={detect:(i,m,p)=>{const v=Tm.browsers(),T=Tm.oses(),D=m.bind(Q=>Si(v,Q)).orThunk(()=>Yp(v,i)).fold(Vd.unknown,Vd.nu),I=Su(T,i).fold(kg.unknown,kg.nu),Z=Sg(I,D,i,p);return{browser:D,os:I,deviceType:Z}}},Zd=i=>window.matchMedia(i).matches;let rd=ji(()=>hf.detect(window.navigator.userAgent,le.from(window.navigator.userAgentData),Zd));const jd=()=>rd(),yr=(i,m)=>{const p=(Z,Q)=>{if(!Xn(Q)&&!Q.match(/^[0-9]+$/))throw new Error(i+".set accepts only positive integer values. Value was "+Q);const he=Z.dom;Ae(he)&&(he.style[i]=Q+"px")},v=Z=>{const Q=m(Z);if(Q<=0||Q===null){const he=Ds(Z,i);return parseFloat(he)||0}return Q},T=v,D=(Z,Q)=>Pe(Q,(he,De)=>{const St=Ds(Z,De),Ht=St===void 0?0:parseInt(St,10);return isNaN(Ht)?he:he+Ht},0);return{set:p,get:v,getOuter:T,aggregate:D,max:(Z,Q,he)=>{const De=D(Z,he);return Q>De?Q-De:0}}},kr=(i,m)=>J(i).getOr(m),pl=(i,m,p)=>kr(Ds(i,m),p),cd=(i,m,p,v)=>{const T=pl(i,`padding-${p}`,0),D=pl(i,`padding-${v}`,0),I=pl(i,`border-${p}-width`,0),Z=pl(i,`border-${v}-width`,0);return m-T-D-I-Z},_g=(i,m)=>{const p=i.dom,v=p.getBoundingClientRect().width||p.offsetWidth;return m==="border-box"?v:cd(i,v,"left","right")},gc=i=>pl(i,"height",i.dom.offsetHeight),hn=i=>pl(i,"width",i.dom.offsetWidth),Yi=i=>_g(i,"content-box"),pf=yr("width",i=>i.dom.offsetWidth),zc=i=>pf.get(i),Es=i=>pf.getOuter(i),Tu=Yi,Ag=hn,Gd=(i,m,p)=>{const v=i.cells,T=v.slice(0,m),D=v.slice(m),I=T.concat(p).concat(D);return hc(i,I)},Dh=(i,m,p)=>Gd(i,m,[p]),uo=(i,m,p)=>{const v=i.cells;v[m]=p},hc=(i,m)=>re(i.element,m,i.section,i.isNew),ad=(i,m)=>{const p=i.cells,v=jt(p,m);return re(i.element,v,i.section,i.isNew)},ta=(i,m)=>i.cells[m],$a=(i,m)=>ta(i,m).element,bl=i=>i.cells.length,Dc=i=>{const m=bs(i,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},_a=(i,m,p)=>{const v=jt(i.cells,p);return re(m(i.element),v,i.section,!0)},ul="data-snooker-locked-cols",bf=i=>ue(i,ul).bind(m=>le.from(m.match(/\d+/g))).map(m=>xe(m,Ne)),Rr=i=>{const m=Pe(Dc(i).rows,(v,T)=>(je(T.cells,(D,I)=>{D.isLocked&&(v[I]=!0)}),v),{}),p=As(m,(v,T)=>parseInt(T,10));return Re(p)},ld=(i,m)=>i+","+m,Ur=(i,m,p)=>le.from(i.access[ld(m,p)]),Eu=(i,m,p)=>{const v=id(i,T=>p(m,T.element));return v.length>0?le.some(v[0]):le.none()},id=(i,m)=>{const p=To(i.all,v=>v.cells);return bt(p,m)},Ws=i=>{const m={};let p=0;return je(i.cells,v=>{const T=v.colspan;Vn(T,D=>{const I=p+D;m[I]=Xe(v.element,T,I)}),p+=T}),m},Fl=i=>{const m={},p=[],T=ie(i).map(Ft=>Ft.element).bind(Xr).bind(bf).getOr({});let D=0,I=0,Z=0;const{pass:Q,fail:he}=bs(i,Ft=>Ft.section==="colgroup");je(he,Ft=>{const Dt=[];je(Ft.cells,an=>{let ht=0;for(;m[ld(Z,ht)]!==void 0;)ht++;const kt=bo(T,ht.toString()),In=Jl(an.element,an.rowspan,an.colspan,Z,ht,kt);for(let qn=0;qn<an.colspan;qn++)for(let bn=0;bn<an.rowspan;bn++){const Mr=Z+bn,Ls=ht+qn,cc=ld(Mr,Ls);m[cc]=In,I=Math.max(I,Ls+1)}Dt.push(In)}),D++,p.push(Fr(Ft.element,Dt,Ft.section)),Z++});const{columns:De,colgroups:St}=_n(Q).map(Ft=>{const Dt=Ws(Ft);return{colgroups:[wt(Ft.element,gs(Dt))],columns:Dt}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:zr(D,I),access:m,all:p,columns:De,colgroups:St}},ko={fromTable:i=>{const m=Cu(i);return Fl(m)},generate:Fl,getAt:Ur,findItem:Eu,filterItems:id,justCells:i=>To(i.all,m=>m.cells),justColumns:i=>gs(i.columns),hasColumns:i=>Bt(i.columns).length>0,getColumnAt:(i,m)=>le.from(i.columns[m])},ud=(i,m=Ne)=>{const p=i.grid,v=Vn(p.columns,ut),T=Vn(p.rows,ut);return jt(v,D=>Am(()=>To(T,he=>ko.getAt(i,he,D).filter(De=>De.column===D).toArray()),he=>he.colspan===1&&m(he.element),()=>ko.getAt(i,0,D)))},Am=(i,m,p)=>{const v=i();return F(v,m).orThunk(()=>le.from(v[0]).orThunk(p)).map(I=>I.element)},vf=i=>{const m=i.grid,p=Vn(m.rows,ut),v=Vn(m.columns,ut);return jt(p,T=>Am(()=>To(v,Q=>ko.getAt(i,T,Q).filter(he=>he.row===T).fold(oe([]),he=>[he])),Q=>Q.rowspan===1,()=>ko.getAt(i,T,0)))},x=(i,m)=>{if(m<0||m>=i.length-1)return le.none();const p=i[m].fold(()=>{const T=Mt(i.slice(0,m));return Un(T,(D,I)=>D.map(Z=>({value:Z,delta:I+1})))},T=>le.some({value:T,delta:0})),v=i[m+1].fold(()=>{const T=i.slice(m+1);return Un(T,(D,I)=>D.map(Z=>({value:Z,delta:I+1})))},T=>le.some({value:T,delta:1}));return p.bind(T=>v.map(D=>{const I=D.delta+T.delta;return Math.abs(D.value-T.value)/I}))},R=(i,m)=>p=>H(p)==="rtl"?m:i,H=i=>Ds(i,"direction")==="rtl"?"rtl":"ltr",ce=yr("height",i=>{const m=i.dom;return gn(i)?m.getBoundingClientRect().height:m.offsetHeight}),be=i=>ce.get(i),mt=i=>ce.getOuter(i),Mn=gc,fo=(i,m)=>({left:i,top:m,translate:(v,T)=>fo(i+v,m+T)}),$n=fo,Bn=i=>{const m=i.getBoundingClientRect();return $n(m.left,m.top)},nr=(i,m)=>i!==void 0?i:m!==void 0?m:0,Jr=i=>{const m=i.dom.ownerDocument,p=m.body,v=m.defaultView,T=m.documentElement;if(p===i.dom)return $n(p.offsetLeft,p.offsetTop);const D=nr(v==null?void 0:v.pageYOffset,T.scrollTop),I=nr(v==null?void 0:v.pageXOffset,T.scrollLeft),Z=nr(T.clientTop,p.clientTop),Q=nr(T.clientLeft,p.clientLeft);return vl(i).translate(I-Q,D-Z)},vl=i=>{const m=i.dom,v=m.ownerDocument.body;return v===m?$n(v.offsetLeft,v.offsetTop):gn(i)?Bn(m):$n(0,0)},Ji=(i,m)=>({row:i,y:m}),Om=(i,m)=>({col:i,x:m}),Og=i=>Jr(i).left+Es(i),Aa=i=>Jr(i).left,Dg=(i,m)=>Om(i,Aa(m)),Rb=(i,m)=>Om(i,Og(m)),Nh=i=>Jr(i).top,ma=(i,m)=>Ji(i,Nh(m)),Mh=(i,m)=>Ji(i,Nh(m)+mt(m)),xc=(i,m,p)=>{if(p.length===0)return[];const v=jt(p.slice(1),(D,I)=>D.map(Z=>i(I,Z))),T=p[p.length-1].map(D=>m(p.length-1,D));return v.concat([T])},Nb=i=>-i,Ya={delta:ut,positions:i=>xc(ma,Mh,i),edge:Nh},yf=R({delta:ut,edge:Aa,positions:i=>xc(Dg,Rb,i)},{delta:Nb,edge:Og,positions:i=>xc(Rb,Dg,i)}),Rg={delta:(i,m)=>yf(m).delta(i,m),positions:(i,m)=>yf(m).positions(i,m),edge:i=>yf(i).edge(i)},Bh={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Xp=(()=>{const i="[0-9]+",p="[eE]"+("[+-]?"+i),v="\\.",T=Z=>`(?:${Z})?`,I=`[+-]?(?:${["Infinity",i+v+T(i)+T(p),v+i+T(p),i+T(p)].join("|")})`;return new RegExp(`^(${I})(.*)$`)})(),xi=(i,m)=>Ke(m,p=>Ke(Bh[p],v=>i===v)),_u=(i,m)=>le.from(Xp.exec(i)).bind(v=>{const T=Number(v[1]),D=v[2];return xi(D,m)?le.some({value:T,unit:D}):le.none()}),qd=/(\d+(\.\d+)?)%/,Wt=/(\d+(\.\d+)?)px|em/,ei=ms("col"),Ph=ms("tr"),Dm=(i,m,p)=>{const v=cs(i).getOrThunk(()=>al(rn(i)));return m(i)/p(v)*100},Ti=(i,m)=>{Wn(i,"width",m+"px")},Ng=(i,m)=>{Wn(i,"width",m+"%")},Kd=(i,m)=>{Wn(i,"height",m+"px")},Rm=i=>{Lr(i,"height")},Mg=i=>Mn(i)+"px",Qi=(i,m,p,v)=>{const T=Xr(i).map(D=>{const I=p(D);return Math.floor(m/100*I)}).getOr(m);return v(i,T),T},Mb=(i,m,p,v)=>{const T=parseFloat(i);return ll(i,"%")&&Qo(m)!=="table"?Qi(m,T,p,v):T},Nr=i=>{const m=Mg(i);return m?Mb(m,i,be,Kd):be(i)},vt=(i,m,p)=>{const v=p(i),T=ua(i,m);return v/T},Fa=(i,m)=>Qc(i,m).orThunk(()=>ue(i,m).map(p=>p+"px")),Au=i=>Fa(i,"width"),Vc=i=>Fa(i,"height"),Cf=i=>Dm(i,zc,Tu),Rc=i=>ei(i)?zc(i):Ag(i),as=i=>Ph(i)?be(i):vt(i,"rowspan",Nr),$h=i=>Au(i).bind(p=>_u(p,["fixed","relative","empty"])),tt=(i,m,p)=>{Wn(i,"width",m+p)},ls=i=>zc(i)+"px",Bg=i=>be(i)+"px",Tc=i=>Dm(i,zc,Tu)+"%",Ia=i=>Au(i).exists(m=>qd.test(m)),Bb=i=>Au(i).exists(m=>Wt.test(m)),Ll=i=>Au(i).isNone(),my=oe(qd),dd=ms("col"),Pb=i=>Au(i).getOrThunk(()=>Rc(i)+"px"),Hl=i=>Vc(i).getOrThunk(()=>as(i)+"px"),os=i=>jt(ko.justColumns(i),m=>le.from(m.element)),Ou=i=>{const m=jd().browser,p=m.isChromium()||m.isFirefox();return dd(i)?p:!0},Nm=(i,m,p,v,T,D)=>i.filter(v).fold(()=>D(x(p,m)),I=>T(I)),Nc=(i,m,p,v)=>{const T=ud(i),D=ko.hasColumns(i)?os(i):T,I=[le.some(Rg.edge(m))].concat(jt(Rg.positions(T,m),Q=>Q.map(he=>he.x))),Z=W(Hc);return jt(D,(Q,he)=>Nm(Q,he,I,Z,De=>{if(Ou(De))return p(De);{const St=Bl(T[he],ut);return Nm(St,he,I,Z,Ht=>v(le.some(zc(Ht))),v)}},v))},Fh=i=>i.map(m=>m+"px").getOr(""),Du=(i,m)=>Nc(i,m,Pb,Fh),Ru=(i,m,p)=>Nc(i,m,Cf,v=>v.fold(()=>p.minCellWidth(),T=>T/p.pixelWidth()*100)),lr=(i,m,p)=>Nc(i,m,Rc,v=>v.getOrThunk(p.minCellWidth)),wf=(i,m,p,v)=>{const T=vf(i),D=jt(i.all,Z=>le.some(Z.element)),I=[le.some(Ya.edge(m))].concat(jt(Ya.positions(T,m),Z=>Z.map(Q=>Q.y)));return jt(D,(Z,Q)=>Nm(Z,Q,I,Ne,p,v))},_e=(i,m)=>wf(i,m,as,p=>p.getOrThunk(pu)),zl=(i,m)=>wf(i,m,Hl,Fh),Sf=(i,m)=>()=>gn(i)?m(i):parseFloat(Qc(i,"width").getOr("0")),La=i=>{const m=Sf(i,zc),p=oe(0);return{width:m,pixelWidth:m,getWidths:(T,D)=>lr(T,i,D),getCellDelta:p,singleColumnWidth:oe([0]),minCellWidth:p,setElementWidth:Ot,adjustTableWidth:Ot,isRelative:!0,label:"none"}},Vl=i=>{const m=Sf(i,Q=>parseFloat(Tc(Q))),p=Sf(i,zc);return{width:m,pixelWidth:p,getWidths:(Q,he)=>Ru(Q,i,he),getCellDelta:Q=>Q/p()*100,singleColumnWidth:(Q,he)=>[100-Q],minCellWidth:()=>Ys()/p()*100,setElementWidth:Ng,adjustTableWidth:Q=>{const he=m(),De=Q/100*he,St=he+De;Ng(i,St)},isRelative:!0,label:"percent"}},oc=i=>{const m=Sf(i,zc);return{width:m,pixelWidth:m,getWidths:(I,Z)=>lr(I,i,Z),getCellDelta:ut,singleColumnWidth:(I,Z)=>[Math.max(Ys(),I+Z)-I],minCellWidth:Ys,setElementWidth:Ti,adjustTableWidth:I=>{const Z=m()+I;Ti(i,Z)},isRelative:!1,label:"pixel"}},Wr=(i,m)=>my().exec(m)!==null?Vl(i):oc(i),w={getTableSize:i=>Au(i).fold(()=>La(i),p=>Wr(i,p)),pixelSize:oc,percentageSize:Vl,noneSize:La},_=(i,m,p,v,T,D)=>({minRow:i,minCol:m,maxRow:p,maxCol:v,allCells:T,selectedCells:D}),L=(i,m)=>{const p=i.grid.columns;let T=i.grid.rows,D=p,I=0,Z=0;const Q=[],he=[];return ro(i.access,De=>{if(Q.push(De),m(De)){he.push(De);const St=De.row,Ht=St+De.rowspan-1,Ft=De.column,Dt=Ft+De.colspan-1;St<T?T=St:Ht>I&&(I=Ht),Ft<D?D=Ft:Dt>Z&&(Z=Dt)}}),_(T,D,I,Z,Q,he)},K=(i,m,p)=>{const v=i[p].element,T=ve.fromTag("td");Ks(T,ve.fromTag("br")),(m?Ks:$r)(v,T)},ye=(i,m,p,v)=>{const T=bt(i,Z=>Z.section!=="colgroup"),D=m.grid.columns,I=m.grid.rows;for(let Z=0;Z<I;Z++){let Q=!1;for(let he=0;he<D;he++)Z<p.minRow||Z>p.maxRow||he<p.minCol||he>p.maxCol||(ko.getAt(m,Z,he).filter(v).isNone()?K(T,Q,Z):Q=!0)}},Je=(i,m,p,v)=>{ro(p.columns,I=>{(I.column<m.minCol||I.column>m.maxCol)&&Dr(I.element)});const T=bt(bu(i,"tr"),I=>I.dom.childElementCount===0);je(T,Dr),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&je(bu(i,"th,td"),I=>{se(I,"rowspan"),se(I,"colspan")}),se(i,ul),se(i,"data-snooker-col-series"),w.getTableSize(i).adjustTableWidth(v)},_t=(i,m,p,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const T=lr(m,i,p),D=Pe(T,(he,De)=>he+De,0),Q=Pe(T.slice(v.minCol,v.maxCol+1),(he,De)=>he+De,0)/D*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(Q)},tn=(i,m)=>{const p=Ht=>Gn(Ht.element,m),v=Ba(i),T=Cu(v),D=w.getTableSize(i),I=ko.generate(T),Z=L(I,p),Q="th:not("+m+"),td:not("+m+")",he=vu(v,"th,td",Ht=>Gn(Ht,Q));je(he,Dr),ye(T,I,Z,p);const De=ko.fromTable(i),St=_t(i,De,D,Z);return Je(v,Z,I,St),v},ao=" ",vs=((i,m)=>{const p=D=>{if(!i(D))throw new Error("Can only get "+m+" value of a "+m+" node");return v(D).getOr("")},v=D=>i(D)?le.from(D.dom.nodeValue):le.none();return{get:p,getOption:v,set:(D,I)=>{if(!i(D))throw new Error("Can only set raw "+m+" value of a "+m+" node");D.dom.nodeValue=I}}})(qr,"text"),ks=i=>vs.get(i),_r=i=>vs.getOption(i),Ul=(i,m)=>vs.set(i,m),fa=i=>Qo(i)==="img"?1:_r(i).fold(()=>Dn(i).length,m=>m.length),eu=i=>_r(i).filter(m=>m.trim().length!==0||m.indexOf(ao)>-1).isSome(),Ei=i=>fn(i)&&cr(i,"contenteditable")==="false",Nu=["img","br"],Pg=i=>eu(i)||kn(Nu,Qo(i))||Ei(i),ti=i=>fc(i,Pg),xf=i=>Ih(i,Pg),Ih=(i,m)=>{const p=v=>{const T=Dn(v);for(let D=T.length-1;D>=0;D--){const I=T[D];if(m(I))return le.some(I);const Z=p(I);if(Z.isSome())return Z}return le.none()};return p(i)},Lh={scope:["row","col"]},Mm=i=>()=>{const m=ve.fromTag("td",i.dom);return Ks(m,ve.fromTag("br",i.dom)),m},Uc=i=>()=>ve.fromTag("col",i.dom),tu=i=>()=>ve.fromTag("colgroup",i.dom),ns=i=>()=>ve.fromTag("tr",i.dom),or=(i,m,p)=>{const v=bi(i,m);return ro(p,(T,D)=>{T===null?se(v,D):Ps(v,D,T)}),v},Xa=i=>i,Qr=(i,m,p)=>ti(i).map(T=>{const D=p.join(","),I=Oe(T,D,Z=>ft(Z,i));return mn(I,(Z,Q)=>{const he=Ac(Q);return Ks(Z,he),he},m)}).getOr(m),Hh=(i,m)=>{ro(Lh,(p,v)=>ue(i,v).filter(T=>kn(p,T)).each(T=>Ps(m,v,T)))},Bm=(i,m,p)=>{const v=(I,Z)=>{ea(I.element,Z),Lr(Z,"height"),I.colspan!==1&&Lr(Z,"width")},T=I=>{const Z=ve.fromTag(Qo(I.element),m.dom),Q=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),he=Q.length>0?Qr(I.element,Z,Q):Z;return Ks(he,ve.fromTag("br")),v(I,Z),Hh(I.element,Z),i(I.element,Z),Z};return{col:I=>{const Z=ve.fromTag(Qo(I.element),m.dom);return v(I,Z),i(I.element,Z),Z},colgroup:tu(m),row:ns(m),cell:T,replace:or,colGap:Uc(m),gap:Mm(m)}},Pm=i=>({col:Uc(i),colgroup:tu(i),row:ns(i),cell:Mm(i),replace:Xa,colGap:Uc(i),gap:Mm(i)}),ni=(i,m)=>{const v=document.createElement("div");return v.innerHTML=i,Dn(ve.fromDom(v))},md=i=>jt(i,ve.fromDom),Yd=i=>m=>m.options.get(i),Mu="100%",Jp=i=>{var m;const p=i.dom,v=(m=p.getParent(i.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:i.getBody();return Tu(ve.fromDom(v))+"px"},Xd=(i,m)=>nu(i)||!Qp(i)?m:Fm(i)?{...m,width:Jp(i)}:{...m,width:Mu},zh=(i,m)=>nu(i)||Qp(i)?m:Fm(i)?{...m,width:Jp(i)}:{...m,width:Mu},$g=i=>{const m=i.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const v=kn(["section","cells","sectionCells","auto"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const v=kn(["preservetable","resizetable"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},tS=i=>le.from(i.options.get("table_clone_elements")),fd=i=>{const m=i.options.get("object_resizing");return kn(m.split(","),"table")},nS=Yd("table_header_type"),gy=Yd("table_column_resizing"),sc=i=>gy(i)==="preservetable",$b=i=>gy(i)==="resizetable",$m=Yd("table_sizing_mode"),Tf=i=>$m(i)==="relative",Fm=i=>$m(i)==="fixed",nu=i=>$m(i)==="responsive",ou=Yd("table_resize_bars"),Qp=Yd("table_style_by_css"),gd=Yd("table_merge_content_on_paste"),Ja=i=>{const m=i.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:zh(i,p)},e1=i=>{const m=i.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:Xd(i,p)},hy=Yd("table_use_colgroups"),t1=i=>Tr(i,"[contenteditable]"),n1=(i,m=!1)=>gn(i)?i.dom.isContentEditable:t1(i).fold(oe(m),p=>py(p)==="true"),py=i=>i.dom.contentEditable,Fg=i=>ve.fromDom(i.getBody()),hd=i=>m=>ft(m,Fg(i)),yl=i=>{se(i,"data-mce-style");const m=p=>se(p,"data-mce-style");je(Pl(i),m),je(wm(i),m),je(Sm(i),m)},su=i=>ve.fromDom(i.selection.getStart()),Ef=i=>i.getBoundingClientRect().width,by=i=>i.getBoundingClientRect().height,Ig=i=>(m,p)=>{const v=m.dom.getStyle(p,i)||m.dom.getAttrib(p,i);return le.from(v).filter(q)},vy=Ig("width"),oS=Ig("height"),sS=i=>/^(\d+(\.\d+)?)%$/.test(i),rS=i=>/^(\d+(\.\d+)?)px$/.test(i),kf=i=>yt(i,ms("table")).exists(n1),Lg=(i,m)=>{const p=m.column,v=m.column+m.colspan-1,T=m.row,D=m.row+m.rowspan-1;return p<=i.finishCol&&v>=i.startCol&&T<=i.finishRow&&D>=i.startRow},xo=(i,m)=>m.column>=i.startCol&&m.column+m.colspan-1<=i.finishCol&&m.row>=i.startRow&&m.row+m.rowspan-1<=i.finishRow,An=(i,m)=>{let p=!0;const v=dt(xo,m);for(let T=m.startRow;T<=m.finishRow;T++)for(let D=m.startCol;D<=m.finishCol;D++)p=p&&ko.getAt(i,T,D).exists(v);return p?le.some(m):le.none()},_f=(i,m)=>Te(Math.min(i.row,m.row),Math.min(i.column,m.column),Math.max(i.row+i.rowspan-1,m.row+m.rowspan-1),Math.max(i.column+i.colspan-1,m.column+m.colspan-1)),o1=(i,m,p)=>{const v=ko.findItem(i,m,ft),T=ko.findItem(i,p,ft);return v.bind(D=>T.map(I=>_f(D,I)))},Fb=(i,m,p)=>o1(i,m,p).bind(v=>An(i,v)),yy=(i,m,p,v)=>ko.findItem(i,m,ft).bind(T=>{const D=p>0?T.row+T.rowspan-1:T.row,I=v>0?T.column+T.colspan-1:T.column;return ko.getAt(i,D+p,I+v).map(Q=>Q.element)}),Jd=(i,m,p)=>o1(i,m,p).map(v=>{const T=ko.filterItems(i,dt(Lg,v));return jt(T,D=>D.element)}),dr=(i,m)=>{const p=(v,T)=>Vt(T,v);return ko.findItem(i,m,p).map(v=>v.element)},cS=(i,m,p)=>Xr(i).bind(v=>{const T=Hg(v);return yy(T,i,m,p)}),Cy=(i,m,p)=>{const v=Hg(i);return Jd(v,m,p)},wy=(i,m,p,v,T)=>{const D=Hg(i),I=ft(i,p)?le.some(m):dr(D,m),Z=ft(i,T)?le.some(v):dr(D,v);return I.bind(Q=>Z.bind(he=>Jd(D,Q,he)))},st=(i,m,p)=>{const v=Hg(i);return Fb(v,m,p)},Hg=ko.fromTable;var Tk=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Af=()=>{const i=he=>ve.fromDom(he.dom.cloneNode(!1)),m=he=>en(he).dom,p=he=>Bs(he)?Qo(he)==="body"?!0:kn(Tk,Qo(he)):!1,v=he=>Bs(he)?kn(["br","img","hr","input"],Qo(he)):!1,T=he=>Bs(he)&&cr(he,"contenteditable")==="false",D=(he,De)=>he.dom.compareDocumentPosition(De.dom),I=(he,De)=>{const St=Be(he);tc(De,St)},Z=he=>{const De=Qo(he);return kn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],De)},Q=he=>Bs(he)?ue(he,"lang"):le.none();return{up:oe({selector:Xc,closest:Tr,predicate:fs,all:Os}),down:oe({selector:eo,predicate:fe}),styles:oe({get:Ds,getRaw:Qc,set:Wn,remove:Lr}),attrs:oe({get:cr,set:Ps,remove:se,copyTo:I}),insert:oe({before:Kr,after:Yr,afterAll:es,append:Ks,appendAll:yc,prepend:$r,wrap:Ea}),remove:oe({unwrap:Ml,remove:Dr}),create:oe({nu:ve.fromTag,clone:i,text:ve.fromText}),query:oe({comparePosition:D,prevSibling:_c,nextSibling:Lc}),property:oe({children:Dn,name:Qo,parent:zo,document:m,isText:qr,isComment:Yo,isElement:Bs,isSpecial:Z,getLanguage:Q,getText:ks,setText:Ul,isBoundary:p,isEmptyTag:v,isNonEditable:T}),eq:ft,is:nn}};const Ek=(i,m,p,v)=>{const T=p[0],D=p.slice(1);return v(i,m,T,D)},zg=(i,m,p)=>p.length>0?Ek(i,m,p,Sy):le.none(),Sy=(i,m,p,v)=>{const T=m(i,p);return mn(v,(D,I)=>{const Z=m(i,I);return pd(i,D,Z)},T)},pd=(i,m,p)=>m.bind(v=>p.filter(dt(i.eq,v))),xy=(i,m)=>dt(i.eq,m),Vh=(i,m,p,v=Xt)=>{const T=[m].concat(i.up().all(m)),D=[p].concat(i.up().all(p)),I=De=>Ss(De,v).fold(()=>De,Ht=>De.slice(0,Ht+1)),Z=I(T),Q=I(D),he=F(Z,De=>Ke(Q,xy(i,De)));return{firstpath:Z,secondpath:Q,shared:he}},Cr=zg,Qd=Vh,Ty=Af(),Bu=(i,m)=>Cr(Ty,(p,v)=>i(v),m),Ey=(i,m,p)=>Qd(Ty,i,m,p),s1=i=>Xc(i,"table"),Uh=(i,m,p)=>{const v=T=>D=>p!==void 0&&p(D)||ft(D,T);return ft(i,m)?le.some({boxes:le.some([i]),start:i,finish:m}):s1(i).bind(T=>s1(m).bind(D=>{if(ft(T,D))return le.some({boxes:Cy(T,i,m),start:i,finish:m});if(Vt(T,D)){const I=Oe(m,"td,th",v(T)),Z=I.length>0?I[I.length-1]:m;return le.some({boxes:wy(T,i,T,m,D),start:i,finish:Z})}else if(Vt(D,T)){const I=Oe(i,"td,th",v(D)),Z=I.length>0?I[I.length-1]:i;return le.some({boxes:wy(D,i,T,m,D),start:i,finish:Z})}else return Ey(i,m).shared.bind(I=>Tr(I,"table",p).bind(Z=>{const Q=Oe(m,"td,th",v(Z)),he=Q.length>0?Q[Q.length-1]:m,De=Oe(i,"td,th",v(Z)),St=De.length>0?De[De.length-1]:i;return le.some({boxes:wy(Z,i,T,m,D),start:St,finish:he})}))}))},r1=(i,m)=>{const p=eo(i,m);return p.length>0?le.some(p):le.none()},oi=(i,m)=>F(i,p=>Gn(p,m)),aS=(i,m,p)=>Jc(i,m).bind(v=>Jc(i,p).bind(T=>Bu(s1,[v,T]).map(D=>({first:v,last:T,table:D})))),c1=(i,m)=>Xc(i,"table").bind(p=>Jc(p,m).bind(v=>Uh(v,i).bind(T=>T.boxes.map(D=>({boxes:D,start:T.start,finish:T.finish}))))),ky=(i,m,p,v,T)=>oi(i,T).bind(D=>cS(D,m,p).bind(I=>c1(I,v))),Of=(i,m)=>r1(i,m),_y=(i,m,p)=>aS(i,m,p).bind(v=>{const T=Q=>ft(i,Q),D="thead,tfoot,tbody,table",I=Xc(v.first,D,T),Z=Xc(v.last,D,T);return I.bind(Q=>Z.bind(he=>ft(Q,he)?st(v.table,v.first,v.last):le.none()))}),lS=ut,Ay=i=>{const m=(v,T)=>ue(v,T).exists(D=>parseInt(D,10)>1),p=v=>m(v,"rowspan")||m(v,"colspan");return i.length>0&&it(i,p)?le.some(i):le.none()},iS=(i,m,p)=>m.length<=1?le.none():_y(i,p.firstSelectedSelector,p.lastSelectedSelector).map(v=>({bounds:v,cells:m})),dl="data-mce-selected",si="td["+dl+"],th["+dl+"]",Tt="["+dl+"]",Ib="data-mce-first-selected",Oa="td["+Ib+"],th["+Ib+"]",Lb="data-mce-last-selected",uS="td["+Lb+"],th["+Lb+"]",wr=Tt,Im={selected:dl,selectedSelector:si,firstSelected:Ib,firstSelectedSelector:Oa,lastSelected:Lb,lastSelectedSelector:uS},Hb=(i,m,p)=>({element:p,mergable:iS(m,i,Im),unmergable:Ay(i),selection:lS(i)}),kk=(i,m,p)=>({element:i,clipboard:m,generators:p}),Lm=(i,m,p,v)=>({selection:lS(i),clipboard:p,generators:v}),zb=i=>Xr(i).bind(m=>Of(m,Im.firstSelectedSelector)).fold(oe(i),m=>m[0]),bd=i=>(m,p)=>{const v=Qo(m),T=v==="col"||v==="colgroup"?zb(m):m;return Tr(T,i,p)},dS=bd("th,td,caption"),Oy=bd("th,td"),mr=i=>md(i.model.table.getSelectedCells()),Wh=i=>bt(mr(i),m=>Gn(m,Im.selectedSelector)),Zr=i=>Xr(i[0]).map(m=>{const p=tn(m,wr);return yl(p),[p]}),mS=(i,m)=>jt(m,p=>i.selection.serializer.serialize(p.dom,{})).join(""),ri=i=>jt(i,m=>m.dom.innerText).join(""),Zh=(i,m)=>{i.on("BeforeGetContent",p=>{const v=T=>{p.preventDefault(),Zr(T).each(D=>{p.content=p.format==="text"?ri(D):mS(i,D)})};if(p.selection===!0){const T=Wh(i);T.length>=1&&v(T)}}),i.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const v=mr(i);ie(v).each(T=>{Xr(T).each(D=>{const I=bt(ni(p.content),Q=>Qo(Q)!=="meta"),Z=ms("table");if(gd(i)&&I.length===1&&Z(I[0])){p.preventDefault();const Q=ve.fromDom(i.getDoc()),he=Pm(Q),De=kk(T,I[0],he);m.pasteCells(D,De).each(()=>{i.focus()})}})})}})},ci=(i,m)=>({element:i,offset:m}),_k=(i,m,p)=>i.property().isText(m)&&i.property().getText(m).trim().length===0||i.property().isComment(m)?p(m).bind(v=>_k(i,v,p).orThunk(()=>le.some(v))):le.none(),Ak=(i,m)=>i.property().isText(m)?i.property().getText(m).length:i.property().children(m).length,Ok=(i,m)=>{const p=_k(i,m,i.query().prevSibling).getOr(m);if(i.property().isText(p))return ci(p,Ak(i,p));const v=i.property().children(p);return v.length>0?Ok(i,v[v.length-1]):ci(p,Ak(i,p))},Dk=Ok,ga=Af(),Cl=i=>Dk(ga,i),a1=(i,m)=>{Hc(i)||$h(i).each(v=>{const T=v.value/2;tt(i,T,v.unit),tt(m,T,v.unit)})},Df=i=>jt(i,oe(0)),Dy=(i,m,p,v,T)=>T(i.slice(0,m)).concat(v).concat(T(i.slice(p))),jh=i=>(m,p,v,T)=>{if(i(v)){const D=Math.max(T,m[p]-Math.abs(v)),I=Math.abs(D-m[p]);return v>=0?I:-I}else return v},em=jh(i=>i<0),Gh=jh(Ne),Vg=()=>{const i=(Z,Q,he,De,St)=>{const Ht=em(Z,Q,De,St);return Dy(Z,Q,he+1,[Ht,0],Df)},m=(Z,Q,he,De)=>{const St=(100+he)/100,Ht=Math.max(De,(Z[Q]+he)/St);return jt(Z,(Ft,Dt)=>(Dt===Q?Ht:Ft/St)-Ft)},p=(Z,Q,he,De,St,Ht)=>Ht?m(Z,Q,De,St):i(Z,Q,he,De,St);return{resizeTable:(Z,Q)=>Z(Q),clampTableDelta:em,calcLeftEdgeDeltas:p,calcMiddleDeltas:(Z,Q,he,De,St,Ht,Ft)=>p(Z,he,De,St,Ht,Ft),calcRightEdgeDeltas:(Z,Q,he,De,St,Ht)=>{if(Ht)return m(Z,he,De,St);{const Ft=em(Z,he,De,St);return Df(Z.slice(0,he)).concat([Ft])}},calcRedestributedWidths:(Z,Q,he,De)=>{if(De){const Ht=(Q+he)/Q,Ft=jt(Z,Dt=>Dt/Ht);return{delta:Ht*100-100,newSizes:Ft}}else return{delta:he,newSizes:Z}}}},Rf=()=>{const i=(I,Z,Q,he,De)=>{const St=he>=0?Q:Z,Ht=Gh(I,St,he,De);return Dy(I,Z,Q+1,[Ht,-Ht],Df)};return{resizeTable:(I,Z,Q)=>{Q&&I(Z)},clampTableDelta:(I,Z,Q,he,De)=>{if(De){if(Q>=0)return Q;{const St=Pe(I,(Ht,Ft)=>Ht+Ft-he,0);return Math.max(-St,Q)}}else return em(I,Z,Q,he)},calcLeftEdgeDeltas:i,calcMiddleDeltas:(I,Z,Q,he,De,St)=>i(I,Q,he,De,St),calcRightEdgeDeltas:(I,Z,Q,he,De,St)=>{if(St)return Df(I);{const Ht=he/I.length;return jt(I,oe(Ht))}},calcRedestributedWidths:(I,Z,Q,he)=>({delta:0,newSizes:I})}},tm=i=>ko.fromTable(i).grid,Ug=ms("th"),Wg=i=>it(i,m=>Ug(m.element)),Rk=(i,m)=>i&&m?"sectionCells":i?"section":"cells",Ry=i=>{const m=i.section==="thead",p=Zi(Vb(i.cells),"th");return i.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:Rk(m,p)}:{type:"body"}},Vb=i=>{const m=bt(i,p=>Ug(p.element));return m.length===0?le.some("td"):m.length===i.length?le.some("th"):le.none()},fS=i=>{const m=jt(i,T=>Ry(T).type),p=kn(m,"header"),v=kn(m,"footer");if(!p&&!v)return le.some("body");{const T=kn(m,"body");return p&&!T&&!v?le.some("header"):!p&&!T&&v?le.some("footer"):le.none()}},Ny=i=>Un(i.all,m=>{const p=Ry(m);return p.type==="header"?le.from(p.subType):le.none()}),Ub=(i,m,p)=>U(p(i.element,m),!0,i.isLocked),My=(i,m)=>i.section!==m?re(i.element,i.cells,m,i.isNew):i,By=()=>({transformRow:My,transformCell:(i,m,p)=>{const v=p(i.element,m),T=Qo(v)!=="td"?hl(v,"td"):v;return U(T,i.isNew,i.isLocked)}}),Py=()=>({transformRow:My,transformCell:Ub}),l1=()=>({transformRow:(i,m)=>My(i,m==="thead"?"tbody":m),transformCell:Ub}),i1={getTableSectionType:(i,m)=>{const p=ko.fromTable(i);switch(Ny(p).getOr(m)){case"section":return By();case"sectionCells":return Py();case"cells":return l1()}},section:By,sectionCells:Py,cells:l1,fallback:()=>({transformRow:ut,transformCell:Ub})},qh=(i,m,p,v)=>{p===v?se(i,m):Ps(i,m,p)},Nf=(i,m,p)=>{_n(ot(i,m)).fold(()=>$r(i,p),v=>Yr(v,p))},$y=(i,m)=>{const p=co(i,m).getOrThunk(()=>{const v=ve.fromTag(m,rn(i).dom);return m==="thead"?Nf(i,"caption,colgroup",v):m==="colgroup"?Nf(i,"caption",v):Ks(i,v),v});return mc(p),p},Fy=(i,m)=>{const p=[],v=[],T=Ft=>jt(Ft,Dt=>{Dt.isNew&&p.push(Dt.element);const an=Dt.element;return mc(an),je(Dt.cells,ht=>{ht.isNew&&v.push(ht.element),qh(ht.element,"colspan",ht.colspan,1),qh(ht.element,"rowspan",ht.rowspan,1),Ks(an,ht.element)}),an}),D=Ft=>To(Ft,Dt=>jt(Dt.cells,an=>(qh(an.element,"span",an.colspan,1),an.element))),I=(Ft,Dt)=>{const an=$y(i,Dt),kt=(Dt==="colgroup"?D:T)(Ft);yc(an,kt)},Z=Ft=>{co(i,Ft).each(Dr)},Q=(Ft,Dt)=>{Ft.length>0?I(Ft,Dt):Z(Dt)},he=[],De=[],St=[],Ht=[];return je(m,Ft=>{switch(Ft.section){case"thead":he.push(Ft);break;case"tbody":De.push(Ft);break;case"tfoot":St.push(Ft);break;case"colgroup":Ht.push(Ft);break}}),Q(Ht,"colgroup"),Q(he,"thead"),Q(De,"tbody"),Q(St,"tfoot"),{newRows:p,newCells:v}},gS=i=>jt(i,m=>{const p=Ac(m.element);return je(m.cells,v=>{const T=Ba(v.element);qh(T,"colspan",v.colspan,1),qh(T,"rowspan",v.rowspan,1),Ks(p,T)}),p}),Iy=(i,m)=>jt(i,p=>ta(p,m)),Zg=(i,m)=>i[m],Nk=(i,m)=>{if(i.length===0)return 0;const p=i[0];return Ss(i,T=>!m(p.element,T.element)).getOr(i.length)},Ly=(i,m,p,v)=>{const T=Zg(i,m),D=T.section==="colgroup",I=Nk(T.cells.slice(p),v),Z=D?1:Nk(Iy(i.slice(m),p),v);return{colspan:I,rowspan:Z}},Mf=(i,m)=>{const p=jt(i,T=>jt(T.cells,Xt)),v=(T,D,I,Z)=>{for(let Q=T;Q<T+I;Q++)for(let he=D;he<D+Z;he++)p[Q][he]=!0};return jt(i,(T,D)=>{const I=To(T.cells,(Z,Q)=>{if(p[D][Q]===!1){const he=Ly(i,D,Q,m);return v(D,Q,he.rowspan,he.colspan),[Ci(Z.element,he.rowspan,he.colspan,Z.isNew)]}else return[]});return ia(T.element,I,T.section,T.isNew)})},Kh=(i,m,p)=>{const v=[];je(i.colgroups,T=>{const D=[];for(let I=0;I<i.grid.columns;I++){const Z=ko.getColumnAt(i,I).map(Q=>U(Q.element,p,!1)).getOrThunk(()=>U(m.colGap(),!0,!1));D.push(Z)}v.push(re(T.element,D,"colgroup",p))});for(let T=0;T<i.grid.rows;T++){const D=[];for(let Q=0;Q<i.grid.columns;Q++){const he=ko.getAt(i,T,Q).map(De=>U(De.element,p,De.isLocked)).getOrThunk(()=>U(m.gap(),!0,!1));D.push(he)}const I=i.all[T],Z=re(I.element,D,I.section,p);v.push(Z)}return v},Hy=(i,m)=>Kh(i,m,!1),Zb=i=>Mf(i,ft),zy=(i,m)=>Un(i.all,p=>F(p.cells,v=>ft(m,v.element))),hS=(i,m,p)=>{const v=jt(m.selection,D=>yu(D).bind(I=>zy(i,I)).filter(p)),T=$s(v);return Ld(T.length>0,T)},Qa=(i,m,p,v,T)=>(D,I,Z,Q)=>{const he=ko.fromTable(D),De=le.from(Q==null?void 0:Q.section).getOrThunk(i1.fallback);return m(he,I).map(Ht=>{const Ft=Hy(he,Z),Dt=i(Ft,Ht,ft,T(Z),De),an=Rr(Dt.grid),ht=Zb(Dt.grid);return{info:Ht,grid:ht,cursor:Dt.cursor,lockedColumns:an}}).bind(Ht=>{const Ft=Fy(D,Ht.grid),Dt=le.from(Q==null?void 0:Q.sizing).getOrThunk(()=>w.getTableSize(D)),an=le.from(Q==null?void 0:Q.resize).getOrThunk(Rf);return p(D,Ht.grid,Ht.info,{sizing:Dt,resize:an,section:De}),v(D),se(D,ul),Ht.lockedColumns.length>0&&Ps(D,ul,Ht.lockedColumns.join(",")),le.some({cursor:Ht.cursor,newRows:Ft.newRows,newCells:Ft.newCells})})},iR=(i,m)=>yu(m.element).bind(p=>zy(i,p).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),Vy=(i,m)=>hS(i,m,Ne).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),u1=(i,m)=>m.mergable,Mk=(i,m)=>m.unmergable,ai=(i,m)=>hS(i,m,Ne),Pu=(i,m)=>hS(i,m,p=>!p.isLocked),Bf=(i,m)=>zy(i,m).exists(p=>!p.isLocked),jg=(i,m)=>it(m,p=>Bf(i,p)),pS=(i,m)=>u1(i,m).filter(p=>jg(i,p.cells)),d1=(i,m)=>Mk(i,m).filter(p=>jg(i,p)),jb=(i,m,p,v)=>{const T=Dc(i).rows;if(T.length===0)return i;for(let D=m.startRow;D<=m.finishRow;D++)for(let I=m.startCol;I<=m.finishCol;I++){const Z=T[D],Q=ta(Z,I).isLocked;uo(Z,I,U(v(),!1,Q))}return i},bS=(i,m,p,v)=>{const T=Dc(i).rows;let D=!0;for(let I=0;I<T.length;I++)for(let Z=0;Z<bl(T[0]);Z++){const Q=T[I],he=ta(Q,Z),De=he.element,St=p(De,m);St&&!D?uo(Q,Z,U(v(),!0,he.isLocked)):St&&(D=!1)}return i},m1=(i,m)=>Pe(i,(p,v)=>Ke(p,T=>m(T.element,v.element))?p:p.concat([v]),[]),Gg=(i,m,p,v)=>(m>0&&m<i[0].cells.length&&je(i,T=>{const D=T.cells[m-1];let I=0;const Z=v();for(;T.cells.length>m+I&&p(D.element,T.cells[m+I].element);)uo(T,m+I,U(Z,!0,T.cells[m+I].isLocked)),I++}),i),ru=(i,m,p,v)=>{const T=Dc(i).rows;if(m>0&&m<T.length){const D=T[m-1].cells,I=m1(D,p);je(I,Z=>{let Q=le.none();for(let he=m;he<T.length;he++)for(let De=0;De<bl(T[0]);De++){const St=T[he],Ht=ta(St,De);p(Ht.element,Z.element)&&(Q.isNone()&&(Q=le.some(v())),Q.each(Dt=>{uo(St,De,U(Dt,!0,Ht.isLocked))}))}})}return i},Gb=i=>{const m=D=>D(i),p=oe(i),v=()=>T,T={tag:!0,inner:i,fold:(D,I)=>I(i),isValue:Ne,isError:Xt,map:D=>wl.value(D(i)),mapError:v,bind:m,exists:m,forall:m,getOr:p,or:v,getOrThunk:p,orThunk:v,getOrDie:p,each:D=>{D(i)},toOptional:()=>le.some(i)};return T},na=i=>{const m=()=>p,p={tag:!1,inner:i,fold:(v,T)=>v(i),isValue:Xt,isError:Ne,map:m,mapError:v=>wl.error(v(i)),bind:m,exists:Xt,forall:Ne,getOr:ut,or:ut,getOrThunk:sn,orThunk:sn,getOrDie:Rt(String(i)),each:Ot,toOptional:le.none};return p},wl={value:Gb,error:na,fromOption:(i,m)=>i.fold(()=>na(m),Gb)},Bk=(i,m,p)=>{if(i.row>=m.length||i.column>bl(m[0]))return wl.error("invalid start address out of table bounds, row: "+i.row+", column: "+i.column);const v=m.slice(i.row),T=v[0].cells.slice(i.column),D=bl(p[0]),I=p.length;return wl.value({rowDelta:v.length-I,colDelta:T.length-D})},vS=(i,m)=>{const p=bl(i[0]),v=bl(m[0]);return{rowDelta:0,colDelta:p-v}},Hm=(i,m)=>{const p=i.length,v=m.length;return{rowDelta:p-v,colDelta:0}},Pf=(i,m,p,v)=>{const T=m.section==="colgroup"?p.col:p.cell;return Vn(i,D=>U(T(),!0,v(D)))},zm=(i,m,p,v)=>{const T=i[i.length-1];return i.concat(Vn(m,()=>{const D=T.section==="colgroup"?p.colgroup:p.row,I=_a(T,D,ut),Z=Pf(I.cells.length,I,p,Q=>xs(v,Q.toString()));return hc(I,Z)}))},li=(i,m,p,v)=>jt(i,T=>{const D=Pf(m,T,p,Xt);return Gd(T,v,D)}),yS=(i,m,p)=>jt(i,v=>Pe(p,(T,D)=>{const I=Pf(1,v,m,Ne)[0];return Dh(T,D,I)},v)),f1=(i,m,p)=>{const v=m.colDelta<0?li:ut,T=m.rowDelta<0?zm:ut,D=Rr(i),I=bl(i[0]),Z=Ke(D,De=>De===I-1),Q=v(i,Math.abs(m.colDelta),p,Z?I-1:I),he=Rr(Q);return T(Q,Math.abs(m.rowDelta),p,xe(he,Ne))},Wy=(i,m,p,v)=>{const T=ta(i[m],p),D=dt(v,T.element),I=i[m];return i.length>1&&bl(I)>1&&(p>0&&D($a(I,p-1))||p<I.cells.length-1&&D($a(I,p+1))||m>0&&D($a(i[m-1],p))||m<i.length-1&&D($a(i[m+1],p)))},Yh=(i,m,p,v,T,D)=>{const I=i.row,Z=i.column,Q=p.length,he=bl(p[0]),De=I+Q,St=Z+he+D.length,Ht=xe(D,Ne);for(let Ft=I;Ft<De;Ft++){let Dt=0;for(let an=Z;an<St;an++){if(Ht[an]){Dt++;continue}Wy(m,Ft,an,T)&&bS(m,$a(m[Ft],an),T,v.cell);const ht=an-Z-Dt,kt=ta(p[Ft-I],ht),In=kt.element,qn=v.replace(In);uo(m[Ft],an,U(qn,!0,kt.isLocked))}}return m},qg=(i,m,p)=>{const v=bl(m[0]),T=Dc(m).cols.length+i.row,D=Vn(v-i.column,Z=>Z+i.column),I=F(D,Z=>it(p,Q=>Q!==Z)).getOr(v-1);return{row:T,column:I}},$f=(i,m,p)=>bt(p,v=>v>=i.column&&v<=bl(m[0])+i.column),Zo=(i,m,p,v,T)=>{const D=Rr(m),I=qg(i,m,D),Z=Dc(p).rows,Q=$f(I,Z,D);return Bk(I,m,Z).map(De=>{const St={...De,colDelta:De.colDelta-Q.length},Ht=f1(m,St,v),Ft=Rr(Ht),Dt=$f(I,Z,Ft);return Yh(I,Ht,Z,v,T,Dt)})},Wl=(i,m,p,v,T)=>{Gg(m,i,T,v.cell);const D=Hm(p,m),I=f1(p,D,v),Z=Hm(m,I),Q=f1(m,Z,v);return jt(Q,(he,De)=>Gd(he,i,I[De].cells))},nm=(i,m,p,v,T)=>{ru(m,i,T,v.cell);const D=Rr(m),I=vS(m,p),Z={...I,colDelta:I.colDelta-D.length},Q=f1(m,Z,v),{cols:he,rows:De}=Dc(Q),St=Rr(Q),Ht=vS(p,m),Ft={...Ht,colDelta:Ht.colDelta+St.length},Dt=yS(p,v,St),an=f1(Dt,Ft,v);return[...he,...De.slice(0,i),...an,...De.slice(i,De.length)]},qb=(i,m,p,v)=>_a(i,T=>v(T,p),m),Gs=(i,m,p,v,T)=>{const{rows:D,cols:I}=Dc(i),Z=D.slice(0,m),Q=D.slice(m),he=qb(D[p],(De,St)=>m>0&&m<D.length&&v($a(D[m-1],St),$a(D[m],St))?ta(D[m],St):U(T(De.element,v),!0,De.isLocked),v,T);return[...I,...Z,he,...Q]},Ff=(i,m,p,v,T,D,I)=>{if(p==="colgroup"||!v){const Z=ta(i,T);return U(I(Z.element,D),!0,!1)}else return ta(i,m)},Kb=(i,m,p,v,T)=>jt(i,D=>{const I=m>0&&m<bl(D)&&v($a(D,m-1),$a(D,m)),Z=Ff(D,m,D.section,I,p,v,T);return Dh(D,m,Z)}),Pk=(i,m)=>To(i,p=>{const v=p.cells,T=mn(m,(D,I)=>I>=0&&I<D.length?D.slice(0,I).concat(D.slice(I+1)):D,v);return T.length>0?[re(p.element,T,p.section,p.isNew)]:[]}),$k=(i,m,p)=>{const{rows:v,cols:T}=Dc(i);return[...T,...v.slice(0,m),...v.slice(p+1)]},g1=(i,m,p,v)=>$a(i[m],p)!==void 0&&m>0&&v($a(i[m-1],p),$a(i[m],p)),fr=(i,m,p)=>m>0&&p($a(i,m-1),$a(i,m)),CS=(i,m,p,v)=>g1(i,m,p,v)||fr(i[m],p,v),Fk=(i,m)=>it(m,ut)&&Wg(i.cells)?Ne:(v,T,D)=>!(Qo(v.element)==="th"&&m[D]),wS=(i,m)=>it(m,ut)&&Wg(i)?Ne:(v,T,D)=>!(Qo(v.element)==="th"&&m[T]),Kg=(i,m,p,v)=>{const T=I=>I==="row"?Er(m):Hc(m),D=I=>T(I)?`${I}group`:I;return i?Ug(m)?D(p):null:v&&Ug(m)?D(p==="row"?"col":"row"):null},ii=(i,m)=>(p,v,T)=>le.some(Kg(i,p.element,"col",m[T])),If=(i,m)=>(p,v)=>le.some(Kg(i,p.element,"row",m[v])),Zy=(i,m,p)=>U(p(i.element,m),!0,i.isLocked),Jt=(i,m,p,v,T,D,I)=>{const Z=Q=>Ke(m,he=>p(Q.element,he.element));return jt(i,(Q,he)=>ad(Q,(De,St)=>{if(Z(De)){const Ht=I(De,he,St)?T(De,p,v):De;return D(Ht,he,St).each(Ft=>{Ic(Ht.element,{scope:le.from(Ft)})}),Ht}else return De}))},jy=(i,m,p)=>To(i,(v,T)=>CS(i,T,m,p)?[]:[ta(v,m)]),Ik=(i,m,p)=>{const v=i[m];return To(v.cells,(T,D)=>CS(i,m,D,p)?[]:[T])},SS=(i,m,p,v,T)=>{const D=Dc(i).rows,I=To(m,De=>jy(D,De,v)),Z=jt(D,De=>Wg(De.cells)),Q=wS(I,Z),he=If(p,Z);return Jt(i,I,v,T,Zy,he,Q)},Gy=(i,m,p,v,T,D,I)=>{const{cols:Z,rows:Q}=Dc(i),he=Q[m[0]],De=To(m,ht=>Ik(Q,ht,T)),St=jt(he.cells,(ht,kt)=>Wg(jy(Q,kt,T))),Ht=[...Q];je(m,ht=>{Ht[ht]=I.transformRow(Q[ht],p)});const Ft=[...Z,...Ht],Dt=Fk(he,St),an=ii(v,St);return Jt(Ft,De,T,D,I.transformCell,an,Dt)},xS=(i,m,p,v)=>{const T=Dc(i).rows,D=jt(m,I=>ta(T[I.row],I.column));return Jt(i,D,p,v,Zy,le.none,Ne)},vd={generate:i=>{if(!Hn(i))throw new Error("cases must be an array");if(i.length===0)throw new Error("there must be at least one case");const m=[],p={};return je(i,(v,T)=>{const D=Bt(v);if(D.length!==1)throw new Error("one and only one name per case");const I=D[0],Z=v[I];if(p[I]!==void 0)throw new Error("duplicate key detected:"+I);if(I==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Hn(Z))throw new Error("case arguments must be an array");m.push(I),p[I]=(...Q)=>{const he=Q.length;if(he!==Z.length)throw new Error("Wrong number of arguments to case "+I+". Expected "+Z.length+" ("+Z+"), got "+he);return{fold:(...St)=>{if(St.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+St.length);return St[T].apply(null,Q)},match:St=>{const Ht=Bt(St);if(m.length!==Ht.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Ht.join(","));if(!it(m,Dt=>kn(Ht,Dt)))throw new Error("Not all branches were specified when using match. Specified: "+Ht.join(", ")+`
Required: `+m.join(", "));return St[I].apply(null,Q)},log:St=>{}}}}),p}},Yg={...vd.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},Yb=(i,m)=>i.length===0?Yg.none():i.length===1?Yg.only(0):m===0?Yg.left(0,1):m===i.length-1?Yg.right(m-1,m):m>0&&m<i.length-1?Yg.middle(m-1,m,m+1):Yg.none(),Lk=(i,m,p,v,T)=>{const D=i.slice(0),I=Yb(i,m),Z=oe(jt(D,oe(0))),Q=Ht=>v.singleColumnWidth(D[Ht],p),he=(Ht,Ft)=>T.calcLeftEdgeDeltas(D,Ht,Ft,p,v.minCellWidth(),v.isRelative),De=(Ht,Ft,Dt)=>T.calcMiddleDeltas(D,Ht,Ft,Dt,p,v.minCellWidth(),v.isRelative),St=(Ht,Ft)=>T.calcRightEdgeDeltas(D,Ht,Ft,p,v.minCellWidth(),v.isRelative);return I.fold(Z,Q,he,De,St)},ki=(i,m,p)=>{let v=0;for(let T=i;T<m;T++)v+=p[T]!==void 0?p[T]:0;return v},ES=(i,m)=>{const p=ko.justCells(i);return jt(p,v=>{const T=ki(v.column,v.column+v.colspan,m);return{element:v.element,width:T,colspan:v.colspan}})},qy=(i,m)=>{const p=ko.justColumns(i);return jt(p,(v,T)=>({element:v.element,width:m[T],colspan:v.colspan}))},kS=(i,m)=>jt(i.all,(p,v)=>({element:p.element,height:m[v]})),Xb=i=>mn(i,(m,p)=>m+p,0),Hk=(i,m)=>ko.hasColumns(i)?qy(i,m):ES(i,m),Jb=(i,m,p)=>{const v=Hk(i,m);je(v,T=>{p.setElementWidth(T.element,T.width)})},Ky=(i,m,p,v,T)=>{const D=ko.fromTable(i),I=T.getCellDelta(m),Z=T.getWidths(D,T),Q=p===D.grid.columns-1,he=v.clampTableDelta(Z,p,I,T.minCellWidth(),Q),De=Lk(Z,p,he,T,v),St=jt(De,(Ht,Ft)=>Ht+Z[Ft]);Jb(D,St,T),v.resizeTable(T.adjustTableWidth,he,Q)},Yy=(i,m,p)=>{const v=ko.fromTable(i),T=_e(v,i),D=jt(T,(Q,he)=>p===he?Math.max(m+Q,pu()):Q),I=kS(v,D);je(I,Q=>{Kd(Q.element,Q.height)}),je(ko.justCells(v),Q=>{Rm(Q.element)});const Z=Xb(D);Kd(i,Z)},_S=(i,m,p,v,T)=>{const D=ko.generate(m),I=v.getWidths(D,v),Z=v.pixelWidth(),{newSizes:Q,delta:he}=T.calcRedestributedWidths(I,Z,p.pixelDelta,v.isRelative);Jb(D,Q,v),v.adjustTableWidth(he)},zk=(i,m,p,v)=>{const T=ko.generate(m),D=v.getWidths(T,v);Jb(T,D,v)},om=i=>Pe(i,(p,v)=>Ke(p,D=>D.column===v.column)?p:p.concat([v]),[]).sort((p,v)=>p.column-v.column),AS=ms("col"),Xh=ms("colgroup"),Jh=i=>Qo(i)==="tr"||Xh(i),OS=i=>{const m=Fs(i,"colspan",1),p=Fs(i,"rowspan",1);return{element:i,colspan:m,rowspan:p}},Qb=(i,m=OS)=>{const p=Z=>AS(Z.element)?i.col(Z):i.cell(Z),v=Z=>Xh(Z.element)?i.colgroup(Z):i.row(Z),T=Z=>{if(Jh(Z))return v({element:Z});{const Q=Z,he=p(m(Q));return D=le.some({item:Q,replacement:he}),he}};let D=le.none();return{getOrInit:(Z,Q)=>D.fold(()=>T(Z),he=>Q(Z,he.item)?he.replacement:T(Z))}},Xy=i=>m=>{const p=[],v=(I,Z)=>F(p,Q=>Z(Q.item,I)),T=I=>{const Z=i==="td"?{scope:null}:{},Q=m.replace(I,i,Z);return p.push({item:I,sub:Q}),Q};return{replaceOrInit:(I,Z)=>{if(Jh(I)||AS(I))return I;{const Q=I;return v(Q,Z).fold(()=>T(Q),he=>Z(I,he.item)?he.sub:T(Q))}}}},e0=i=>ue(i,"scope").map(m=>m.substr(0,3)),Sl={modification:Qb,transform:Xy,merging:i=>({unmerge:v=>{const T=e0(v);return T.each(D=>Ps(v,"scope",D)),()=>{const D=i.cell({element:v,colspan:1,rowspan:1});return Lr(D,"width"),Lr(v,"width"),T.each(I=>Ps(D,"scope",I)),D}},merge:v=>{const T=()=>{const D=$s(jt(v,e0));if(D.length===0)return le.none();{const I=D[0],Z=["row","col"];return Ke(D,he=>he!==I&&kn(Z,he))?le.none():le.from(I)}};return Lr(v[0],"width"),T().fold(()=>se(v[0],"scope"),D=>Ps(v[0],"scope",D+"group")),oe(v[0])}})},Uk=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Wk=(i,m)=>{const p=i.property().name(m);return kn(["ol","ul"],p)},Lf=(i,m)=>{const p=i.property().name(m);return kn(Uk,p)},Hf=(i,m)=>kn(["br","img","hr","input"],i.property().name(m)),Vm=Af(),Jy=i=>Lf(Vm,i),Ze=i=>Wk(Vm,i),t0=i=>Hf(Vm,i),Um=i=>{const m=ms("br"),p=Q=>it(Q,he=>m(he)||qr(he)&&ks(he).trim().length===0),v=Q=>Qo(Q)==="li"||fs(Q,Ze).isSome(),T=Q=>Lc(Q).map(he=>Jy(he)?!0:t0(he)?Qo(he)!=="img":!1).getOr(!1),D=Q=>xf(Q).bind(he=>{const De=T(he);return zo(he).map(St=>De===!0||v(St)||m(he)||Jy(St)&&!ft(Q,St)?[]:[ve.fromTag("br")])}).getOr([]),Z=(()=>{const Q=To(i,he=>{const De=Dn(he);return p(De)?[]:De.concat(D(he))});return Q.length===0?[ve.fromTag("br")]:Q})();mc(i[0]),yc(i[0],Z)},zf=i=>n1(i,!0),n0=i=>{Pl(i).length===0&&Dr(i)},ui=(i,m)=>({grid:i,cursor:m}),Qy=i=>Un(i,m=>Un(m.cells,p=>{const v=p.element;return Ld(zf(v),v)})),eC=(i,m,p)=>{var v,T;const D=Dc(i).rows;return le.from((T=(v=D[m])===null||v===void 0?void 0:v.cells[p])===null||T===void 0?void 0:T.element).filter(zf).orThunk(()=>Qy(D))},xl=(i,m,p)=>{const v=eC(i,m,p);return ui(i,v)},Qh=i=>Pe(i,(p,v)=>Ke(p,D=>D.row===v.row)?p:p.concat([v]),[]).sort((p,v)=>p.row-v.row),DS=(i,m,p,v)=>{const T=m[0].row,D=Qh(m),I=mn(D,(Z,Q)=>({grid:Gs(Z.grid,T,Q.row+Z.delta,p,v.getOrInit),delta:Z.delta+1}),{grid:i,delta:0}).grid;return xl(I,T,m[0].column)},RS=(i,m,p,v)=>{const T=Qh(m),D=T[T.length-1],I=D.row+D.rowspan,Z=mn(T,(Q,he)=>Gs(Q,I,he.row,p,v.getOrInit),i);return xl(Z,I,m[0].column)},Zk=(i,m,p,v)=>{const T=m.details,D=om(T),I=D[0].column,Z=mn(D,(Q,he)=>({grid:Kb(Q.grid,I,he.column+Q.delta,p,v.getOrInit),delta:Q.delta+1}),{grid:i,delta:0}).grid;return xl(Z,T[0].row,I)},NS=(i,m,p,v)=>{const T=m.details,D=T[T.length-1],I=D.column+D.colspan,Z=om(T),Q=mn(Z,(he,De)=>Kb(he,I,De.column,p,v.getOrInit),i);return xl(Q,T[0].row,I)},jk=(i,m,p,v)=>{const T=om(m),D=jt(T,Z=>Z.column),I=SS(i,D,!0,p,v.replaceOrInit);return xl(I,m[0].row,m[0].column)},MS=(i,m,p,v)=>{const T=xS(i,m,p,v.replaceOrInit);return xl(T,m[0].row,m[0].column)},Gk=(i,m,p,v)=>{const T=om(m),D=jt(T,Z=>Z.column),I=SS(i,D,!1,p,v.replaceOrInit);return xl(I,m[0].row,m[0].column)},qk=(i,m,p,v)=>{const T=xS(i,m,p,v.replaceOrInit);return xl(T,m[0].row,m[0].column)},o0=(i,m)=>(p,v,T,D,I)=>{const Z=Qh(v),Q=jt(Z,De=>De.row),he=Gy(p,Q,i,m,T,D.replaceOrInit,I);return xl(he,v[0].row,v[0].column)},s0=o0("thead",!0),Kk=o0("tbody",!1),BS=o0("tfoot",!1),Yk=(i,m,p,v)=>{const T=om(m.details),D=Pk(i,jt(T,Z=>Z.column)),I=D.length>0?D[0].cells.length-1:0;return xl(D,T[0].row,Math.min(T[0].column,I))},tC=(i,m,p,v)=>{const T=Qh(m),D=$k(i,T[0].row,T[T.length-1].row),I=Math.max(Dc(D).rows.length-1,0);return xl(D,Math.min(m[0].row,I),m[0].column)},jr=(i,m,p,v)=>{const T=m.cells;Um(T);const D=jb(i,m.bounds,p,v.merge(T));return ui(D,le.from(T[0]))},nC=(i,m,p,v)=>{const D=mn(m,(I,Z)=>bS(I,Z,p,v.unmerge(Z)),i);return ui(D,le.from(m[0]))},PS=(i,m,p,v)=>{const D=((Q,he)=>{const De=ko.fromTable(Q);return Kh(De,he,!0)})(m.clipboard,m.generators),I=vi(m.row,m.column);return Zo(I,i,D,m.generators,p).fold(()=>ui(i,le.some(m.element)),Q=>xl(Q,m.row,m.column))},r0=(i,m,p)=>{const v=wg(i,p.section),T=ko.generate(v);return Kh(T,m,!0)},c0=(i,m,p,v)=>{const T=Dc(i).rows,D=m.cells[0].column,I=T[m.cells[0].row],Z=r0(m.clipboard,m.generators,I),Q=Wl(D,i,Z,m.generators,p);return xl(Q,m.cells[0].row,m.cells[0].column)},el=(i,m,p,v)=>{const T=Dc(i).rows,D=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,I=T[m.cells[0].row],Z=r0(m.clipboard,m.generators,I),Q=Wl(D,i,Z,m.generators,p);return xl(Q,m.cells[0].row,D)},_i=(i,m,p,v)=>{const T=Dc(i).rows,D=m.cells[0].row,I=T[D],Z=r0(m.clipboard,m.generators,I),Q=nm(D,i,Z,m.generators,p);return xl(Q,m.cells[0].row,m.cells[0].column)},oC=(i,m,p,v)=>{const T=Dc(i).rows,D=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,I=T[m.cells[0].row],Z=r0(m.clipboard,m.generators,I),Q=nm(D,i,Z,m.generators,p);return xl(Q,D,m.cells[0].column)},sC=(i,m)=>{const p=ko.fromTable(i);return ai(p,m).bind(T=>{const D=T[T.length-1],I=T[0].column,Z=D.column+D.colspan,Q=io(jt(p.all,he=>bt(he.cells,De=>De.column>=I&&De.column<Z)));return Vb(Q)}).getOr("")},$S=(i,m)=>{const p=ko.fromTable(i);return ai(p,m).bind(Vb).getOr("")},rC=(i,m)=>{const p=ko.fromTable(i);return ai(p,m).bind(T=>{const D=T[T.length-1],I=T[0].row,Z=D.row+D.rowspan,Q=p.all.slice(I,Z);return fS(Q)}).getOr("")},p1=(i,m,p,v)=>zk(i,m,p,v.sizing),a0=(i,m,p,v)=>_S(i,m,p,v.sizing,v.resize),FS=(i,m)=>Ke(m,p=>p.column===0&&p.isLocked),Tl=(i,m)=>Ke(m,p=>p.column+p.colspan>=i.grid.columns&&p.isLocked),Vf=(i,m)=>{const p=ud(i),v=om(m);return Pe(v,(T,D)=>{const Z=p[D.column].map(Es).getOr(0);return T+Z},0)},yd=i=>(m,p)=>ai(m,p).filter(v=>!(i?FS:Tl)(m,v)).map(v=>({details:v,pixelDelta:Vf(m,v)})),cC=(i,m)=>Pu(i,m).map(p=>({details:p,pixelDelta:-Vf(i,p)})),Ar=i=>(m,p)=>Vy(m,p).filter(v=>!(i?FS:Tl)(m,v.cells)),$u=Sl.transform("th"),Uf=Sl.transform("td"),Xk=Qa(DS,ai,Ot,Ot,Sl.modification),aC=Qa(RS,ai,Ot,Ot,Sl.modification),IS=Qa(Zk,yd(!0),a0,Ot,Sl.modification),Xg=Qa(NS,yd(!1),a0,Ot,Sl.modification),ha=Qa(Yk,cC,a0,n0,Sl.modification),Wm=Qa(tC,ai,Ot,n0,Sl.modification),Jk=Qa(jk,Pu,Ot,Ot,$u),lC=Qa(Gk,Pu,Ot,Ot,Uf),Qk=Qa(s0,Pu,Ot,Ot,$u),l0=Qa(Kk,Pu,Ot,Ot,Uf),iC=Qa(BS,Pu,Ot,Ot,Uf),i0=Qa(MS,Pu,Ot,Ot,$u),Qt=Qa(qk,Pu,Ot,Ot,Uf),b1=Qa(jr,pS,p1,Ot,Sl.merging),uC=Qa(nC,d1,p1,Ot,Sl.merging),LS=Qa(PS,iR,p1,Ot,Sl.modification),HS=Qa(c0,Ar(!0),Ot,Ot,Sl.modification),e_=Qa(el,Ar(!1),Ot,Ot,Sl.modification),Da=Qa(_i,Vy,Ot,Ot,Sl.modification),t_=Qa(oC,Vy,Ot,Ot,Sl.modification),Wf=sC,dC=$S,zS=rC,Ha=(i,m)=>i.dispatch("NewRow",{node:m}),Zf=(i,m)=>i.dispatch("NewCell",{node:m}),Zm=(i,m,p)=>{i.dispatch("TableModified",{...p,table:m})},VS=(i,m,p,v,T)=>{i.dispatch("TableSelectionChange",{cells:m,start:p,finish:v,otherCells:T})},n_=i=>{i.dispatch("TableSelectionClear")},o_=(i,m,p,v,T)=>{i.dispatch("ObjectResizeStart",{target:m,width:p,height:v,origin:T})},Wc=(i,m,p,v,T)=>{i.dispatch("ObjectResized",{target:m,width:p,height:v,origin:T})},rc={structure:!1,style:!0},Is={structure:!0,style:!1},za={structure:!0,style:!0},Zc=(i,m)=>Tf(i)?w.percentageSize(m):Fm(i)?w.pixelSize(m):w.getTableSize(m),jc=(i,m,p)=>{const v=go=>Qo(Fg(go))==="table",T=go=>!v(i)||tm(go).rows>1,D=go=>!v(i)||tm(go).columns>1,I=tS(i),Z=$b(i)?Ot:a1,Q=go=>{switch(nS(i)){case"section":return i1.section();case"sectionCells":return i1.sectionCells();case"cells":return i1.cells();default:return i1.getTableSectionType(go,"section")}},he=(go,$i)=>$i.cursor.fold(()=>{const zu=Pl(go);return ie(zu).filter(gn).map(im=>{p.clearSelectedCells(go.dom);const Gc=i.dom.createRng();return Gc.selectNode(im.dom),i.selection.setRng(Gc),Ps(im,"data-mce-selected","1"),Gc})},zu=>{const im=Cl(zu),Gc=i.dom.createRng();return Gc.setStart(im.element.dom,im.offset),Gc.setEnd(im.element.dom,im.offset),i.selection.setRng(Gc),p.clearSelectedCells(go.dom),le.some(Gc)}),De=(go,$i,zu,im)=>(Gc,ss,s2=!1)=>{yl(Gc);const r2=ve.fromDom(i.getDoc()),iv=Bm(zu,r2,I),tT={sizing:Zc(i,Gc),resize:$b(i)?Vg():Rf(),section:Q(Gc)};return $i(Gc)?go(Gc,ss,iv,tT).bind(Jm=>{m.refresh(Gc.dom),je(Jm.newRows,yp=>{Ha(i,yp.dom)}),je(Jm.newCells,yp=>{Zf(i,yp.dom)});const fh=he(Gc,Jm);return gn(Gc)&&(yl(Gc),s2||Zm(i,Gc.dom,im)),fh.map(yp=>({rng:yp,effect:im}))}):le.none()},St=De(Wm,T,Ot,Is),Ht=De(ha,D,Ot,Is),Ft=De(Xk,Ne,Ot,Is),Dt=De(aC,Ne,Ot,Is),an=De(IS,Ne,Z,Is),ht=De(Xg,Ne,Z,Is),kt=De(b1,Ne,Ot,Is),In=De(uC,Ne,Ot,Is),qn=De(HS,Ne,Ot,Is),bn=De(e_,Ne,Ot,Is),Mr=De(Da,Ne,Ot,Is),Ls=De(t_,Ne,Ot,Is),cc=De(LS,Ne,Ot,za),Bi=De(i0,Ne,Ot,Is),Za=De(Qt,Ne,Ot,Is),dh=De(Jk,Ne,Ot,Is),mh=De(lC,Ne,Ot,Is),Rs=De(Qk,Ne,Ot,Is),ya=De(l0,Ne,Ot,Is),_l=De(iC,Ne,Ot,Is);return{deleteRow:St,deleteColumn:Ht,insertRowsBefore:Ft,insertRowsAfter:Dt,insertColumnsBefore:an,insertColumnsAfter:ht,mergeCells:kt,unmergeCells:In,pasteColsBefore:qn,pasteColsAfter:bn,pasteRowsBefore:Mr,pasteRowsAfter:Ls,pasteCells:cc,makeCellsHeader:Bi,unmakeCellsHeader:Za,makeColumnsHeader:dh,unmakeColumnsHeader:mh,makeRowsHeader:Rs,makeRowsBody:ya,makeRowsFooter:_l,getTableRowType:zS,getTableCellType:dC,getTableColType:Wf}},u0=(i,m,p)=>{const v=Fs(i,m,1);p===1||v<=1?se(i,m):Ps(i,m,Math.min(p,v))},d0=(i,m)=>p=>{const v=p.column+p.colspan-1,T=p.column;return v>=i&&T<m},US=(i,m,p)=>{if(ko.hasColumns(i)){const v=bt(ko.justColumns(i),d0(m,p)),T=jt(v,I=>{const Z=Ba(I.element);return u0(Z,"span",p-m),Z}),D=ve.fromTag("colgroup");return yc(D,T),[D]}else return[]},WS=(i,m,p)=>jt(i.all,v=>{const T=bt(v.cells,d0(m,p)),D=jt(T,Z=>{const Q=Ba(Z.element);return u0(Q,"colspan",p-m),Q}),I=ve.fromTag("tr");return yc(I,D),I}),ZS=(i,m)=>{const p=ko.fromTable(i);return Pu(p,m).map(T=>{const D=T[T.length-1],I=T[0].column,Z=D.column+D.colspan,Q=US(p,I,Z),he=WS(p,I,Z);return[...Q,...he]})},m0=(i,m,p)=>{const v=ko.fromTable(i);return ai(v,m).bind(D=>{const I=Kh(v,p,!1),Q=Dc(I).rows.slice(D[0].row,D[D.length-1].row+D[D.length-1].rowspan),he=To(Q,St=>{const Ht=bt(St.cells,Ft=>!Ft.isLocked);return Ht.length>0?[{...St,cells:Ht}]:[]}),De=Zb(he);return Ld(De.length>0,De)}).map(D=>gS(D))},jf=vd.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),f0=(i,m,p)=>{const v=p.substring(0,p.length-i.length),T=parseFloat(v);return v===T.toString()?m(T):jf.invalid(p)},ep={...jf,from:i=>ll(i,"%")?f0("%",jf.percent,i):ll(i,"px")?f0("px",jf.pixels,i):jf.invalid(i)},r_=(i,m)=>jt(i,p=>ep.from(p).fold(()=>p,T=>T/m*100+"%",T=>T+"%")),c_=(i,m,p)=>{const v=p/m;return jt(i,T=>ep.from(T).fold(()=>T,I=>I*v+"px",I=>I/100*p+"px"))},Zl=(i,m)=>{const p=i.fold(()=>oe(""),v=>{const T=v/m;return oe(T+"px")},()=>{const v=100/m;return oe(v+"%")});return Vn(m,p)},uR=(i,m,p)=>i.fold(()=>m,v=>c_(m,p,v),v=>r_(m,p)),jS=(i,m,p)=>{const v=ep.from(p),T=it(i,D=>D==="0px")?Zl(v,i.length):uR(v,i,m);return Cd(T)},Ai=(i,m)=>i.length===0?m:mn(i,(p,v)=>ep.from(v).fold(oe(0),ut,ut)+p,0),g0=(i,m)=>{const p=Math.floor(i);return{value:p+m,remainder:i-p}},v1=(i,m)=>ep.from(i).fold(oe(i),p=>p+m+"px",p=>p+m+"%"),Cd=i=>{if(i.length===0)return i;const m=mn(i,(v,T)=>{const D=ep.from(T).fold(()=>({value:T,remainder:0}),I=>g0(I,"px"),I=>({value:I+"%",remainder:0}));return{output:[D.value].concat(v.output),remainder:v.remainder+D.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([v1(p[p.length-1],Math.round(m.remainder))])},El=ep.from,Gf=(i,m,p)=>{je(m,v=>{const T=i.slice(v.column,v.colspan+v.column),D=Ai(T,Ys());Wn(v.element,"width",D+p)})},mC=(i,m,p)=>{je(m,(v,T)=>{const D=Ai([i[T]],Ys());Wn(v.element,"width",D+p)})},h0=(i,m,p)=>{je(p,v=>{Lr(v.element,"height")}),je(m,(v,T)=>{Wn(v.element,"height",i[T])})},GS=i=>El(i).fold(oe("px"),oe("px"),oe("%")),jm=(i,m,p)=>{const v=ko.fromTable(i),T=v.all,D=ko.justCells(v),I=ko.justColumns(v);m.each(Z=>{const Q=GS(Z),he=zc(i),De=Du(v,i),St=jS(De,he,Z);ko.hasColumns(v)?mC(St,I,Q):Gf(St,D,Q),Wn(i,"width",Z)}),p.each(Z=>{const Q=be(i),he=zl(v,i),De=jS(he,Q,Z);h0(De,T,D),Wn(i,"height",Z)})},qS=Ia,fC=Bb,KS=Ll,y1=i=>{se(i,"width"),se(i,"height")},C1=i=>{const m=Tc(i);jm(i,le.some(m),le.none()),y1(i)},w1=i=>{const m=ls(i);jm(i,le.some(m),le.none()),y1(i)},a_=i=>{const m=Bg(i);jm(i,le.none(),le.some(m)),y1(i)},p0=i=>{Lr(i,"width");const m=wm(i),p=m.length>0?m:Pl(i);je(p,v=>{Lr(v,"width"),y1(v)}),y1(i)},l_={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},YS=()=>ve.fromTag("th"),i_=()=>ve.fromTag("td"),b0=()=>ve.fromTag("col"),XS=(i,m,p,v)=>{const T=ve.fromTag("tr");for(let D=0;D<i;D++){const I=v<m||D<p?YS():i_();D<p&&Ps(I,"scope","row"),v<m&&Ps(I,"scope","col"),Ks(I,ve.fromTag("br")),Ks(T,I)}return T},u_=i=>{const m=ve.fromTag("colgroup");return Vn(i,()=>Ks(m,b0())),m},gC=(i,m,p,v)=>Vn(i,T=>XS(m,p,v,T)),v0=(i,m,p,v,T,D=l_)=>{const I=ve.fromTag("table"),Z=T!=="cells";ts(I,D.styles),tc(I,D.attributes),D.colGroups&&Ks(I,u_(m));const Q=Math.min(i,p);if(Z&&p>0){const Ft=ve.fromTag("thead");Ks(I,Ft);const an=gC(p,m,T==="sectionCells"?Q:0,v);yc(Ft,an)}const he=ve.fromTag("tbody");Ks(I,he);const De=Z?i-Q:i,Ht=gC(De,m,Z?0:p,v);return yc(he,Ht),I},d_=i=>i.dom.innerHTML,JS=i=>{const m=ve.fromTag("div"),p=ve.fromDom(i.dom.cloneNode(!0));return Ks(m,p),d_(m)},kl=(i,m)=>{i.selection.select(m.dom,!0),i.selection.collapse(!0)},hC=(i,m)=>{Jc(m,"td,th").each(dt(kl,i))},pC=(i,m)=>{je(eo(m,"tr"),p=>{Ha(i,p.dom),je(eo(p,"th,td"),v=>{Zf(i,v.dom)})})},bC=i=>So(i)&&i.indexOf("%")!==-1,y0=(i,m,p,v,T)=>{const D=e1(i),I={styles:D,attributes:Ja(i),colGroups:hy(i)};return i.undoManager.ignore(()=>{const Z=v0(p,m,T,v,nS(i),I);Ps(Z,"data-mce-id","__mce");const Q=JS(Z);i.insertContent(Q),i.addVisual()}),Jc(Fg(i),'table[data-mce-id="__mce"]').map(Z=>(Fm(i)?w1(Z):nu(i)?p0(Z):(Tf(i)||bC(D.width))&&C1(Z),yl(Z),se(Z,"data-mce-id"),pC(i,Z),hC(i,Z),Z.dom)).getOrNull()},m_=(i,m,p,v={})=>{const T=D=>Xn(D)&&D>0;if(T(m)&&T(p)){const D=v.headerRows||0,I=v.headerColumns||0;return y0(i,p,m,I,D)}else return null};var C0=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const QS="x-tinymce/dom-table-",vC=QS+"rows",yC=QS+"columns",ex=i=>{const m=C0.FakeClipboardItem(i);C0.write([m])},tp=i=>{var m;const p=(m=C0.read())!==null&&m!==void 0?m:[];return Un(p,v=>le.from(v.getType(i)))},tx=i=>{tp(i).isSome()&&C0.clear()},nx=i=>{i.fold(f_,m=>ex({[vC]:m}))},ox=()=>tp(vC),f_=()=>tx(vC),sx=i=>{i.fold(g_,m=>ex({[yC]:m}))},rx=()=>tp(yC),g_=()=>tx(yC),w0=i=>dS(su(i),hd(i)).filter(kf),cx=i=>Oy(su(i),hd(i)).filter(kf),np=(i,m)=>{const p=hd(i),v=()=>w0(i).each(ht=>{Xr(ht,p).filter(W(p)).each(kt=>{const In=ve.fromText("");if(Yr(kt,In),Dr(kt),i.dom.isEmpty(i.getBody()))i.setContent(""),i.selection.setCursorLocation();else{const qn=i.dom.createRng();qn.setStart(In.dom,0),qn.setEnd(In.dom,0),i.selection.setRng(qn),i.nodeChanged()}})}),T=ht=>w0(i).each(kt=>{nu(i)||Fm(i)||Tf(i)||Xr(kt,p).each(qn=>{ht==="relative"&&!qS(qn)?C1(qn):ht==="fixed"&&!fC(qn)?w1(qn):ht==="responsive"&&!KS(qn)&&p0(qn),yl(qn),Zm(i,qn.dom,Is)})}),D=ht=>Xr(ht,p),I=ht=>cx(i).bind(kt=>D(kt).map(In=>ht(In,kt))),Z=(ht,kt)=>{I(In=>{i.formatter.toggle("tableclass",{value:kt},In.dom),Zm(i,In.dom,rc)})},Q=(ht,kt)=>{I(In=>{const qn=mr(i),Mr=it(qn,Ls=>i.formatter.match("tablecellclass",{value:kt},Ls.dom))?i.formatter.remove:i.formatter.apply;je(qn,Ls=>Mr("tablecellclass",{value:kt},Ls.dom)),Zm(i,In.dom,rc)})},he=()=>{w0(i).each(ht=>{Xr(ht,p).each(kt=>{co(kt,"caption").fold(()=>{const In=ve.fromTag("caption");Ks(In,ve.fromText("Caption")),od(kt,In,0),i.selection.setCursorLocation(In.dom,0)},In=>{ms("caption")(ht)&&at("td",kt).each(qn=>i.selection.setCursorLocation(qn.dom,0)),Dr(In)}),Zm(i,kt.dom,Is)})})},De=ht=>{i.focus()},St=(ht,kt=!1)=>I((In,qn)=>{const bn=Hb(mr(i),In,qn);ht(In,bn,kt).each(De)}),Ht=()=>I((ht,kt)=>{const In=Hb(mr(i),ht,kt),qn=Bm(Ot,ve.fromDom(i.getDoc()),le.none());return m0(ht,In,qn)}),Ft=()=>I((ht,kt)=>{const In=Hb(mr(i),ht,kt);return ZS(ht,In)}),Dt=(ht,kt)=>kt().each(In=>{const qn=jt(In,bn=>Ba(bn));I((bn,Mr)=>{const Ls=Pm(ve.fromDom(i.getDoc())),cc=Lm(mr(i),Mr,qn,Ls);ht(bn,cc).each(De)})}),an=ht=>(kt,In)=>Hr(In,"type").each(qn=>{St(ht(qn),In.no_events)});ro({mceTableSplitCells:()=>St(m.unmergeCells),mceTableMergeCells:()=>St(m.mergeCells),mceTableInsertRowBefore:()=>St(m.insertRowsBefore),mceTableInsertRowAfter:()=>St(m.insertRowsAfter),mceTableInsertColBefore:()=>St(m.insertColumnsBefore),mceTableInsertColAfter:()=>St(m.insertColumnsAfter),mceTableDeleteCol:()=>St(m.deleteColumn),mceTableDeleteRow:()=>St(m.deleteRow),mceTableCutCol:()=>Ft().each(ht=>{sx(ht),St(m.deleteColumn)}),mceTableCutRow:()=>Ht().each(ht=>{nx(ht),St(m.deleteRow)}),mceTableCopyCol:()=>Ft().each(ht=>sx(ht)),mceTableCopyRow:()=>Ht().each(ht=>nx(ht)),mceTablePasteColBefore:()=>Dt(m.pasteColsBefore,rx),mceTablePasteColAfter:()=>Dt(m.pasteColsAfter,rx),mceTablePasteRowBefore:()=>Dt(m.pasteRowsBefore,ox),mceTablePasteRowAfter:()=>Dt(m.pasteRowsAfter,ox),mceTableDelete:v,mceTableCellToggleClass:Q,mceTableToggleClass:Z,mceTableToggleCaption:he,mceTableSizingMode:(ht,kt)=>T(kt),mceTableCellType:an(ht=>ht==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:an(ht=>ht==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:an(ht=>{switch(ht){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(ht,kt)=>i.addCommand(kt,ht)),i.addCommand("mceInsertTable",(ht,kt)=>{m_(i,kt.rows,kt.columns,kt.options)}),i.addCommand("mceTableApplyCellStyle",(ht,kt)=>{const In=Mr=>"tablecell"+Mr.toLowerCase().replace("-","");if(!rt(kt))return;const qn=bt(mr(i),kf);if(qn.length===0)return;const bn=zs(kt,(Mr,Ls)=>i.formatter.has(In(Ls))&&So(Mr));xa(bn)||(ro(bn,(Mr,Ls)=>{const cc=In(Ls);je(qn,Bi=>{Mr===""?i.formatter.remove(cc,{value:null},Bi.dom,!0):i.formatter.apply(cc,{value:Mr},Bi.dom)})}),D(qn[0]).each(Mr=>Zm(i,Mr.dom,rc)))})},ax=(i,m)=>{const p=hd(i),v=T=>Oy(su(i)).bind(D=>Xr(D,p).map(I=>{const Z=Hb(mr(i),I,D);return T(I,Z)})).getOr("");ro({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(T,D)=>i.addQueryValueHandler(D,T))},CC=vd.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),lx=(i,m,p,v)=>i.fold(m,p,v),h_=i=>i.fold(ut,ut,ut),Fu=CC.before,S0=CC.on,x0=CC.after,Va={before:Fu,on:S0,after:x0,cata:lx,getStart:h_},Oi={create:(i,m)=>({selection:i,kill:m})},wC=(i,m)=>{const p=i.document.createRange();return p.selectNode(m.dom),p},p_=(i,m)=>{const p=i.document.createRange();return qf(p,m),p},qf=(i,m)=>i.selectNodeContents(m.dom),S1=(i,m)=>{m.fold(p=>{i.setStartBefore(p.dom)},(p,v)=>{i.setStart(p.dom,v)},p=>{i.setStartAfter(p.dom)})},b_=(i,m)=>{m.fold(p=>{i.setEndBefore(p.dom)},(p,v)=>{i.setEnd(p.dom,v)},p=>{i.setEndAfter(p.dom)})},ix=(i,m,p)=>{const v=i.document.createRange();return S1(v,m),b_(v,p),v},SC=(i,m,p,v,T)=>{const D=i.document.createRange();return D.setStart(m.dom,p),D.setEnd(v.dom,T),D},ux=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height}),T0=i=>{const m=i.getClientRects(),p=m.length>0?m[0]:i.getBoundingClientRect();return p.width>0||p.height>0?le.some(p).map(ux):le.none()},x1=vd.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),dx=(i,m,p)=>m(ve.fromDom(p.startContainer),p.startOffset,ve.fromDom(p.endContainer),p.endOffset),mx=(i,m)=>m.match({domRange:p=>({ltr:oe(p),rtl:le.none}),relative:(p,v)=>({ltr:ji(()=>ix(i,p,v)),rtl:ji(()=>le.some(ix(i,v,p)))}),exact:(p,v,T,D)=>({ltr:ji(()=>SC(i,p,v,T,D)),rtl:ji(()=>le.some(SC(i,T,D,p,v)))})}),v_=(i,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(T=>T.collapsed===!1).map(T=>x1.rtl(ve.fromDom(T.endContainer),T.endOffset,ve.fromDom(T.startContainer),T.startOffset)).getOrThunk(()=>dx(i,x1.ltr,p)):dx(i,x1.ltr,p)},E0=(i,m)=>{const p=mx(i,m);return v_(i,p)},k0=(i,m)=>E0(i,m).match({ltr:(v,T,D,I)=>{const Z=i.document.createRange();return Z.setStart(v.dom,T),Z.setEnd(D.dom,I),Z},rtl:(v,T,D,I)=>{const Z=i.document.createRange();return Z.setStart(D.dom,I),Z.setEnd(v.dom,T),Z}});x1.ltr,x1.rtl;const op={create:(i,m,p,v)=>({start:i,soffset:m,finish:p,foffset:v})},_0={create:(i,m,p,v)=>({start:Va.on(i,m),finish:Va.on(p,v)})},xC=(i,m)=>{const p=k0(i,m);return op.create(ve.fromDom(p.startContainer),p.startOffset,ve.fromDom(p.endContainer),p.endOffset)},A0=_0.create,C_=(i,m,p,v,T,D,I)=>ft(p,T)&&v===D?le.none():Tr(p,"td,th",m).bind(Z=>Tr(T,"td,th",m).bind(Q=>gx(i,m,Z,Q,I))),gx=(i,m,p,v,T)=>ft(p,v)?le.none():Uh(p,v,m).bind(D=>{const I=D.boxes.getOr([]);return I.length>1?(T(i,I,D.start,D.finish),le.some(Oi.create(le.some(A0(p,0,p,fa(p))),!0))):le.none()}),Jg=(i,m,p,v,T)=>{const D=I=>(T.clearBeforeUpdate(p),T.selectRange(p,I.boxes,I.start,I.finish),I.boxes);return ky(v,i,m,T.firstSelectedSelector,T.lastSelectedSelector).map(D)},hx=(i,m)=>({item:i,mode:m}),T1=(i,m,p,v=Kf)=>i.property().parent(m).map(T=>hx(T,v)),Kf=(i,m,p,v=E1)=>p.sibling(i,m).map(T=>hx(T,v)),E1=(i,m,p,v=E1)=>{const T=i.property().children(m);return p.first(T).map(I=>hx(I,v))},px=[{current:T1,next:Kf,fallback:le.none()},{current:Kf,next:E1,fallback:le.some(T1)},{current:E1,next:E1,fallback:le.some(Kf)}],bx=(i,m,p,v,T=px)=>F(T,I=>I.current===p).bind(I=>I.current(i,m,v,I.next).orThunk(()=>I.fallback.bind(Z=>bx(i,m,Z,v)))),sp={left:()=>({sibling:(p,v)=>p.query().prevSibling(v),first:p=>p.length>0?le.some(p[p.length-1]):le.none()}),right:()=>({sibling:(p,v)=>p.query().nextSibling(v),first:p=>p.length>0?le.some(p[0]):le.none()})},sm=(i,m,p,v,T,D)=>bx(i,m,v,T).bind(Z=>D(Z.item)?le.none():p(Z.item)?le.some(Z.item):sm(i,Z.item,p,Z.mode,T,D)),S_=(i,m,p,v)=>sm(i,m,p,Kf,sp.left(),v),TC=(i,m,p,v)=>sm(i,m,p,Kf,sp.right(),v),vx=i=>m=>i.property().children(m).length===0,yx=(i,m,p)=>EC(i,m,vx(i),p),Cx=(i,m,p)=>wx(i,m,vx(i),p),EC=S_,wx=TC,Yf=Af(),Sx=(i,m)=>yx(Yf,i,m),Qg=(i,m)=>Cx(Yf,i,m),Xf=(i,m,p)=>EC(Yf,i,m,p),k1=(i,m,p)=>wx(Yf,i,m,p),rp=(i,m,p)=>fs(i,m,p).isSome(),O0=vd.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Jf=(i,m,p)=>{const v=i.getRect(m),T=i.getRect(p);return T.right>v.left&&T.left<v.right},Di=i=>Tr(i,"tr"),cp={...O0,verify:(i,m,p,v,T,D,I)=>Tr(v,"td,th",I).bind(Z=>Tr(m,"td,th",I).map(Q=>ft(Z,Q)?ft(v,Z)&&fa(Z)===T?D(Q):O0.none("in same cell"):Bu(Di,[Z,Q]).fold(()=>Jf(i,Q,Z)?O0.success():D(Q),he=>D(Q)))).getOr(O0.none("default")),cata:(i,m,p,v,T)=>i.fold(m,p,v,T)},xx=(i,m,p,v)=>({parent:i,children:m,element:p,index:v}),ap=i=>zo(i).bind(m=>{const p=Dn(m);return lp(p,i).map(v=>xx(m,p,i,v))}),lp=(i,m)=>Ss(i,dt(ft,m)),Ra=ms("br"),D0=(i,m,p)=>m(i,p).bind(v=>qr(v)&&ks(v).trim().length===0?D0(v,m,p):le.some(v)),_1=(i,m,p)=>p.traverse(m).orThunk(()=>D0(m,p.gather,i)).map(p.relative),R0=(i,m)=>No(i,m).filter(Ra).orThunk(()=>No(i,m-1).filter(Ra)),Tx=(i,m,p,v)=>R0(m,p).bind(T=>v.traverse(T).fold(()=>D0(T,v.gather,i).map(v.relative),D=>ap(D).map(I=>Va.on(I.parent,I.index)))),_C=(i,m,p,v)=>(Ra(m)?_1(i,m,v):Tx(i,m,p,v)).map(D=>({start:D,finish:D})),N0=i=>cp.cata(i,m=>le.none(),()=>le.none(),m=>le.some(ci(m,0)),m=>le.some(ci(m,fa(m)))),Mc=(i,m)=>({left:i.left,top:i.top+m,right:i.right,bottom:i.bottom+m}),M0=(i,m)=>({left:i.left,top:i.top-m,right:i.right,bottom:i.bottom-m}),rm=(i,m,p)=>({left:i.left+m,top:i.top+p,right:i.right+m,bottom:i.bottom+p}),Ex=i=>i.top,AC=i=>i.bottom,Gm=(i,m,p)=>p>=0&&p<fa(m)?i.getRangedRect(m,p,m,p+1):p>0?i.getRangedRect(m,p-1,m,p):le.none(),A1=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom}),ip=(i,m)=>le.some(i.getRect(m)),B0=(i,m,p)=>Bs(m)?ip(i,m).map(A1):qr(m)?Gm(i,m,p).map(A1):le.none(),P0=(i,m)=>Bs(m)?ip(i,m).map(A1):qr(m)?i.getRangedRect(m,0,m,fa(m)).map(A1):le.none(),Qf=5,T_=100,di=vd.generate([{none:[]},{retry:["caret"]}]),wd=(i,m)=>i.left<m.left||Math.abs(m.right-i.left)<1||i.left>m.right,OC=(i,m,p)=>yt(m,Jy).fold(Xt,v=>P0(i,v).exists(T=>wd(p,T))),kx=(i,m,p,v,T)=>{const D=Mc(T,Qf);return Math.abs(p.bottom-v.bottom)<1||p.top>T.bottom?di.retry(D):p.top===T.bottom?di.retry(Mc(T,1)):OC(i,m,T)?di.retry(rm(D,Qf,0)):di.none()},DC={point:Ex,adjuster:(i,m,p,v,T)=>{const D=M0(T,Qf);return Math.abs(p.top-v.top)<1||p.bottom<T.top?di.retry(D):p.bottom===T.top?di.retry(M0(T,1)):OC(i,m,T)?di.retry(rm(D,Qf,0)):di.none()},move:M0,gather:Sx},RC={point:AC,adjuster:kx,move:Mc,gather:Qg},Ax=(i,m,p)=>i.elementFromPoint(m,p).filter(v=>Qo(v)==="table").isSome(),Ox=(i,m,p,v,T)=>jl(i,m,p,m.move(v,Qf),T),jl=(i,m,p,v,T)=>T===0?le.some(v):Ax(i,v.left,m.point(v))?Ox(i,m,p,v,T-1):i.situsFromPoint(v.left,m.point(v)).bind(D=>D.start.fold(le.none,I=>P0(i,I).bind(Z=>m.adjuster(i,I,Z,p,v).fold(le.none,Q=>jl(i,m,p,Q,T-1))).orThunk(()=>le.some(v)),le.none)),eh=(i,m,p)=>i.point(m)>p.getInnerHeight()?le.some(i.point(m)-p.getInnerHeight()):i.point(m)<0?le.some(-i.point(m)):le.none(),NC=(i,m,p)=>{const v=i.move(p,Qf),T=jl(m,i,p,v,T_).getOr(v);return eh(i,T,m).fold(()=>m.situsFromPoint(T.left,i.point(T)),D=>(m.scrollBy(0,D),m.situsFromPoint(T.left,i.point(T)-D)))},eg={tryUp:dt(NC,DC),tryDown:dt(NC,RC),getJumpSize:oe(Qf)},Gl=20,mi=(i,m,p)=>i.getSelection().bind(v=>_C(m,v.finish,v.foffset,p).fold(()=>le.some(ci(v.finish,v.foffset)),T=>{const D=i.fromSitus(T),I=cp.verify(i,v.finish,v.foffset,D.finish,D.foffset,p.failure,m);return N0(I)})),Ua=(i,m,p,v,T,D)=>D===0?le.none():au(i,m,p,v,T).bind(I=>{const Z=i.fromSitus(I),Q=cp.verify(i,p,v,Z.finish,Z.foffset,T.failure,m);return cp.cata(Q,()=>le.none(),()=>le.some(I),he=>ft(p,he)&&v===0?cu(i,p,v,M0,T):Ua(i,m,he,0,T,D-1),he=>ft(p,he)&&v===fa(he)?cu(i,p,v,Mc,T):Ua(i,m,he,fa(he),T,D-1))}),cu=(i,m,p,v,T)=>B0(i,m,p).bind(D=>$0(i,T,v(D,eg.getJumpSize()))),$0=(i,m,p)=>{const v=jd().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(i,p):le.none()},au=(i,m,p,v,T)=>B0(i,p,v).bind(D=>$0(i,T,D)),th=(i,m,p)=>mi(i,m,p).bind(v=>Ua(i,m,v.element,v.offset,p,Gl).map(i.fromSitus)),E_=(i,m)=>rp(i,p=>zo(p).exists(v=>ft(v,m))),MC=(i,m,p,v,T)=>Tr(v,"td,th",m).bind(D=>Tr(D,"table",m).bind(I=>E_(T,I)?th(i,m,p).bind(Z=>Tr(Z.finish,"td,th",m).map(Q=>({start:D,finish:Q,range:Z}))):le.none())),k_=(i,m,p,v,T,D)=>D(v,m).orThunk(()=>MC(i,m,p,v,T).map(I=>{const Z=I.range;return Oi.create(le.some(A0(Z.start,Z.soffset,Z.finish,Z.foffset)),!0)})),__=(i,m)=>Tr(i,"tr",m).bind(p=>Tr(p,"table",m).bind(v=>{const T=eo(v,"tr");return ft(p,T[0])?Xf(v,D=>xf(D).isSome(),m).map(D=>{const I=fa(D);return Oi.create(le.some(A0(D,I,D,I)),!0)}):le.none()})),Dx=(i,m)=>Tr(i,"tr",m).bind(p=>Tr(p,"table",m).bind(v=>{const T=eo(v,"tr");return ft(p,T[T.length-1])?k1(v,D=>ti(D).isSome(),m).map(D=>Oi.create(le.some(A0(D,0,D,0)),!0)):le.none()})),F0=(i,m,p,v,T,D,I)=>MC(i,p,v,T,D).bind(Z=>gx(m,p,Z.start,Z.finish,I)),I0=i=>{let m=i;return{get:()=>m,set:T=>{m=T}}},tl=i=>{const m=I0(le.none()),p=()=>m.get().each(i);return{clear:()=>{p(),m.set(le.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:Z=>{p(),m.set(le.some(Z))}}},up=()=>{const i=tl(Ot);return{...i,on:p=>i.get().each(p)}},dp=(i,m)=>Tr(i,"td,th",m),O1=i=>cs(i).exists(n1),BC=(i,m,p,v)=>{const T=up(),D=T.clear,I=De=>{T.on(St=>{v.clearBeforeUpdate(m),dp(De.target,p).each(Ht=>{Uh(St,Ht,p).each(Ft=>{const Dt=Ft.boxes.getOr([]);if(Dt.length===1){const an=Dt[0],ht=py(an)==="false",kt=Zi(t1(De.target),an,ft);ht&&kt&&v.selectRange(m,Dt,an,an)}else Dt.length>1&&(v.selectRange(m,Dt,Ft.start,Ft.finish),i.selectContents(Ht))})})})};return{clearstate:D,mousedown:De=>{v.clear(m),dp(De.target,p).filter(O1).each(T.set)},mouseover:De=>{I(De)},mouseup:De=>{I(De),D()}}},D1={traverse:Lc,gather:Qg,relative:Va.before,retry:eg.tryDown,failure:cp.failedDown},R1={traverse:_c,gather:Sx,relative:Va.before,retry:eg.tryUp,failure:cp.failedUp},nh=i=>m=>m===i,PC=nh(38),L0=nh(40),Iu=i=>i>=37&&i<=40,Rx={isBackward:nh(37),isForward:nh(39)},Nx={isBackward:nh(39),isForward:nh(37)},qm=i=>{const m=i!==void 0?i.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return $n(p,v)},Ri=(i,m,p)=>{const T=(p!==void 0?p.dom:document).defaultView;T&&T.scrollBy(i,m)},N1=vd.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),oh=i=>N1.exact(i.start,i.soffset,i.finish,i.foffset),tg=i=>i.match({domRange:m=>ve.fromDom(m.startContainer),relative:(m,p)=>Va.getStart(m),exact:(m,p,v,T)=>m}),$C=N1.domRange,H0=N1.relative,Mx=N1.exact,A_=i=>{const m=tg(i);return Nn(m)},O_=op.create,sh={domRange:$C,relative:H0,exact:Mx,exactFromRange:oh,getWin:A_,range:O_},FC=(i,m,p)=>{var v;return le.from((v=i.caretPositionFromPoint)===null||v===void 0?void 0:v.call(i,m,p)).bind(T=>{if(T.offsetNode===null)return le.none();const D=i.createRange();return D.setStart(T.offsetNode,T.offset),D.collapse(),le.some(D)})},mp=(i,m,p)=>{var v;return le.from((v=i.caretRangeFromPoint)===null||v===void 0?void 0:v.call(i,m,p))},M1=(i,m,p)=>i.caretPositionFromPoint?FC(i,m,p):i.caretRangeFromPoint?mp(i,m,p):le.none(),D_=(i,m,p)=>{const v=i.document;return M1(v,m,p).map(T=>op.create(ve.fromDom(T.startContainer),T.startOffset,ve.fromDom(T.endContainer),T.endOffset))},z0=(i,m)=>{const p=Qo(i);return p==="input"?Va.after(i):kn(["br","img"],p)?m===0?Va.before(i):Va.after(i):Va.on(i,m)},IC=(i,m)=>{const p=i.fold(Va.before,z0,Va.after),v=m.fold(Va.before,z0,Va.after);return sh.relative(p,v)},LC=(i,m,p,v)=>{const T=z0(i,m),D=z0(p,v);return sh.relative(T,D)},V0=(i,m,p,v)=>{const D=rn(i).dom.createRange();return D.setStart(i.dom,m),D.setEnd(p.dom,v),D},HC=(i,m,p,v)=>{const T=V0(i,m,p,v),D=ft(i,p)&&m===v;return T.collapsed&&!D},fp=i=>le.from(i.getSelection()),U0=(i,m)=>{fp(i).each(p=>{p.removeAllRanges(),p.addRange(m)})},W0=(i,m,p,v,T)=>{const D=SC(i,m,p,v,T);U0(i,D)},Z0=(i,m,p,v,T,D)=>{m.collapse(p.dom,v),m.extend(T.dom,D)},j0=(i,m)=>E0(i,m).match({ltr:(p,v,T,D)=>{W0(i,p,v,T,D)},rtl:(p,v,T,D)=>{fp(i).each(I=>{if(I.setBaseAndExtent)I.setBaseAndExtent(p.dom,v,T.dom,D);else if(I.extend)try{Z0(i,I,p,v,T,D)}catch{W0(i,T,D,p,v)}else W0(i,T,D,p,v)})}}),Xo=(i,m,p,v,T)=>{const D=LC(m,p,v,T);j0(i,D)},cm=(i,m,p)=>{const v=IC(m,p);j0(i,v)},rh=i=>{if(i.rangeCount>0){const m=i.getRangeAt(0),p=i.getRangeAt(i.rangeCount-1);return le.some(op.create(ve.fromDom(m.startContainer),m.startOffset,ve.fromDom(p.endContainer),p.endOffset))}else return le.none()},G0=i=>{if(i.anchorNode===null||i.focusNode===null)return rh(i);{const m=ve.fromDom(i.anchorNode),p=ve.fromDom(i.focusNode);return HC(m,i.anchorOffset,p,i.focusOffset)?le.some(op.create(m,i.anchorOffset,p,i.focusOffset)):rh(i)}},q0=(i,m,p=!0)=>{const T=(p?p_:wC)(i,m);U0(i,T)},ng=i=>fp(i).filter(m=>m.rangeCount>0).bind(G0),K0=i=>ng(i).map(m=>sh.exact(m.start,m.soffset,m.finish,m.foffset)),zC=(i,m)=>{const p=k0(i,m);return T0(p)},VC=(i,m,p)=>D_(i,m,p),UC=i=>{fp(i).each(m=>m.removeAllRanges())},Km=i=>({elementFromPoint:(ht,kt)=>ve.fromPoint(ve.fromDom(i.document),ht,kt),getRect:ht=>ht.dom.getBoundingClientRect(),getRangedRect:(ht,kt,In,qn)=>{const bn=sh.exact(ht,kt,In,qn);return zC(i,bn)},getSelection:()=>K0(i).map(ht=>xC(i,ht)),fromSitus:ht=>{const kt=sh.relative(ht.start,ht.finish);return xC(i,kt)},situsFromPoint:(ht,kt)=>VC(i,ht,kt).map(In=>_0.create(In.start,In.soffset,In.finish,In.foffset)),clearSelection:()=>{UC(i)},collapseSelection:(ht=!1)=>{K0(i).each(kt=>kt.fold(In=>In.collapse(ht),(In,qn)=>{const bn=ht?In:qn;cm(i,bn,bn)},(In,qn,bn,Mr)=>{const Ls=ht?In:bn,cc=ht?qn:Mr;Xo(i,Ls,cc,Ls,cc)}))},setSelection:ht=>{Xo(i,ht.start,ht.soffset,ht.finish,ht.foffset)},setRelativeSelection:(ht,kt)=>{cm(i,ht,kt)},selectNode:ht=>{q0(i,ht,!1)},selectContents:ht=>{q0(i,ht)},getInnerHeight:()=>i.innerHeight,getScrollY:()=>qm(ve.fromDom(i.document)).top,scrollBy:(ht,kt)=>{Ri(ht,kt,ve.fromDom(i.document))}}),ch=(i,m)=>({rows:i,cols:m}),Bx=(i,m,p,v)=>{const T=Km(i),D=BC(T,m,p,v);return{clearstate:D.clearstate,mousedown:D.mousedown,mouseover:D.mouseover,mouseup:D.mouseup}},B1=i=>yt(i,fn).exists(n1),WC=(i,m)=>B1(i)||B1(m),Y0=(i,m,p,v)=>{const T=Km(i),D=()=>(v.clear(m),le.none());return{keydown:(Q,he,De,St,Ht,Ft)=>{const Dt=Q.raw,an=Dt.which,ht=Dt.shiftKey===!0;return r1(m,v.selectedSelector).fold(()=>(Iu(an)&&!ht&&v.clearBeforeUpdate(m),Iu(an)&&ht&&!WC(he,St)?le.none:L0(an)&&ht?dt(F0,T,m,p,D1,St,he,v.selectRange):PC(an)&&ht?dt(F0,T,m,p,R1,St,he,v.selectRange):L0(an)?dt(k_,T,p,D1,St,he,Dx):PC(an)?dt(k_,T,p,R1,St,he,__):le.none),In=>{const qn=bn=>()=>Un(bn,Ls=>Jg(Ls.rows,Ls.cols,m,In,v)).fold(()=>aS(m,v.firstSelectedSelector,v.lastSelectedSelector).map(Ls=>{const cc=L0(an)||Ft.isForward(an)?Va.after:Va.before;return T.setRelativeSelection(Va.on(Ls.first,0),cc(Ls.table)),v.clear(m),Oi.create(le.none(),!0)}),Ls=>le.some(Oi.create(le.none(),!0)));return Iu(an)&&ht&&!WC(he,St)?le.none:L0(an)&&ht?qn([ch(1,0)]):PC(an)&&ht?qn([ch(-1,0)]):Ft.isBackward(an)&&ht?qn([ch(0,-1),ch(-1,0)]):Ft.isForward(an)&&ht?qn([ch(0,1),ch(1,0)]):Iu(an)&&!ht?D:le.none})()},keyup:(Q,he,De,St,Ht)=>r1(m,v.selectedSelector).fold(()=>{const Ft=Q.raw,Dt=Ft.which;return Ft.shiftKey===!0&&Iu(Dt)&&WC(he,St)?C_(m,p,he,De,St,Ht,v.selectRange):le.none()},le.none)}},X0=(i,m,p,v)=>{const T=Km(i);return(D,I)=>{v.clearBeforeUpdate(m),Uh(D,I,p).each(Z=>{const Q=Z.boxes.getOr([]);v.selectRange(m,Q,Z.start,Z.finish),T.selectContents(I),T.collapseSelection()})}},ZC=(i,m)=>{const p=cr(i,m);return p===void 0||p===""?[]:p.split(" ")},Px=(i,m,p)=>{const T=ZC(i,m).concat([p]);return Ps(i,m,T.join(" ")),!0},Ym=(i,m,p)=>{const v=bt(ZC(i,m),T=>T!==p);return v.length>0?Ps(i,m,v.join(" ")):se(i,m),!1},J0=i=>i.dom.classList!==void 0,$x=i=>ZC(i,"class"),lu=(i,m)=>Px(i,"class",m),pa=(i,m)=>Ym(i,"class",m),Xm=(i,m)=>{J0(i)?i.dom.classList.add(m):lu(i,m)},jC=i=>{(J0(i)?i.dom.classList:$x(i)).length===0&&se(i,"class")},R_=(i,m)=>{J0(i)?i.dom.classList.remove(m):pa(i,m),jC(i)},Q0=(i,m)=>J0(i)&&i.dom.classList.contains(m),GC=(i,m)=>{je(m,p=>{R_(i,p)})},gp=i=>m=>{Xm(m,i)},Fx=i=>m=>{GC(m,i)},M_={byClass:i=>{const m=gp(i.selected),p=Fx([i.selected,i.lastSelected,i.firstSelected]),v=D=>{const I=eo(D,i.selectedSelector);je(I,p)};return{clearBeforeUpdate:v,clear:v,selectRange:(D,I,Z,Q)=>{v(D),je(I,m),Xm(Z,i.firstSelected),Xm(Q,i.lastSelected)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}},byAttr:(i,m,p)=>{const v=Q=>{se(Q,i.selected),se(Q,i.firstSelected),se(Q,i.lastSelected)},T=Q=>{Ps(Q,i.selected,"1")},D=Q=>{I(Q),p()},I=Q=>{const he=eo(Q,`${i.selectedSelector},${i.firstSelectedSelector},${i.lastSelectedSelector}`);je(he,v)};return{clearBeforeUpdate:I,clear:D,selectRange:(Q,he,De,St)=>{D(Q),je(he,T),Ps(De,i.firstSelected,"1"),Ps(St,i.lastSelected,"1"),m(he,De,St)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}}},Ix=(i,m,p,v)=>{switch(i.tag){case"none":return m();case"single":return v(i.element);case"multiple":return p(i.elements)}},Lx=()=>({tag:"none"}),qt=i=>({tag:"multiple",elements:i}),ba=i=>({tag:"single",element:i}),P1=(i,m,p)=>({get:()=>Of(i(),p).fold(()=>m().fold(Lx,ba),qt)}),va=(i,m)=>{const p=i.slice(0,m[m.length-1].row+1),v=Zb(p);return To(v,T=>{const D=T.cells.slice(0,m[m.length-1].column+1);return jt(D,I=>I.element)})},iu=(i,m)=>{const p=i.slice(m[0].row+m[0].rowspan-1,i.length),v=Zb(p);return To(v,T=>{const D=T.cells.slice(m[0].column+m[0].colspan-1,T.cells.length);return jt(D,I=>I.element)})},qC=(i,m,p)=>{const v=ko.fromTable(i);return ai(v,m).map(D=>{const I=Kh(v,p,!1),{rows:Z}=Dc(I),Q=va(Z,D),he=iu(Z,D);return{upOrLeftCells:Q,downOrRightCells:he}})},ah=(i,m,p,v,T,D,I)=>({target:i,x:m,y:p,stop:v,prevent:T,kill:D,raw:I}),$1=i=>{const m=ve.fromDom(Ut(i).getOr(i.target)),p=()=>i.stopPropagation(),v=()=>i.preventDefault(),T=Zn(v,p);return ah(m,i.clientX,i.clientY,p,v,T,i)},lh=(i,m)=>p=>{i(p)&&m($1(p))},F1=(i,m,p,v,T)=>{const D=lh(p,v);return i.dom.addEventListener(m,D,T),{unbind:dt(B_,i,m,D,T)}},Hx=(i,m,p,v)=>F1(i,m,p,v,!1),B_=(i,m,p,v)=>{i.dom.removeEventListener(m,p,v)},P_=Ne,hp=(i,m,p)=>Hx(i,m,P_,p),ih=$1,KC=i=>!Q0(ve.fromDom(i.target),"ephox-snooker-resizer-bar"),YC=(i,m)=>{const p=P1(()=>ve.fromDom(i.getBody()),()=>Oy(su(i),hd(i)),Im.selectedSelector),v=(Q,he,De)=>{Xr(he).each(Ht=>{const Ft=jt(Q,In=>In.dom),Dt=tS(i),an=Bm(Ot,ve.fromDom(i.getDoc()),Dt),ht=mr(i),kt=qC(Ht,{selection:ht},an).map(In=>ir(In,qn=>jt(qn,bn=>bn.dom))).getOrUndefined();VS(i,Ft,he.dom,De.dom,kt)})},T=()=>n_(i),D=M_.byAttr(Im,v,T);return i.on("init",Q=>{const he=i.getWin(),De=Fg(i),St=hd(i),Ht=()=>{const Rs=i.selection,ya=ve.fromDom(Rs.getStart()),_l=ve.fromDom(Rs.getEnd());Bu(Xr,[ya,_l]).fold(()=>D.clear(De),Ot)},Ft=Bx(he,De,St,D),Dt=Y0(he,De,St,D),an=X0(he,De,St,D),ht=Rs=>Rs.raw.shiftKey===!0;i.on("TableSelectorChange",Rs=>an(Rs.start,Rs.finish));const kt=(Rs,ya)=>{ht(Rs)&&(ya.kill&&Rs.kill(),ya.selection.each(_l=>{const Hu=sh.relative(_l.start,_l.finish),Pi=k0(he,Hu);i.selection.setRng(Pi)}))},In=Rs=>{const ya=ih(Rs);if(ya.raw.shiftKey&&Iu(ya.raw.which)){const _l=i.selection.getRng(),Hu=ve.fromDom(_l.startContainer),Pi=ve.fromDom(_l.endContainer);Dt.keyup(ya,Hu,_l.startOffset,Pi,_l.endOffset).each(vp=>{kt(ya,vp)})}},qn=Rs=>{const ya=ih(Rs);m.hide();const _l=i.selection.getRng(),Hu=ve.fromDom(_l.startContainer),Pi=ve.fromDom(_l.endContainer),vp=R(Rx,Nx)(ve.fromDom(i.selection.getStart()));Dt.keydown(ya,Hu,_l.startOffset,Pi,_l.endOffset,vp).each(go=>{kt(ya,go)}),m.show()},bn=Rs=>Rs.button===0,Mr=Rs=>Rs.buttons===void 0?!0:(Rs.buttons&1)!==0,Ls=Rs=>{Ft.clearstate()},cc=Rs=>{bn(Rs)&&KC(Rs)&&Ft.mousedown(ih(Rs))},Bi=Rs=>{Mr(Rs)&&KC(Rs)&&Ft.mouseover(ih(Rs))},Za=Rs=>{bn(Rs)&&KC(Rs)&&Ft.mouseup(ih(Rs))},mh=(()=>{const Rs=I0(ve.fromDom(De)),ya=I0(0);return{touchEnd:Hu=>{const Pi=ve.fromDom(Hu.target);if(ms("td")(Pi)||ms("th")(Pi)){const vp=Rs.get(),go=ya.get();ft(vp,Pi)&&Hu.timeStamp-go<300&&(Hu.preventDefault(),an(Pi,Pi))}Rs.set(Pi),ya.set(Hu.timeStamp)}}})();i.on("dragstart",Ls),i.on("mousedown",cc),i.on("mouseover",Bi),i.on("mouseup",Za),i.on("touchend",mh.touchEnd),i.on("keyup",In),i.on("keydown",qn),i.on("NodeChange",Ht)}),i.on("PreInit",()=>{i.serializer.addTempAttr(Im.firstSelected),i.serializer.addTempAttr(Im.lastSelected)}),{getSelectedCells:()=>Ix(p.get(),oe([]),Q=>jt(Q,he=>he.dom),Q=>[Q.dom]),clearSelectedCells:Q=>D.clear(ve.fromDom(Q))}},fi=i=>{let m=[];return{bind:D=>{if(D===void 0)throw new Error("Event bind error: undefined handler");m.push(D)},unbind:D=>{m=bt(m,I=>I!==D)},trigger:(...D)=>{const I={};je(i,(Z,Q)=>{I[Z]=D[Q]}),je(m,Z=>{Z(I)})}}},am=i=>{const m=ir(i,v=>({bind:v.bind,unbind:v.unbind})),p=ir(i,v=>v.trigger);return{registry:m,trigger:p}},ev=(i,m)=>{let p=null;const v=()=>{Ho(p)||(clearTimeout(p),p=null)};return{cancel:v,throttle:(...D)=>{v(),p=setTimeout(()=>{p=null,i.apply(null,D)},m)}}},Lu=i=>i.slice(0).sort(),tv=(i,m)=>{throw new Error("All required keys ("+Lu(i).join(", ")+") were not specified. Specified keys were: "+Lu(m).join(", ")+".")},$_=i=>{throw new Error("Unsupported keys for object: "+Lu(i).join(", "))},nv=(i,m)=>{if(!Hn(m))throw new Error("The "+i+" fields must be an array. Was: "+m+".");je(m,p=>{if(!So(p))throw new Error("The value "+p+" in the "+i+" fields was not a string.")})},ov=(i,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Lu(i).join(", ")+") were not.")},F_=i=>{const m=Lu(i);F(m,(v,T)=>T<m.length-1&&v===m[T+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},I_=(i,m)=>L_(i,m,{validate:Go,label:"function"}),L_=(i,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return nv("required",m),F_(m),v=>{const T=Bt(v);it(m,Z=>kn(T,Z))||tv(m,T),i(m,T);const I=bt(m,Z=>!p.validate(v[Z],Z));return I.length>0&&ov(I,p.label),v}},H_=(i,m)=>{const p=bt(m,v=>!kn(i,v));p.length>0&&$_(p)},sv=i=>I_(H_,i),zx=sv(["compare","extract","mutate","sink"]),z_=sv(["element","start","stop","destroy"]),rv=sv(["forceDrop","drop","move","delayDrop"]),Wa=()=>{let i=le.none();const m=()=>{i=le.none()},p=(D,I)=>{const Z=i.map(Q=>D.compare(Q,I));return i=le.some(I),Z},v=(D,I)=>{I.extract(D).each(Q=>{p(I,Q).each(De=>{T.trigger.move(De)})})},T=am({move:fi(["info"])});return{onEvent:v,reset:m,events:T.registry}},uu=()=>{const i=am({move:fi(["info"])});return{onEvent:Ot,reset:Ot,events:i.registry}},Ni=()=>{const i=uu(),m=Wa();let p=i;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=i},isOn:()=>p===m,onEvent:(Z,Q)=>{p.onEvent(Z,Q)},events:m.events}},cv=(i,m,p)=>{let v=!1;const T=am({start:fi([]),stop:fi([])}),D=Ni(),I=()=>{Dt.stop(),D.isOn()&&(D.off(),T.trigger.stop())},Z=ev(I,200),Q=ht=>{Dt.start(ht),D.on(),T.trigger.start()},he=ht=>{Z.cancel(),D.onEvent(ht,m)};D.events.move.bind(ht=>{m.mutate(i,ht.info)});const De=()=>{v=!0},St=()=>{v=!1},Ht=()=>v,Ft=ht=>(...kt)=>{v&&ht.apply(null,kt)},Dt=m.sink(rv({forceDrop:I,drop:Ft(I),move:Ft(he),delayDrop:Ft(Z.throttle)}),p),an=()=>{Dt.destroy()};return{element:Dt.element,go:Q,on:De,off:St,isActive:Ht,destroy:an,events:T.registry}},I1=i=>{const m=i.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},L1=I1("ephox-dragster").resolve,V_=i=>{const m={layerClass:L1("blocker"),...i},p=ve.fromTag("div");return Ps(p,"role","presentation"),ts(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Xm(p,L1("blocker")),Xm(p,m.layerClass),{element:oe(p),destroy:()=>{Dr(p)}}};var Zx=zx({compare:(i,m)=>$n(m.left-i.left,m.top-i.top),extract:i=>le.some($n(i.x,i.y)),sink:(i,m)=>{const p=V_(m),v=hp(p.element(),"mousedown",i.forceDrop),T=hp(p.element(),"mouseup",i.drop),D=hp(p.element(),"mousemove",i.move),I=hp(p.element(),"mouseout",i.delayDrop),Z=()=>{p.destroy(),T.unbind(),D.unbind(),I.unbind(),v.unbind()},Q=De=>{Ks(De,p.element())},he=()=>{Dr(p.element())};return z_({element:p.element,start:Q,stop:he,destroy:Z})},mutate:(i,m)=>{i.mutate(m.left,m.top)}});const av=(i,m={})=>{var p;const v=(p=m.mode)!==null&&p!==void 0?p:Zx;return cv(i,v,m)},Ct=I1("ephox-snooker").resolve,Mi=()=>{const i=am({drag:fi(["xDelta","yDelta"])});return{mutate:(p,v)=>{i.trigger.drag(p,v)},events:i.registry}},Gx=()=>{const i=am({drag:fi(["xDelta","yDelta","target"])});let m=le.none();const p=Mi();return p.events.drag.bind(D=>{m.each(I=>{i.trigger.drag(D.xDelta,D.yDelta,I)})}),{assign:D=>{m=le.some(D)},get:()=>m,mutate:p.mutate,events:i.registry}},XC=(i,m,p,v,T)=>{const D=ve.fromTag("div");return ts(D,{position:"absolute",left:m-v/2+"px",top:p+"px",height:T+"px",width:v+"px"}),tc(D,{"data-column":i,role:"presentation"}),D},H1=(i,m,p,v,T)=>{const D=ve.fromTag("div");return ts(D,{position:"absolute",left:m+"px",top:p-T/2+"px",height:T+"px",width:v+"px"}),tc(D,{"data-row":i,role:"presentation"}),D},uh=Ct("resizer-bar"),JC=Ct("resizer-rows"),z1=Ct("resizer-cols"),qx=7,W_=(i,m)=>To(i.all,(p,v)=>m(p.element)?[v]:[]),QC=(i,m)=>{const p=[];return Vn(i.grid.columns,v=>{ko.getColumnAt(i,v).map(D=>D.element).forall(m)&&p.push(v)}),bt(p,v=>{const T=ko.filterItems(i,D=>D.column===v);return it(T,D=>m(D.element))})},V1=i=>{const m=eo(i.parent(),"."+uh);je(m,Dr)},og=(i,m,p)=>{const v=i.origin();je(m,T=>{T.each(D=>{const I=p(v,D);Xm(I,uh),Ks(i.parent(),I)})})},Kx=(i,m,p,v)=>{og(i,m,(T,D)=>{const I=XC(D.col,D.x-T.left,p.top-T.top,qx,v);return Xm(I,z1),I})},Yx=(i,m,p,v)=>{og(i,m,(T,D)=>{const I=H1(D.row,p.left-T.left,D.y-T.top,v,qx);return Xm(I,JC),I})},Z_=(i,m,p,v,T)=>{const D=Jr(p),I=m.isResizable,Z=v.length>0?Ya.positions(v,p):[],Q=Z.length>0?W_(i,I):[],he=bt(Z,(Ft,Dt)=>Ke(Q,an=>Dt===an));Yx(m,he,D,Es(p));const De=T.length>0?Rg.positions(T,p):[],St=De.length>0?QC(i,I):[],Ht=bt(De,(Ft,Dt)=>Ke(St,an=>Dt===an));Kx(m,Ht,D,mt(p))},e2=(i,m)=>{if(V1(i),i.isResizable(m)){const p=ko.fromTable(m),v=vf(p),T=ud(p);Z_(p,i,m,v,T)}},j_=(i,m)=>{const p=eo(i.parent(),"."+uh);je(p,m)},gi=i=>{j_(i,m=>{Wn(m,"display","none")})},ml=i=>{j_(i,m=>{Wn(m,"display","block")})},pp=i=>Q0(i,JC),hR=i=>Q0(i,z1),G_=Ct("resizer-bar-dragging"),t2=i=>{const m=Gx(),p=av(m,{});let v=le.none();const T=(Dt,an)=>le.from(cr(Dt,an));m.events.drag.bind(Dt=>{T(Dt.target,"data-row").each(an=>{const ht=ur(Dt.target,"top");Wn(Dt.target,"top",ht+Dt.yDelta+"px")}),T(Dt.target,"data-column").each(an=>{const ht=ur(Dt.target,"left");Wn(Dt.target,"left",ht+Dt.xDelta+"px")})});const D=(Dt,an)=>{const ht=ur(Dt,an),kt=Fs(Dt,"data-initial-"+an,0);return ht-kt};p.events.stop.bind(()=>{m.get().each(Dt=>{v.each(an=>{T(Dt,"data-row").each(ht=>{const kt=D(Dt,"top");se(Dt,"data-initial-top"),Ft.trigger.adjustHeight(an,kt,parseInt(ht,10))}),T(Dt,"data-column").each(ht=>{const kt=D(Dt,"left");se(Dt,"data-initial-left"),Ft.trigger.adjustWidth(an,kt,parseInt(ht,10))}),e2(i,an)})})});const I=(Dt,an)=>{Ft.trigger.startAdjust(),m.assign(Dt),Ps(Dt,"data-initial-"+an,ur(Dt,an)),Xm(Dt,G_),Wn(Dt,"opacity","0.2"),p.go(i.parent())},Z=hp(i.parent(),"mousedown",Dt=>{pp(Dt.target)&&I(Dt.target,"top"),hR(Dt.target)&&I(Dt.target,"left")}),Q=Dt=>ft(Dt,i.view()),he=Dt=>Tr(Dt,"table",Q).filter(n1),De=hp(i.view(),"mouseover",Dt=>{he(Dt.target).fold(()=>{gn(Dt.target)&&V1(i)},an=>{p.isActive()&&(v=le.some(an),e2(i,an))})}),St=()=>{Z.unbind(),De.unbind(),p.destroy(),V1(i)},Ht=Dt=>{e2(i,Dt)},Ft=am({adjustHeight:fi(["table","delta","row"]),adjustWidth:fi(["table","delta","column"]),startAdjust:fi([])});return{destroy:St,refresh:Ht,on:p.on,off:p.off,hideBars:dt(gi,i),showBars:dt(ml,i),events:Ft.registry}},q_={create:(i,m,p)=>{const v=Ya,T=Rg,D=t2(i),I=am({beforeResize:fi(["table","type"]),afterResize:fi(["table","type"]),startDrag:fi([])});return D.events.adjustHeight.bind(Z=>{const Q=Z.table;I.trigger.beforeResize(Q,"row");const he=v.delta(Z.delta,Q);Yy(Q,he,Z.row),I.trigger.afterResize(Q,"row")}),D.events.startAdjust.bind(Z=>{I.trigger.startDrag()}),D.events.adjustWidth.bind(Z=>{const Q=Z.table;I.trigger.beforeResize(Q,"col");const he=T.delta(Z.delta,Q),De=p(Q);Ky(Q,he,Z.column,m,De),I.trigger.afterResize(Q,"col")}),{on:D.on,off:D.off,refreshBars:D.refresh,hideBars:D.hideBars,showBars:D.showBars,destroy:D.destroy,events:I.registry}}},lm={only:(i,m)=>{const p=Ga(i)?Cn(i):i;return{parent:oe(p),view:oe(i),origin:oe($n(0,0)),isResizable:m}},detached:(i,m,p)=>{const v=()=>Jr(m);return{parent:oe(m),view:oe(i),origin:v,isResizable:p}},body:(i,m,p)=>({parent:oe(m),view:oe(i),origin:oe($n(0,0)),isResizable:p})},lv=()=>{const i=ve.fromTag("div");return ts(i,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ks(Vr(),i),i},Y_=(i,m)=>i.inline?lm.body(ve.fromDom(i.getBody()),lv(),m):lm.only(ve.fromDom(i.getDoc()),m),X_=(i,m)=>{i.inline&&Dr(m.parent())},Jx=i=>zn(i)&&i.nodeName==="TABLE",U1="bar-",n2=i=>cr(i,"data-mce-resize")!=="false",Qx=i=>{const m=ko.fromTable(i);ko.hasColumns(m)||je(Pl(i),p=>{const v=Ds(p,"width");Wn(p,"width",v),se(p,"width")})},bR=i=>wc(i,"corner-"),bp=i=>Hd(i,"corner-"),o2=i=>{const m=up(),p=up(),v=up();let T,D,I,Z;const Q=kt=>Zc(i,kt),he=()=>sc(i)?Rf():Vg(),De=kt=>tm(kt).columns,St=kt=>tm(kt).rows,Ht=(kt,In,qn,bn)=>{const Mr=bp(In),Ls=ll(Mr,"e"),cc=wc(Mr,"n");if(D===""&&C1(kt),Z===""&&a_(kt),qn!==T&&D!==""){Wn(kt,"width",D);const Bi=he(),Za=Q(kt),dh=sc(i)||Ls?De(kt)-1:0;Ky(kt,qn-T,dh,Bi,Za)}else if(sS(D)){const Bi=parseFloat(D.replace("%","")),Za=qn*Bi/T;Wn(kt,"width",Za+"%")}if(rS(D)&&Qx(kt),bn!==I&&Z!==""){Wn(kt,"height",Z);const Bi=cc?0:St(kt)-1;Yy(kt,bn-I,Bi)}},Ft=()=>{p.on(kt=>{kt.destroy()}),v.on(kt=>{X_(i,kt)})};return i.on("init",()=>{const kt=Y_(i,n2);if(v.set(kt),fd(i)&&ou(i)){const In=he(),qn=q_.create(kt,In,Q);qn.on(),qn.events.startDrag.bind(bn=>{m.set(i.selection.getRng())}),qn.events.beforeResize.bind(bn=>{const Mr=bn.table.dom;o_(i,Mr,Ef(Mr),by(Mr),U1+bn.type)}),qn.events.afterResize.bind(bn=>{const Mr=bn.table,Ls=Mr.dom;yl(Mr),m.on(cc=>{i.selection.setRng(cc),i.focus()}),Wc(i,Ls,Ef(Ls),by(Ls),U1+bn.type),i.undoManager.add()}),p.set(qn)}}),i.on("ObjectResizeStart",kt=>{const In=kt.target;if(Jx(In)){const qn=ve.fromDom(In);je(i.dom.select(".mce-clonedresizable"),bn=>{i.dom.addClass(bn,"mce-"+gy(i)+"-columns")}),!fC(qn)&&Fm(i)?w1(qn):!qS(qn)&&Tf(i)&&C1(qn),KS(qn)&&wc(kt.origin,U1)&&C1(qn),T=kt.width,D=nu(i)?"":vy(i,In).getOr(""),I=kt.height,Z=oS(i,In).getOr("")}}),i.on("ObjectResized",kt=>{const In=kt.target;if(Jx(In)){const qn=ve.fromDom(In),bn=kt.origin;bR(bn)&&Ht(qn,bn,kt.width,kt.height),yl(qn),Zm(i,qn.dom,rc)}}),i.on("SwitchMode",()=>{p.on(kt=>{i.mode.isReadOnly()?kt.hideBars():kt.showBars()})}),i.on("dragstart dragend",kt=>{p.on(In=>{kt.type==="dragstart"?(In.hideBars(),In.off()):(In.on(),In.showBars())})}),i.on("remove",()=>{Ft()}),{refresh:kt=>{p.on(In=>In.refreshBars(ve.fromDom(kt)))},hide:()=>{p.on(kt=>kt.hideBars())},show:()=>{p.on(kt=>kt.showBars())}}},vR=i=>{$g(i);const m=o2(i),p=YC(i,m),v=jc(i,m,p);return np(i,v),ax(i,v),Zh(i,v),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},eT=i=>({table:vR(i)});var J_=()=>{Sr.add("dom",eT)};J_()})();(function(){var Sr=tinymce.util.Tools.resolve("tinymce.PluginManager");const js=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,ws=bt=>mn=>mn.options.get(bt),us=bt=>{const mn=bt.options.register;mn("autolink_pattern",{processor:"regexp",default:new RegExp("^"+js().source+"$","i")}),mn("link_default_target",{processor:"string"}),mn("link_default_protocol",{processor:"string",default:"https"})},Ko=ws("autolink_pattern"),ps=ws("link_default_target"),So=ws("link_default_protocol"),rt=ws("allow_unsafe_link_target"),Hn=(bt,mn,Pe)=>{var et;return Pe(bt,mn.prototype)?!0:((et=bt.constructor)===null||et===void 0?void 0:et.name)===mn.name},Ho=bt=>{const mn=typeof bt;return bt===null?"null":mn==="object"&&Array.isArray(bt)?"array":mn==="object"&&Hn(bt,String,(Pe,et)=>et.isPrototypeOf(Pe))?"string":mn},mo=bt=>mn=>Ho(mn)===bt,Uo=bt=>mn=>bt===mn,Wo=mo("string"),zn=Uo(void 0),Go=bt=>bt==null,Xn=bt=>!Go(bt),Ot=bt=>mn=>!bt(mn),Zn=Object.hasOwnProperty,nt=(bt,mn)=>Zn.call(bt,mn),oe=(bt,mn,Pe)=>bt.length>=mn.length&&bt.substr(Pe,Pe+mn.length)===mn,ut=(bt,mn,Pe=0,et)=>{const F=bt.indexOf(mn,Pe);return F!==-1?zn(et)?!0:F+mn.length<=et:!1},oo=(bt,mn)=>oe(bt,mn,0),dt="\uFEFF",W=bt=>bt===dt,Rt=bt=>bt.replace(/\uFEFF/g,"");var sn=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const Xt=bt=>bt.nodeType===3,Ne=bt=>bt.nodeType===1,le=bt=>/^[(\[{ \u00a0]$/.test(bt),Bo=bt=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(bt),gt=bt=>/[?!,.;:]/.test(bt),$e=(bt,mn,Pe)=>{for(let et=mn-1;et>=0;et--){const F=bt.charAt(et);if(!W(F)&&Pe(F))return et}return-1},A=(bt,mn)=>{let Pe=bt,et=mn;for(;Ne(Pe)&&Pe.childNodes[et];)Pe=Pe.childNodes[et],et=Xt(Pe)?Pe.data.length:Pe.childNodes.length;return{container:Pe,offset:et}},kn=(bt,mn)=>{var Pe;const et=bt.schema.getVoidElements(),F=Ko(bt),{dom:Ss,selection:io}=bt;if(Ss.getParent(io.getNode(),"a[href]")!==null)return null;const To=io.getRng(),it=sn(Ss,ro=>Ss.isBlock(ro)||nt(et,ro.nodeName.toLowerCase())||Ss.getContentEditable(ro)==="false"),{container:Mt,offset:xe}=A(To.endContainer,To.endOffset),Re=(Pe=Ss.getParent(Mt,Ss.isBlock))!==null&&Pe!==void 0?Pe:Ss.getRoot(),Fe=it.backwards(Mt,xe+mn,(ro,ir)=>{const Po=ro.data,Ms=$e(Po,ir,Ot(le));return Ms===-1||gt(Po[Ms])?Ms:Ms+1},Re);if(!Fe)return null;let ie=Fe.container;const _n=it.backwards(Fe.container,Fe.offset,(ro,ir)=>{ie=ro;const Po=$e(ro.data,ir,le);return Po===-1?Po:Po+1},Re),Un=Ss.createRng();_n?Un.setStart(_n.container,_n.offset):Un.setStart(ie,0),Un.setEnd(Fe.container,Fe.offset);const rs=Rt(Un.toString()).match(F);if(rs){let ro=rs[0];return oo(ro,"www.")?ro=So(bt)+"://"+ro:ut(ro,"@")&&!Bo(ro)&&(ro="mailto:"+ro),{rng:Un,url:ro}}else return null},Ke=(bt,mn)=>{const{dom:Pe,selection:et}=bt,{rng:F,url:Ss}=mn,io=et.getBookmark();et.setRng(F);const To="createlink",it={command:To,ui:!1,value:Ss};if(!bt.dispatch("BeforeExecCommand",it).isDefaultPrevented()){bt.getDoc().execCommand(To,!1,Ss),bt.dispatch("ExecCommand",it);const xe=ps(bt);if(Wo(xe)){const Re=et.getNode();Pe.setAttrib(Re,"target",xe),xe==="_blank"&&!rt(bt)&&Pe.setAttrib(Re,"rel","noopener")}}et.moveToBookmark(io),bt.nodeChanged()},Vn=bt=>{const mn=kn(bt,-1);Xn(mn)&&Ke(bt,mn)},jt=Vn,je=bt=>{const mn=kn(bt,0);Xn(mn)&&Ke(bt,mn)},Jn=bt=>{bt.on("keydown",mn=>{mn.keyCode===13&&!mn.isDefaultPrevented()&&je(bt)}),bt.on("keyup",mn=>{mn.keyCode===32?Vn(bt):(mn.keyCode===48&&mn.shiftKey||mn.keyCode===221)&&jt(bt)})};var bs=()=>{Sr.add("autolink",bt=>{us(bt),Jn(bt)})};bs()})();(function(){const Sr=nt=>{let oe=nt;return{get:()=>oe,set:dt=>{oe=dt}}};var js=tinymce.util.Tools.resolve("tinymce.PluginManager"),ws=tinymce.util.Tools.resolve("tinymce.Env");const us=nt=>nt.dispatch("ResizeEditor"),Ko=nt=>oe=>oe.options.get(nt),ps=nt=>{const oe=nt.options.register;oe("autoresize_overflow_padding",{processor:"number",default:1}),oe("autoresize_bottom_margin",{processor:"number",default:50})},So=Ko("min_height"),rt=Ko("max_height"),Hn=Ko("autoresize_overflow_padding"),Ho=Ko("autoresize_bottom_margin"),mo=nt=>nt.plugins.fullscreen&&nt.plugins.fullscreen.isFullscreen(),Uo=(nt,oe)=>{const ut=nt.getBody();ut&&(ut.style.overflowY=oe?"":"hidden",oe||(ut.scrollTop=0))},Wo=(nt,oe,ut,oo)=>{var dt;const W=parseInt((dt=nt.getStyle(oe,ut,oo))!==null&&dt!==void 0?dt:"",10);return isNaN(W)?0:W},zn=nt=>{if((nt==null?void 0:nt.type.toLowerCase())==="setcontent"){const oe=nt;return oe.selection===!0||oe.paste===!0}else return!1},Go=(nt,oe,ut,oo)=>{var dt;const W=nt.dom,Rt=nt.getDoc();if(!Rt)return;if(mo(nt)){Uo(nt,!0);return}const sn=Rt.documentElement,Xt=oo?oo():Hn(nt),Ne=(dt=So(nt))!==null&&dt!==void 0?dt:nt.getElement().offsetHeight;let le=Ne;const Bo=Wo(W,sn,"margin-top",!0),gt=Wo(W,sn,"margin-bottom",!0);let $e=sn.offsetHeight+Bo+gt+Xt;$e<0&&($e=0);const A=nt.getContainer().offsetHeight,kn=nt.getContentAreaContainer().offsetHeight,Ke=A-kn;$e+Ke>Ne&&(le=$e+Ke);const Vn=rt(nt);Vn&&le>Vn?(le=Vn,Uo(nt,!0)):Uo(nt,!1);const jt=oe.get();if(jt.set&&(nt.dom.setStyles(nt.getDoc().documentElement,{"min-height":0}),nt.dom.setStyles(nt.getBody(),{"min-height":"inherit"})),le!==jt.totalHeight&&($e-Xt!==jt.contentHeight||!jt.set)){const je=le-jt.totalHeight;if(W.setStyle(nt.getContainer(),"height",le+"px"),oe.set({totalHeight:le,contentHeight:$e,set:!0}),us(nt),ws.browser.isSafari()&&(ws.os.isMacOS()||ws.os.isiOS())){const Jn=nt.getWin();Jn.scrollTo(Jn.pageXOffset,Jn.pageYOffset)}nt.hasFocus()&&zn(ut)&&nt.selection.scrollIntoView(),(ws.browser.isSafari()||ws.browser.isChromium())&&je<0&&Go(nt,oe,ut,oo)}},Xn=(nt,oe)=>{const ut=()=>Ho(nt);nt.on("init",oo=>{const dt=Hn(nt),W=nt.dom;W.setStyles(nt.getDoc().documentElement,{height:"auto"}),ws.browser.isEdge()||ws.browser.isIE()?W.setStyles(nt.getBody(),{paddingLeft:dt,paddingRight:dt,"min-height":0}):W.setStyles(nt.getBody(),{paddingLeft:dt,paddingRight:dt}),Go(nt,oe,oo,ut)}),nt.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",oo=>{Go(nt,oe,oo,ut)})},Ot=(nt,oe)=>{nt.addCommand("mceAutoResize",()=>{Go(nt,oe)})};var Zn=()=>{js.add("autoresize",nt=>{if(ps(nt),nt.options.isSet("resize")||nt.options.set("resize",!1),!nt.inline){const oe=Sr({totalHeight:0,contentHeight:0,set:!1});Ot(nt,oe),Xn(nt,oe)}})};Zn()})();(function(){const Sr=q=>{let J=q;return{get:()=>J,set:Tn=>{J=Tn}}};var js=tinymce.util.Tools.resolve("tinymce.PluginManager");const ws=q=>({isFullscreen:()=>q.get()!==null}),us=(q,J,Ae)=>{var Ye;return Ae(q,J.prototype)?!0:((Ye=q.constructor)===null||Ye===void 0?void 0:Ye.name)===J.name},Ko=q=>{const J=typeof q;return q===null?"null":J==="object"&&Array.isArray(q)?"array":J==="object"&&us(q,String,(Ae,Ye)=>Ye.isPrototypeOf(Ae))?"string":J},ps=q=>J=>Ko(J)===q,So=q=>J=>typeof J===q,rt=q=>J=>q===J,Hn=ps("string"),Ho=ps("object"),mo=ps("array"),Uo=rt(null),Wo=So("boolean"),zn=rt(void 0),Go=q=>q==null,Xn=q=>!Go(q),Ot=So("function"),Zn=So("number"),nt=()=>{},oe=(q,J)=>(...Ae)=>q(J.apply(null,Ae)),ut=(q,J)=>Ae=>q(J(Ae)),oo=q=>()=>q;function dt(q,...J){return(...Ae)=>{const Ye=J.concat(Ae);return q.apply(null,Ye)}}const W=oo(!1),Rt=oo(!0);class sn{constructor(J,Ae){this.tag=J,this.value=Ae}static some(J){return new sn(!0,J)}static none(){return sn.singletonNone}fold(J,Ae){return this.tag?Ae(this.value):J()}isSome(){return this.tag}isNone(){return!this.tag}map(J){return this.tag?sn.some(J(this.value)):sn.none()}bind(J){return this.tag?J(this.value):sn.none()}exists(J){return this.tag&&J(this.value)}forall(J){return!this.tag||J(this.value)}filter(J){return!this.tag||J(this.value)?this:sn.none()}getOr(J){return this.tag?this.value:J}or(J){return this.tag?this:J}getOrThunk(J){return this.tag?this.value:J()}orThunk(J){return this.tag?this:J()}getOrDie(J){if(this.tag)return this.value;throw new Error(J??"Called getOrDie on None")}static from(J){return Xn(J)?sn.some(J):sn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(J){this.tag&&J(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}sn.singletonNone=new sn(!1);const Xt=Array.prototype.push,Ne=(q,J)=>{const Ae=q.length,Ye=new Array(Ae);for(let Tn=0;Tn<Ae;Tn++){const Wn=q[Tn];Ye[Tn]=J(Wn,Tn)}return Ye},le=(q,J)=>{for(let Ae=0,Ye=q.length;Ae<Ye;Ae++){const Tn=q[Ae];J(Tn,Ae)}},Bo=(q,J)=>{const Ae=[];for(let Ye=0,Tn=q.length;Ye<Tn;Ye++){const Wn=q[Ye];J(Wn,Ye)&&Ae.push(Wn)}return Ae},gt=(q,J,Ae)=>{for(let Ye=0,Tn=q.length;Ye<Tn;Ye++){const Wn=q[Ye];if(J(Wn,Ye))return sn.some(Wn);if(Ae(Wn,Ye))break}return sn.none()},$e=(q,J)=>gt(q,J,W),A=q=>{const J=[];for(let Ae=0,Ye=q.length;Ae<Ye;++Ae){if(!mo(q[Ae]))throw new Error("Arr.flatten item "+Ae+" was not an array, input: "+q);Xt.apply(J,q[Ae])}return J},kn=(q,J)=>A(Ne(q,J)),Ke=(q,J)=>J>=0&&J<q.length?sn.some(q[J]):sn.none(),Vn=q=>Ke(q,0),jt=(q,J)=>{for(let Ae=0;Ae<q.length;Ae++){const Ye=J(q[Ae],Ae);if(Ye.isSome())return Ye}return sn.none()},je=(q,J,Ae)=>q.isSome()&&J.isSome()?sn.some(Ae(q.getOrDie(),J.getOrDie())):sn.none(),Jn=q=>{const J=Sr(sn.none()),Ae=()=>J.get().each(q);return{clear:()=>{Ae(),J.set(sn.none())},isSet:()=>J.get().isSome(),get:()=>J.get(),set:Ds=>{Ae(),J.set(sn.some(Ds))}}},bs=()=>Jn(q=>q.unbind()),bt=()=>{const q=Jn(nt);return{...q,on:Ae=>q.get().each(Ae)}},mn=(q,J)=>{let Ae=null;return{cancel:()=>{Uo(Ae)||(clearTimeout(Ae),Ae=null)},throttle:(...Wn)=>{Uo(Ae)&&(Ae=setTimeout(()=>{Ae=null,q.apply(null,Wn)},J))}}},Pe=Object.keys,et=(q,J)=>{const Ae=Pe(q);for(let Ye=0,Tn=Ae.length;Ye<Tn;Ye++){const Wn=Ae[Ye],ts=q[Wn];J(ts,Wn)}},F=typeof window<"u"?window:Function("return this;")(),Ss=(q,J)=>{let Ae=J??F;for(let Ye=0;Ye<q.length&&Ae!==void 0&&Ae!==null;++Ye)Ae=Ae[q[Ye]];return Ae},io=(q,J)=>{const Ae=q.split(".");return Ss(Ae,J)},To=(q,J)=>io(q,J),it=(q,J)=>{const Ae=To(q,J);if(Ae==null)throw new Error(q+" not available on this browser");return Ae},Mt=Object.getPrototypeOf,xe=q=>it("HTMLElement",q),Re=q=>{const J=io("ownerDocument.defaultView",q);return Ho(q)&&(xe(J).prototype.isPrototypeOf(q)||/^HTML\w*Element$/.test(Mt(q).constructor.name))},Fe=9,ie=11,_n=1,Un=3,Bt=q=>q.dom.nodeType,rs=q=>J=>Bt(J)===q,ro=q=>ir(q)&&Re(q.dom),ir=rs(_n),Po=rs(Un),Ms=rs(ie),ra=(q,J,Ae)=>{if(Hn(Ae)||Wo(Ae)||Zn(Ae))q.setAttribute(J,Ae+"");else throw new Error("Attribute value was not simple")},zs=(q,J,Ae)=>{ra(q.dom,J,Ae)},As=(q,J)=>{const Ae=q.dom.getAttribute(J);return Ae===null?void 0:Ae},gs=(q,J)=>{q.dom.removeAttribute(J)},Hr=q=>q.dom.classList!==void 0,xs=(q,J)=>Hr(q)&&q.dom.classList.contains(J),bo=(q,J,Ae=0,Ye)=>{const Tn=q.indexOf(J,Ae);return Tn!==-1?zn(Ye)?!0:Tn+J.length<=Ye:!1},xa=q=>q.style!==void 0&&Ot(q.style.getPropertyValue),vo=(q,J)=>{const Ye=(J||document).createElement("div");if(Ye.innerHTML=q,!Ye.hasChildNodes()||Ye.childNodes.length>1){const Tn="HTML does not have a single root node";throw new Error(Tn)}return ec(Ye.childNodes[0])},ds=(q,J)=>{const Ye=(J||document).createElement(q);return ec(Ye)},xr=(q,J)=>{const Ye=(J||document).createTextNode(q);return ec(Ye)},ec=q=>{if(q==null)throw new Error("Node cannot be null or undefined");return{dom:q}},yo={fromHtml:vo,fromTag:ds,fromText:xr,fromDom:ec,fromPoint:(q,J,Ae)=>sn.from(q.dom.elementFromPoint(J,Ae)).map(ec)},Ta=(q,J)=>{const Ae=q.dom;if(Ae.nodeType!==_n)return!1;{const Ye=Ae;if(Ye.matches!==void 0)return Ye.matches(J);if(Ye.msMatchesSelector!==void 0)return Ye.msMatchesSelector(J);if(Ye.webkitMatchesSelector!==void 0)return Ye.webkitMatchesSelector(J);if(Ye.mozMatchesSelector!==void 0)return Ye.mozMatchesSelector(J);throw new Error("Browser lacks native selectors")}},xt=q=>q.nodeType!==_n&&q.nodeType!==Fe&&q.nodeType!==ie||q.childElementCount===0,Eo=(q,J)=>{const Ae=document;return xt(Ae)?[]:Ne(Ae.querySelectorAll(q),yo.fromDom)},Pr=(q,J)=>q.dom===J.dom,br=q=>yo.fromDom(q.dom.ownerDocument),uc=q=>sn.from(q.dom.parentNode).map(yo.fromDom),vc=(q,J)=>{const Ae=Ot(J)?J:W;let Ye=q.dom;const Tn=[];for(;Ye.parentNode!==null&&Ye.parentNode!==void 0;){const Wn=Ye.parentNode,ts=yo.fromDom(Wn);if(Tn.push(ts),Ae(ts)===!0)break;Ye=Wn}return Tn},Qo=q=>{const J=Ae=>Bo(Ae,Ye=>!Pr(q,Ye));return uc(q).map(dc).map(J).getOr([])},Fc=q=>sn.from(q.dom.nextSibling).map(yo.fromDom),dc=q=>Ne(q.dom.childNodes,yo.fromDom),Yo=q=>Ms(q)&&Xn(q.dom.host),fn=q=>yo.fromDom(q.dom.getRootNode()),Bs=q=>{const J=fn(q);return Yo(J)?sn.some(J):sn.none()},qr=q=>yo.fromDom(q.dom.host),Ga=q=>{if(Xn(q.target)){const J=yo.fromDom(q.target);if(ir(J)&&rl(J)&&q.composed&&q.composedPath){const Ae=q.composedPath();if(Ae)return Vn(Ae)}}return sn.from(q.target)},rl=q=>Xn(q.dom.shadowRoot),ms=q=>{const J=Po(q)?q.dom.parentNode:q.dom;if(J==null||J.ownerDocument===null)return!1;const Ae=J.ownerDocument;return Bs(yo.fromDom(J)).fold(()=>Ae.body.contains(J),ut(ms,qr))},rr=q=>{const J=q.dom.body;if(J==null)throw new Error("Body is not available yet");return yo.fromDom(J)},Ps=(q,J,Ae)=>{if(!Hn(Ae))throw new Error("CSS value must be a string: "+Ae);xa(q)&&q.style.setProperty(J,Ae)},tc=(q,J,Ae)=>{const Ye=q.dom;Ps(Ye,J,Ae)},Ic=(q,J)=>{const Ae=q.dom;et(J,(Ye,Tn)=>{Ps(Ae,Tn,Ye)})},cr=(q,J)=>{const Ae=q.dom,Tn=window.getComputedStyle(Ae).getPropertyValue(J);return Tn===""&&!ms(q)?ue(Ae,J):Tn},ue=(q,J)=>xa(q)?q.style.getPropertyValue(J):"",se=(q,J,Ae,Ye,Tn,Wn,ts)=>({target:q,x:J,y:Ae,stop:Ye,prevent:Tn,kill:Wn,raw:ts}),Be=q=>{const J=yo.fromDom(Ga(q).getOr(q.target)),Ae=()=>q.stopPropagation(),Ye=()=>q.preventDefault(),Tn=oe(Ye,Ae);return se(J,q.clientX,q.clientY,Ae,Ye,Tn,q)},Ve=(q,J)=>Ae=>{q(Ae)&&J(Be(Ae))},un=(q,J,Ae,Ye,Tn)=>{const Wn=Ve(Ae,Ye);return q.dom.addEventListener(J,Wn,Tn),{unbind:dt(jn,q,J,Wn,Tn)}},Rn=(q,J,Ae,Ye)=>un(q,J,Ae,Ye,!1),jn=(q,J,Ae,Ye)=>{q.dom.removeEventListener(J,Ae,Ye)},qs=Rt,ve=(q,J,Ae)=>Rn(q,J,qs,Ae),Gn=q=>{let J=!1,Ae;return(...Ye)=>(J||(J=!0,Ae=q.apply(null,Ye)),Ae)},de=(q,J,Ae,Ye)=>{const Tn=q.isiOS()&&/ipad/i.test(Ae)===!0,Wn=q.isiOS()&&!Tn,ts=q.isiOS()||q.isAndroid(),Ds=ts||Ye("(pointer:coarse)"),Sc=Tn||!Wn&&ts&&Ye("(min-device-width:768px)"),Qc=Wn||ts&&!Sc,Lr=J.isSafari()&&q.isiOS()&&/safari/i.test(Ae)===!1,ea=!Qc&&!Sc&&!Lr;return{isiPad:oo(Tn),isiPhone:oo(Wn),isTablet:oo(Sc),isPhone:oo(Qc),isTouch:oo(Ds),isAndroid:q.isAndroid,isiOS:q.isiOS,isWebView:oo(Lr),isDesktop:oo(ea)}},pe=(q,J)=>{for(let Ae=0;Ae<q.length;Ae++){const Ye=q[Ae];if(Ye.test(J))return Ye}},at=(q,J)=>{const Ae=pe(q,J);if(!Ae)return{major:0,minor:0};const Ye=Tn=>Number(J.replace(Ae,"$"+Tn));return nn(Ye(1),Ye(2))},ft=(q,J)=>{const Ae=String(J).toLowerCase();return q.length===0?Vt():at(q,Ae)},Vt=()=>nn(0,0),nn=(q,J)=>({major:q,minor:J}),rn={nu:nn,detect:ft,unknown:Vt},en=(q,J)=>jt(J.brands,Ae=>{const Ye=Ae.brand.toLowerCase();return $e(q,Tn=>{var Wn;return Ye===((Wn=Tn.brand)===null||Wn===void 0?void 0:Wn.toLowerCase())}).map(Tn=>({current:Tn.name,version:rn.nu(parseInt(Ae.version,10),0)}))}),Cn=(q,J)=>{const Ae=String(J).toLowerCase();return $e(q,Ye=>Ye.search(Ae))},Nn=(q,J)=>Cn(q,J).map(Ae=>{const Ye=rn.detect(Ae.versionRegexes,J);return{current:Ae.name,version:Ye}}),zo=(q,J)=>Cn(q,J).map(Ae=>{const Ye=rn.detect(Ae.versionRegexes,J);return{current:Ae.name,version:Ye}}),cs=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Os=q=>J=>bo(J,q),_c=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:q=>bo(q,"edge/")&&bo(q,"chrome")&&bo(q,"safari")&&bo(q,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,cs],search:q=>bo(q,"chrome")&&!bo(q,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:q=>bo(q,"msie")||bo(q,"trident")},{name:"Opera",versionRegexes:[cs,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Os("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Os("firefox")},{name:"Safari",versionRegexes:[cs,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:q=>(bo(q,"safari")||bo(q,"mobile/"))&&bo(q,"applewebkit")}],Lc=[{name:"Windows",search:Os("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:q=>bo(q,"iphone")||bo(q,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Os("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Os("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Os("linux"),versionRegexes:[]},{name:"Solaris",search:Os("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Os("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Os("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Dn={browsers:oo(_c),oses:oo(Lc)},No="Edge",$o="Chromium",Kr="IE",Yr="Opera",$r="Firefox",Ks="Safari",od=()=>Ea({current:void 0,version:rn.unknown()}),Ea=q=>{const J=q.current,Ae=q.version,Ye=Tn=>()=>J===Tn;return{current:J,version:Ae,isEdge:Ye(No),isChromium:Ye($o),isIE:Ye(Kr),isOpera:Ye(Yr),isFirefox:Ye($r),isSafari:Ye(Ks)}},es={unknown:od,nu:Ea,edge:oo(No),chromium:oo($o),ie:oo(Kr),opera:oo(Yr),firefox:oo($r),safari:oo(Ks)},yc="Windows",mc="iOS",Dr="Android",Ml="Linux",Cc="macOS",Ac="Solaris",Ba="FreeBSD",aa="ChromeOS",bi=()=>hl({current:void 0,version:rn.unknown()}),hl=q=>{const J=q.current,Ae=q.version,Ye=Tn=>()=>J===Tn;return{current:J,version:Ae,isWindows:Ye(yc),isiOS:Ye(mc),isAndroid:Ye(Dr),isMacOS:Ye(Cc),isLinux:Ye(Ml),isSolaris:Ye(Ac),isFreeBSD:Ye(Ba),isChromeOS:Ye(aa)}},cl={unknown:bi,nu:hl,windows:oo(yc),ios:oo(mc),android:oo(Dr),linux:oo(Ml),macos:oo(Cc),solaris:oo(Ac),freebsd:oo(Ba),chromeos:oo(aa)},zr={detect:(q,J,Ae)=>{const Ye=Dn.browsers(),Tn=Dn.oses(),Wn=J.bind(Sc=>en(Ye,Sc)).orThunk(()=>Nn(Ye,q)).fold(es.unknown,es.nu),ts=zo(Tn,q).fold(cl.unknown,cl.nu),Ds=de(ts,Wn,q,Ae);return{browser:Wn,os:ts,deviceType:Ds}}},vi=q=>window.matchMedia(q).matches;let yi=Gn(()=>zr.detect(window.navigator.userAgent,sn.from(window.navigator.userAgentData),vi));const Ci=()=>yi(),Jl=(q,J)=>({left:q,top:J,translate:(Ye,Tn)=>Jl(q+Ye,J+Tn)}),Fr=Jl,ia=q=>{const J=q!==void 0?q.dom:document,Ae=J.body.scrollLeft||J.documentElement.scrollLeft,Ye=J.body.scrollTop||J.documentElement.scrollTop;return Fr(Ae,Ye)},U=q=>{const J=q===void 0?window:q;return Ci().browser.isFirefox()?sn.none():sn.from(J.visualViewport)},re=(q,J,Ae,Ye)=>({x:q,y:J,width:Ae,height:Ye,right:q+Ae,bottom:J+Ye}),Te=q=>{const J=q===void 0?window:q,Ae=J.document,Ye=ia(yo.fromDom(Ae));return U(J).fold(()=>{const Tn=J.document.documentElement,Wn=Tn.clientWidth,ts=Tn.clientHeight;return re(Ye.left,Ye.top,Wn,ts)},Tn=>re(Math.max(Tn.pageLeft,Ye.left),Math.max(Tn.pageTop,Ye.top),Tn.width,Tn.height))},Xe=(q,J,Ae)=>U(Ae).map(Ye=>{const Tn=Wn=>J(Be(Wn));return Ye.addEventListener(q,Tn),{unbind:()=>Ye.removeEventListener(q,Tn)}}).getOrThunk(()=>({unbind:nt}));var wt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Yt=tinymce.util.Tools.resolve("tinymce.Env");const Co=(q,J)=>{q.dispatch("FullscreenStateChanged",{state:J}),q.dispatch("ResizeEditor")},Ts=q=>J=>J.options.get(q),Do=q=>{const J=q.options.register;J("fullscreen_native",{processor:"boolean",default:!1})},Ut=Ts("fullscreen_native"),vr=q=>{const J=yo.fromDom(q.getElement());return Bs(J).map(qr).getOrThunk(()=>rr(br(J)))},gn=q=>q.fullscreenElement!==void 0?q.fullscreenElement:q.msFullscreenElement!==void 0?q.msFullscreenElement:q.webkitFullscreenElement!==void 0?q.webkitFullscreenElement:null,Vr=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",al=q=>{const J=q.dom;J.requestFullscreen?J.requestFullscreen():J.msRequestFullscreen?J.msRequestFullscreen():J.webkitRequestFullScreen&&J.webkitRequestFullScreen()},P=q=>{const J=q.dom;J.exitFullscreen?J.exitFullscreen():J.msExitFullscreen?J.msExitFullscreen():J.webkitCancelFullScreen&&J.webkitCancelFullScreen()},Y=q=>q.dom===gn(br(q).dom),fe=(q,J,Ae)=>Bo(vc(q,Ae),J),Oe=(q,J)=>Bo(Qo(q),J),ot=q=>Eo(q),eo=(q,J,Ae)=>fe(q,Ye=>Ta(Ye,J),Ae),Vs=(q,J)=>Oe(q,Ae=>Ta(Ae,J)),fs="data-ephox-mobile-fullscreen-style",yt="display:none!important;",Us="position:absolute!important;",fc="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Xc="background-color:rgb(255,255,255)!important;",co=Yt.os.isAndroid(),Jc=q=>{const J=cr(q,"background-color");return J!==void 0&&J!==""?"background-color:"+J+"!important":Xc},Tr=(q,J,Ae)=>{const Ye=Qc=>Vs(Qc,"*:not(.tox-silver-sink)"),Tn=Qc=>Lr=>{const ea=As(Lr,"style"),Fs=ea===void 0?"no-styles":ea.trim();Fs!==Qc&&(zs(Lr,fs,Fs),Ic(Lr,q.parseStyle(Qc)))},Wn=eo(J,"*"),ts=kn(Wn,Ye),Ds=Jc(Ae);le(ts,Tn(yt)),le(Wn,Tn(Us+fc+Ds)),Tn((co===!0?"":Us)+fc+Ds)(J)},Zi=q=>{const J=ot("["+fs+"]");le(J,Ae=>{const Ye=As(Ae,fs);Ye&&Ye!=="no-styles"?Ic(Ae,q.parseStyle(Ye)):gs(Ae,"style"),gs(Ae,fs)})},$s=wt.DOM,Bl=()=>Te(window),Ld=q=>window.scrollTo(q.x,q.y),mf=U().fold(()=>({bind:nt,unbind:nt}),q=>{const J=bt(),Ae=bs(),Ye=bs(),Tn=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Wn=()=>{window.requestAnimationFrame(()=>{J.on(Qc=>Ic(Qc,{top:q.offsetTop+"px",left:q.offsetLeft+"px",height:q.height+"px",width:q.width+"px"}))})},ts=mn(()=>{Tn(),Wn()},50);return{bind:Qc=>{J.set(Qc),ts.throttle(),Ae.set(Xe("resize",ts.throttle)),Ye.set(Xe("scroll",ts.throttle))},unbind:()=>{J.on(()=>{Ae.clear(),Ye.clear()}),J.clear()}}}),ar=(q,J)=>{const Ae=document.body,Ye=document.documentElement,Tn=q.getContainer(),Wn=yo.fromDom(Tn),ts=Fc(Wn).filter(ur=>ro(ur)&&xs(ur,"tox-silver-sink")),Ds=vr(q),Sc=J.get(),Qc=yo.fromDom(q.getBody()),Lr=Yt.deviceType.isTouch(),ea=Tn.style,Fs=q.iframeElement,ua=Fs==null?void 0:Fs.style,Hc=ur=>{ur(Ae,"tox-fullscreen"),ur(Ye,"tox-fullscreen"),ur(Tn,"tox-fullscreen"),Bs(Wn).map(Ys=>qr(Ys).dom).each(Ys=>{ur(Ys,"tox-fullscreen"),ur(Ys,"tox-shadowhost")})},Er=()=>{Lr&&Zi(q.dom),Hc($s.removeClass),mf.unbind(),sn.from(J.get()).each(ur=>ur.fullscreenChangeHandler.unbind())};if(Sc)Sc.fullscreenChangeHandler.unbind(),Ut(q)&&Y(Ds)&&P(br(Ds)),ua.width=Sc.iframeWidth,ua.height=Sc.iframeHeight,ea.width=Sc.containerWidth,ea.height=Sc.containerHeight,ea.top=Sc.containerTop,ea.left=Sc.containerLeft,je(ts,Sc.sinkCssPosition,(ur,Ys)=>{tc(ur,"position",Ys)}),Er(),Ld(Sc.scrollPos),J.set(null),Co(q,!1),q.off("remove",Er);else{const ur=ve(br(Ds),Vr(),pu=>{Ut(q)&&!Y(Ds)&&J.get()!==null&&ar(q,J)}),Ys={scrollPos:Bl(),containerWidth:ea.width,containerHeight:ea.height,containerTop:ea.top,containerLeft:ea.left,iframeWidth:ua.width,iframeHeight:ua.height,fullscreenChangeHandler:ur,sinkCssPosition:ts.map(pu=>cr(pu,"position"))};Lr&&Tr(q.dom,Wn,Qc),ua.width=ua.height="100%",ea.width=ea.height="",Hc($s.addClass),ts.each(pu=>{tc(pu,"position","fixed")}),mf.bind(Wn),q.on("remove",Er),J.set(Ys),Ut(q)&&al(Ds),Co(q,!0)}},Hd=(q,J)=>{q.addCommand("mceFullScreen",()=>{ar(q,J)})};var Ir=tinymce.util.Tools.resolve("tinymce.util.VK");const wc=(q,J)=>{q.on("init",()=>{q.on("keydown",Ae=>{Ae.keyCode===Ir.TAB&&!(Ae.metaKey||Ae.ctrlKey)&&J.get()&&Ae.preventDefault()})})},ll=(q,J)=>Ae=>{Ae.setActive(J.get()!==null);const Ye=Tn=>Ae.setActive(Tn.state);return q.on("FullscreenStateChanged",Ye),()=>q.off("FullscreenStateChanged",Ye)},il=(q,J)=>{const Ae=()=>q.execCommand("mceFullScreen");q.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:Ae,onSetup:ll(q,J)}),q.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:Ae,onSetup:ll(q,J),shortcut:"Meta+Shift+F"})};var hu=()=>{js.add("fullscreen",q=>{const J=Sr(null);return q.inline||(Do(q),Hd(q,J),il(q,J),wc(q,J),q.addShortcut("Meta+Shift+F","","mceFullScreen")),ws(J)})};hu()})();(function(){var Sr=tinymce.util.Tools.resolve("tinymce.PluginManager");const js=Object.getPrototypeOf,ws=(P,Y,fe)=>{var Oe;return fe(P,Y.prototype)?!0:((Oe=P.constructor)===null||Oe===void 0?void 0:Oe.name)===Y.name},us=P=>{const Y=typeof P;return P===null?"null":Y==="object"&&Array.isArray(P)?"array":Y==="object"&&ws(P,String,(fe,Oe)=>Oe.isPrototypeOf(fe))?"string":Y},Ko=P=>Y=>us(Y)===P,ps=P=>Y=>typeof Y===P,So=P=>Y=>P===Y,rt=(P,Y)=>Ho(P)&&ws(P,Y,(fe,Oe)=>js(fe)===Oe),Hn=Ko("string"),Ho=Ko("object"),mo=P=>rt(P,Object),Uo=Ko("array"),Wo=So(null),zn=ps("boolean"),Go=P=>P==null,Xn=P=>!Go(P),Ot=ps("function"),Zn=ps("number"),nt=(P,Y)=>{if(Uo(P)){for(let fe=0,Oe=P.length;fe<Oe;++fe)if(!Y(P[fe]))return!1;return!0}return!1},oe=()=>{};class ut{constructor(Y,fe){this.tag=Y,this.value=fe}static some(Y){return new ut(!0,Y)}static none(){return ut.singletonNone}fold(Y,fe){return this.tag?fe(this.value):Y()}isSome(){return this.tag}isNone(){return!this.tag}map(Y){return this.tag?ut.some(Y(this.value)):ut.none()}bind(Y){return this.tag?Y(this.value):ut.none()}exists(Y){return this.tag&&Y(this.value)}forall(Y){return!this.tag||Y(this.value)}filter(Y){return!this.tag||Y(this.value)?this:ut.none()}getOr(Y){return this.tag?this.value:Y}or(Y){return this.tag?this:Y}getOrThunk(Y){return this.tag?this.value:Y()}orThunk(Y){return this.tag?this:Y()}getOrDie(Y){if(this.tag)return this.value;throw new Error(Y??"Called getOrDie on None")}static from(Y){return Xn(Y)?ut.some(Y):ut.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Y){this.tag&&Y(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ut.singletonNone=new ut(!1);const oo=Object.keys,dt=Object.hasOwnProperty,W=(P,Y)=>{const fe=oo(P);for(let Oe=0,ot=fe.length;Oe<ot;Oe++){const eo=fe[Oe],Vs=P[eo];Y(Vs,eo)}},Rt=P=>(Y,fe)=>{P[fe]=Y},sn=(P,Y,fe,Oe)=>{W(P,(ot,eo)=>{(Y(ot,eo)?fe:Oe)(ot,eo)})},Xt=(P,Y)=>{const fe={};return sn(P,Y,Rt(fe),oe),fe},Ne=(P,Y)=>dt.call(P,Y),le=(P,Y)=>Ne(P,Y)&&P[Y]!==void 0&&P[Y]!==null,Bo=Array.prototype.push,gt=P=>{const Y=[];for(let fe=0,Oe=P.length;fe<Oe;++fe){if(!Uo(P[fe]))throw new Error("Arr.flatten item "+fe+" was not an array, input: "+P);Bo.apply(Y,P[fe])}return Y},$e=(P,Y)=>Y>=0&&Y<P.length?ut.some(P[Y]):ut.none(),A=P=>$e(P,0),kn=(P,Y)=>{for(let fe=0;fe<P.length;fe++){const Oe=Y(P[fe],fe);if(Oe.isSome())return Oe}return ut.none()};typeof window<"u"||Function("return this;")();const Ke=(P,Y,fe)=>{if(Hn(fe)||zn(fe)||Zn(fe))P.setAttribute(Y,fe+"");else throw new Error("Attribute value was not simple")},Vn=(P,Y,fe)=>{Ke(P.dom,Y,fe)},jt=(P,Y)=>{P.dom.removeAttribute(Y)},je=(P,Y)=>{const Oe=(Y||document).createElement("div");if(Oe.innerHTML=P,!Oe.hasChildNodes()||Oe.childNodes.length>1){const ot="HTML does not have a single root node";throw new Error(ot)}return bt(Oe.childNodes[0])},Jn=(P,Y)=>{const Oe=(Y||document).createElement(P);return bt(Oe)},bs=(P,Y)=>{const Oe=(Y||document).createTextNode(P);return bt(Oe)},bt=P=>{if(P==null)throw new Error("Node cannot be null or undefined");return{dom:P}},Pe={fromHtml:je,fromTag:Jn,fromText:bs,fromDom:bt,fromPoint:(P,Y,fe)=>ut.from(P.dom.elementFromPoint(Y,fe)).map(bt)};var et=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),F=tinymce.util.Tools.resolve("tinymce.util.URI");const Ss=P=>P.length>0,io=P=>Y=>Y.options.get(P),To=P=>{const Y=P.options.register;Y("image_dimensions",{processor:"boolean",default:!0}),Y("image_advtab",{processor:"boolean",default:!1}),Y("image_uploadtab",{processor:"boolean",default:!0}),Y("image_prepend_url",{processor:"string",default:""}),Y("image_class_list",{processor:"object[]"}),Y("image_description",{processor:"boolean",default:!0}),Y("image_title",{processor:"boolean",default:!1}),Y("image_caption",{processor:"boolean",default:!1}),Y("image_list",{processor:fe=>{const Oe=fe===!1||Hn(fe)||nt(fe,Ho)||Ot(fe);return Oe?{value:fe,valid:Oe}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},it=io("image_dimensions"),Mt=io("image_advtab"),xe=io("image_uploadtab"),Re=io("image_prepend_url"),Fe=io("image_class_list"),ie=io("image_description"),_n=io("image_title"),Un=io("image_caption"),Bt=io("image_list"),rs=io("a11y_advanced_options"),ro=io("automatic_uploads"),ir=P=>Ss(P.options.get("images_upload_url")),Po=P=>Xn(P.options.get("images_upload_handler")),Ms=(P,Y)=>Math.max(parseInt(P,10),parseInt(Y,10)),ra=P=>new Promise(Y=>{const fe=document.createElement("img"),Oe=eo=>{fe.onload=fe.onerror=null,fe.parentNode&&fe.parentNode.removeChild(fe),Y(eo)};fe.onload=()=>{const eo=Ms(fe.width,fe.clientWidth),Vs=Ms(fe.height,fe.clientHeight),fs={width:eo,height:Vs};Oe(Promise.resolve(fs))},fe.onerror=()=>{Oe(Promise.reject(`Failed to get image dimensions for: ${P}`))};const ot=fe.style;ot.visibility="hidden",ot.position="fixed",ot.bottom=ot.left="0px",ot.width=ot.height="auto",document.body.appendChild(fe),fe.src=P}),zs=P=>(P&&(P=P.replace(/px$/,"")),P),As=P=>(P.length>0&&/^[0-9]+$/.test(P)&&(P+="px"),P),gs=P=>{if(P.margin){const Y=String(P.margin).split(" ");switch(Y.length){case 1:P["margin-top"]=P["margin-top"]||Y[0],P["margin-right"]=P["margin-right"]||Y[0],P["margin-bottom"]=P["margin-bottom"]||Y[0],P["margin-left"]=P["margin-left"]||Y[0];break;case 2:P["margin-top"]=P["margin-top"]||Y[0],P["margin-right"]=P["margin-right"]||Y[1],P["margin-bottom"]=P["margin-bottom"]||Y[0],P["margin-left"]=P["margin-left"]||Y[1];break;case 3:P["margin-top"]=P["margin-top"]||Y[0],P["margin-right"]=P["margin-right"]||Y[1],P["margin-bottom"]=P["margin-bottom"]||Y[2],P["margin-left"]=P["margin-left"]||Y[1];break;case 4:P["margin-top"]=P["margin-top"]||Y[0],P["margin-right"]=P["margin-right"]||Y[1],P["margin-bottom"]=P["margin-bottom"]||Y[2],P["margin-left"]=P["margin-left"]||Y[3]}delete P.margin}return P},Hr=(P,Y)=>{const fe=Bt(P);Hn(fe)?fetch(fe).then(Oe=>{Oe.ok&&Oe.json().then(Y)}):Ot(fe)?fe(Y):Y(fe)},xs=(P,Y,fe)=>{const Oe=()=>{fe.onload=fe.onerror=null,P.selection&&(P.selection.select(fe),P.nodeChanged())};fe.onload=()=>{!Y.width&&!Y.height&&it(P)&&P.dom.setAttribs(fe,{width:String(fe.clientWidth),height:String(fe.clientHeight)}),Oe()},fe.onerror=Oe},bo=P=>new Promise((Y,fe)=>{const Oe=new FileReader;Oe.onload=()=>{Y(Oe.result)},Oe.onerror=()=>{var ot;fe((ot=Oe.error)===null||ot===void 0?void 0:ot.message)},Oe.readAsDataURL(P)}),xa=P=>P.nodeName==="IMG"&&(P.hasAttribute("data-mce-object")||P.hasAttribute("data-mce-placeholder")),vo=(P,Y)=>{const fe=P.options.get;return F.isDomSafe(Y,"img",{allow_html_data_urls:fe("allow_html_data_urls"),allow_script_urls:fe("allow_script_urls"),allow_svg_data_urls:fe("allow_svg_data_urls")})},ds=et.DOM,xr=P=>P.style.marginLeft&&P.style.marginRight&&P.style.marginLeft===P.style.marginRight?zs(P.style.marginLeft):"",ec=P=>P.style.marginTop&&P.style.marginBottom&&P.style.marginTop===P.style.marginBottom?zs(P.style.marginTop):"",ca=P=>P.style.borderWidth?zs(P.style.borderWidth):"",yo=(P,Y)=>{var fe;return P.hasAttribute(Y)&&(fe=P.getAttribute(Y))!==null&&fe!==void 0?fe:""},Ta=P=>P.parentNode!==null&&P.parentNode.nodeName==="FIGURE",xt=(P,Y,fe)=>{fe===""||fe===null?P.removeAttribute(Y):P.setAttribute(Y,fe)},Eo=P=>{const Y=ds.create("figure",{class:"image"});ds.insertAfter(Y,P),Y.appendChild(P),Y.appendChild(ds.create("figcaption",{contentEditable:"true"},"Caption")),Y.contentEditable="false"},Pr=P=>{const Y=P.parentNode;Xn(Y)&&(ds.insertAfter(P,Y),ds.remove(Y))},br=P=>{Ta(P)?Pr(P):Eo(P)},uc=(P,Y)=>{const fe=P.getAttribute("style"),Oe=Y(fe!==null?fe:"");Oe.length>0?(P.setAttribute("style",Oe),P.setAttribute("data-mce-style",Oe)):P.removeAttribute("style")},vc=(P,Y)=>(fe,Oe,ot)=>{const eo=fe.style;eo[Oe]?(eo[Oe]=As(ot),uc(fe,Y)):xt(fe,Oe,ot)},Qo=(P,Y)=>P.style[Y]?zs(P.style[Y]):yo(P,Y),Fc=(P,Y)=>{const fe=As(Y);P.style.marginLeft=fe,P.style.marginRight=fe},dc=(P,Y)=>{const fe=As(Y);P.style.marginTop=fe,P.style.marginBottom=fe},Yo=(P,Y)=>{const fe=As(Y);P.style.borderWidth=fe},fn=(P,Y)=>{P.style.borderStyle=Y},Bs=P=>{var Y;return(Y=P.style.borderStyle)!==null&&Y!==void 0?Y:""},qr=P=>Xn(P)&&P.nodeName==="FIGURE",Ga=P=>P.nodeName==="IMG",rl=P=>ds.getAttrib(P,"alt").length===0&&ds.getAttrib(P,"role")==="presentation",ms=P=>rl(P)?"":yo(P,"alt"),rr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Ps=(P,Y)=>{var fe;const Oe=document.createElement("img");return xt(Oe,"style",Y.style),(xr(Oe)||Y.hspace!=="")&&Fc(Oe,Y.hspace),(ec(Oe)||Y.vspace!=="")&&dc(Oe,Y.vspace),(ca(Oe)||Y.border!=="")&&Yo(Oe,Y.border),(Bs(Oe)||Y.borderStyle!=="")&&fn(Oe,Y.borderStyle),P((fe=Oe.getAttribute("style"))!==null&&fe!==void 0?fe:"")},tc=(P,Y)=>{const fe=document.createElement("img");if(Ve(P,{...Y,caption:!1},fe),ue(fe,Y.alt,Y.isDecorative),Y.caption){const Oe=ds.create("figure",{class:"image"});return Oe.appendChild(fe),Oe.appendChild(ds.create("figcaption",{contentEditable:"true"},"Caption")),Oe.contentEditable="false",Oe}else return fe},Ic=(P,Y)=>({src:yo(Y,"src"),alt:ms(Y),title:yo(Y,"title"),width:Qo(Y,"width"),height:Qo(Y,"height"),class:yo(Y,"class"),style:P(yo(Y,"style")),caption:Ta(Y),hspace:xr(Y),vspace:ec(Y),border:ca(Y),borderStyle:Bs(Y),isDecorative:rl(Y)}),cr=(P,Y,fe,Oe,ot)=>{fe[Oe]!==Y[Oe]&&ot(P,Oe,String(fe[Oe]))},ue=(P,Y,fe)=>{if(fe){ds.setAttrib(P,"role","presentation");const Oe=Pe.fromDom(P);Vn(Oe,"alt","")}else{if(Wo(Y)){const Oe=Pe.fromDom(P);jt(Oe,"alt")}else{const Oe=Pe.fromDom(P);Vn(Oe,"alt",Y)}ds.getAttrib(P,"role")==="presentation"&&ds.setAttrib(P,"role","")}},se=(P,Y,fe)=>{(fe.alt!==Y.alt||fe.isDecorative!==Y.isDecorative)&&ue(P,fe.alt,fe.isDecorative)},Be=(P,Y)=>(fe,Oe,ot)=>{P(fe,ot),uc(fe,Y)},Ve=(P,Y,fe)=>{const Oe=Ic(P,fe);cr(fe,Oe,Y,"caption",(ot,eo,Vs)=>br(ot)),cr(fe,Oe,Y,"src",xt),cr(fe,Oe,Y,"title",xt),cr(fe,Oe,Y,"width",vc("width",P)),cr(fe,Oe,Y,"height",vc("height",P)),cr(fe,Oe,Y,"class",xt),cr(fe,Oe,Y,"style",Be((ot,eo)=>xt(ot,"style",eo),P)),cr(fe,Oe,Y,"hspace",Be(Fc,P)),cr(fe,Oe,Y,"vspace",Be(dc,P)),cr(fe,Oe,Y,"border",Be(Yo,P)),cr(fe,Oe,Y,"borderStyle",Be(fn,P)),se(fe,Oe,Y)},un=(P,Y)=>{const fe=P.dom.styles.parse(Y),Oe=gs(fe),ot=P.dom.styles.parse(P.dom.styles.serialize(Oe));return P.dom.styles.serialize(ot)},Rn=P=>{const Y=P.selection.getNode(),fe=P.dom.getParent(Y,"figure.image");return fe?P.dom.select("img",fe)[0]:Y&&(Y.nodeName!=="IMG"||xa(Y))?null:Y},jn=(P,Y)=>{var fe;const Oe=P.dom,ot=Xt(P.schema.getTextBlockElements(),(Vs,fs)=>!P.schema.isValidChild(fs,"figure")),eo=Oe.getParent(Y.parentNode,Vs=>le(ot,Vs.nodeName),P.getBody());return eo&&(fe=Oe.split(eo,Y))!==null&&fe!==void 0?fe:Y},qs=P=>{const Y=Rn(P);return Y?Ic(fe=>un(P,fe),Y):rr()},ve=(P,Y)=>{const fe=tc(ot=>un(P,ot),Y);P.dom.setAttrib(fe,"data-mce-id","__mcenew"),P.focus(),P.selection.setContent(fe.outerHTML);const Oe=P.dom.select('*[data-mce-id="__mcenew"]')[0];if(P.dom.setAttrib(Oe,"data-mce-id",null),qr(Oe)){const ot=jn(P,Oe);P.selection.select(ot)}else P.selection.select(Oe)},Gn=(P,Y)=>{P.dom.setAttrib(Y,"src",Y.getAttribute("src"))},de=(P,Y)=>{if(Y){const fe=P.dom.is(Y.parentNode,"figure.image")?Y.parentNode:Y;P.dom.remove(fe),P.focus(),P.nodeChanged(),P.dom.isEmpty(P.getBody())&&(P.setContent(""),P.selection.setCursorLocation())}},pe=(P,Y)=>{const fe=Rn(P);if(fe)if(Ve(Oe=>un(P,Oe),Y,fe),Gn(P,fe),qr(fe.parentNode)){const Oe=fe.parentNode;jn(P,Oe),P.selection.select(fe.parentNode)}else P.selection.select(fe),xs(P,Y,fe)},at=(P,Y)=>{const fe=Y.src;return{...Y,src:vo(P,fe)?fe:""}},ft=(P,Y)=>{const fe=Rn(P);if(fe){const ot={...Ic(Vs=>un(P,Vs),fe),...Y},eo=at(P,ot);ot.src?pe(P,eo):de(P,fe)}else Y.src&&ve(P,{...rr(),...Y})},rn=(P=>(...Y)=>{if(Y.length===0)throw new Error("Can't merge zero objects");const fe={};for(let Oe=0;Oe<Y.length;Oe++){const ot=Y[Oe];for(const eo in ot)Ne(ot,eo)&&(fe[eo]=P(fe[eo],ot[eo]))}return fe})((P,Y)=>mo(P)&&mo(Y)?rn(P,Y):Y);var en=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Cn=tinymce.util.Tools.resolve("tinymce.util.Tools");const Nn=P=>Hn(P.value)?P.value:"",zo=P=>Hn(P.text)?P.text:Hn(P.title)?P.title:"",cs=(P,Y)=>{const fe=[];return Cn.each(P,Oe=>{const ot=zo(Oe);if(Oe.menu!==void 0){const eo=cs(Oe.menu,Y);fe.push({text:ot,items:eo})}else{const eo=Y(Oe);fe.push({text:ot,value:eo})}}),fe},Os=(P=Nn)=>Y=>Y?ut.from(Y).map(fe=>cs(fe,P)):ut.none(),_c=P=>Os(Nn)(P),Lc=P=>Ne(P,"items"),Dn=(P,Y)=>kn(P,fe=>Lc(fe)?Dn(fe.items,Y):fe.value===Y?ut.some(fe):ut.none()),$o={sanitizer:Os,sanitize:_c,findEntry:(P,Y)=>P.bind(fe=>Dn(fe,Y))},Yr={makeTab:P=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},$r=P=>{const Y=$o.sanitizer($s=>P.convertURL($s.value||$s.url||"","src")),fe=new Promise($s=>{Hr(P,Bl=>{$s(Y(Bl).map(Ld=>gt([[{text:"None",value:""}],Ld])))})}),Oe=$o.sanitize(Fe(P)),ot=Mt(P),eo=xe(P),Vs=ir(P),fs=Po(P),yt=qs(P),Us=ie(P),fc=_n(P),Xc=it(P),co=Un(P),Jc=rs(P),Tr=ro(P),Zi=ut.some(Re(P)).filter($s=>Hn($s)&&$s.length>0);return fe.then($s=>({image:yt,imageList:$s,classList:Oe,hasAdvTab:ot,hasUploadTab:eo,hasUploadUrl:Vs,hasUploadHandler:fs,hasDescription:Us,hasImageTitle:fc,hasDimensions:Xc,hasImageCaption:co,prependURL:Zi,hasAccessibilityOptions:Jc,automaticUploads:Tr}))},Ks=P=>{const Y={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},fe=P.imageList.map(fc=>({name:"images",type:"listbox",label:"Image list",items:fc})),Oe={name:"alt",type:"input",label:"Alternative description",enabled:!(P.hasAccessibilityOptions&&P.image.isDecorative)},ot={name:"title",type:"input",label:"Image title"},eo={name:"dimensions",type:"sizeinput"},Vs={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},fs=P.classList.map(fc=>({name:"classes",type:"listbox",label:"Class",items:fc})),yt={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Us=fc=>fc?{type:"grid",columns:2}:{type:"panel"};return gt([[Y],fe.toArray(),P.hasAccessibilityOptions&&P.hasDescription?[Vs]:[],P.hasDescription?[Oe]:[],P.hasImageTitle?[ot]:[],P.hasDimensions?[eo]:[],[{...Us(P.classList.isSome()&&P.hasImageCaption),items:gt([fs.toArray(),P.hasImageCaption?[yt]:[]])}]])},Ea={makeTab:P=>({title:"General",name:"general",items:Ks(P)}),makeItems:Ks},yc={makeTab:P=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},mc=P=>({prevImage:$o.findEntry(P.imageList,P.image.src),prevAlt:P.image.alt,open:!0}),Dr=P=>({src:{value:P.src,meta:{}},images:P.src,alt:P.alt,title:P.title,dimensions:{width:P.width,height:P.height},classes:P.class,caption:P.caption,style:P.style,vspace:P.vspace,border:P.border,hspace:P.hspace,borderstyle:P.borderStyle,fileinput:[],isDecorative:P.isDecorative}),Ml=(P,Y)=>({src:P.src.value,alt:(P.alt===null||P.alt.length===0)&&Y?null:P.alt,title:P.title,width:P.dimensions.width,height:P.dimensions.height,class:P.classes,style:P.style,caption:P.caption,hspace:P.hspace,vspace:P.vspace,border:P.border,borderStyle:P.borderstyle,isDecorative:P.isDecorative}),Cc=(P,Y)=>/^(?:[a-zA-Z]+:)?\/\//.test(Y)?ut.none():P.prependURL.bind(fe=>Y.substring(0,fe.length)!==fe?ut.some(fe+Y):ut.none()),Ac=(P,Y)=>{const fe=Y.getData();Cc(P,fe.src.value).each(Oe=>{Y.setData({src:{value:Oe,meta:fe.src.meta}})})},Ba=(P,Y,fe)=>{P.hasDescription&&Hn(fe.alt)&&(Y.alt=fe.alt),P.hasAccessibilityOptions&&(Y.isDecorative=fe.isDecorative||Y.isDecorative||!1),P.hasImageTitle&&Hn(fe.title)&&(Y.title=fe.title),P.hasDimensions&&(Hn(fe.width)&&(Y.dimensions.width=fe.width),Hn(fe.height)&&(Y.dimensions.height=fe.height)),Hn(fe.class)&&$o.findEntry(P.classList,fe.class).each(Oe=>{Y.classes=Oe.value}),P.hasImageCaption&&zn(fe.caption)&&(Y.caption=fe.caption),P.hasAdvTab&&(Hn(fe.style)&&(Y.style=fe.style),Hn(fe.vspace)&&(Y.vspace=fe.vspace),Hn(fe.border)&&(Y.border=fe.border),Hn(fe.hspace)&&(Y.hspace=fe.hspace),Hn(fe.borderstyle)&&(Y.borderstyle=fe.borderstyle))},aa=(P,Y)=>{const fe=Y.getData(),Oe=fe.src.meta;if(Oe!==void 0){const ot=rn({},fe);Ba(P,ot,Oe),Y.setData(ot)}},bi=(P,Y,fe,Oe)=>{const ot=Oe.getData(),eo=ot.src.value,Vs=ot.src.meta||{};!Vs.width&&!Vs.height&&Y.hasDimensions&&(Ss(eo)?P.imageSize(eo).then(fs=>{fe.open&&Oe.setData({dimensions:fs})}).catch(fs=>{}):Oe.setData({dimensions:{width:"",height:""}}))},hl=(P,Y,fe)=>{const Oe=fe.getData(),ot=$o.findEntry(P.imageList,Oe.src.value);Y.prevImage=ot,fe.setData({images:ot.map(eo=>eo.value).getOr("")})},cl=(P,Y,fe,Oe)=>{Ac(Y,Oe),aa(Y,Oe),bi(P,Y,fe,Oe),hl(Y,fe,Oe)},la=(P,Y,fe,Oe)=>{const ot=Oe.getData(),eo=$o.findEntry(Y.imageList,ot.images);eo.each(Vs=>{ot.alt===""||fe.prevImage.map(yt=>yt.text===ot.alt).getOr(!1)?Vs.value===""?Oe.setData({src:Vs,alt:fe.prevAlt}):Oe.setData({src:Vs,alt:Vs.text}):Oe.setData({src:Vs})}),fe.prevImage=eo,cl(P,Y,fe,Oe)},zr=(P,Y,fe,Oe)=>{const ot=Oe.getData();Oe.block("Uploading image"),A(ot.fileinput).fold(()=>{Oe.unblock()},eo=>{const Vs=URL.createObjectURL(eo),fs=()=>{Oe.unblock(),URL.revokeObjectURL(Vs)},yt=Us=>{Oe.setData({src:{value:Us,meta:{}}}),Oe.showTab("general"),cl(P,Y,fe,Oe),Oe.focus("src")};bo(eo).then(Us=>{const fc=P.createBlobCache(eo,Vs,Us);Y.automaticUploads?P.uploadImage(fc).then(Xc=>{yt(Xc.url),fs()}).catch(Xc=>{fs(),P.alertErr(Xc)}):(P.addToBlobCache(fc),yt(fc.blobUri()),Oe.unblock())})})},vi=(P,Y,fe)=>(Oe,ot)=>{ot.name==="src"?cl(P,Y,fe,Oe):ot.name==="images"?la(P,Y,fe,Oe):ot.name==="alt"?fe.prevAlt=Oe.getData().alt:ot.name==="fileinput"?zr(P,Y,fe,Oe):ot.name==="isDecorative"&&Oe.setEnabled("alt",!Oe.getData().isDecorative)},yi=P=>()=>{P.open=!1},Ci=P=>P.hasAdvTab||P.hasUploadUrl||P.hasUploadHandler?{type:"tabpanel",tabs:gt([[Ea.makeTab(P)],P.hasAdvTab?[Yr.makeTab(P)]:[],P.hasUploadTab&&(P.hasUploadUrl||P.hasUploadHandler)?[yc.makeTab(P)]:[]])}:{type:"panel",items:Ea.makeItems(P)},Jl=(P,Y,fe)=>Oe=>{const ot=rn(Dr(Y.image),Oe.getData()),eo={...ot,style:Ps(fe.normalizeCss,Ml(ot,!1))};P.execCommand("mceUpdateImage",!1,Ml(eo,Y.hasAccessibilityOptions)),P.editorUpload.uploadImagesAuto(),Oe.close()},Fr=P=>Y=>vo(P,Y)?ra(P.documentBaseURI.toAbsolute(Y)).then(fe=>({width:String(fe.width),height:String(fe.height)})):Promise.resolve({width:"",height:""}),ia=P=>(Y,fe,Oe)=>{var ot;return P.editorUpload.blobCache.create({blob:Y,blobUri:fe,name:(ot=Y.name)===null||ot===void 0?void 0:ot.replace(/\.[^\.]+$/,""),filename:Y.name,base64:Oe.split(",")[1]})},U=P=>Y=>{P.editorUpload.blobCache.add(Y)},re=P=>Y=>{P.windowManager.alert(Y)},Te=P=>Y=>un(P,Y),Xe=P=>Y=>P.dom.parseStyle(Y),wt=P=>(Y,fe)=>P.dom.serializeStyle(Y,fe),Yt=P=>Y=>en(P).upload([Y],!1).then(fe=>{var Oe;return fe.length===0?Promise.reject("Failed to upload image"):fe[0].status===!1?Promise.reject((Oe=fe[0].error)===null||Oe===void 0?void 0:Oe.message):fe[0]}),Co=P=>{const Y={imageSize:Fr(P),addToBlobCache:U(P),createBlobCache:ia(P),alertErr:re(P),normalizeCss:Te(P),parseStyle:Xe(P),serializeStyle:wt(P),uploadImage:Yt(P)};return{open:()=>{$r(P).then(Oe=>{const ot=mc(Oe);return{title:"Insert/Edit Image",size:"normal",body:Ci(Oe),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Dr(Oe.image),onSubmit:Jl(P,Oe,Y),onChange:vi(Y,Oe,ot),onClose:yi(ot)}}).then(P.windowManager.open)}}},Ts=P=>{P.addCommand("mceImage",Co(P).open),P.addCommand("mceUpdateImage",(Y,fe)=>{P.undoManager.transact(()=>ft(P,fe))})},Do=P=>{const Y=P.attr("class");return Xn(Y)&&/\bimage\b/.test(Y)},Ut=P=>Y=>{let fe=Y.length;const Oe=ot=>{ot.attr("contenteditable",P?"true":null)};for(;fe--;){const ot=Y[fe];Do(ot)&&(ot.attr("contenteditable",P?"false":null),Cn.each(ot.getAll("figcaption"),Oe))}},vr=P=>{P.on("PreInit",()=>{P.parser.addNodeFilter("figure",Ut(!0)),P.serializer.addNodeFilter("figure",Ut(!1))})},gn=P=>Y=>{const fe=()=>{Y.setEnabled(P.selection.isEditable())};return P.on("NodeChange",fe),fe(),()=>{P.off("NodeChange",fe)}},Vr=P=>{P.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Co(P).open,onSetup:Y=>{Y.setActive(Xn(Rn(P)));const fe=P.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",Y.setActive).unbind,Oe=gn(P)(Y);return()=>{fe(),Oe()}}}),P.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Co(P).open,onSetup:gn(P)}),P.ui.registry.addContextMenu("image",{update:Y=>P.selection.isEditable()&&(qr(Y)||Ga(Y)&&!xa(Y))?["image"]:[]})};var al=()=>{Sr.add("image",P=>{To(P),vr(P),Vr(P),Ts(P)})};al()})();(function(){var Sr=tinymce.util.Tools.resolve("tinymce.PluginManager");const js=dt=>W=>W.options.get(dt),ws=dt=>{const W=dt.options.register;W("insertdatetime_dateformat",{processor:"string",default:dt.translate("%Y-%m-%d")}),W("insertdatetime_timeformat",{processor:"string",default:dt.translate("%H:%M:%S")}),W("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),W("insertdatetime_element",{processor:"boolean",default:!1})},us=js("insertdatetime_dateformat"),Ko=js("insertdatetime_timeformat"),ps=js("insertdatetime_formats"),So=js("insertdatetime_element"),rt=dt=>{const W=ps(dt);return W.length>0?W[0]:Ko(dt)},Hn="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Ho="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),mo="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Uo="January February March April May June July August September October November December".split(" "),Wo=(dt,W)=>{if(dt=""+dt,dt.length<W)for(let Rt=0;Rt<W-dt.length;Rt++)dt="0"+dt;return dt},zn=(dt,W,Rt=new Date)=>(W=W.replace("%D","%m/%d/%Y"),W=W.replace("%r","%I:%M:%S %p"),W=W.replace("%Y",""+Rt.getFullYear()),W=W.replace("%y",""+Rt.getYear()),W=W.replace("%m",Wo(Rt.getMonth()+1,2)),W=W.replace("%d",Wo(Rt.getDate(),2)),W=W.replace("%H",""+Wo(Rt.getHours(),2)),W=W.replace("%M",""+Wo(Rt.getMinutes(),2)),W=W.replace("%S",""+Wo(Rt.getSeconds(),2)),W=W.replace("%I",""+((Rt.getHours()+11)%12+1)),W=W.replace("%p",Rt.getHours()<12?"AM":"PM"),W=W.replace("%B",""+dt.translate(Uo[Rt.getMonth()])),W=W.replace("%b",""+dt.translate(mo[Rt.getMonth()])),W=W.replace("%A",""+dt.translate(Ho[Rt.getDay()])),W=W.replace("%a",""+dt.translate(Hn[Rt.getDay()])),W=W.replace("%%","%"),W),Go=(dt,W,Rt,sn)=>{const Xt=dt.dom.create("time",{datetime:Rt},sn);dt.dom.replace(Xt,W),dt.selection.select(Xt,!0),dt.selection.collapse(!1)},Xn=(dt,W)=>{if(So(dt)){const Rt=zn(dt,W);let sn;/%[HMSIp]/.test(W)?sn=zn(dt,"%Y-%m-%dT%H:%M"):sn=zn(dt,"%Y-%m-%d");const Xt=dt.dom.getParent(dt.selection.getStart(),"time");Xt?Go(dt,Xt,sn,Rt):dt.insertContent('<time datetime="'+sn+'">'+Rt+"</time>")}else dt.insertContent(zn(dt,W))},Ot=dt=>{dt.addCommand("mceInsertDate",(W,Rt)=>{Xn(dt,Rt??us(dt))}),dt.addCommand("mceInsertTime",(W,Rt)=>{Xn(dt,Rt??Ko(dt))})},Zn=dt=>{let W=dt;return{get:()=>W,set:Xt=>{W=Xt}}};var nt=tinymce.util.Tools.resolve("tinymce.util.Tools");const oe=dt=>W=>{const Rt=()=>{W.setEnabled(dt.selection.isEditable())};return dt.on("NodeChange",Rt),Rt(),()=>{dt.off("NodeChange",Rt)}},ut=dt=>{const W=ps(dt),Rt=Zn(rt(dt)),sn=Ne=>dt.execCommand("mceInsertDate",!1,Ne);dt.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:Ne=>Ne===Rt.get(),fetch:Ne=>{Ne(nt.map(W,le=>({type:"choiceitem",text:zn(dt,le),value:le})))},onAction:Ne=>{sn(Rt.get())},onItemAction:(Ne,le)=>{Rt.set(le),sn(le)},onSetup:oe(dt)});const Xt=Ne=>()=>{Rt.set(Ne),sn(Ne)};dt.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>nt.map(W,Ne=>({type:"menuitem",text:zn(dt,Ne),onAction:Xt(Ne)})),onSetup:oe(dt)})};var oo=()=>{Sr.add("insertdatetime",dt=>{ws(dt),Ot(dt),ut(dt)})};oo()})();(function(){var Sr=tinymce.util.Tools.resolve("tinymce.PluginManager");const js=(U,re,Te)=>{var Xe;return Te(U,re.prototype)?!0:((Xe=U.constructor)===null||Xe===void 0?void 0:Xe.name)===re.name},ws=U=>{const re=typeof U;return U===null?"null":re==="object"&&Array.isArray(U)?"array":re==="object"&&js(U,String,(Te,Xe)=>Xe.isPrototypeOf(Te))?"string":re},us=U=>re=>ws(re)===U,Ko=U=>re=>typeof re===U,ps=U=>re=>U===re,So=us("string"),rt=us("object"),Hn=us("array"),Ho=ps(null),mo=Ko("boolean"),Uo=U=>U==null,Wo=U=>!Uo(U),zn=Ko("function"),Go=(U,re)=>{if(Hn(U)){for(let Te=0,Xe=U.length;Te<Xe;++Te)if(!re(U[Te]))return!1;return!0}return!1},Xn=()=>{},Ot=U=>()=>U,Zn=(U,re)=>U===re;class nt{constructor(re,Te){this.tag=re,this.value=Te}static some(re){return new nt(!0,re)}static none(){return nt.singletonNone}fold(re,Te){return this.tag?Te(this.value):re()}isSome(){return this.tag}isNone(){return!this.tag}map(re){return this.tag?nt.some(re(this.value)):nt.none()}bind(re){return this.tag?re(this.value):nt.none()}exists(re){return this.tag&&re(this.value)}forall(re){return!this.tag||re(this.value)}filter(re){return!this.tag||re(this.value)?this:nt.none()}getOr(re){return this.tag?this.value:re}or(re){return this.tag?this:re}getOrThunk(re){return this.tag?this.value:re()}orThunk(re){return this.tag?this:re()}getOrDie(re){if(this.tag)return this.value;throw new Error(re??"Called getOrDie on None")}static from(re){return Wo(re)?nt.some(re):nt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(re){this.tag&&re(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}nt.singletonNone=new nt(!1);const oe=Array.prototype.indexOf,ut=Array.prototype.push,oo=(U,re)=>oe.call(U,re),dt=(U,re)=>oo(U,re)>-1,W=(U,re)=>{const Te=U.length,Xe=new Array(Te);for(let wt=0;wt<Te;wt++){const Yt=U[wt];Xe[wt]=re(Yt,wt)}return Xe},Rt=(U,re)=>{for(let Te=0,Xe=U.length;Te<Xe;Te++){const wt=U[Te];re(wt,Te)}},sn=(U,re,Te)=>(Rt(U,(Xe,wt)=>{Te=re(Te,Xe,wt)}),Te),Xt=U=>{const re=[];for(let Te=0,Xe=U.length;Te<Xe;++Te){if(!Hn(U[Te]))throw new Error("Arr.flatten item "+Te+" was not an array, input: "+U);ut.apply(re,U[Te])}return re},Ne=(U,re)=>Xt(W(U,re)),le=(U,re)=>{for(let Te=0;Te<U.length;Te++){const Xe=re(U[Te],Te);if(Xe.isSome())return Xe}return nt.none()},Bo=(U,re,Te=Zn)=>U.exists(Xe=>Te(Xe,re)),gt=U=>{const re=[],Te=Xe=>{re.push(Xe)};for(let Xe=0;Xe<U.length;Xe++)U[Xe].each(Te);return re},$e=(U,re)=>U?nt.some(re):nt.none(),A=U=>re=>re.options.get(U),kn=U=>{const re=U.options.register;re("link_assume_external_targets",{processor:Te=>{const Xe=So(Te)||mo(Te);return Xe?Te===!0?{value:1,valid:Xe}:Te==="http"||Te==="https"?{value:Te,valid:Xe}:{value:0,valid:Xe}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),re("link_context_toolbar",{processor:"boolean",default:!1}),re("link_list",{processor:Te=>So(Te)||zn(Te)||Go(Te,rt)}),re("link_default_target",{processor:"string"}),re("link_default_protocol",{processor:"string",default:"https"}),re("link_target_list",{processor:Te=>mo(Te)||Go(Te,rt),default:!0}),re("link_rel_list",{processor:"object[]",default:[]}),re("link_class_list",{processor:"object[]",default:[]}),re("link_title",{processor:"boolean",default:!0}),re("allow_unsafe_link_target",{processor:"boolean",default:!1}),re("link_quicklink",{processor:"boolean",default:!1})},Ke=A("link_assume_external_targets"),Vn=A("link_context_toolbar"),jt=A("link_list"),je=A("link_default_target"),Jn=A("link_default_protocol"),bs=A("link_target_list"),bt=A("link_rel_list"),mn=A("link_class_list"),Pe=A("link_title"),et=A("allow_unsafe_link_target"),F=A("link_quicklink"),Ss=Object.keys,io=Object.hasOwnProperty,To=(U,re)=>{const Te=Ss(U);for(let Xe=0,wt=Te.length;Xe<wt;Xe++){const Yt=Te[Xe],Co=U[Yt];re(Co,Yt)}},it=U=>(re,Te)=>{U[Te]=re},Mt=(U,re,Te,Xe)=>{To(U,(wt,Yt)=>{(re(wt,Yt)?Te:Xe)(wt,Yt)})},xe=(U,re)=>{const Te={};return Mt(U,re,it(Te),Xn),Te},Re=(U,re)=>io.call(U,re),Fe=(U,re)=>Re(U,re)&&U[re]!==void 0&&U[re]!==null;var ie=tinymce.util.Tools.resolve("tinymce.util.URI"),_n=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Un=tinymce.util.Tools.resolve("tinymce.util.Tools");const Bt=U=>Wo(U)&&U.nodeName.toLowerCase()==="a",rs=U=>Bt(U)&&!!Po(U),ro=(U,re)=>{if(U.collapsed)return[];{const Te=U.cloneContents(),Xe=Te.firstChild,wt=new _n(Xe,Te),Yt=[];let Co=Xe;do re(Co)&&Yt.push(Co);while(Co=wt.next());return Yt}},ir=U=>/^\w+:/i.test(U),Po=U=>{var re,Te;return(Te=(re=U.getAttribute("data-mce-href"))!==null&&re!==void 0?re:U.getAttribute("href"))!==null&&Te!==void 0?Te:""},Ms=(U,re)=>{const Te=["noopener"],Xe=U?U.split(/\s+/):[],wt=Do=>Un.trim(Do.sort().join(" ")),Yt=Do=>(Do=Co(Do),Do.length>0?Do.concat(Te):Te),Co=Do=>Do.filter(Ut=>Un.inArray(Te,Ut)===-1),Ts=re?Yt(Xe):Co(Xe);return Ts.length>0?wt(Ts):""},ra=U=>U.replace(/\uFEFF/g,""),zs=(U,re)=>(re=re||Hr(U.selection.getRng())[0]||U.selection.getNode(),ds(re)?nt.from(U.dom.select("a[href]",re)[0]):nt.from(U.dom.getParent(re,"a[href]"))),As=(U,re)=>zs(U,re).isSome(),gs=(U,re)=>{const Te=re.fold(()=>U.getContent({format:"text"}),Xe=>Xe.innerText||Xe.textContent||"");return ra(Te)},Hr=U=>ro(U,rs),xs=U=>Un.grep(U,rs),bo=U=>xs(U).length>0,xa=U=>Hr(U).length>0,vo=U=>{const re=U.schema.getTextInlineElements(),Te=Yt=>Yt.nodeType===1&&!Bt(Yt)&&!Re(re,Yt.nodeName.toLowerCase());if(zs(U).exists(Yt=>Yt.hasAttribute("data-mce-block")))return!1;const wt=U.selection.getRng();return wt.collapsed?!0:ro(wt,Te).length===0},ds=U=>Wo(U)&&U.nodeName==="FIGURE"&&/\bimage\b/i.test(U.className),xr=U=>sn(["title","rel","class","target"],(Te,Xe)=>(U[Xe].each(wt=>{Te[Xe]=wt.length>0?wt:null}),Te),{href:U.href}),ec=(U,re)=>(re==="http"||re==="https")&&!ir(U)?re+"://"+U:U,ca=(U,re)=>{const Te={...re};if(bt(U).length===0&&!et(U)){const Xe=Ms(Te.rel,Te.target==="_blank");Te.rel=Xe||null}return nt.from(Te.target).isNone()&&bs(U)===!1&&(Te.target=je(U)),Te.href=ec(Te.href,Ke(U)),Te},yo=(U,re,Te,Xe)=>{Te.each(wt=>{Re(re,"innerText")?re.innerText=wt:re.textContent=wt}),U.dom.setAttribs(re,Xe),U.selection.select(re)},Ta=(U,re,Te,Xe)=>{const wt=U.dom;ds(re)?dc(wt,re,Xe):Te.fold(()=>{U.execCommand("mceInsertLink",!1,Xe)},Yt=>{U.insertContent(wt.createHTML("a",Xe,wt.encode(Yt)))})},xt=(U,re,Te)=>{const Xe=U.selection.getNode(),wt=zs(U,Xe),Yt=ca(U,xr(Te));U.undoManager.transact(()=>{Te.href===re.href&&re.attach(),wt.fold(()=>{Ta(U,Xe,Te.text,Yt)},Co=>{U.focus(),yo(U,Co,Te.text,Yt)})})},Eo=U=>{const re=U.dom,Te=U.selection,Xe=Te.getBookmark(),wt=Te.getRng().cloneRange(),Yt=re.getParent(wt.startContainer,"a[href]",U.getBody()),Co=re.getParent(wt.endContainer,"a[href]",U.getBody());Yt&&wt.setStartBefore(Yt),Co&&wt.setEndAfter(Co),Te.setRng(wt),U.execCommand("unlink"),Te.moveToBookmark(Xe)},Pr=U=>{U.undoManager.transact(()=>{const re=U.selection.getNode();ds(re)?Fc(U,re):Eo(U),U.focus()})},br=U=>{const{class:re,href:Te,rel:Xe,target:wt,text:Yt,title:Co}=U;return xe({class:re.getOrNull(),href:Te,rel:Xe.getOrNull(),target:wt.getOrNull(),text:Yt.getOrNull(),title:Co.getOrNull()},(Ts,Do)=>Ho(Ts)===!1)},uc=(U,re)=>{const Te=U.options.get,Xe={allow_html_data_urls:Te("allow_html_data_urls"),allow_script_urls:Te("allow_script_urls"),allow_svg_data_urls:Te("allow_svg_data_urls")},wt=re.href;return{...re,href:ie.isDomSafe(wt,"a",Xe)?wt:""}},vc=(U,re,Te)=>{const Xe=uc(U,Te);U.hasPlugin("rtc",!0)?U.execCommand("createlink",!1,br(Xe)):xt(U,re,Xe)},Qo=U=>{U.hasPlugin("rtc",!0)?U.execCommand("unlink"):Pr(U)},Fc=(U,re)=>{var Te;const Xe=U.dom.select("img",re)[0];if(Xe){const wt=U.dom.getParents(Xe,"a[href]",re)[0];wt&&((Te=wt.parentNode)===null||Te===void 0||Te.insertBefore(Xe,wt),U.dom.remove(wt))}},dc=(U,re,Te)=>{var Xe;const wt=U.select("img",re)[0];if(wt){const Yt=U.create("a",Te);(Xe=wt.parentNode)===null||Xe===void 0||Xe.insertBefore(Yt,wt),Yt.appendChild(wt)}},Yo=U=>So(U.value)?U.value:"",fn=U=>So(U.text)?U.text:So(U.title)?U.title:"",Bs=(U,re)=>{const Te=[];return Un.each(U,Xe=>{const wt=fn(Xe);if(Xe.menu!==void 0){const Yt=Bs(Xe.menu,re);Te.push({text:wt,items:Yt})}else{const Yt=re(Xe);Te.push({text:wt,value:Yt})}}),Te},qr=(U=Yo)=>re=>nt.from(re).map(Te=>Bs(Te,U)),ms={sanitize:U=>qr(Yo)(U),sanitizeWith:qr,createUi:(U,re)=>Te=>({name:U,type:"listbox",label:re,items:Te}),getValue:Yo},rr=U=>Fe(U,"items"),Ps=(U,re)=>le(re,Te=>rr(Te)?Ps(U,Te.items):$e(Te.value===U,Te)),tc=(U,re,Te,Xe)=>{const wt=Xe[re],Yt=U.length>0;return wt!==void 0?Ps(wt,Te).map(Co=>({url:{value:Co.value,meta:{text:Yt?U:Co.text,attach:Xn}},text:Yt?U:Co.text})):nt.none()},Ic=(U,re)=>re==="link"?U.link:re==="anchor"?U.anchor:nt.none(),ue={init:(U,re)=>{const Te={text:U.text,title:U.title},Xe=Do=>{var Ut;return $e(Te.title.length<=0,nt.from((Ut=Do.meta)===null||Ut===void 0?void 0:Ut.title).getOr(""))},wt=Do=>{var Ut;return $e(Te.text.length<=0,nt.from((Ut=Do.meta)===null||Ut===void 0?void 0:Ut.text).getOr(Do.value))},Yt=Do=>{const Ut=wt(Do.url),vr=Xe(Do.url);return Ut.isSome()||vr.isSome()?nt.some({...Ut.map(gn=>({text:gn})).getOr({}),...vr.map(gn=>({title:gn})).getOr({})}):nt.none()},Co=(Do,Ut)=>{const vr=Ic(re,Ut).getOr([]);return tc(Te.text,Ut,vr,Do)};return{onChange:(Do,Ut)=>{const vr=Ut.name;return vr==="url"?Yt(Do()):dt(["anchor","link"],vr)?Co(Do(),vr):((vr==="text"||vr==="title")&&(Te[vr]=Do()[vr]),nt.none())}}},getDelta:tc};var se=tinymce.util.Tools.resolve("tinymce.util.Delay");const Be=(U,re,Te)=>{const Xe=U.selection.getRng();se.setEditorTimeout(U,()=>{U.windowManager.confirm(re,wt=>{U.selection.setRng(Xe),Te(wt)})})},Ve=U=>{const re=U.href;return re.indexOf("@")>0&&re.indexOf("/")===-1&&re.indexOf("mailto:")===-1?nt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Xe=>({...Xe,href:"mailto:"+re})}):nt.none()},un=(U,re)=>Te=>{const Xe=Te.href;return U===1&&!ir(Xe)||U===0&&/^\s*www(\.|\d\.)/i.test(Xe)?nt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${re}:// prefix?`,preprocess:Yt=>({...Yt,href:re+"://"+Xe})}):nt.none()},jn={preprocess:(U,re)=>le([Ve,un(Ke(U),Jn(U))],Te=>Te(re)).fold(()=>Promise.resolve(re),Te=>new Promise(Xe=>{Be(U,Te.message,wt=>{Xe(wt?Te.preprocess(re):re)})}))},ve={getAnchors:U=>{const re=U.dom.select("a:not([href])"),Te=Ne(re,Xe=>{const wt=Xe.name||Xe.id;return wt?[{text:wt,value:"#"+wt}]:[]});return Te.length>0?nt.some([{text:"None",value:""}].concat(Te)):nt.none()}},de={getClasses:U=>{const re=mn(U);return re.length>0?ms.sanitize(re):nt.none()}},pe=U=>{try{return nt.some(JSON.parse(U))}catch{return nt.none()}},ft={getLinks:U=>{const re=Xe=>U.convertURL(Xe.value||Xe.url||"","href"),Te=jt(U);return new Promise(Xe=>{So(Te)?fetch(Te).then(wt=>wt.ok?wt.text().then(pe):Promise.reject()).then(Xe,()=>Xe(nt.none())):zn(Te)?Te(wt=>Xe(nt.some(wt))):Xe(nt.from(Te))}).then(Xe=>Xe.bind(ms.sanitizeWith(re)).map(wt=>wt.length>0?[{text:"None",value:""}].concat(wt):wt))}},nn={getRels:(U,re)=>{const Te=bt(U);if(Te.length>0){const Xe=Bo(re,"_blank"),wt=et(U)===!1,Yt=Ts=>Ms(ms.getValue(Ts),Xe);return(wt?ms.sanitizeWith(Yt):ms.sanitize)(Te)}return nt.none()}},rn=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Cn={getTargets:U=>{const re=bs(U);return Hn(re)?ms.sanitize(re).orThunk(()=>nt.some(rn)):re===!1?nt.none():nt.some(rn)}},Nn=(U,re,Te)=>{const Xe=U.getAttrib(re,Te);return Xe!==null&&Xe.length>0?nt.some(Xe):nt.none()},zo=(U,re)=>{const Te=U.dom,wt=vo(U)?nt.some(gs(U.selection,re)):nt.none(),Yt=re.bind(vr=>nt.from(Te.getAttrib(vr,"href"))),Co=re.bind(vr=>nt.from(Te.getAttrib(vr,"target"))),Ts=re.bind(vr=>Nn(Te,vr,"rel")),Do=re.bind(vr=>Nn(Te,vr,"class")),Ut=re.bind(vr=>Nn(Te,vr,"title"));return{url:Yt,text:wt,title:Ut,target:Co,rel:Ts,linkClass:Do}},Os={collect:(U,re)=>ft.getLinks(U).then(Te=>{const Xe=zo(U,re);return{anchor:Xe,catalogs:{targets:Cn.getTargets(U),rels:nn.getRels(U,Xe.target),classes:de.getClasses(U),anchor:ve.getAnchors(U),link:Te},optNode:re,flags:{titleEnabled:Pe(U)}}})},_c=(U,re)=>Te=>{const Xe=Te.getData();if(!Xe.url.value){Qo(U),Te.close();return}const wt=Ts=>nt.from(Xe[Ts]).filter(Do=>!Bo(re.anchor[Ts],Do)),Yt={href:Xe.url.value,text:wt("text"),target:wt("target"),rel:wt("rel"),class:wt("linkClass"),title:wt("title")},Co={href:Xe.url.value,attach:Xe.url.meta!==void 0&&Xe.url.meta.attach?Xe.url.meta.attach:Xn};jn.preprocess(U,Yt).then(Ts=>{vc(U,Co,Ts)}),Te.close()},Lc=U=>{const re=zs(U);return Os.collect(U,re)},Dn=(U,re)=>{const Te=U.anchor,Xe=Te.url.getOr("");return{url:{value:Xe,meta:{original:{value:Xe}}},text:Te.text.getOr(""),title:Te.title.getOr(""),anchor:Xe,link:Xe,rel:Te.rel.getOr(""),target:Te.target.or(re).getOr(""),linkClass:Te.linkClass.getOr("")}},No=(U,re,Te)=>{const Xe=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],wt=U.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Yt=U.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Co=nt.from(je(Te)),Ts=Dn(U,Co),Do=U.catalogs,Ut=ue.init(Ts,Do);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Xt([Xe,wt,Yt,gt([Do.anchor.map(ms.createUi("anchor","Anchors")),Do.rels.map(ms.createUi("rel","Rel")),Do.targets.map(ms.createUi("target","Open link in...")),Do.link.map(ms.createUi("link","Link list")),Do.classes.map(ms.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ts,onChange:(gn,{name:Vr})=>{Ut.onChange(gn.getData,{name:Vr}).each(al=>{gn.setData(al)})},onSubmit:re}},$o=U=>{Lc(U).then(Te=>{const Xe=_c(U,Te);return No(Te,Xe,U)}).then(Te=>{U.windowManager.open(Te)})},Kr=U=>{U.addCommand("mceLink",(re,Te)=>{(Te==null?void 0:Te.dialog)===!0||!F(U)?$o(U):U.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Yr=U=>{U.addShortcut("Meta+K","",()=>{U.execCommand("mceLink")})},$r=U=>{let re=U;return{get:()=>re,set:wt=>{re=wt}}},Ks=U=>{const re=$r(nt.none()),Te=()=>re.get().each(U);return{clear:()=>{Te(),re.set(nt.none())},isSet:()=>re.get().isSome(),get:()=>re.get(),set:Ts=>{Te(),re.set(nt.some(Ts))}}},od=()=>{const U=Ks(Xn);return{...U,on:Te=>U.get().each(Te)}};var Ea=tinymce.util.Tools.resolve("tinymce.util.VK");const es=(U,re)=>{document.body.appendChild(U),U.dispatchEvent(re),document.body.removeChild(U)},yc=U=>{const re=document.createElement("a");re.target="_blank",re.href=U,re.rel="noreferrer noopener";const Te=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(Te),es(re,Te)},mc=U=>U.altKey===!0&&U.shiftKey===!1&&U.ctrlKey===!1&&U.metaKey===!1,Dr=(U,re)=>{if(re){const Te=Po(re);if(/^#/.test(Te)){const Xe=U.dom.select(Te);Xe.length&&U.selection.scrollIntoView(Xe[0],!0)}else yc(re.href)}},Ml=U=>{const re=U.selection.getRng(),Te=re.startContainer;return rs(Te)&&re.startContainer===re.endContainer&&U.dom.select("img",Te).length===1},Cc=(U,re)=>{const Te=xs(U.dom.getParents(re));return $e(Te.length===1,Te[0])},Ac=U=>{const re=Hr(U.selection.getRng());return $e(re.length>0,re[0]).or(Cc(U,U.selection.getNode()))},Ba=U=>U.selection.isCollapsed()||Ml(U)?Cc(U,U.selection.getStart()):Ac(U),aa=U=>{const re=od(),Te=()=>re.get().or(Ba(U)),Xe=()=>Te().each(wt=>Dr(U,wt));return U.on("contextmenu",wt=>{Cc(U,wt.target).each(re.set)}),U.on("SelectionChange",()=>{re.isSet()||Ba(U).each(re.set)}),U.on("click",wt=>{re.clear();const Yt=xs(U.dom.getParents(wt.target));Yt.length===1&&Ea.metaKeyPressed(wt)&&(wt.preventDefault(),Dr(U,Yt[0]))}),U.on("keydown",wt=>{re.clear(),!wt.isDefaultPrevented()&&wt.keyCode===13&&mc(wt)&&Te().each(Yt=>{wt.preventDefault(),Dr(U,Yt)})}),{gotoSelectedLink:Xe}},bi=U=>()=>{U.execCommand("mceLink",!1,{dialog:!0})},hl=(U,re)=>(U.on("NodeChange",re),()=>U.off("NodeChange",re)),cl=U=>re=>{const Te=()=>{re.setActive(!U.mode.isReadOnly()&&As(U,U.selection.getNode())),re.setEnabled(U.selection.isEditable())};return Te(),hl(U,Te)},la=U=>re=>{const Te=()=>{re.setEnabled(U.selection.isEditable())};return Te(),hl(U,Te)},zr=U=>re=>{const Te=Yt=>bo(Yt)||xa(U.selection.getRng()),Xe=U.dom.getParents(U.selection.getStart()),wt=Yt=>{re.setEnabled(Te(Yt)&&U.selection.isEditable())};return wt(Xe),hl(U,Yt=>wt(Yt.parents))},vi=(U,re)=>{U.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:bi(U),onSetup:cl(U)}),U.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:re.gotoSelectedLink,onSetup:zr(U)}),U.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Qo(U),onSetup:zr(U)})},yi=(U,re)=>{U.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:re.gotoSelectedLink,onSetup:zr(U)}),U.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:bi(U),onSetup:la(U)}),U.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Qo(U),onSetup:zr(U)})},Ci=U=>{const re="link unlink openlink",Te="link";U.ui.registry.addContextMenu("link",{update:Xe=>U.dom.isEditable(Xe)?bo(U.dom.getParents(Xe,"a"))?re:Te:""})},Jl=(U,re)=>{const Te=Yt=>{Yt.selection.collapse(!1)},Xe=Yt=>{const Co=U.selection.getNode();return Yt.setEnabled(As(U,Co)),Xn},wt=Yt=>{const Co=zs(U),Ts=vo(U);if(Co.isNone()&&Ts){const Do=gs(U.selection,Co);return $e(Do.length===0,Yt)}else return nt.none()};U.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:cl(U)},label:"Link",predicate:Yt=>Vn(U)&&As(U,Yt),initValue:()=>zs(U).fold(Ot(""),Po),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Yt=>{const Co=U.selection.getNode();return Yt.setActive(As(U,Co)),cl(U)(Yt)},onAction:Yt=>{const Co=Yt.getValue(),Ts=wt(Co);vc(U,{href:Co,attach:Xn},{href:Co,text:Ts,title:nt.none(),rel:nt.none(),target:nt.from(je(U)),class:nt.none()}),Te(U),Yt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Xe,onAction:Yt=>{Qo(U),Yt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Xe,onAction:Yt=>{re.gotoSelectedLink(),Yt.hide()}}]})},Fr=U=>{const re=aa(U);vi(U,re),yi(U,re),Ci(U),Jl(U,re)};var ia=()=>{Sr.add("link",U=>{kn(U),Kr(U),Fr(U),Yr(U)})};ia()})();(function(){var Sr=tinymce.util.Tools.resolve("tinymce.PluginManager");const js=(x,R,H)=>{var ce;return H(x,R.prototype)?!0:((ce=x.constructor)===null||ce===void 0?void 0:ce.name)===R.name},ws=x=>{const R=typeof x;return x===null?"null":R==="object"&&Array.isArray(x)?"array":R==="object"&&js(x,String,(H,ce)=>ce.isPrototypeOf(H))?"string":R},us=x=>R=>ws(R)===x,Ko=x=>R=>typeof R===x,ps=us("string"),So=us("object"),rt=us("array"),Hn=Ko("boolean"),Ho=x=>x==null,mo=x=>!Ho(x),Uo=Ko("function"),Wo=Ko("number"),zn=()=>{},Go=(x,R)=>H=>x(R(H)),Xn=x=>()=>x,Ot=(x,R)=>x===R;function Zn(x,...R){return(...H)=>{const ce=R.concat(H);return x.apply(null,ce)}}const nt=x=>R=>!x(R),oe=Xn(!1);class ut{constructor(R,H){this.tag=R,this.value=H}static some(R){return new ut(!0,R)}static none(){return ut.singletonNone}fold(R,H){return this.tag?H(this.value):R()}isSome(){return this.tag}isNone(){return!this.tag}map(R){return this.tag?ut.some(R(this.value)):ut.none()}bind(R){return this.tag?R(this.value):ut.none()}exists(R){return this.tag&&R(this.value)}forall(R){return!this.tag||R(this.value)}filter(R){return!this.tag||R(this.value)?this:ut.none()}getOr(R){return this.tag?this.value:R}or(R){return this.tag?this:R}getOrThunk(R){return this.tag?this.value:R()}orThunk(R){return this.tag?this:R()}getOrDie(R){if(this.tag)return this.value;throw new Error(R??"Called getOrDie on None")}static from(R){return mo(R)?ut.some(R):ut.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(R){this.tag&&R(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ut.singletonNone=new ut(!1);const oo=Array.prototype.slice,dt=Array.prototype.indexOf,W=Array.prototype.push,Rt=(x,R)=>dt.call(x,R),sn=(x,R)=>Rt(x,R)>-1,Xt=(x,R)=>{for(let H=0,ce=x.length;H<ce;H++){const be=x[H];if(R(be,H))return!0}return!1},Ne=(x,R)=>{const H=x.length,ce=new Array(H);for(let be=0;be<H;be++){const mt=x[be];ce[be]=R(mt,be)}return ce},le=(x,R)=>{for(let H=0,ce=x.length;H<ce;H++){const be=x[H];R(be,H)}},Bo=(x,R)=>{const H=[];for(let ce=0,be=x.length;ce<be;ce++){const mt=x[ce];R(mt,ce)&&H.push(mt)}return H},gt=(x,R)=>{if(x.length===0)return[];{let H=R(x[0]);const ce=[];let be=[];for(let mt=0,Mn=x.length;mt<Mn;mt++){const fo=x[mt],$n=R(fo);$n!==H&&(ce.push(be),be=[]),H=$n,be.push(fo)}return be.length!==0&&ce.push(be),ce}},$e=(x,R,H)=>(le(x,(ce,be)=>{H=R(H,ce,be)}),H),A=(x,R,H)=>{for(let ce=0,be=x.length;ce<be;ce++){const mt=x[ce];if(R(mt,ce))return ut.some(mt);if(H(mt,ce))break}return ut.none()},kn=(x,R)=>A(x,R,oe),Ke=x=>{const R=[];for(let H=0,ce=x.length;H<ce;++H){if(!rt(x[H]))throw new Error("Arr.flatten item "+H+" was not an array, input: "+x);W.apply(R,x[H])}return R},Vn=(x,R)=>Ke(Ne(x,R)),jt=x=>{const R=oo.call(x,0);return R.reverse(),R},je=(x,R)=>R>=0&&R<x.length?ut.some(x[R]):ut.none(),Jn=x=>je(x,0),bs=x=>je(x,x.length-1),bt=(x,R)=>{const H=[],ce=Uo(R)?be=>Xt(H,mt=>R(mt,be)):be=>sn(H,be);for(let be=0,mt=x.length;be<mt;be++){const Mn=x[be];ce(Mn)||H.push(Mn)}return H},mn=(x,R,H=Ot)=>x.exists(ce=>H(ce,R)),Pe=(x,R,H=Ot)=>et(x,R,H).getOr(x.isNone()&&R.isNone()),et=(x,R,H)=>x.isSome()&&R.isSome()?ut.some(H(x.getOrDie(),R.getOrDie())):ut.none(),F=8,Ss=11,io=1,To=3,it=(x,R)=>{const ce=(R||document).createElement("div");if(ce.innerHTML=x,!ce.hasChildNodes()||ce.childNodes.length>1){const be="HTML does not have a single root node";throw new Error(be)}return Re(ce.childNodes[0])},Mt=(x,R)=>{const ce=(R||document).createElement(x);return Re(ce)},xe=(x,R)=>{const ce=(R||document).createTextNode(x);return Re(ce)},Re=x=>{if(x==null)throw new Error("Node cannot be null or undefined");return{dom:x}},ie={fromHtml:it,fromTag:Mt,fromText:xe,fromDom:Re,fromPoint:(x,R,H)=>ut.from(x.dom.elementFromPoint(R,H)).map(Re)},_n=(x,R)=>{const H=x.dom;if(H.nodeType!==io)return!1;{const ce=H;if(ce.matches!==void 0)return ce.matches(R);if(ce.msMatchesSelector!==void 0)return ce.msMatchesSelector(R);if(ce.webkitMatchesSelector!==void 0)return ce.webkitMatchesSelector(R);if(ce.mozMatchesSelector!==void 0)return ce.mozMatchesSelector(R);throw new Error("Browser lacks native selectors")}},Un=(x,R)=>x.dom===R.dom,Bt=(x,R)=>{const H=x.dom,ce=R.dom;return H===ce?!1:H.contains(ce)},rs=_n,ro=typeof window<"u"?window:Function("return this;")(),ir=(x,R)=>{let H=R??ro;for(let ce=0;ce<x.length&&H!==void 0&&H!==null;++ce)H=H[x[ce]];return H},Po=(x,R)=>{const H=x.split(".");return ir(H,R)},Ms=(x,R)=>Po(x,R),ra=(x,R)=>{const H=Ms(x,R);if(H==null)throw new Error(x+" not available on this browser");return H},zs=Object.getPrototypeOf,As=x=>ra("HTMLElement",x),gs=x=>{const R=Po("ownerDocument.defaultView",x);return So(x)&&(As(R).prototype.isPrototypeOf(x)||/^HTML\w*Element$/.test(zs(x).constructor.name))},Hr=x=>x.dom.nodeName.toLowerCase(),xs=x=>x.dom.nodeType,bo=x=>R=>xs(R)===x,xa=x=>xs(x)===F||Hr(x)==="#comment",vo=x=>ds(x)&&gs(x.dom),ds=bo(io),xr=bo(To),ec=bo(Ss),ca=x=>R=>ds(R)&&Hr(R)===x,yo=x=>ut.from(x.dom.parentNode).map(ie.fromDom),Ta=x=>ut.from(x.dom.parentElement).map(ie.fromDom),xt=x=>ut.from(x.dom.nextSibling).map(ie.fromDom),Eo=x=>Ne(x.dom.childNodes,ie.fromDom),Pr=(x,R)=>{const H=x.dom.childNodes;return ut.from(H[R]).map(ie.fromDom)},br=x=>Pr(x,0),uc=x=>Pr(x,x.dom.childNodes.length-1),vc=x=>ec(x)&&mo(x.dom.host),Qo=x=>ie.fromDom(x.dom.getRootNode()),Fc=x=>{const R=Qo(x);return vc(R)?ut.some(R):ut.none()},dc=x=>ie.fromDom(x.dom.host),Yo=x=>{const R=xr(x)?x.dom.parentNode:x.dom;if(R==null||R.ownerDocument===null)return!1;const H=R.ownerDocument;return Fc(ie.fromDom(R)).fold(()=>H.body.contains(R),Go(Yo,dc))};var fn=(x,R,H,ce,be)=>x(H,ce)?ut.some(H):Uo(be)&&be(H)?ut.none():R(H,ce,be);const Bs=(x,R,H)=>{let ce=x.dom;const be=Uo(H)?H:oe;for(;ce.parentNode;){ce=ce.parentNode;const mt=ie.fromDom(ce);if(R(mt))return ut.some(mt);if(be(mt))break}return ut.none()},qr=(x,R,H)=>fn((be,mt)=>mt(be),Bs,x,R,H),Ga=(x,R,H)=>Bs(x,ce=>_n(ce,R),H),rl=(x,R,H)=>fn((be,mt)=>_n(be,mt),Ga,x,R,H),ms=x=>rl(x,"[contenteditable]"),rr=(x,R=!1)=>Yo(x)?x.dom.isContentEditable:ms(x).fold(Xn(R),H=>Ps(H)==="true"),Ps=x=>x.dom.contentEditable,tc=(x,R)=>{yo(x).each(ce=>{ce.dom.insertBefore(R.dom,x.dom)})},Ic=(x,R)=>{xt(x).fold(()=>{yo(x).each(be=>{ue(be,R)})},ce=>{tc(ce,R)})},cr=(x,R)=>{br(x).fold(()=>{ue(x,R)},ce=>{x.dom.insertBefore(R.dom,ce.dom)})},ue=(x,R)=>{x.dom.appendChild(R.dom)},se=(x,R)=>{le(R,H=>{tc(x,H)})},Be=(x,R)=>{le(R,H=>{ue(x,H)})},Ve=x=>{x.dom.textContent="",le(Eo(x),R=>{un(R)})},un=x=>{const R=x.dom;R.parentNode!==null&&R.parentNode.removeChild(R)};var Rn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),jn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),qs=tinymce.util.Tools.resolve("tinymce.util.VK");const ve=x=>Ne(x,ie.fromDom),Gn=Object.keys,de=(x,R)=>{const H=Gn(x);for(let ce=0,be=H.length;ce<be;ce++){const mt=H[ce],Mn=x[mt];R(Mn,mt)}},pe=x=>(R,H)=>{x[H]=R},at=(x,R,H,ce)=>{de(x,(be,mt)=>{(R(be,mt)?H:ce)(be,mt)})},ft=(x,R)=>{const H={};return at(x,R,pe(H),zn),H},Vt=(x,R,H)=>{if(ps(H)||Hn(H)||Wo(H))x.setAttribute(R,H+"");else throw new Error("Attribute value was not simple")},nn=(x,R)=>{const H=x.dom;de(R,(ce,be)=>{Vt(H,be,ce)})},rn=x=>$e(x.dom.attributes,(R,H)=>(R[H.name]=H.value,R),{}),en=(x,R)=>ie.fromDom(x.dom.cloneNode(R)),Cn=x=>en(x,!0),Nn=(x,R)=>{const H=ie.fromTag(R),ce=rn(x);return nn(H,ce),H},zo=(x,R)=>{const H=Nn(x,R);Ic(x,H);const ce=Eo(x);return Be(H,ce),un(x),H};var cs=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Os=tinymce.util.Tools.resolve("tinymce.util.Tools");const _c=x=>R=>mo(R)&&R.nodeName.toLowerCase()===x,Lc=x=>R=>mo(R)&&x.test(R.nodeName),Dn=x=>mo(x)&&x.nodeType===3,No=x=>mo(x)&&x.nodeType===1,$o=Lc(/^(OL|UL|DL)$/),Kr=Lc(/^(OL|UL)$/),Yr=_c("ol"),$r=Lc(/^(LI|DT|DD)$/),Ks=Lc(/^(DT|DD)$/),od=Lc(/^(TH|TD)$/),Ea=_c("br"),es=x=>{var R;return((R=x.parentNode)===null||R===void 0?void 0:R.firstChild)===x},yc=(x,R)=>mo(R)&&R.nodeName in x.schema.getTextBlockElements(),mc=(x,R)=>mo(x)&&x.nodeName in R,Dr=(x,R)=>mo(R)&&R.nodeName in x.schema.getVoidElements(),Ml=(x,R)=>Ea(R)?x.isBlock(R.nextSibling)&&!Ea(R.previousSibling):!1,Cc=(x,R,H)=>{const ce=x.isEmpty(R);return H&&x.select("span[data-mce-type=bookmark]",R).length>0?!1:ce},Ac=(x,R)=>x.isChildOf(R,x.getRoot()),Ba=x=>R=>R.options.get(x),aa=x=>{const R=x.options.register;R("lists_indent_on_tab",{processor:"boolean",default:!0})},bi=Ba("lists_indent_on_tab"),hl=Ba("forced_root_block"),cl=Ba("forced_root_block_attrs"),la=(x,R,H={})=>{const ce=x.dom,be=x.schema.getBlockElements(),mt=ce.createFragment(),Mn=hl(x),fo=cl(x);let $n,Bn,nr=!1;for(Bn=ce.create(Mn,{...fo,...H.style?{style:H.style}:{}}),mc(R.firstChild,be)||mt.appendChild(Bn);$n=R.firstChild;){const Jr=$n.nodeName;!nr&&(Jr!=="SPAN"||$n.getAttribute("data-mce-type")!=="bookmark")&&(nr=!0),mc($n,be)?(mt.appendChild($n),Bn=null):(Bn||(Bn=ce.create(Mn,fo),mt.appendChild(Bn)),Bn.appendChild($n))}return!nr&&Bn&&Bn.appendChild(ce.create("br",{"data-mce-bogus":"1"})),mt},zr=cs.DOM,vi=(x,R,H)=>{const ce=Bn=>{const nr=Bn.parentNode;nr&&Os.each(be,Jr=>{nr.insertBefore(Jr,H.parentNode)}),zr.remove(Bn)},be=zr.select('span[data-mce-type="bookmark"]',R),mt=la(x,H),Mn=zr.createRng();Mn.setStartAfter(H),Mn.setEndAfter(R);const fo=Mn.extractContents();for(let Bn=fo.firstChild;Bn;Bn=Bn.firstChild)if(Bn.nodeName==="LI"&&x.dom.isEmpty(Bn)){zr.remove(Bn);break}x.dom.isEmpty(fo)||zr.insertAfter(fo,R),zr.insertAfter(mt,R);const $n=H.parentElement;$n&&Cc(x.dom,$n)&&ce($n),zr.remove(H),Cc(x.dom,R)&&zr.remove(R)},yi=ca("dd"),Ci=ca("dt"),Jl=(x,R)=>{yi(R)?zo(R,"dt"):Ci(R)&&Ta(R).each(H=>vi(x,H.dom,R.dom))},Fr=x=>{Ci(x)&&zo(x,"dd")},ia=(x,R,H)=>{R==="Indent"?le(H,Fr):le(H,ce=>Jl(x,ce))},U=(x,R)=>{if(Dn(x))return{container:x,offset:R};const H=Rn.getNode(x,R);return Dn(H)?{container:H,offset:R>=x.childNodes.length?H.data.length:0}:H.previousSibling&&Dn(H.previousSibling)?{container:H.previousSibling,offset:H.previousSibling.data.length}:H.nextSibling&&Dn(H.nextSibling)?{container:H.nextSibling,offset:0}:{container:x,offset:R}},re=x=>{const R=x.cloneRange(),H=U(x.startContainer,x.startOffset);R.setStart(H.container,H.offset);const ce=U(x.endContainer,x.endOffset);return R.setEnd(ce.container,ce.offset),R},Te=["OL","UL","DL"],Xe=Te.join(","),wt=(x,R)=>{const H=R||x.selection.getStart(!0);return x.dom.getParent(H,Xe,al(x,H))},Yt=(x,R)=>mo(x)&&R.length===1&&R[0]===x,Co=x=>Bo(x.querySelectorAll(Xe),$o),Ts=x=>{const R=wt(x),H=x.selection.getSelectedBlocks();return Yt(R,H)?Co(R):Bo(H,ce=>$o(ce)&&R!==ce)},Do=(x,R)=>{const H=Os.map(R,ce=>{const be=x.dom.getParent(ce,"li,dd,dt",al(x,ce));return be||ce});return bt(H)},Ut=x=>{const R=x.selection.getSelectedBlocks();return Bo(Do(x,R),$r)},vr=x=>Bo(Ut(x),Ks),gn=(x,R)=>{const H=x.dom.getParents(R,"TD,TH");return H.length>0?H[0]:x.getBody()},Vr=(x,R)=>!$o(R)&&!$r(R)&&Xt(Te,H=>x.isValidChild(R.nodeName,H)),al=(x,R)=>{const H=x.dom.getParents(R,x.dom.isBlock),ce=mt=>mt.nodeName.toLowerCase()!==hl(x);return kn(H,mt=>ce(mt)&&Vr(x.schema,mt)).getOr(x.getBody())},P=x=>yo(x).exists(R=>$r(R.dom)&&br(R).exists(H=>!$o(H.dom))&&uc(R).exists(H=>!$o(H.dom))),Y=(x,R)=>{const H=x.dom.getParents(R,"ol,ul",al(x,R));return bs(H)},fe=x=>{const R=Y(x,x.selection.getStart()),H=Bo(x.selection.getSelectedBlocks(),Kr);return R.toArray().concat(H)},Oe=x=>{const R=x.selection.getStart();return x.dom.getParents(R,"ol,ul",al(x,R))},ot=x=>{const R=fe(x),H=Oe(x);return kn(H,ce=>P(ie.fromDom(ce))).fold(()=>eo(x,R),ce=>[ce])},eo=(x,R)=>{const H=Ne(R,ce=>Y(x,ce).getOr(ce));return bt(H)},Vs=x=>/\btox\-/.test(x.className),fs=(x,R)=>A(x,$o,od).exists(H=>H.nodeName===R&&!Vs(H)),yt=(x,R)=>R!==null&&!x.dom.isEditable(R),Us=x=>{const R=wt(x);return yt(x,R)},fc=(x,R)=>{const H=x.dom.getParent(R,"ol,ul,dl");return yt(x,H)},Xc=(x,R)=>{const H=x.selection.getNode();return R({parents:x.dom.getParents(H),element:H}),x.on("NodeChange",R),()=>x.off("NodeChange",R)},co=(x,R)=>{const ce=document.createDocumentFragment();return le(x,be=>{ce.appendChild(be.dom)}),ie.fromDom(ce)},Jc=(x,R,H)=>x.dispatch("ListMutation",{action:R,element:H}),Zi=(x=>R=>R.replace(x,""))(/^\s+|\s+$/g),$s=x=>x.length>0,Bl=x=>!$s(x),Ld=x=>x.style!==void 0&&Uo(x.style.getPropertyValue),mf=(x,R,H)=>{if(!ps(H))throw new Error("CSS value must be a string: "+H);Ld(x)&&x.style.setProperty(R,H)},ar=(x,R,H)=>{const ce=x.dom;mf(ce,R,H)},Hd=x=>rs(x,"OL,UL"),Ir=x=>rs(x,"LI"),wc=x=>br(x).exists(Hd),ll=x=>uc(x).exists(Hd),il=x=>"listAttributes"in x,hu=x=>"isComment"in x,q=x=>"isFragment"in x,J=x=>x.depth>0,Ae=x=>x.isSelected,Ye=x=>{const R=Eo(x),H=ll(x)?R.slice(0,-1):R;return Ne(H,Cn)},Tn=(x,R,H)=>yo(x).filter(ds).map(ce=>({depth:R,dirty:!1,isSelected:H,content:Ye(x),itemAttributes:rn(x),listAttributes:rn(ce),listType:Hr(ce),isInPreviousLi:!1})),Wn=(x,R)=>{ue(x.item,R.list)},ts=x=>{for(let R=1;R<x.length;R++)Wn(x[R-1],x[R])},Ds=(x,R)=>{et(bs(x),Jn(R),Wn)},Sc=(x,R)=>{const H={list:ie.fromTag(R,x),item:ie.fromTag("li",x)};return ue(H.list,H.item),H},Qc=(x,R,H)=>{const ce=[];for(let be=0;be<H;be++)ce.push(Sc(x,il(R)?R.listType:R.parentListType));return ce},Lr=(x,R)=>{for(let H=0;H<x.length-1;H++)ar(x[H].item,"list-style-type","none");bs(x).each(H=>{il(R)&&(nn(H.list,R.listAttributes),nn(H.item,R.itemAttributes)),Be(H.item,R.content)})},ea=(x,R)=>{Hr(x.list)!==R.listType&&(x.list=zo(x.list,R.listType)),nn(x.list,R.listAttributes)},Fs=(x,R,H)=>{const ce=ie.fromTag("li",x);return nn(ce,R),Be(ce,H),ce},ua=(x,R)=>{ue(x.list,R),x.item=R},Hc=(x,R,H)=>{const ce=R.slice(0,H.depth);return bs(ce).each(be=>{if(il(H)){const mt=Fs(x,H.itemAttributes,H.content);ua(be,mt),ea(be,H)}else if(q(H))Be(be.item,H.content);else{const mt=ie.fromHtml(`<!--${H.content}-->`);ue(be.list,mt)}}),ce},Er=(x,R,H)=>{const ce=Qc(x,H,H.depth-R.length);return ts(ce),Lr(ce,H),Ds(R,ce),R.concat(ce)},ur=(x,R)=>{let H=ut.none();const ce=$e(R,(be,mt,Mn)=>hu(mt)?Mn===0?(H=ut.some(mt),be):Hc(x,be,mt):mt.depth>be.length?Er(x,be,mt):Hc(x,be,mt),[]);return H.each(be=>{const mt=ie.fromHtml(`<!--${be.content}-->`);Jn(ce).each(Mn=>{cr(Mn.list,mt)})}),Jn(ce).map(be=>be.list)},Ys=(x,R)=>{switch(x){case"Indent":R.depth++;break;case"Outdent":R.depth--;break;case"Flatten":R.depth=0}R.dirty=!0},pu=(x,R)=>{il(x)&&il(R)&&(x.listType=R.listType,x.listAttributes={...R.listAttributes})},bu=x=>{x.listAttributes=ft(x.listAttributes,(R,H)=>H!=="start")},vu=(x,R)=>{const H=x[R].depth,ce=mt=>mt.depth===H&&!mt.dirty,be=mt=>mt.depth<H;return A(jt(x.slice(0,R)),ce,be).orThunk(()=>A(x.slice(R+1),ce,be))},Cm=x=>(le(x,(R,H)=>{vu(x,H).fold(()=>{R.dirty&&il(R)&&bu(R)},ce=>pu(R,ce))}),x),yu=x=>{let R=x;return{get:()=>R,set:be=>{R=be}}},Pl=(x,R,H,ce)=>{var be;if(xa(ce))return[{depth:x+1,content:(be=ce.dom.nodeValue)!==null&&be!==void 0?be:"",dirty:!1,isSelected:!1,isComment:!0}];R.each(fo=>{Un(fo.start,ce)&&H.set(!0)});const mt=Tn(ce,x,H.get());R.each(fo=>{Un(fo.end,ce)&&H.set(!1)});const Mn=uc(ce).filter(Hd).map(fo=>Xr(x,R,H,fo)).getOr([]);return mt.toArray().concat(Mn)},wm=(x,R,H,ce)=>br(ce).filter(Hd).fold(()=>Pl(x,R,H,ce),be=>{const mt=$e(Eo(ce),(Mn,fo,$n)=>{if($n===0)return Mn;if(Ir(fo))return Mn.concat(Pl(x,R,H,fo));{const Bn={isFragment:!0,depth:x,content:[fo],isSelected:!1,dirty:!1,parentListType:Hr(be)};return Mn.concat(Bn)}},[]);return Xr(x,R,H,be).concat(mt)}),Xr=(x,R,H,ce)=>Vn(Eo(ce),be=>{const mt=Hd(be)?Xr:wm,Mn=x+1;return mt(Mn,R,H,be)}),Sm=(x,R)=>{const H=yu(!1),ce=0;return Ne(x,be=>({sourceList:be,entries:Xr(ce,R,H,be)}))},yg=(x,R)=>{const H=Cm(R);return Ne(H,ce=>{const be=hu(ce)?co([ie.fromHtml(`<!--${ce.content}-->`)]):co(ce.content),mt=il(ce)?ce.itemAttributes:{};return ie.fromDom(la(x,be.dom,mt))})},wi=(x,R)=>{const H=Cm(R);return ur(x.contentDocument,H).toArray()},Cg=(x,R)=>Vn(gt(R,J),H=>Jn(H).exists(J)?wi(x,H):yg(x,H)),Cu=(x,R)=>{le(Bo(x,Ae),H=>Ys(R,H))},wg=x=>{const R=Ne(Ut(x),ie.fromDom);return et(kn(R,nt(wc)),kn(jt(R),nt(wc)),(H,ce)=>({start:H,end:ce}))},ji=(x,R,H)=>{const ce=Sm(R,wg(x));le(ce,be=>{Cu(be.entries,H);const mt=Cg(x,be.entries);le(mt,Mn=>{Jc(x,H==="Indent"?"IndentList":"OutdentList",Mn.dom)}),se(be.sourceList,mt),un(be.sourceList)})},Sg=(x,R)=>{const H=ve(ot(x)),ce=ve(vr(x));let be=!1;if(H.length||ce.length){const mt=x.selection.getBookmark();ji(x,H,R),ia(x,R,ce),x.selection.moveToBookmark(mt),x.selection.setRng(re(x.selection.getRng())),x.nodeChanged(),be=!0}return be},xm=(x,R)=>!Us(x)&&Sg(x,R),ff=x=>xm(x,"Indent"),wu=x=>xm(x,"Outdent"),gf=x=>xm(x,"Flatten"),me="\uFEFF",Gi=x=>x===me,Si=(x,R,H)=>Bs(x,R,H).isSome(),xg=(x,R)=>Si(x,Zn(Un,R));var Yp=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Su=cs.DOM,wo=x=>{const R={},H=ce=>{let be=x[ce?"startContainer":"endContainer"],mt=x[ce?"startOffset":"endOffset"];if(No(be)){const Mn=Su.create("span",{"data-mce-type":"bookmark"});be.hasChildNodes()?(mt=Math.min(mt,be.childNodes.length-1),ce?be.insertBefore(Mn,be.childNodes[mt]):Su.insertAfter(Mn,be.childNodes[mt])):be.appendChild(Mn),be=Mn,mt=0}R[ce?"startContainer":"endContainer"]=be,R[ce?"startOffset":"endOffset"]=mt};return H(!0),x.collapsed||H(),R},nc=x=>{const R=ce=>{const be=fo=>{var $n;let Bn=($n=fo.parentNode)===null||$n===void 0?void 0:$n.firstChild,nr=0;for(;Bn;){if(Bn===fo)return nr;(!No(Bn)||Bn.getAttribute("data-mce-type")!=="bookmark")&&nr++,Bn=Bn.nextSibling}return-1};let mt=x[ce?"startContainer":"endContainer"],Mn=x[ce?"startOffset":"endOffset"];if(mt){if(No(mt)&&mt.parentNode){const fo=mt;Mn=be(mt),mt=mt.parentNode,Su.remove(fo),!mt.hasChildNodes()&&Su.isBlock(mt)&&mt.appendChild(Su.create("br"))}x[ce?"startContainer":"endContainer"]=mt,x[ce?"startOffset":"endOffset"]=Mn}};R(!0),R();const H=Su.createRng();return H.setStart(x.startContainer,x.startOffset),x.endContainer&&H.setEnd(x.endContainer,x.endOffset),re(H)},$l=x=>{switch(x){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},xu=(x,R,H)=>{const ce=H["list-style-type"]?H["list-style-type"]:null;x.setStyle(R,"list-style-type",ce)},Tm=(x,R)=>{Os.each(R,(H,ce)=>{x.setAttribute(ce,H)})},zd=(x,R,H)=>{Tm(R,H["list-attributes"]),Os.each(x.select("li",R),ce=>{Tm(ce,H["list-item-attributes"])})},da=(x,R,H)=>{xu(x,R,H),zd(x,R,H)},Em=(x,R,H)=>{Os.each(H,ce=>x.setStyle(R,ce,""))},qi=(x,R)=>mo(R)&&!mc(R,x.schema.getBlockElements()),km=(x,R,H,ce)=>{let be=R[H?"startContainer":"endContainer"];const mt=R[H?"startOffset":"endOffset"];No(be)&&(be=be.childNodes[Math.min(mt,be.childNodes.length-1)]||be),!H&&Ea(be.nextSibling)&&(be=be.nextSibling);const Mn=$n=>{for(;!x.dom.isBlock($n)&&$n.parentNode&&ce!==$n;)$n=$n.parentNode;return $n},fo=($n,Bn)=>{var nr;const Jr=new jn($n,Mn($n)),vl=Bn?"next":"prev";let Ji;for(;Ji=Jr[vl]();)if(!(Dr(x,Ji)||Gi(Ji.textContent)||((nr=Ji.textContent)===null||nr===void 0?void 0:nr.length)===0))return ut.some(Ji);return ut.none()};if(H&&Dn(be))if(Gi(be.textContent))be=fo(be,!1).getOr(be);else for(be.parentNode!==null&&qi(x,be.parentNode)&&(be=be.parentNode);be.previousSibling!==null&&(qi(x,be.previousSibling)||Dn(be.previousSibling));)be=be.previousSibling;if(!H&&Dn(be))if(Gi(be.textContent))be=fo(be,!0).getOr(be);else for(be.parentNode!==null&&qi(x,be.parentNode)&&(be=be.parentNode);be.nextSibling!==null&&(qi(x,be.nextSibling)||Dn(be.nextSibling));)be=be.nextSibling;for(;be.parentNode!==ce;){const $n=be.parentNode;if(yc(x,be)||/^(TD|TH)$/.test($n.nodeName))return be;be=$n}return be},Ki=(x,R,H)=>{const ce=[],be=x.dom,mt=km(x,R,!0,H),Mn=km(x,R,!1,H);let fo;const $n=[];for(let Bn=mt;Bn&&($n.push(Bn),Bn!==Mn);Bn=Bn.nextSibling);return Os.each($n,Bn=>{var nr;if(yc(x,Bn)){ce.push(Bn),fo=null;return}if(be.isBlock(Bn)||Ea(Bn)){Ea(Bn)&&be.remove(Bn),fo=null;return}const Jr=Bn.nextSibling;if(Yp.isBookmarkNode(Bn)&&($o(Jr)||yc(x,Jr)||!Jr&&Bn.parentNode===H)){fo=null;return}fo||(fo=be.create("p"),(nr=Bn.parentNode)===null||nr===void 0||nr.insertBefore(fo,Bn),ce.push(fo)),fo.appendChild(Bn)}),ce},Pa=(x,R,H)=>{const ce=x.getStyle(R,"list-style-type");let be=H?H["list-style-type"]:"";return be=be===null?"":be,ce===be},Tg=(x,R)=>{const H=x.selection.getStart(!0),ce=km(x,R,!0,x.getBody());return xg(ie.fromDom(ce),ie.fromDom(R.commonAncestorContainer))?R.commonAncestorContainer:H},Vd=(x,R,H)=>{const ce=x.selection.getRng();let be="LI";const mt=al(x,Tg(x,ce)),Mn=x.dom;if(Mn.getContentEditable(x.selection.getNode())==="false")return;R=R.toUpperCase(),R==="DL"&&(be="DT");const fo=wo(ce),$n=Bo(Ki(x,ce,mt),x.dom.isEditable);Os.each($n,Bn=>{let nr;const Jr=Bn.previousSibling,vl=Bn.parentNode;$r(vl)||(Jr&&$o(Jr)&&Jr.nodeName===R&&Pa(Mn,Jr,H)?(nr=Jr,Bn=Mn.rename(Bn,be),Jr.appendChild(Bn)):(nr=Mn.create(R),vl.insertBefore(nr,Bn),nr.appendChild(Bn),Bn=Mn.rename(Bn,be)),Em(Mn,Bn,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),da(Mn,nr,H),Ud(x.dom,nr))}),x.selection.setRng(nc(fo))},Oc=(x,R)=>$o(x)&&x.nodeName===(R==null?void 0:R.nodeName),qa=(x,R,H)=>{const ce=x.getStyle(R,"list-style-type",!0),be=x.getStyle(H,"list-style-type",!0);return ce===be},ka=(x,R)=>x.className===R.className,sd=(x,R,H)=>Oc(R,H)&&qa(x,R,H)&&ka(R,H),Ud=(x,R)=>{let H,ce=R.nextSibling;if(sd(x,R,ce)){const be=ce;for(;H=be.firstChild;)R.appendChild(H);x.remove(be)}if(ce=R.previousSibling,sd(x,R,ce)){const be=ce;for(;H=be.lastChild;)R.insertBefore(H,R.firstChild);x.remove(be)}},Eg=(x,R,H,ce)=>{if(R.nodeName!==H){const be=x.dom.rename(R,H);da(x.dom,be,ce),Jc(x,$l(H),be)}else da(x.dom,R,ce),Jc(x,$l(H),R)},Wd=(x,R,H,ce)=>{if(R.classList.forEach((be,mt,Mn)=>{be.startsWith("tox-")&&(Mn.remove(be),Mn.length===0&&R.removeAttribute("class"))}),R.nodeName!==H){const be=x.dom.rename(R,H);da(x.dom,be,ce),Jc(x,$l(H),be)}else da(x.dom,R,ce),Jc(x,$l(H),R)},Ql=(x,R,H,ce,be)=>{const mt=$o(R);if(mt&&R.nodeName===ce&&!_m(be)&&!Vs(R))gf(x);else{Vd(x,ce,be);const Mn=wo(x.selection.getRng()),fo=mt?[R,...H]:H,$n=mt&&Vs(R)?Wd:Eg;Os.each(fo,Bn=>{$n(x,Bn,ce,be)}),x.selection.setRng(nc(Mn))}},_m=x=>"list-style-type"in x,Oh=(x,R,H,ce)=>{if(R!==x.getBody())if(R)if(R.nodeName===H&&!_m(ce)&&!Vs(R))gf(x);else{const be=wo(x.selection.getRng());Vs(R)&&R.classList.forEach((Mn,fo,$n)=>{Mn.startsWith("tox-")&&($n.remove(Mn),$n.length===0&&R.removeAttribute("class"))}),da(x.dom,R,ce);const mt=x.dom.rename(R,H);Ud(x.dom,mt),x.selection.setRng(nc(be)),Vd(x,H,ce),Jc(x,$l(H),mt)}else Vd(x,H,ce),Jc(x,$l(H),R)},kg=(x,R,H)=>{const ce=wt(x);if(fc(x,ce))return;const be=Ts(x),mt=So(H)?H:{};be.length>0?Ql(x,ce,be,R,mt):Oh(x,ce,R,mt)},Db=cs.DOM,hf=(x,R)=>{const H=R.parentElement;if(H&&H.nodeName==="LI"&&H.firstChild===R){const ce=H.previousSibling;ce&&ce.nodeName==="LI"?(ce.appendChild(R),Cc(x,H)&&Db.remove(H)):Db.setStyle(H,"listStyleType","none")}if($o(H)){const ce=H.previousSibling;ce&&ce.nodeName==="LI"&&ce.appendChild(R)}},Zd=(x,R)=>{const H=Os.grep(x.select("ol,ul",R));Os.each(H,ce=>{hf(x,ce)})},rd=(x,R,H,ce)=>{let be=R.startContainer;const mt=R.startOffset;if(Dn(be)&&(H?mt<be.data.length:mt>0))return be;const Mn=x.schema.getNonEmptyElements();No(be)&&(be=Rn.getNode(be,mt));const fo=new jn(be,ce);H&&Ml(x.dom,be)&&fo.next();const $n=H?fo.next.bind(fo):fo.prev2.bind(fo);for(;be=$n();)if(be.nodeName==="LI"&&!be.hasChildNodes()||Mn[be.nodeName]||Dn(be)&&be.data.length>0)return be;return null},jd=(x,R)=>{const H=R.childNodes;return H.length===1&&!$o(H[0])&&x.isBlock(H[0])},yr=x=>ut.from(x).map(ie.fromDom).filter(vo).exists(R=>rr(R)&&!sn(["details"],Hr(R))),kr=(x,R)=>{jd(x,R)&&yr(R.firstChild)&&x.remove(R.firstChild,!0)},pl=(x,R,H)=>{let ce;const be=jd(x,H)?H.firstChild:H;if(kr(x,R),!Cc(x,R,!0))for(;ce=R.firstChild;)be.appendChild(ce)},cd=(x,R,H)=>{let ce;const be=R.parentNode;if(!Ac(x,R)||!Ac(x,H))return;$o(H.lastChild)&&(ce=H.lastChild),be===H.lastChild&&Ea(be.previousSibling)&&x.remove(be.previousSibling);const mt=H.lastChild;mt&&Ea(mt)&&R.hasChildNodes()&&x.remove(mt),Cc(x,H,!0)&&Ve(ie.fromDom(H)),pl(x,R,H),ce&&H.appendChild(ce);const fo=Bt(ie.fromDom(H),ie.fromDom(R))?x.getParents(R,$o,H):[];x.remove(R),le(fo,$n=>{Cc(x,$n)&&$n!==x.getRoot()&&x.remove($n)})},_g=(x,R,H)=>{Ve(ie.fromDom(H)),cd(x.dom,R,H),x.selection.setCursorLocation(H,0)},gc=(x,R,H,ce)=>{const be=x.dom;if(be.isEmpty(ce))_g(x,H,ce);else{const mt=wo(R);cd(be,H,ce),x.selection.setRng(nc(mt))}},hn=(x,R,H,ce)=>{const be=wo(R);cd(x.dom,H,ce);const mt=nc(be);x.selection.setRng(mt)},Yi=(x,R)=>{const H=x.dom,ce=x.selection,be=ce.getStart(),mt=gn(x,be),Mn=H.getParent(ce.getStart(),"LI",mt);if(Mn){const fo=Mn.parentElement;if(fo===x.getBody()&&Cc(H,fo))return!0;const $n=re(ce.getRng()),Bn=H.getParent(rd(x,$n,R,mt),"LI",mt),nr=Bn&&(R?H.isChildOf(Mn,Bn):H.isChildOf(Bn,Mn));if(Bn&&Bn!==Mn&&!nr)return x.undoManager.transact(()=>{R?gc(x,$n,Bn,Mn):es(Mn)?wu(x):hn(x,$n,Mn,Bn)}),!0;if(nr&&!R&&Bn!==Mn)return x.undoManager.transact(()=>{if($n.commonAncestorContainer.parentElement){const Jr=wo($n),vl=$n.commonAncestorContainer.parentElement;pl(H,$n.commonAncestorContainer.parentElement,Bn),vl.remove();const Ji=nc(Jr);x.selection.setRng(Ji)}}),!0;if(!Bn&&!R&&$n.startOffset===0&&$n.endOffset===0)return x.undoManager.transact(()=>{gf(x)}),!0}return!1},pf=(x,R,H)=>{const ce=x.getParent(R.parentNode,x.isBlock,H);x.remove(R),ce&&x.isEmpty(ce)&&x.remove(ce)},zc=(x,R)=>{const H=x.dom,ce=x.selection.getStart(),be=gn(x,ce),mt=H.getParent(ce,H.isBlock,be);if(mt&&H.isEmpty(mt,void 0,{checkRootAsContent:!0})){const Mn=re(x.selection.getRng()),fo=H.getParent(rd(x,Mn,R,be),"LI",be);if(fo){const $n=vl=>sn(["td","th","caption"],Hr(vl)),Bn=vl=>vl.dom===be,nr=qr(ie.fromDom(fo),$n,Bn),Jr=qr(ie.fromDom(Mn.startContainer),$n,Bn);return Pe(nr,Jr,Un)?(x.undoManager.transact(()=>{const vl=fo.parentNode;pf(H,mt,be),Ud(H,vl),x.selection.select(fo,!0),x.selection.collapse(R)}),!0):!1}}return!1},Es=(x,R)=>Yi(x,R)||zc(x,R),Tu=x=>{const R=x.selection.getStart(),H=gn(x,R);return x.dom.getParent(R,"LI,DT,DD",H)||Ut(x).length>0},Ag=x=>Tu(x)?(x.undoManager.transact(()=>{x.execCommand("Delete"),Zd(x.dom,x.getBody())}),!0):!1,Gd=(x,R)=>{const H=x.selection;return!fc(x,H.getNode())&&(H.isCollapsed()?Es(x,R):Ag(x))},Dh=x=>{x.on("ExecCommand",R=>{const H=R.command.toLowerCase();(H==="delete"||H==="forwarddelete")&&Tu(x)&&Zd(x.dom,x.getBody())}),x.on("keydown",R=>{R.keyCode===qs.BACKSPACE?Gd(x,!1)&&R.preventDefault():R.keyCode===qs.DELETE&&Gd(x,!0)&&R.preventDefault()})},uo=x=>({backspaceDelete:R=>{Gd(x,R)}}),hc=(x,R)=>{const H=wt(x);H===null||fc(x,H)||x.undoManager.transact(()=>{So(R.styles)&&x.dom.setStyles(H,R.styles),So(R.attrs)&&de(R.attrs,(ce,be)=>x.dom.setAttrib(H,be,ce))})},ad=x=>{const R=jt(Zi(x).split("")),H=Ne(R,(ce,be)=>{const mt=ce.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,be)*mt});return $e(H,(ce,be)=>ce+be,0)},ta=x=>{if(x--,x<0)return"";{const R=x%26,H=Math.floor(x/26),ce=ta(H),be=String.fromCharCode(65+R);return ce+be}},$a=x=>/^[A-Z]+$/.test(x),bl=x=>/^[a-z]+$/.test(x),Dc=x=>/^[0-9]+$/.test(x),_a=x=>Dc(x)?2:$a(x)?0:bl(x)?1:Bl(x)?3:4,ul=x=>{switch(_a(x)){case 2:return ut.some({listStyleType:ut.none(),start:x});case 0:return ut.some({listStyleType:ut.some("upper-alpha"),start:ad(x).toString()});case 1:return ut.some({listStyleType:ut.some("lower-alpha"),start:ad(x).toString()});case 3:return ut.some({listStyleType:ut.none(),start:""});case 4:return ut.none()}},bf=x=>{const R=parseInt(x.start,10);return mn(x.listStyleType,"upper-alpha")?ta(R):mn(x.listStyleType,"lower-alpha")?ta(R).toLowerCase():x.start},Rr=x=>{const R=wt(x);!Yr(R)||fc(x,R)||x.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:bf({start:x.dom.getAttrib(R,"start","1"),listStyleType:ut.from(x.dom.getStyle(R,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:H=>{const ce=H.getData();ul(ce.start).each(be=>{x.execCommand("mceListUpdate",!1,{attrs:{start:be.start==="1"?"":be.start},styles:{"list-style-type":be.listStyleType.getOr("")}})}),H.close()}})},ld=(x,R)=>()=>{const H=wt(x);return mo(H)&&H.nodeName===R},Ur=x=>{x.addCommand("mceListProps",()=>{Rr(x)})},Eu=x=>{x.on("BeforeExecCommand",R=>{const H=R.command.toLowerCase();H==="indent"?ff(x):H==="outdent"&&wu(x)}),x.addCommand("InsertUnorderedList",(R,H)=>{kg(x,"UL",H)}),x.addCommand("InsertOrderedList",(R,H)=>{kg(x,"OL",H)}),x.addCommand("InsertDefinitionList",(R,H)=>{kg(x,"DL",H)}),x.addCommand("RemoveList",()=>{gf(x)}),Ur(x),x.addCommand("mceListUpdate",(R,H)=>{So(H)&&hc(x,H)}),x.addQueryStateHandler("InsertUnorderedList",ld(x,"UL")),x.addQueryStateHandler("InsertOrderedList",ld(x,"OL")),x.addQueryStateHandler("InsertDefinitionList",ld(x,"DL"))};var id=tinymce.util.Tools.resolve("tinymce.html.Node");const Ws=x=>x.type===3,Fl=x=>x.length===0,Rh=x=>{const R=(be,mt)=>{const Mn=id.create("li");le(be,fo=>Mn.append(fo)),mt?x.insert(Mn,mt,!0):x.append(Mn)},H=(be,mt)=>Ws(mt)?[...be,mt]:!Fl(be)&&!Ws(mt)?(R(be,mt),[]):be,ce=$e(x.children(),H,[]);Fl(ce)||R(ce)},Xi=x=>{x.on("PreInit",()=>{const{parser:R}=x;R.addNodeFilter("ul,ol",H=>le(H,Rh))})},tr=x=>{x.on("keydown",R=>{R.keyCode!==qs.TAB||qs.metaKeyPressed(R)||x.undoManager.transact(()=>{(R.shiftKey?wu(x):ff(x))&&R.preventDefault()})})},ku=x=>{bi(x)&&tr(x),Dh(x)},Ka=(x,R)=>H=>{const ce=be=>{H.setActive(fs(be.parents,R)),H.setEnabled(!fc(x,be.element)&&x.selection.isEditable())};return H.setEnabled(x.selection.isEditable()),Xc(x,ce)},ko=x=>{const R=H=>()=>x.execCommand(H);x.hasPlugin("advlist")||(x.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:R("InsertOrderedList"),onSetup:Ka(x,"OL")}),x.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:R("InsertUnorderedList"),onSetup:Ka(x,"UL")}))},ud=(x,R)=>H=>Xc(x,be=>H.setEnabled(fs(be.parents,R)&&!fc(x,be.element))),Am=x=>{const R={text:"List properties...",icon:"ordered-list",onAction:()=>x.execCommand("mceListProps"),onSetup:ud(x,"OL")};x.ui.registry.addMenuItem("listprops",R),x.ui.registry.addContextMenu("lists",{update:H=>{const ce=wt(x,H);return Yr(ce)?["listprops"]:[]}})};var vf=()=>{Sr.add("lists",x=>(aa(x),Xi(x),x.hasPlugin("rtc",!0)?Ur(x):(ku(x),Eu(x)),ko(x),Am(x),uo(x)))};vf()})();(function(){var Sr=tinymce.util.Tools.resolve("tinymce.PluginManager");const js=(ue,se,Be)=>{var Ve;return Be(ue,se.prototype)?!0:((Ve=ue.constructor)===null||Ve===void 0?void 0:Ve.name)===se.name},ws=ue=>{const se=typeof ue;return ue===null?"null":se==="object"&&Array.isArray(ue)?"array":se==="object"&&js(ue,String,(Be,Ve)=>Ve.isPrototypeOf(Be))?"string":se},us=ue=>se=>ws(se)===ue,Ko=us("string"),ps=us("object"),So=us("array"),rt=ue=>ue==null,Hn=ue=>!rt(ue);class Ho{constructor(se,Be){this.tag=se,this.value=Be}static some(se){return new Ho(!0,se)}static none(){return Ho.singletonNone}fold(se,Be){return this.tag?Be(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?Ho.some(se(this.value)):Ho.none()}bind(se){return this.tag?se(this.value):Ho.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:Ho.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se??"Called getOrDie on None")}static from(se){return Hn(se)?Ho.some(se):Ho.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ho.singletonNone=new Ho(!1);const mo=Array.prototype.push,Uo=(ue,se)=>{for(let Be=0,Ve=ue.length;Be<Ve;Be++){const un=ue[Be];se(un,Be)}},Wo=ue=>{const se=[];for(let Be=0,Ve=ue.length;Be<Ve;++Be){if(!So(ue[Be]))throw new Error("Arr.flatten item "+Be+" was not an array, input: "+ue);mo.apply(se,ue[Be])}return se},zn=ue=>{let se=ue;return{get:()=>se,set:un=>{se=un}}},Go=Object.keys,Xn=Object.hasOwnProperty,Ot=(ue,se)=>{const Be=Go(ue);for(let Ve=0,un=Be.length;Ve<un;Ve++){const Rn=Be[Ve],jn=ue[Rn];se(jn,Rn)}},Zn=(ue,se)=>nt(ue,se)?Ho.from(ue[se]):Ho.none(),nt=(ue,se)=>Xn.call(ue,se),oe=ue=>se=>se.options.get(ue),ut=ue=>{const se=ue.options.register;se("audio_template_callback",{processor:"function"}),se("video_template_callback",{processor:"function"}),se("iframe_template_callback",{processor:"function"}),se("media_live_embeds",{processor:"boolean",default:!0}),se("media_filter_html",{processor:"boolean",default:!0}),se("media_url_resolver",{processor:"function"}),se("media_alt_source",{processor:"boolean",default:!0}),se("media_poster",{processor:"boolean",default:!0}),se("media_dimensions",{processor:"boolean",default:!0})},oo=oe("audio_template_callback"),dt=oe("video_template_callback"),W=oe("iframe_template_callback"),Rt=oe("media_live_embeds"),sn=oe("media_filter_html"),Xt=oe("media_url_resolver"),Ne=oe("media_alt_source"),le=oe("media_poster"),Bo=oe("media_dimensions");var gt=tinymce.util.Tools.resolve("tinymce.util.Tools"),$e=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),A=tinymce.util.Tools.resolve("tinymce.html.DomParser");const kn=$e.DOM,Ke=ue=>ue.replace(/px$/,""),Vn=ue=>{const se=ue.attr("style"),Be=se?kn.parseStyle(se):{};return{type:"ephox-embed-iri",source:ue.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:Zn(Be,"max-width").map(Ke).getOr(""),height:Zn(Be,"max-height").map(Ke).getOr("")}},jt=(ue,se)=>{let Be={};const un=A({validate:!1,forced_root_block:!1},se).parse(ue);for(let Rn=un;Rn;Rn=Rn.walk())if(Rn.type===1){const jn=Rn.name;if(Rn.attr("data-ephox-embed-iri")){Be=Vn(Rn);break}else!Be.source&&jn==="param"&&(Be.source=Rn.attr("movie")),(jn==="iframe"||jn==="object"||jn==="embed"||jn==="video"||jn==="audio")&&(Be.type||(Be.type=jn),Be=gt.extend(Rn.attributes.map,Be)),jn==="source"&&(Be.source?Be.altsource||(Be.altsource=Rn.attr("src")):Be.source=Rn.attr("src")),jn==="img"&&!Be.poster&&(Be.poster=Rn.attr("src"))}return Be.source=Be.source||Be.src||"",Be.altsource=Be.altsource||"",Be.poster=Be.poster||"",Be},je=ue=>{var se;const Be={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Ve=(se=ue.toLowerCase().split(".").pop())!==null&&se!==void 0?se:"";return Zn(Be,Ve).getOr("")};var Jn=tinymce.util.Tools.resolve("tinymce.html.Node"),bs=tinymce.util.Tools.resolve("tinymce.html.Serializer");const bt=(ue,se={})=>A({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...se},ue),mn=$e.DOM,Pe=ue=>/^[0-9.]+$/.test(ue)?ue+"px":ue,et=(ue,se)=>{const Be=se.attr("style"),Ve=Be?mn.parseStyle(Be):{};Hn(ue.width)&&(Ve["max-width"]=Pe(ue.width)),Hn(ue.height)&&(Ve["max-height"]=Pe(ue.height)),se.attr("style",mn.serializeStyle(Ve))},F=["source","altsource"],Ss=(ue,se,Be,Ve)=>{let un=0,Rn=0;const jn=bt(Ve);jn.addNodeFilter("source",ve=>un=ve.length);const qs=jn.parse(ue);for(let ve=qs;ve;ve=ve.walk())if(ve.type===1){const Gn=ve.name;if(ve.attr("data-ephox-embed-iri")){et(se,ve);break}else{switch(Gn){case"video":case"object":case"embed":case"img":case"iframe":se.height!==void 0&&se.width!==void 0&&(ve.attr("width",se.width),ve.attr("height",se.height));break}if(Be)switch(Gn){case"video":ve.attr("poster",se.poster),ve.attr("src",null);for(let pe=un;pe<2;pe++)if(se[F[pe]]){const at=new Jn("source",1);at.attr("src",se[F[pe]]),at.attr("type",se[F[pe]+"mime"]||null),ve.append(at)}break;case"iframe":ve.attr("src",se.source);break;case"object":const de=ve.getAll("img").length>0;if(se.poster&&!de){ve.attr("src",se.poster);const pe=new Jn("img",1);pe.attr("src",se.poster),pe.attr("width",se.width),pe.attr("height",se.height),ve.append(pe)}break;case"source":if(Rn<2&&(ve.attr("src",se[F[Rn]]),ve.attr("type",se[F[Rn]+"mime"]||null),!se[F[Rn]])){ve.remove();continue}Rn++;break;case"img":se.poster||ve.remove();break}}}return bs({},Ve).serialize(qs)},io=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],To=ue=>{const se=ue.match(/^(https?:\/\/|www\.)(.+)$/i);return se&&se.length>1?se[1]==="www."?"https://":se[1]:"https://"},it=(ue,se)=>{const Be=To(se),Ve=ue.regex.exec(se);let un=Be+ue.url;if(Hn(Ve))for(let Rn=0;Rn<Ve.length;Rn++)un=un.replace("$"+Rn,()=>Ve[Rn]?Ve[Rn]:"");return un.replace(/\?$/,"")},Mt=ue=>{const se=io.filter(Be=>Be.regex.test(ue));return se.length>0?gt.extend({},se[0],{url:it(se[0],ue)}):null},xe=(ue,se)=>{if(se)return se(ue);{const Be=ue.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ue.source+'" width="'+ue.width+'" height="'+ue.height+'"'+Be+"></iframe>"}},Re=ue=>{let se='<object data="'+ue.source+'" width="'+ue.width+'" height="'+ue.height+'" type="application/x-shockwave-flash">';return ue.poster&&(se+='<img src="'+ue.poster+'" width="'+ue.width+'" height="'+ue.height+'" />'),se+="</object>",se},Fe=(ue,se)=>se?se(ue):'<audio controls="controls" src="'+ue.source+'">'+(ue.altsource?`
<source src="`+ue.altsource+'"'+(ue.altsourcemime?' type="'+ue.altsourcemime+'"':"")+` />
`:"")+"</audio>",ie=(ue,se)=>se?se(ue):'<video width="'+ue.width+'" height="'+ue.height+'"'+(ue.poster?' poster="'+ue.poster+'"':"")+` controls="controls">
<source src="`+ue.source+'"'+(ue.sourcemime?' type="'+ue.sourcemime+'"':"")+` />
`+(ue.altsource?'<source src="'+ue.altsource+'"'+(ue.altsourcemime?' type="'+ue.altsourcemime+'"':"")+` />
`:"")+"</video>",_n=(ue,se)=>{var Be;const Ve=gt.extend({},se);if(!Ve.source&&(gt.extend(Ve,jt((Be=Ve.embed)!==null&&Be!==void 0?Be:"",ue.schema)),!Ve.source))return"";Ve.altsource||(Ve.altsource=""),Ve.poster||(Ve.poster=""),Ve.source=ue.convertURL(Ve.source,"source"),Ve.altsource=ue.convertURL(Ve.altsource,"source"),Ve.sourcemime=je(Ve.source),Ve.altsourcemime=je(Ve.altsource),Ve.poster=ue.convertURL(Ve.poster,"poster");const un=Mt(Ve.source);if(un&&(Ve.source=un.url,Ve.type=un.type,Ve.allowfullscreen=un.allowFullscreen,Ve.width=Ve.width||String(un.w),Ve.height=Ve.height||String(un.h)),Ve.embed)return Ss(Ve.embed,Ve,!0,ue.schema);{const Rn=oo(ue),jn=dt(ue),qs=W(ue);return Ve.width=Ve.width||"300",Ve.height=Ve.height||"150",gt.each(Ve,(ve,Gn)=>{Ve[Gn]=ue.dom.encode(""+ve)}),Ve.type==="iframe"?xe(Ve,qs):Ve.sourcemime==="application/x-shockwave-flash"?Re(Ve):Ve.sourcemime.indexOf("audio")!==-1?Fe(Ve,Rn):ie(Ve,jn)}},Un=ue=>ue.hasAttribute("data-mce-object")||ue.hasAttribute("data-ephox-embed-iri"),Bt=ue=>{ue.on("mousedown",se=>{const Be=ue.dom.getParent(se.target,".mce-preview-object");Be&&ue.dom.getAttrib(Be,"data-mce-selected")==="2"&&se.stopImmediatePropagation()}),ue.on("click keyup touchend",()=>{const se=ue.selection.getNode();se&&ue.dom.hasClass(se,"mce-preview-object")&&ue.dom.getAttrib(se,"data-mce-selected")&&se.setAttribute("data-mce-selected","2")}),ue.on("ObjectResized",se=>{const Be=se.target;if(Be.getAttribute("data-mce-object")){let Ve=Be.getAttribute("data-mce-html");Ve&&(Ve=unescape(Ve),Be.setAttribute("data-mce-html",escape(Ss(Ve,{width:String(se.width),height:String(se.height)},!1,ue.schema))))}})},rs={},ro=(ue,se,Be)=>new Promise((Ve,un)=>{const Rn=jn=>(jn.html&&(rs[ue.source]=jn),Ve({url:ue.source,html:jn.html?jn.html:se(ue)}));rs[ue.source]?Rn(rs[ue.source]):Be({url:ue.source}).then(Rn).catch(un)}),ir=(ue,se)=>Promise.resolve({html:se(ue),url:ue.source}),Po=ue=>se=>_n(ue,se),Ms=(ue,se)=>{const Be=Xt(ue);return Be?ro(se,Po(ue),Be):ir(se,Po(ue))},ra=ue=>nt(rs,ue),zs=(ue,se)=>Zn(se,ue).bind(Be=>Zn(Be,"meta")),As=(ue,se,Be)=>Ve=>{const un=()=>Zn(ue,Ve),Rn=()=>Zn(se,Ve),jn=Gn=>Zn(Gn,"value").bind(de=>de.length>0?Ho.some(de):Ho.none()),qs=()=>un().bind(Gn=>ps(Gn)?jn(Gn).orThunk(Rn):Rn().orThunk(()=>Ho.from(Gn))),ve=()=>Rn().orThunk(()=>un().bind(Gn=>ps(Gn)?jn(Gn):Ho.from(Gn)));return{[Ve]:(Ve===Be?qs():ve()).getOr("")}},gs=(ue,se)=>{const Be={};return Zn(ue,"dimensions").each(Ve=>{Uo(["width","height"],un=>{Zn(se,un).orThunk(()=>Zn(Ve,un)).each(Rn=>Be[un]=Rn)})}),Be},Hr=(ue,se)=>{const Be=se&&se!=="dimensions"?zs(se,ue).getOr({}):{},Ve=As(ue,Be,se);return{...Ve("source"),...Ve("altsource"),...Ve("poster"),...Ve("embed"),...gs(ue,Be)}},xs=ue=>{const se={...ue,source:{value:Zn(ue,"source").getOr("")},altsource:{value:Zn(ue,"altsource").getOr("")},poster:{value:Zn(ue,"poster").getOr("")}};return Uo(["width","height"],Be=>{Zn(ue,Be).each(Ve=>{const un=se.dimensions||{};un[Be]=Ve,se.dimensions=un})}),se},bo=ue=>se=>{const Be=se&&se.msg?"Media embed handler error: "+se.msg:"Media embed handler threw unknown error.";ue.notificationManager.open({type:"error",text:Be})},xa=ue=>{const se=ue.selection.getNode(),Be=Un(se)?ue.serializer.serialize(se,{selection:!0}):"",Ve=jt(Be,ue.schema),Rn=(()=>{if(ec(Ve.source,Ve.type)){const jn=ue.dom.getRect(se);return{width:jn.w.toString().replace(/px$/,""),height:jn.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Be,...Ve,...Rn}},vo=(ue,se)=>Be=>{if(Ko(Be.url)&&Be.url.trim().length>0){const Ve=Be.html,Rn={...jt(Ve,se.schema),source:Be.url,embed:Ve};ue.setData(xs(Rn))}},ds=(ue,se)=>{const Be=ue.dom.select("*[data-mce-object]");for(let Ve=0;Ve<se.length;Ve++)for(let un=Be.length-1;un>=0;un--)se[Ve]===Be[un]&&Be.splice(un,1);ue.selection.select(Be[0])},xr=(ue,se)=>{const Be=ue.dom.select("*[data-mce-object]");ue.insertContent(se),ds(ue,Be),ue.nodeChanged()},ec=(ue,se)=>Hn(se)&&se==="ephox-embed-iri"&&Hn(Mt(ue)),ca=(ue,se)=>((Ve,un)=>Ve.width!==un.width||Ve.height!==un.height)(ue,se)&&ec(se.source,ue.type),yo=(ue,se,Be)=>{var Ve;se.embed=ca(ue,se)&&Bo(Be)?_n(Be,{...se,embed:""}):Ss((Ve=se.embed)!==null&&Ve!==void 0?Ve:"",se,!1,Be.schema),se.embed&&(ue.source===se.source||ra(se.source))?xr(Be,se.embed):Ms(Be,se).then(un=>{xr(Be,un.html)}).catch(bo(Be))},Ta=ue=>{const se=xa(ue),Be=zn(se),Ve=xs(se),un=(en,Cn)=>{const Nn=Hr(Cn.getData(),"source");en.source!==Nn.source&&(vo(rn,ue)({url:Nn.source,html:""}),Ms(ue,Nn).then(vo(rn,ue)).catch(bo(ue)))},Rn=en=>{var Cn;const Nn=Hr(en.getData()),zo=jt((Cn=Nn.embed)!==null&&Cn!==void 0?Cn:"",ue.schema);en.setData(xs(zo))},jn=(en,Cn,Nn)=>{const zo=Hr(en.getData(),Cn),cs=ca(Nn,zo)&&Bo(ue)?{...zo,embed:""}:zo,Os=_n(ue,cs);en.setData(xs({...cs,embed:Os}))},qs=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],ve=Bo(ue)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Gn={title:"General",name:"general",items:Wo([qs,ve])},pe={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},at=[];Ne(ue)&&at.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),le(ue)&&at.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const ft={title:"Advanced",name:"advanced",items:at},Vt=[Gn,pe];at.length>0&&Vt.push(ft);const nn={type:"tabpanel",tabs:Vt},rn=ue.windowManager.open({title:"Insert/Edit Media",size:"normal",body:nn,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:en=>{const Cn=Hr(en.getData());yo(Be.get(),Cn,ue),en.close()},onChange:(en,Cn)=>{switch(Cn.name){case"source":un(Be.get(),en);break;case"embed":Rn(en);break;case"dimensions":case"altsource":case"poster":jn(en,Cn.name,Be.get());break}Be.set(Hr(en.getData()))},initialData:Ve})},xt=ue=>({showDialog:()=>{Ta(ue)}}),Eo=ue=>{const se=()=>{Ta(ue)};ue.addCommand("mceMedia",se)},Pr=(ue,se,Be)=>ue.length>=se.length&&ue.substr(Be,Be+se.length)===se,br=(ue,se)=>Pr(ue,se,0);var uc=tinymce.util.Tools.resolve("tinymce.Env");const vc=ue=>{const se=ue.name;return se==="iframe"||se==="video"||se==="audio"},Qo=(ue,se,Be,Ve=null)=>{const un=ue.attr(Be);return Hn(un)?un:nt(se,Be)?null:Ve},Fc=(ue,se,Be)=>{const Ve=se.name==="img"||ue.name==="video",un=Ve?"300":null,Rn=ue.name==="audio"?"30":"150",jn=Ve?Rn:null;se.attr({width:Qo(ue,Be,"width",un),height:Qo(ue,Be,"height",jn)})},dc=(ue,se,Be,Ve)=>{const un=bt(ue.schema).parse(Ve,{context:se});for(;un.firstChild;)Be.append(un.firstChild)},Yo=(ue,se)=>{const Be=se.name,Ve=new Jn("img",1);return Bs(ue,se,Ve),Fc(se,Ve,{}),Ve.attr({style:se.attr("style"),src:uc.transparentSrc,"data-mce-object":Be,class:"mce-object mce-object-"+Be}),Ve},fn=(ue,se)=>{var Be;const Ve=se.name,un=new Jn("span",1);un.attr({contentEditable:"false",style:se.attr("style"),"data-mce-object":Ve,class:"mce-preview-object mce-object-"+Ve}),Bs(ue,se,un);const Rn=ue.dom.parseStyle((Be=se.attr("style"))!==null&&Be!==void 0?Be:""),jn=new Jn(Ve,1);if(Fc(se,jn,Rn),jn.attr({src:se.attr("src"),style:se.attr("style"),class:se.attr("class")}),Ve==="iframe")jn.attr({allowfullscreen:se.attr("allowfullscreen"),frameborder:"0",sandbox:se.attr("sandbox"),referrerpolicy:se.attr("referrerpolicy")});else{Uo(["controls","crossorigin","currentTime","loop","muted","poster","preload"],de=>{jn.attr(de,se.attr(de))});const Gn=un.attr("data-mce-html");Hn(Gn)&&dc(ue,Ve,jn,unescape(Gn))}const qs=new Jn("span",1);return qs.attr("class","mce-shim"),un.append(jn),un.append(qs),un},Bs=(ue,se,Be)=>{var Ve;const un=(Ve=se.attributes)!==null&&Ve!==void 0?Ve:[];let Rn=un.length;for(;Rn--;){const Gn=un[Rn].name;let de=un[Rn].value;Gn!=="width"&&Gn!=="height"&&Gn!=="style"&&!br(Gn,"data-mce-")&&((Gn==="data"||Gn==="src")&&(de=ue.convertURL(de,Gn)),Be.attr("data-mce-p-"+Gn,de))}const jn=bs({inner:!0},ue.schema),qs=new Jn("div",1);Uo(se.children(),Gn=>qs.append(Gn));const ve=jn.serialize(qs);ve&&(Be.attr("data-mce-html",escape(ve)),Be.empty())},qr=ue=>{const se=ue.attr("class");return Ko(se)&&/\btiny-pageembed\b/.test(se)},Ga=ue=>{let se=ue;for(;se=se.parent;)if(se.attr("data-ephox-embed-iri")||qr(se))return!0;return!1},rl=ue=>se=>{let Be=se.length,Ve;for(;Be--;)Ve=se[Be],Ve.parent&&(Ve.parent.attr("data-mce-object")||(vc(Ve)&&Rt(ue)?Ga(Ve)||Ve.replace(fn(ue,Ve)):Ga(Ve)||Ve.replace(Yo(ue,Ve))))},ms=(ue,se,Be)=>{const Ve=ue.options.get,un=Ve("xss_sanitization"),Rn=sn(ue);return bt(ue.schema,{sanitize:un,validate:Rn}).parse(Be,{context:se})},rr=ue=>{ue.on("PreInit",()=>{const{schema:se,serializer:Be,parser:Ve}=ue,un=se.getBoolAttrs();Uo("webkitallowfullscreen mozallowfullscreen".split(" "),Rn=>{un[Rn]={}}),Ot({embed:["wmode"]},(Rn,jn)=>{const qs=se.getElementRule(jn);qs&&Uo(Rn,ve=>{qs.attributes[ve]={},qs.attributesOrder.push(ve)})}),Ve.addNodeFilter("iframe,video,audio,object,embed",rl(ue)),Be.addAttributeFilter("data-mce-object",(Rn,jn)=>{var qs;let ve=Rn.length;for(;ve--;){const Gn=Rn[ve];if(!Gn.parent)continue;const de=Gn.attr(jn),pe=new Jn(de,1);if(de!=="audio"){const nn=Gn.attr("class");nn&&nn.indexOf("mce-preview-object")!==-1&&Gn.firstChild?pe.attr({width:Gn.firstChild.attr("width"),height:Gn.firstChild.attr("height")}):pe.attr({width:Gn.attr("width"),height:Gn.attr("height")})}pe.attr({style:Gn.attr("style")});const at=(qs=Gn.attributes)!==null&&qs!==void 0?qs:[];let ft=at.length;for(;ft--;){const nn=at[ft].name;nn.indexOf("data-mce-p-")===0&&pe.attr(nn.substr(11),at[ft].value)}const Vt=Gn.attr("data-mce-html");if(Vt){const nn=ms(ue,de,unescape(Vt));Uo(nn.children(),rn=>pe.append(rn))}Gn.replace(pe)}})}),ue.on("SetContent",()=>{const se=ue.dom;Uo(se.select("span.mce-preview-object"),Be=>{se.select("span.mce-shim",Be).length===0&&se.add(Be,"span",{class:"mce-shim"})})})},Ps=ue=>{ue.on("ResolveName",se=>{let Be;se.target.nodeType===1&&(Be=se.target.getAttribute("data-mce-object"))&&(se.name=Be)})},tc=ue=>se=>{const Be=()=>{se.setEnabled(ue.selection.isEditable())};return ue.on("NodeChange",Be),Be(),()=>{ue.off("NodeChange",Be)}},Ic=ue=>{const se=()=>ue.execCommand("mceMedia");ue.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:se,onSetup:Be=>{const Ve=ue.selection;Be.setActive(Un(Ve.getNode()));const un=Ve.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Be.setActive).unbind,Rn=tc(ue)(Be);return()=>{un(),Rn()}}}),ue.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:se,onSetup:tc(ue)})};var cr=()=>{Sr.add("media",ue=>(ut(ue),Eo(ue),Ic(ue),Ps(ue),rr(ue),Bt(ue),xt(ue)))};cr()})();(function(){var Sr=tinymce.util.Tools.resolve("tinymce.PluginManager"),js=tinymce.util.Tools.resolve("tinymce.Env"),ws=tinymce.util.Tools.resolve("tinymce.util.Tools");const us=zn=>Go=>Go.options.get(zn),Ko=us("content_style"),ps=us("content_css_cors"),So=us("body_class"),rt=us("body_id"),Hn=zn=>{var Go;let Xn="";const Ot=zn.dom.encode,Zn=(Go=Ko(zn))!==null&&Go!==void 0?Go:"";Xn+='<base href="'+Ot(zn.documentBaseURI.getURI())+'">';const nt=ps(zn)?' crossorigin="anonymous"':"";ws.each(zn.contentCSS,Xt=>{Xn+='<link type="text/css" rel="stylesheet" href="'+Ot(zn.documentBaseURI.toAbsolute(Xt))+'"'+nt+">"}),Zn&&(Xn+='<style type="text/css">'+Zn+"</style>");const oe=rt(zn),ut=So(zn),dt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(js.os.isMacOS()||js.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",W=zn.getBody().dir,Rt=W?' dir="'+Ot(W)+'"':"";return"<!DOCTYPE html><html><head>"+Xn+'</head><body id="'+Ot(oe)+'" class="mce-content-body '+Ot(ut)+'"'+Rt+">"+zn.getContent()+dt+"</body></html>"},Ho=zn=>{const Go=Hn(zn);zn.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:Go}}).focus("close")},mo=zn=>{zn.addCommand("mcePreview",()=>{Ho(zn)})},Uo=zn=>{const Go=()=>zn.execCommand("mcePreview");zn.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:Go}),zn.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:Go})};var Wo=()=>{Sr.add("preview",zn=>{mo(zn),Uo(zn)})};Wo()})();(function(){var Sr=tinymce.util.Tools.resolve("tinymce.PluginManager");const js=(w,_,L)=>{var K;return L(w,_.prototype)?!0:((K=w.constructor)===null||K===void 0?void 0:K.name)===_.name},ws=w=>{const _=typeof w;return w===null?"null":_==="object"&&Array.isArray(w)?"array":_==="object"&&js(w,String,(L,K)=>K.isPrototypeOf(L))?"string":_},us=w=>_=>ws(_)===w,Ko=w=>_=>typeof _===w,ps=w=>_=>w===_,So=us("string"),rt=us("array"),Hn=Ko("boolean"),Ho=ps(void 0),mo=w=>w==null,Uo=w=>!mo(w),Wo=Ko("function"),zn=Ko("number"),Go=()=>{},Xn=(w,_)=>L=>w(_(L)),Ot=w=>()=>w,Zn=w=>w,nt=(w,_)=>w===_;function oe(w,..._){return(...L)=>{const K=_.concat(L);return w.apply(null,K)}}const ut=w=>{w()},oo=Ot(!1),dt=Ot(!0);class W{constructor(_,L){this.tag=_,this.value=L}static some(_){return new W(!0,_)}static none(){return W.singletonNone}fold(_,L){return this.tag?L(this.value):_()}isSome(){return this.tag}isNone(){return!this.tag}map(_){return this.tag?W.some(_(this.value)):W.none()}bind(_){return this.tag?_(this.value):W.none()}exists(_){return this.tag&&_(this.value)}forall(_){return!this.tag||_(this.value)}filter(_){return!this.tag||_(this.value)?this:W.none()}getOr(_){return this.tag?this.value:_}or(_){return this.tag?this:_}getOrThunk(_){return this.tag?this.value:_()}orThunk(_){return this.tag?this:_()}getOrDie(_){if(this.tag)return this.value;throw new Error(_??"Called getOrDie on None")}static from(_){return Uo(_)?W.some(_):W.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(_){this.tag&&_(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}W.singletonNone=new W(!1);const Rt=Object.keys,sn=Object.hasOwnProperty,Xt=(w,_)=>{const L=Rt(w);for(let K=0,ye=L.length;K<ye;K++){const Je=L[K],_t=w[Je];_(_t,Je)}},Ne=w=>(_,L)=>{w[L]=_},le=(w,_,L,K)=>{Xt(w,(ye,Je)=>{(_(ye,Je)?L:K)(ye,Je)})},Bo=(w,_)=>{const L={};return le(w,_,Ne(L),Go),L},gt=(w,_)=>{const L=[];return Xt(w,(K,ye)=>{L.push(_(K,ye))}),L},$e=w=>gt(w,Zn),A=w=>Rt(w).length,kn=(w,_)=>Ke(w,_)?W.from(w[_]):W.none(),Ke=(w,_)=>sn.call(w,_),Vn=(w,_)=>Ke(w,_)&&w[_]!==void 0&&w[_]!==null,jt=w=>{for(const _ in w)if(sn.call(w,_))return!1;return!0},je=Array.prototype.indexOf,Jn=Array.prototype.push,bs=(w,_)=>je.call(w,_),bt=(w,_)=>bs(w,_)>-1,mn=(w,_)=>{for(let L=0,K=w.length;L<K;L++){const ye=w[L];if(_(ye,L))return!0}return!1},Pe=(w,_)=>{const L=[];for(let K=0;K<w;K++)L.push(_(K));return L},et=(w,_)=>{const L=w.length,K=new Array(L);for(let ye=0;ye<L;ye++){const Je=w[ye];K[ye]=_(Je,ye)}return K},F=(w,_)=>{for(let L=0,K=w.length;L<K;L++){const ye=w[L];_(ye,L)}},Ss=(w,_)=>{for(let L=w.length-1;L>=0;L--){const K=w[L];_(K,L)}},io=(w,_)=>{const L=[],K=[];for(let ye=0,Je=w.length;ye<Je;ye++){const _t=w[ye];(_(_t,ye)?L:K).push(_t)}return{pass:L,fail:K}},To=(w,_)=>{const L=[];for(let K=0,ye=w.length;K<ye;K++){const Je=w[K];_(Je,K)&&L.push(Je)}return L},it=(w,_,L)=>(Ss(w,(K,ye)=>{L=_(L,K,ye)}),L),Mt=(w,_,L)=>(F(w,(K,ye)=>{L=_(L,K,ye)}),L),xe=(w,_,L)=>{for(let K=0,ye=w.length;K<ye;K++){const Je=w[K];if(_(Je,K))return W.some(Je);if(L(Je,K))break}return W.none()},Re=(w,_)=>xe(w,_,oo),Fe=w=>{const _=[];for(let L=0,K=w.length;L<K;++L){if(!rt(w[L]))throw new Error("Arr.flatten item "+L+" was not an array, input: "+w);Jn.apply(_,w[L])}return _},ie=(w,_)=>Fe(et(w,_)),_n=(w,_)=>{for(let L=0,K=w.length;L<K;++L){const ye=w[L];if(_(ye,L)!==!0)return!1}return!0},Un=(w,_)=>{const L={};for(let K=0,ye=w.length;K<ye;K++){const Je=w[K];L[String(Je)]=_(Je,K)}return L},Bt=(w,_)=>_>=0&&_<w.length?W.some(w[_]):W.none(),rs=w=>Bt(w,0),ro=w=>Bt(w,w.length-1),ir=(w,_)=>{for(let L=0;L<w.length;L++){const K=_(w[L],L);if(K.isSome())return K}return W.none()},Po=8,Ms=9,ra=11,zs=1,As=3,gs=(w,_)=>{const K=(_||document).createElement("div");if(K.innerHTML=w,!K.hasChildNodes()||K.childNodes.length>1){const ye="HTML does not have a single root node";throw new Error(ye)}return bo(K.childNodes[0])},Hr=(w,_)=>{const K=(_||document).createElement(w);return bo(K)},xs=(w,_)=>{const K=(_||document).createTextNode(w);return bo(K)},bo=w=>{if(w==null)throw new Error("Node cannot be null or undefined");return{dom:w}},vo={fromHtml:gs,fromTag:Hr,fromText:xs,fromDom:bo,fromPoint:(w,_,L)=>W.from(w.dom.elementFromPoint(_,L)).map(bo)},ds=(w,_)=>{const L=w.dom;if(L.nodeType!==zs)return!1;{const K=L;if(K.matches!==void 0)return K.matches(_);if(K.msMatchesSelector!==void 0)return K.msMatchesSelector(_);if(K.webkitMatchesSelector!==void 0)return K.webkitMatchesSelector(_);if(K.mozMatchesSelector!==void 0)return K.mozMatchesSelector(_);throw new Error("Browser lacks native selectors")}},xr=w=>w.nodeType!==zs&&w.nodeType!==Ms&&w.nodeType!==ra||w.childElementCount===0,ec=(w,_)=>{const L=_===void 0?document:_.dom;return xr(L)?[]:et(L.querySelectorAll(w),vo.fromDom)},ca=(w,_)=>{const L=_===void 0?document:_.dom;return xr(L)?W.none():W.from(L.querySelector(w)).map(vo.fromDom)},yo=(w,_)=>w.dom===_.dom,Ta=ds;typeof window<"u"||Function("return this;")();const xt=w=>w.dom.nodeName.toLowerCase(),Eo=w=>w.dom.nodeType,Pr=w=>_=>Eo(_)===w,br=w=>Eo(w)===Po||xt(w)==="#comment",uc=Pr(zs),vc=Pr(As),Qo=Pr(Ms),Fc=Pr(ra),dc=w=>_=>uc(_)&&xt(_)===w,Yo=w=>vo.fromDom(w.dom.ownerDocument),fn=w=>Qo(w)?w:Yo(w),Bs=w=>W.from(w.dom.parentNode).map(vo.fromDom),qr=(w,_)=>{const L=Wo(_)?_:oo;let K=w.dom;const ye=[];for(;K.parentNode!==null&&K.parentNode!==void 0;){const Je=K.parentNode,_t=vo.fromDom(Je);if(ye.push(_t),L(_t)===!0)break;K=Je}return ye},Ga=w=>W.from(w.dom.previousSibling).map(vo.fromDom),rl=w=>W.from(w.dom.nextSibling).map(vo.fromDom),ms=w=>et(w.dom.childNodes,vo.fromDom),rr=(w,_)=>{const L=w.dom.childNodes;return W.from(L[_]).map(vo.fromDom)},Ps=w=>rr(w,0),tc=w=>Fc(w)&&Uo(w.dom.host),Ic=w=>vo.fromDom(w.dom.getRootNode()),cr=w=>{const _=Ic(w);return tc(_)?W.some(_):W.none()},ue=w=>vo.fromDom(w.dom.host),se=w=>{const _=vc(w)?w.dom.parentNode:w.dom;if(_==null||_.ownerDocument===null)return!1;const L=_.ownerDocument;return cr(vo.fromDom(_)).fold(()=>L.body.contains(_),Xn(se,ue))};var Be=(w,_,L,K,ye)=>w(L,K)?W.some(L):Wo(ye)&&ye(L)?W.none():_(L,K,ye);const Ve=(w,_,L)=>{let K=w.dom;const ye=Wo(L)?L:oo;for(;K.parentNode;){K=K.parentNode;const Je=vo.fromDom(K);if(_(Je))return W.some(Je);if(ye(Je))break}return W.none()},un=(w,_,L)=>Be((ye,Je)=>Je(ye),Ve,w,_,L),Rn=(w,_)=>{const L=ye=>_(vo.fromDom(ye));return Re(w.dom.childNodes,L).map(vo.fromDom)},jn=(w,_,L)=>Ve(w,K=>ds(K,_),L),qs=(w,_)=>Rn(w,L=>ds(L,_)),ve=(w,_)=>ca(_,w),Gn=(w,_,L)=>Be((ye,Je)=>ds(ye,Je),jn,w,_,L),de=w=>Gn(w,"[contenteditable]"),pe=(w,_=!1)=>se(w)?w.dom.isContentEditable:de(w).fold(Ot(_),L=>at(L)==="true"),at=w=>w.dom.contentEditable,ft=w=>w.nodeName.toLowerCase(),Vt=w=>vo.fromDom(w.getBody()),nn=w=>_=>yo(_,Vt(w)),rn=w=>w?w.replace(/px$/,""):"",en=w=>/^\d+(\.\d+)?$/.test(w)?w+"px":w,Cn=w=>vo.fromDom(w.selection.getStart()),Nn=w=>vo.fromDom(w.selection.getEnd()),zo=w=>un(w,dc("table")).forall(pe),cs=(w,_)=>To(ms(w),_),Os=(w,_)=>{let L=[];return F(ms(w),K=>{_(K)&&(L=L.concat([K])),L=L.concat(Os(K,_))}),L},_c=(w,_)=>cs(w,L=>ds(L,_)),Lc=(w,_)=>ec(_,w),Dn=(w,_,L)=>{if(So(L)||Hn(L)||zn(L))w.setAttribute(_,L+"");else throw new Error("Attribute value was not simple")},No=(w,_,L)=>{Dn(w.dom,_,L)},$o=(w,_)=>{const L=w.dom;Xt(_,(K,ye)=>{Dn(L,ye,K)})},Kr=(w,_)=>{const L=w.dom.getAttribute(_);return L===null?void 0:L},Yr=(w,_)=>W.from(Kr(w,_)),$r=(w,_)=>{w.dom.removeAttribute(_)},Ks=w=>Mt(w.dom.attributes,(_,L)=>(_[L.name]=L.value,_),{}),od=(w,_,L=nt)=>w.exists(K=>L(K,_)),Ea=w=>{const _=[],L=K=>{_.push(K)};for(let K=0;K<w.length;K++)w[K].each(L);return _},es=(w,_,L)=>w.isSome()&&_.isSome()?W.some(L(w.getOrDie(),_.getOrDie())):W.none(),yc=w=>w.bind(Zn),mc=(w,_)=>w?W.some(_):W.none(),Dr=(w,_)=>w.substring(_),Ml=(w,_,L)=>_===""||w.length>=_.length&&w.substr(L,L+_.length)===_,Cc=(w,_)=>Ac(w,_)?Dr(w,_.length):w,Ac=(w,_)=>Ml(w,_,0),aa=(w=>_=>_.replace(w,""))(/^\s+|\s+$/g),bi=w=>w.length>0,hl=w=>!bi(w),cl=(w,_=10)=>{const L=parseInt(w,_);return isNaN(L)?W.none():W.some(L)},la=w=>{const _=parseFloat(w);return isNaN(_)?W.none():W.some(_)},zr=w=>w.style!==void 0&&Wo(w.style.getPropertyValue),vi=(w,_,L)=>{if(!So(L))throw new Error("CSS value must be a string: "+L);zr(w)&&w.style.setProperty(_,L)},yi=(w,_)=>{zr(w)&&w.style.removeProperty(_)},Ci=(w,_,L)=>{const K=w.dom;vi(K,_,L)},Jl=(w,_)=>{const L=w.dom,ye=window.getComputedStyle(L).getPropertyValue(_);return ye===""&&!se(w)?Fr(L,_):ye},Fr=(w,_)=>zr(w)?w.style.getPropertyValue(_):"",ia=(w,_)=>{const L=w.dom,K=Fr(L,_);return W.from(K).filter(ye=>ye.length>0)},U=(w,_)=>{const L=w.dom;yi(L,_),od(Yr(w,"style").map(aa),"")&&$r(w,"style")},re=(w,_,L=0)=>Yr(w,_).map(K=>parseInt(K,10)).getOr(L),Te=(w,_)=>Xe(w,_,dt),Xe=(w,_,L)=>ie(ms(w),K=>ds(K,_)?L(K)?[K]:[]:Xe(K,_,L)),wt=["tfoot","thead","tbody","colgroup"],Yt=w=>bt(wt,w),Co=(w,_)=>({rows:w,columns:_}),Ts=(w,_,L)=>({element:w,rowspan:_,colspan:L}),Do=(w,_,L,K,ye,Je)=>({element:w,rowspan:_,colspan:L,row:K,column:ye,isLocked:Je}),Ut=(w,_,L)=>({element:w,cells:_,section:L}),vr=(w,_,L,K)=>({startRow:w,startCol:_,finishRow:L,finishCol:K}),gn=(w,_,L)=>({element:w,colspan:_,column:L}),Vr=(w,_)=>({element:w,columns:_}),al=(w,_,L=oo)=>{if(L(_))return W.none();if(bt(w,xt(_)))return W.some(_);const K=ye=>ds(ye,"table")||L(ye);return jn(_,w.join(","),K)},P=(w,_)=>al(["td","th"],w,_),Y=w=>Te(w,"th,td"),fe=w=>ds(w,"colgroup")?_c(w,"col"):ie(eo(w),_=>_c(_,"col")),Oe=(w,_)=>Gn(w,"table",_),ot=w=>Te(w,"tr"),eo=w=>Oe(w).fold(Ot([]),_=>_c(_,"colgroup")),Vs=(w,_)=>et(w,L=>{if(xt(L)==="colgroup"){const K=et(fe(L),ye=>{const Je=re(ye,"span",1);return Ts(ye,1,Je)});return Ut(L,K,"colgroup")}else{const K=et(Y(L),ye=>{const Je=re(ye,"rowspan",1),_t=re(ye,"colspan",1);return Ts(ye,Je,_t)});return Ut(L,K,_(L))}}),fs=w=>Bs(w).map(_=>{const L=xt(_);return Yt(L)?L:"tbody"}).getOr("tbody"),yt=w=>{const _=ot(w),K=[...eo(w),..._];return Vs(K,fs)},Us="data-snooker-locked-cols",fc=w=>Yr(w,Us).bind(_=>W.from(_.match(/\d+/g))).map(_=>Un(_,dt)),Xc=(w,_)=>w+","+_,co=(w,_,L)=>W.from(w.access[Xc(_,L)]),Jc=(w,_,L)=>{const K=Tr(w,ye=>L(_,ye.element));return K.length>0?W.some(K[0]):W.none()},Tr=(w,_)=>{const L=ie(w.all,K=>K.cells);return To(L,_)},Zi=w=>{const _={};let L=0;return F(w.cells,K=>{const ye=K.colspan;Pe(ye,Je=>{const _t=L+Je;_[_t]=gn(K.element,ye,_t)}),L+=ye}),_},$s=w=>{const _={},L=[],ye=rs(w).map(Ul=>Ul.element).bind(Oe).bind(fc).getOr({});let Je=0,_t=0,tn=0;const{pass:ao,fail:po}=io(w,Ul=>Ul.section==="colgroup");F(po,Ul=>{const fa=[];F(Ul.cells,eu=>{let Ei=0;for(;_[Xc(tn,Ei)]!==void 0;)Ei++;const Nu=Vn(ye,Ei.toString()),Pg=Do(eu.element,eu.rowspan,eu.colspan,tn,Ei,Nu);for(let ti=0;ti<eu.colspan;ti++)for(let xf=0;xf<eu.rowspan;xf++){const Ih=tn+xf,Lh=Ei+ti,Mm=Xc(Ih,Lh);_[Mm]=Pg,_t=Math.max(_t,Lh+1)}fa.push(Pg)}),Je++,L.push(Ut(Ul.element,fa,Ul.section)),tn++});const{columns:vs,colgroups:ks}=ro(ao).map(Ul=>{const fa=Zi(Ul);return{colgroups:[Vr(Ul.element,$e(fa))],columns:fa}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Co(Je,_t),access:_,all:L,columns:vs,colgroups:ks}},Ir={fromTable:w=>{const _=yt(w);return $s(_)},generate:$s,getAt:co,findItem:Jc,filterItems:Tr,justCells:w=>ie(w.all,_=>_.cells),justColumns:w=>$e(w.columns),hasColumns:w=>Rt(w.columns).length>0,getColumnAt:(w,_)=>W.from(w.columns[_])};var wc=tinymce.util.Tools.resolve("tinymce.util.Tools");const ll=(w,_,L)=>{const K=w.select("td,th",_);let ye;for(let Je=0;Je<K.length;Je++){const _t=w.getStyle(K[Je],L);if(Ho(ye)&&(ye=_t),ye!==_t)return""}return ye},il=(w,_,L)=>{wc.each("left center right".split(" "),K=>{K!==L&&w.formatter.remove("align"+K,{},_)}),L&&w.formatter.apply("align"+L,{},_)},hu=(w,_,L)=>{wc.each("top middle bottom".split(" "),K=>{K!==L&&w.formatter.remove("valign"+K,{},_)}),L&&w.formatter.apply("valign"+L,{},_)},q=(w,_,L)=>{w.dispatch("TableModified",{...L,table:_})},J=(w,_)=>la(w).getOr(_),Ae=(w,_,L)=>J(Jl(w,_),L),Ye=(w,_,L,K)=>{const ye=Ae(w,`padding-${L}`,0),Je=Ae(w,`padding-${K}`,0),_t=Ae(w,`border-${L}-width`,0),tn=Ae(w,`border-${K}-width`,0);return _-ye-Je-_t-tn},Tn=(w,_)=>{const L=w.dom,K=L.getBoundingClientRect().width||L.offsetWidth;return _==="border-box"?K:Ye(w,K,"left","right")},ts=w=>Tn(w,"content-box");var Ds=tinymce.util.Tools.resolve("tinymce.Env");const Sc="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Qc=Pe(5,w=>{const _=`${w+1}px`;return{title:_,value:_}}),Lr=et(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],w=>({title:w,value:w.toLowerCase()})),ea="100%",Fs=w=>{var _;const L=w.dom,K=(_=L.getParent(w.selection.getStart(),L.isBlock))!==null&&_!==void 0?_:w.getBody();return ts(vo.fromDom(K))+"px"},ua=(w,_)=>Sg(w)||!Xr(w)?_:ji(w)?{..._,width:Fs(w)}:{..._,width:ea},Hc=(w,_)=>Sg(w)||Xr(w)?_:ji(w)?{..._,width:Fs(w)}:{..._,width:ea},Er=w=>_=>_.options.get(w),ur=w=>{const _=w.options.register;_("table_border_widths",{processor:"object[]",default:Qc}),_("table_border_styles",{processor:"object[]",default:Lr}),_("table_cell_advtab",{processor:"boolean",default:!0}),_("table_row_advtab",{processor:"boolean",default:!0}),_("table_advtab",{processor:"boolean",default:!0}),_("table_appearance_options",{processor:"boolean",default:!0}),_("table_grid",{processor:"boolean",default:!Ds.deviceType.isTouch()}),_("table_cell_class_list",{processor:"object[]",default:[]}),_("table_row_class_list",{processor:"object[]",default:[]}),_("table_class_list",{processor:"object[]",default:[]}),_("table_toolbar",{processor:"string",default:Sc}),_("table_background_color_map",{processor:"object[]",default:[]}),_("table_border_color_map",{processor:"object[]",default:[]})},Ys=Er("table_sizing_mode"),pu=Er("table_border_widths"),bu=Er("table_border_styles"),vu=Er("table_cell_advtab"),Cm=Er("table_row_advtab"),yu=Er("table_advtab"),Pl=Er("table_appearance_options"),wm=Er("table_grid"),Xr=Er("table_style_by_css"),Sm=Er("table_cell_class_list"),yg=Er("table_row_class_list"),wi=Er("table_class_list"),Cg=Er("table_toolbar"),Cu=Er("table_background_color_map"),wg=Er("table_border_color_map"),ji=w=>Ys(w)==="fixed",Sg=w=>Ys(w)==="responsive",xm=w=>{const _=w.options,L=_.get("table_default_styles");return _.isSet("table_default_styles")?L:ua(w,L)},ff=w=>{const _=w.options,L=_.get("table_default_attributes");return _.isSet("table_default_attributes")?L:Hc(w,L)},wu=(w,_)=>_.column>=w.startCol&&_.column+_.colspan-1<=w.finishCol&&_.row>=w.startRow&&_.row+_.rowspan-1<=w.finishRow,gf=(w,_)=>{let L=!0;const K=oe(wu,_);for(let ye=_.startRow;ye<=_.finishRow;ye++)for(let Je=_.startCol;Je<=_.finishCol;Je++)L=L&&Ir.getAt(w,ye,Je).exists(K);return L?W.some(_):W.none()},me=(w,_)=>vr(Math.min(w.row,_.row),Math.min(w.column,_.column),Math.max(w.row+w.rowspan-1,_.row+_.rowspan-1),Math.max(w.column+w.colspan-1,_.column+_.colspan-1)),Gi=(w,_,L)=>{const K=Ir.findItem(w,_,yo),ye=Ir.findItem(w,L,yo);return K.bind(Je=>ye.map(_t=>me(Je,_t)))},Si=(w,_,L)=>Gi(w,_,L).bind(K=>gf(w,K)),xg=(w,_,L)=>{const K=Yp(w);return Si(K,_,L)},Yp=Ir.fromTable,Su=(w,_)=>{Bs(w).each(K=>{K.dom.insertBefore(_.dom,w.dom)})},wo=(w,_)=>{rl(w).fold(()=>{Bs(w).each(ye=>{$l(ye,_)})},K=>{Su(K,_)})},nc=(w,_)=>{Ps(w).fold(()=>{$l(w,_)},K=>{w.dom.insertBefore(_.dom,K.dom)})},$l=(w,_)=>{w.dom.appendChild(_.dom)},xu=(w,_)=>{Su(w,_),$l(_,w)},Tm=(w,_)=>{F(_,(L,K)=>{const ye=K===0?w:_[K-1];wo(ye,L)})},zd=(w,_)=>{F(_,L=>{$l(w,L)})},da=w=>{const _=w.dom;_.parentNode!==null&&_.parentNode.removeChild(_)},Em=w=>{const _=ms(w);_.length>0&&Tm(w,_),da(w)},km=((w,_)=>{const L=Je=>{if(!w(Je))throw new Error("Can only get "+_+" value of a "+_+" node");return K(Je).getOr("")},K=Je=>w(Je)?W.from(Je.dom.nodeValue):W.none();return{get:L,getOption:K,set:(Je,_t)=>{if(!w(Je))throw new Error("Can only set raw "+_+" value of a "+_+" node");Je.dom.nodeValue=_t}}})(vc,"text"),Ki=w=>km.get(w),Pa=(w,_)=>km.set(w,_);var Tg=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Vd=()=>{const w=po=>vo.fromDom(po.dom.cloneNode(!1)),_=po=>fn(po).dom,L=po=>uc(po)?xt(po)==="body"?!0:bt(Tg,xt(po)):!1,K=po=>uc(po)?bt(["br","img","hr","input"],xt(po)):!1,ye=po=>uc(po)&&Kr(po,"contenteditable")==="false",Je=(po,vs)=>po.dom.compareDocumentPosition(vs.dom),_t=(po,vs)=>{const ks=Ks(po);$o(vs,ks)},tn=po=>{const vs=xt(po);return bt(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],vs)},ao=po=>uc(po)?Yr(po,"lang"):W.none();return{up:Ot({selector:jn,closest:Gn,predicate:Ve,all:qr}),down:Ot({selector:Lc,predicate:Os}),styles:Ot({get:Jl,getRaw:ia,set:Ci,remove:U}),attrs:Ot({get:Kr,set:No,remove:$r,copyTo:_t}),insert:Ot({before:Su,after:wo,afterAll:Tm,append:$l,appendAll:zd,prepend:nc,wrap:xu}),remove:Ot({unwrap:Em,remove:da}),create:Ot({nu:vo.fromTag,clone:w,text:vo.fromText}),query:Ot({comparePosition:Je,prevSibling:Ga,nextSibling:rl}),property:Ot({children:ms,name:xt,parent:Bs,document:_,isText:vc,isComment:br,isElement:uc,isSpecial:tn,getLanguage:ao,getText:Ki,setText:Pa,isBoundary:L,isEmptyTag:K,isNonEditable:ye}),eq:yo,is:Ta}};const Oc=(w,_,L,K)=>{const ye=L[0],Je=L.slice(1);return K(w,_,ye,Je)},qa=(w,_,L)=>L.length>0?Oc(w,_,L,ka):W.none(),ka=(w,_,L,K)=>{const ye=_(w,L);return it(K,(Je,_t)=>{const tn=_(w,_t);return sd(w,Je,tn)},ye)},sd=(w,_,L)=>_.bind(K=>L.filter(oe(w.eq,K))),Ud=qa,Eg=Vd(),Wd=(w,_)=>Ud(Eg,(L,K)=>w(K),_),Ql=w=>jn(w,"table"),_m=(w,_)=>{const L=Lc(w,_);return L.length>0?W.some(L):W.none()},Oh=(w,_,L)=>ve(w,_).bind(K=>ve(w,L).bind(ye=>Wd(Ql,[K,ye]).map(Je=>({first:K,last:ye,table:Je})))),kg=(w,_)=>_m(w,_),Db=(w,_,L)=>Oh(w,_,L).bind(K=>{const ye=ao=>yo(w,ao),Je="thead,tfoot,tbody,table",_t=jn(K.first,Je,ye),tn=jn(K.last,Je,ye);return _t.bind(ao=>tn.bind(po=>yo(ao,po)?xg(K.table,K.first,K.last):W.none()))}),hf=w=>et(w,vo.fromDom),Zd="data-mce-selected",rd="td["+Zd+"],th["+Zd+"]",jd="data-mce-first-selected",yr="td["+jd+"],th["+jd+"]",kr="data-mce-last-selected",pl="td["+kr+"],th["+kr+"]",cd={selected:Zd,selectedSelector:rd,firstSelected:jd,firstSelectedSelector:yr,lastSelected:kr,lastSelectedSelector:pl},_g=w=>Oe(w).bind(_=>kg(_,cd.firstSelectedSelector)).fold(Ot(w),_=>_[0]),gc=w=>(_,L)=>{const K=xt(_),ye=K==="col"||K==="colgroup"?_g(_):_;return Gn(ye,w,L)},hn=gc("th,td,caption"),Yi=gc("th,td"),pf=w=>hf(w.model.table.getSelectedCells()),zc=(w,_)=>{const L=Yi(w),K=L.bind(ye=>Oe(ye)).map(ye=>ot(ye));return es(L,K,(ye,Je)=>To(Je,_t=>mn(hf(_t.dom.cells),tn=>Kr(tn,_)==="1"||yo(tn,ye)))).getOr([])},Es=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Tu=w=>({value:uo(w)}),Ag=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Gd=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Dh=w=>Ag.test(w)||Gd.test(w),uo=w=>Cc(w,"#").toUpperCase(),hc=w=>Dh(w)?W.some({value:uo(w)}):W.none(),ad=w=>{const _=w.toString(16);return(_.length===1?"0"+_:_).toUpperCase()},ta=w=>{const _=ad(w.red)+ad(w.green)+ad(w.blue);return Tu(_)},$a=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,bl=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Dc=(w,_,L,K)=>({red:w,green:_,blue:L,alpha:K}),_a=(w,_,L,K)=>{const ye=parseInt(w,10),Je=parseInt(_,10),_t=parseInt(L,10),tn=parseFloat(K);return Dc(ye,Je,_t,tn)},ul=w=>{const _=$a.exec(w);if(_!==null)return W.some(_a(_[1],_[2],_[3],"1"));const L=bl.exec(w);return L!==null?W.some(_a(L[1],L[2],L[3],L[4])):W.none()},bf=w=>hc(w).orThunk(()=>ul(w).map(ta)).getOrThunk(()=>{const _=document.createElement("canvas");_.height=1,_.width=1;const L=_.getContext("2d");L.clearRect(0,0,_.width,_.height),L.fillStyle="#FFFFFF",L.fillStyle=w,L.fillRect(0,0,1,1);const K=L.getImageData(0,0,1,1).data,ye=K[0],Je=K[1],_t=K[2],tn=K[3];return ta(Dc(ye,Je,_t,tn))}),Rr=w=>ul(w).map(ta).map(_=>"#"+_.value).getOr(w),ld=w=>{let _=w;return{get:()=>_,set:ye=>{_=ye}}},Ur=w=>{const _=ld(W.none()),L=()=>_.get().each(w);return{clear:()=>{L(),_.set(W.none())},isSet:()=>_.get().isSome(),get:()=>_.get(),set:tn=>{L(),_.set(W.some(tn))}}},Eu=()=>Ur(w=>w.unbind()),id=(w,_,L)=>K=>{const ye=Eu(),Je=hl(L),_t=()=>{const tn=pf(w),ao=po=>w.formatter.match(_,{value:L},po.dom,Je);Je?(K.setActive(!mn(tn,ao)),ye.set(w.formatter.formatChanged(_,po=>K.setActive(!po),!0))):(K.setActive(_n(tn,ao)),ye.set(w.formatter.formatChanged(_,K.setActive,!1,{value:L})))};return w.initialized?_t():w.on("init",_t),ye.clear},Ws=w=>Vn(w,"menu"),Fl=w=>et(w,_=>{const L=_.text||_.title||"";return Ws(_)?{text:L,items:Fl(_.menu)}:{text:L,value:_.value}}),Rh=w=>w.length?W.some(Fl([{text:"Select...",value:"mce-no-match"},...w])):W.none(),Xi=(w,_,L,K)=>et(_,ye=>{const Je=ye.text||ye.title;return Ws(ye)?{type:"nestedmenuitem",text:Je,getSubmenuItems:()=>Xi(w,ye.menu,L,K)}:{text:Je,type:"togglemenuitem",onAction:()=>K(ye.value),onSetup:id(w,L,ye.value)}}),tr=(w,_)=>L=>{w.execCommand("mceTableApplyCellStyle",!1,{[_]:L})},ku=w=>ie(w,_=>Ws(_)?[{..._,menu:ku(_.menu)}]:bi(_.value)?[_]:[]),Ka=(w,_,L,K)=>ye=>ye(Xi(w,_,L,K)),ko=(w,_,L)=>{const K=et(_,ye=>({text:ye.title,value:"#"+bf(ye.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:K.length>0?K:void 0,allowCustomColors:!1},onAction:ye=>{const Je=ye.value==="remove"?"":ye.value;w.execCommand("mceTableApplyCellStyle",!1,{[L]:Je})}}]},ud=w=>()=>{const L=w.queryCommandValue("mceTableRowType")==="header"?"body":"header";w.execCommand("mceTableRowType",!1,{type:L})},Am=w=>()=>{const L=w.queryCommandValue("mceTableColType")==="th"?"td":"th";w.execCommand("mceTableColType",!1,{type:L})},vf=w=>Rh(Sm(w)).map(_=>({name:"class",type:"listbox",label:"Class",items:_})),x=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Es}],R=w=>x.concat(vf(w).toArray()),H=(w,_)=>{const K=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Fl(bu(w)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:_==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(K):K}},be={normal:(w,_)=>{const L=w.dom;return{setAttrib:(_t,tn)=>{L.setAttrib(_,_t,tn)},setStyle:(_t,tn)=>{L.setStyle(_,_t,tn)},setFormat:(_t,tn)=>{tn===""?w.formatter.remove(_t,{value:null},_,!0):w.formatter.apply(_t,{value:tn},_)}}}},mt=dc("th"),Mn=(w,_)=>w&&_?"sectionCells":w?"section":"cells",fo=w=>{const _=w.section==="thead",L=od($n(w.cells),"th");return w.section==="tfoot"?{type:"footer"}:_||L?{type:"header",subType:Mn(_,L)}:{type:"body"}},$n=w=>{const _=To(w,L=>mt(L.element));return _.length===0?W.some("td"):_.length===w.length?W.some("th"):W.none()},Bn=w=>{const _=et(w,ye=>fo(ye).type),L=bt(_,"header"),K=bt(_,"footer");if(!L&&!K)return W.some("body");{const ye=bt(_,"body");return L&&!ye&&!K?W.some("header"):!L&&!ye&&K?W.some("footer"):W.none()}},nr=w=>{let _=!1,L;return(...K)=>(_||(_=!0,L=w.apply(null,K)),L)},Jr=(w,_)=>ir(w.all,L=>Re(L.cells,K=>yo(_,K.element))),vl=(w,_,L)=>{const K=et(_.selection,Je=>P(Je).bind(_t=>Jr(w,_t)).filter(L)),ye=Ea(K);return mc(ye.length>0,ye)},Ji=(w,_)=>_.mergable,Om=(w,_)=>_.unmergable,Og=(w,_)=>vl(w,_,dt),Aa=(w,_)=>Jr(w,_).exists(L=>!L.isLocked),Dg=(w,_)=>_n(_,L=>Aa(w,L)),Rb=(w,_)=>Ji(w,_).filter(L=>Dg(w,L.cells)),Nh=(w,_)=>Om(w,_).filter(L=>Dg(w,L));({...{generate:w=>{if(!rt(w))throw new Error("cases must be an array");if(w.length===0)throw new Error("there must be at least one case");const _=[],L={};return F(w,(K,ye)=>{const Je=Rt(K);if(Je.length!==1)throw new Error("one and only one name per case");const _t=Je[0],tn=K[_t];if(L[_t]!==void 0)throw new Error("duplicate key detected:"+_t);if(_t==="cata")throw new Error("cannot have a case named cata (sorry)");if(!rt(tn))throw new Error("case arguments must be an array");_.push(_t),L[_t]=(...ao)=>{const po=ao.length;if(po!==tn.length)throw new Error("Wrong number of arguments to case "+_t+". Expected "+tn.length+" ("+tn+"), got "+po);return{fold:(...ks)=>{if(ks.length!==w.length)throw new Error("Wrong number of arguments to fold. Expected "+w.length+", got "+ks.length);return ks[ye].apply(null,ao)},match:ks=>{const _r=Rt(ks);if(_.length!==_r.length)throw new Error("Wrong number of arguments to match. Expected: "+_.join(",")+`
Actual: `+_r.join(","));if(!_n(_,fa=>bt(_r,fa)))throw new Error("Not all branches were specified when using match. Specified: "+_r.join(", ")+`
Required: `+_.join(", "));return ks[_t].apply(null,ao)},log:ks=>{}}}}),L}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const Ya=(w,_)=>{const L=Ir.fromTable(w);return Og(L,_).bind(ye=>{const Je=ye[ye.length-1],_t=ye[0].row,tn=Je.row+Je.rowspan,ao=L.all.slice(_t,tn);return Bn(ao)}).getOr("")},Pn=w=>Ac(w,"rgb")?Rr(w):w,Il=w=>{const _=vo.fromDom(w);return{borderwidth:ia(_,"border-width").getOr(""),borderstyle:ia(_,"border-style").getOr(""),bordercolor:ia(_,"border-color").map(Pn).getOr(""),backgroundcolor:ia(_,"background-color").map(Pn).getOr("")}},yf=w=>{const _=w[0],L=w.slice(1);return F(L,K=>{F(Rt(_),ye=>{Xt(K,(Je,_t)=>{const tn=_[ye];tn!==""&&ye===_t&&tn!==Je&&(_[ye]=ye==="class"?"mce-no-match":"")})})}),_},Rg=(w,_,L,K)=>Re(w,ye=>!Ho(L.formatter.matchNode(K,_+ye))).getOr(""),Bh=oe(Rg,["left","center","right"],"align"),Xp=oe(Rg,["top","middle","bottom"],"valign"),xi=(w,_)=>{const L=xm(w),K=ff(w),ye=()=>({borderstyle:kn(L,"border-style").getOr(""),bordercolor:Pn(kn(L,"border-color").getOr("")),backgroundcolor:Pn(kn(L,"background-color").getOr(""))}),Je={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},_t=()=>{const vs=L["border-width"];return Xr(w)&&vs?{border:vs}:kn(K,"border").fold(()=>({}),ks=>({border:ks}))},tn=_?ye():{},ao=()=>{const vs=kn(L,"border-spacing").or(kn(K,"cellspacing")).fold(()=>({}),_r=>({cellspacing:_r})),ks=kn(L,"border-padding").or(kn(K,"cellpadding")).fold(()=>({}),_r=>({cellpadding:_r}));return{...vs,...ks}};return{...Je,...L,...K,...tn,..._t(),...ao()}},_u=w=>Oe(vo.fromDom(w)).map(_=>{const L={selection:hf(w.cells)};return Ya(_,L)}).getOr(""),qd=(w,_,L)=>{const K=(tn,ao)=>{const po=ia(vo.fromDom(ao),"border-width");return Xr(w)&&po.isSome()?po.getOr(""):tn.getAttrib(ao,"border")||ll(w.dom,ao,"border-width")||ll(w.dom,ao,"border")||""},ye=w.dom,Je=Xr(w)?ye.getStyle(_,"border-spacing")||ye.getAttrib(_,"cellspacing"):ye.getAttrib(_,"cellspacing")||ye.getStyle(_,"border-spacing"),_t=Xr(w)?ll(ye,_,"padding")||ye.getAttrib(_,"cellpadding"):ye.getAttrib(_,"cellpadding")||ll(ye,_,"padding");return{width:ye.getStyle(_,"width")||ye.getAttrib(_,"width"),height:ye.getStyle(_,"height")||ye.getAttrib(_,"height"),cellspacing:Je??"",cellpadding:_t??"",border:K(ye,_),caption:!!ye.select("caption",_)[0],class:ye.getAttrib(_,"class",""),align:Bh(w,_),...L?Il(_):{}}},Wt=(w,_,L)=>{const K=w.dom;return{height:K.getStyle(_,"height")||K.getAttrib(_,"height"),class:K.getAttrib(_,"class",""),type:_u(_),align:Bh(w,_),...L?Il(_):{}}},ei=(w,_,L,K)=>{const ye=w.dom,Je=K.getOr(_);return{width:((tn,ao)=>ye.getStyle(tn,ao)||ye.getAttrib(tn,ao))(Je,"width"),scope:ye.getAttrib(_,"scope"),celltype:ft(_),class:ye.getAttrib(_,"class",""),halign:Bh(w,_),valign:Xp(w,_),...L?Il(_):{}}},Ph=(w,_)=>{const L=Ir.fromTable(w),K=Ir.justCells(L),ye=To(K,Je=>mn(_,_t=>yo(Je.element,_t)));return et(ye,Je=>({element:Je.element.dom,column:Ir.getColumnAt(L,Je.column).map(_t=>_t.element.dom)}))},Dm=(w,_,L,K)=>{K("scope")&&w.setAttrib("scope",L.scope),K("class")&&L.class!=="mce-no-match"&&w.setAttrib("class",L.class),K("width")&&_.setStyle("width",en(L.width))},Ti=(w,_,L)=>{L("backgroundcolor")&&w.setFormat("tablecellbackgroundcolor",_.backgroundcolor),L("bordercolor")&&w.setFormat("tablecellbordercolor",_.bordercolor),L("borderstyle")&&w.setFormat("tablecellborderstyle",_.borderstyle),L("borderwidth")&&w.setFormat("tablecellborderwidth",en(_.borderwidth))},Ng=(w,_,L,K)=>{const ye=_.length===1;F(_,Je=>{const _t=Je.element,tn=ye?dt:K,ao=be.normal(w,_t),po=Je.column.map(vs=>be.normal(w,vs)).getOr(ao);Dm(ao,po,L,tn),vu(w)&&Ti(ao,L,tn),K("halign")&&il(w,_t,L.halign),K("valign")&&hu(w,_t,L.valign)})},Kd=(w,_)=>{w.execCommand("mceTableCellType",!1,{type:_.celltype,no_events:!0})},Rm=(w,_,L,K)=>{const ye=Bo(K,(Je,_t)=>L[_t]!==Je);A(ye)>0&&_.length>=1&&Oe(_[0]).each(Je=>{const _t=Ph(Je,_),tn=A(Bo(ye,(po,vs)=>vs!=="scope"&&vs!=="celltype"))>0,ao=Ke(ye,"celltype");(tn||Ke(ye,"scope"))&&Ng(w,_t,K,oe(Ke,ye)),ao&&Kd(w,K),q(w,Je.dom,{structure:ao,style:tn})})},Mg=(w,_,L,K)=>{const ye=K.getData();K.close(),w.undoManager.transact(()=>{Rm(w,_,L,ye),w.focus()})},Qi=(w,_)=>{const L=Oe(_[0]).map(K=>et(Ph(K,_),ye=>ei(w,ye.element,vu(w),ye.column)));return yf(L.getOrDie())},Mb=w=>{const _=pf(w);if(_.length===0)return;const L=Qi(w,_),K={type:"tabpanel",tabs:[{title:"General",name:"general",items:R(w)},H(w,"cell")]},ye={type:"panel",items:[{type:"grid",columns:2,items:R(w)}]};w.windowManager.open({title:"Cell Properties",size:"normal",body:vu(w)?K:ye,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:L,onSubmit:oe(Mg,w,_,L)})},Nr=w=>Rh(yg(w)).map(_=>({name:"class",type:"listbox",label:"Class",items:_})),vt=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Fa=w=>vt.concat(Nr(w).toArray()),Au=(w,_,L)=>{L("class")&&_.class!=="mce-no-match"&&w.setAttrib("class",_.class),L("height")&&w.setStyle("height",en(_.height))},Vc=(w,_,L)=>{L("backgroundcolor")&&w.setStyle("background-color",_.backgroundcolor),L("bordercolor")&&w.setStyle("border-color",_.bordercolor),L("borderstyle")&&w.setStyle("border-style",_.borderstyle)},Cf=(w,_,L,K)=>{const Je=_.length===1?dt:K;F(_,_t=>{const tn=_c(vo.fromDom(_t),"td,th"),ao=be.normal(w,_t);Au(ao,L,Je),Cm(w)&&Vc(ao,L,Je),K("height")&&F(tn,po=>{w.dom.setStyle(po.dom,"height",null)}),K("align")&&il(w,_t,L.align)})},Rc=(w,_)=>{w.execCommand("mceTableRowType",!1,{type:_.type,no_events:!0})},as=(w,_,L,K)=>{const ye=Bo(K,(Je,_t)=>L[_t]!==Je);if(A(ye)>0){const Je=Ke(ye,"type"),_t=Je?A(ye)>1:!0;_t&&Cf(w,_,K,oe(Ke,ye)),Je&&Rc(w,K),Oe(vo.fromDom(_[0])).each(tn=>q(w,tn.dom,{structure:Je,style:_t}))}},$h=(w,_,L,K)=>{const ye=K.getData();K.close(),w.undoManager.transact(()=>{as(w,_,L,ye),w.focus()})},tt=w=>{const _=zc(Cn(w),cd.selected);if(_.length===0)return;const L=et(_,_t=>Wt(w,_t.dom,Cm(w))),K=yf(L),ye={type:"tabpanel",tabs:[{title:"General",name:"general",items:Fa(w)},H(w,"row")]},Je={type:"panel",items:[{type:"grid",columns:2,items:Fa(w)}]};w.windowManager.open({title:"Row Properties",size:"normal",body:Cm(w)?ye:Je,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:K,onSubmit:oe($h,w,et(_,_t=>_t.dom),K)})},ls=(w,_,L)=>{const K=L?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],ye=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Je=Pl(w)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],_t=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],tn=_.length>0?[{name:"class",type:"listbox",label:"Class",items:_}]:[];return K.concat(ye).concat(Je).concat(_t).concat(tn)},Bg=(w,_,L,K)=>{if(_.tagName==="TD"||_.tagName==="TH")So(L)&&Uo(K)?w.setStyle(_,L,K):w.setStyles(_,L);else if(_.children)for(let ye=0;ye<_.children.length;ye++)Bg(w,_.children[ye],L,K)},Tc=(w,_,L,K)=>{const ye=w.dom,Je={},_t={},tn=Xr(w),ao=yu(w),po=parseFloat(L.border)===0;if(!Ho(L.class)&&L.class!=="mce-no-match"&&(Je.class=L.class),_t.height=en(L.height),tn?_t.width=en(L.width):ye.getAttrib(_,"width")&&(Je.width=rn(L.width)),tn?(po?(Je.border=0,_t["border-width"]=""):(_t["border-width"]=en(L.border),Je.border=1),_t["border-spacing"]=en(L.cellspacing)):(Je.border=po?0:L.border,Je.cellpadding=L.cellpadding,Je.cellspacing=L.cellspacing),tn&&_.children){const vs={};if(po?vs["border-width"]="":K.border&&(vs["border-width"]=en(L.border)),K.cellpadding&&(vs.padding=en(L.cellpadding)),ao&&K.bordercolor&&(vs["border-color"]=L.bordercolor),!jt(vs))for(let ks=0;ks<_.children.length;ks++)Bg(ye,_.children[ks],vs)}if(ao){const vs=L;_t["background-color"]=vs.backgroundcolor,_t["border-color"]=vs.bordercolor,_t["border-style"]=vs.borderstyle}ye.setStyles(_,{...xm(w),..._t}),ye.setAttribs(_,{...ff(w),...Je})},Ia=(w,_,L,K)=>{const ye=w.dom,Je=K.getData(),_t=Bo(Je,(tn,ao)=>L[ao]!==tn);K.close(),w.undoManager.transact(()=>{if(!_){const tn=cl(Je.cols).getOr(1),ao=cl(Je.rows).getOr(1);w.execCommand("mceInsertTable",!1,{rows:ao,columns:tn}),_=Yi(Cn(w),nn(w)).bind(po=>Oe(po,nn(w))).map(po=>po.dom).getOrDie()}if(A(_t)>0){const tn={border:Ke(_t,"border"),bordercolor:Ke(_t,"bordercolor"),cellpadding:Ke(_t,"cellpadding")};Tc(w,_,Je,tn);const ao=ye.select("caption",_)[0];(ao&&!Je.caption||!ao&&Je.caption)&&w.execCommand("mceTableToggleCaption"),il(w,_,Je.align)}if(w.focus(),w.addVisual(),A(_t)>0){const tn=Ke(_t,"caption"),ao=tn?A(_t)>1:!0;q(w,_,{structure:tn,style:ao})}})},Bb=(w,_)=>{const L=w.dom;let K,ye=xi(w,yu(w));_?(ye.cols="1",ye.rows="1",yu(w)&&(ye.borderstyle="",ye.bordercolor="",ye.backgroundcolor="")):(K=L.getParent(w.selection.getStart(),"table",w.getBody()),K?ye=qd(w,K,yu(w)):yu(w)&&(ye.borderstyle="",ye.bordercolor="",ye.backgroundcolor=""));const Je=Rh(wi(w));Je.isSome()&&ye.class&&(ye.class=ye.class.replace(/\s*mce\-item\-table\s*/g,""));const _t={type:"grid",columns:2,items:ls(w,Je.getOr([]),_)},tn=()=>({type:"panel",items:[_t]}),ao=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[_t]},H(w,"table")]}),po=yu(w)?ao():tn();w.windowManager.open({title:"Table Properties",size:"normal",body:po,onSubmit:oe(Ia,w,K,ye),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ye})},Ll=w=>{const _=L=>{zo(Cn(w))&&L()};Xt({mceTableProps:oe(Bb,w,!1),mceTableRowProps:oe(tt,w),mceTableCellProps:oe(Mb,w),mceInsertTableDialog:oe(Bb,w,!0)},(L,K)=>w.addCommand(K,()=>_(L)))},my=(w,_)=>qs(w,_).isSome(),dd=Zn,Pb=w=>{const _=(K,ye)=>Yr(K,ye).exists(Je=>parseInt(Je,10)>1),L=K=>_(K,"rowspan")||_(K,"colspan");return w.length>0&&_n(w,L)?W.some(w):W.none()},Hl=(w,_,L)=>_.length<=1?W.none():Db(w,L.firstSelectedSelector,L.lastSelectedSelector).map(K=>({bounds:K,cells:_})),os=w=>({element:w,mergable:W.none(),unmergable:W.none(),selection:[w]}),Ou=(w,_,L)=>({element:L,mergable:Hl(_,w,cd),unmergable:Pb(w),selection:dd(w)}),Nm=w=>{const _=ld(W.none()),L=ld([]);let K=W.none();const ye=dc("caption"),Je=ns=>K.forall(or=>!or[ns]),_t=()=>hn(Cn(w),nn(w)),tn=()=>hn(Nn(w),nn(w)),ao=()=>_t().bind(ns=>yc(es(Oe(ns),tn().bind(Oe),(or,Xa)=>yo(or,Xa)?ye(ns)?W.some(os(ns)):W.some(Ou(pf(w),or,ns)):W.none()))),po=ns=>Oe(ns.element).map(Xa=>{const Qr=Ir.fromTable(Xa),Hh=Og(Qr,ns).getOr([]),Bm=Mt(Hh,(Pm,ni)=>(ni.isLocked&&(Pm.onAny=!0,ni.column===0?Pm.onFirst=!0:ni.column+ni.colspan>=Qr.grid.columns&&(Pm.onLast=!0)),Pm),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Rb(Qr,ns).isSome(),unmergeable:Nh(Qr,ns).isSome(),locked:Bm}}),vs=()=>{_.set(nr(ao)()),K=_.get().bind(po),F(L.get(),ut)},ks=ns=>(ns(),L.set(L.get().concat([ns])),()=>{L.set(To(L.get(),or=>or!==ns))}),_r=(ns,or)=>ks(()=>_.get().fold(()=>{ns.setEnabled(!1)},Xa=>{ns.setEnabled(!or(Xa)&&w.selection.isEditable())})),Ul=(ns,or,Xa)=>ks(()=>_.get().fold(()=>{ns.setEnabled(!1),ns.setActive(!1)},Qr=>{ns.setEnabled(!or(Qr)&&w.selection.isEditable()),ns.setActive(Xa(Qr))})),fa=ns=>K.exists(or=>or.locked[ns]),eu=ns=>_r(ns,or=>!1),Ei=ns=>_r(ns,or=>ye(or.element)),Nu=ns=>or=>_r(or,Xa=>ye(Xa.element)||fa(ns)),Pg=ns=>or=>_r(or,Xa=>ye(Xa.element)||ns().isNone()),ti=(ns,or)=>Xa=>_r(Xa,Qr=>ye(Qr.element)||ns().isNone()||fa(or)),xf=ns=>_r(ns,or=>Je("mergeable")),Ih=ns=>_r(ns,or=>Je("unmergeable")),Lh=ns=>Ul(ns,oo,or=>Oe(or.element,nn(w)).exists(Qr=>my(Qr,"caption"))),Mm=(ns,or)=>Xa=>Ul(Xa,Qr=>ye(Qr.element),()=>w.queryCommandValue(ns)===or),Uc=Mm("mceTableRowType","header"),tu=Mm("mceTableColType","th");return w.on("NodeChange ExecCommand TableSelectorChange",vs),{onSetupTable:eu,onSetupCellOrRow:Ei,onSetupColumn:Nu,onSetupPasteable:Pg,onSetupPasteableColumn:ti,onSetupMergeable:xf,onSetupUnmergeable:Ih,resetTargets:vs,onSetupTableWithCaption:Lh,onSetupTableRowHeaders:Uc,onSetupTableColumnHeaders:tu,targets:_.get}};var Nc=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Fh="x-tinymce/dom-table-",Du=Fh+"rows",Ru=Fh+"columns",lr=w=>{var _;const L=(_=Nc.read())!==null&&_!==void 0?_:[];return ir(L,K=>W.from(K.getType(w)))},wf=()=>lr(Du),_e=()=>lr(Ru),zl=w=>_=>{const L=()=>{_.setEnabled(w.selection.isEditable())};return w.on("NodeChange",L),L(),()=>{w.off("NodeChange",L)}},Sf=(w,_)=>{w.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:zl(w),fetch:tn=>tn("inserttable | cell row column | advtablesort | tableprops deletetable")});const L=tn=>()=>w.execCommand(tn),K=(tn,ao)=>{w.queryCommandSupported(ao.command)&&w.ui.registry.addButton(tn,{...ao,onAction:Wo(ao.onAction)?ao.onAction:L(ao.command)})},ye=(tn,ao)=>{w.queryCommandSupported(ao.command)&&w.ui.registry.addToggleButton(tn,{...ao,onAction:Wo(ao.onAction)?ao.onAction:L(ao.command)})};K("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:_.onSetupTable}),K("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:_.onSetupTable}),K("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:_.onSetupCellOrRow}),K("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:_.onSetupMergeable}),K("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:_.onSetupUnmergeable}),K("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:_.onSetupCellOrRow}),K("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:_.onSetupCellOrRow}),K("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:_.onSetupCellOrRow}),K("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:_.onSetupCellOrRow}),K("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:_.onSetupColumn("onFirst")}),K("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:_.onSetupColumn("onLast")}),K("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:_.onSetupColumn("onAny")}),K("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:_.onSetupCellOrRow}),K("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:_.onSetupCellOrRow}),K("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:_.onSetupPasteable(wf)}),K("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:_.onSetupPasteable(wf)}),K("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:_.onSetupColumn("onAny")}),K("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:_.onSetupColumn("onAny")}),K("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:_.onSetupPasteableColumn(_e,"onFirst")}),K("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:_.onSetupPasteableColumn(_e,"onLast")}),K("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:zl(w)});const Je=ku(wi(w));Je.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Ka(w,Je,"tableclass",tn=>w.execCommand("mceTableToggleClass",!1,tn)),onSetup:_.onSetupTable});const _t=ku(Sm(w));_t.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Ka(w,_t,"tablecellclass",tn=>w.execCommand("mceTableCellToggleClass",!1,tn)),onSetup:_.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Ka(w,Es,"tablecellverticalalign",tr(w,"vertical-align")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Ka(w,pu(w),"tablecellborderwidth",tr(w,"border-width")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Ka(w,bu(w),"tablecellborderstyle",tr(w,"border-style")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:tn=>tn(ko(w,Cu(w),"background-color")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:tn=>tn(ko(w,wg(w),"border-color")),onSetup:_.onSetupCellOrRow})),ye("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:_.onSetupTableWithCaption}),ye("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:ud(w),onSetup:_.onSetupTableRowHeaders}),ye("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Am(w),onSetup:_.onSetupTableColumnHeaders})},La=w=>{const _=K=>w.dom.is(K,"table")&&w.getBody().contains(K)&&w.dom.isEditable(K.parentNode),L=Cg(w);L.length>0&&w.ui.registry.addContextToolbar("table",{predicate:_,items:L,scope:"node",position:"node"})},Vl=w=>_=>{const L=()=>{_.setEnabled(w.selection.isEditable())};return w.on("NodeChange",L),L(),()=>{w.off("NodeChange",L)}},oc=(w,_)=>{const L=ks=>()=>w.execCommand(ks),K=(ks,_r)=>w.queryCommandSupported(_r.command)?(w.ui.registry.addMenuItem(ks,{..._r,onAction:Wo(_r.onAction)?_r.onAction:L(_r.command)}),!0):!1,ye=(ks,_r)=>{w.queryCommandSupported(_r.command)&&w.ui.registry.addToggleMenuItem(ks,{..._r,onAction:Wo(_r.onAction)?_r.onAction:L(_r.command)})},Je=ks=>{w.execCommand("mceInsertTable",!1,{rows:ks.numRows,columns:ks.numColumns})},_t=[K("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:_.onSetupCellOrRow}),K("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:_.onSetupCellOrRow}),K("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:_.onSetupCellOrRow}),K("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:_.onSetupCellOrRow}),K("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:_.onSetupCellOrRow}),K("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:_.onSetupCellOrRow}),K("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:_.onSetupPasteable(wf)}),K("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:_.onSetupPasteable(wf)})],tn=[K("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:_.onSetupColumn("onFirst")}),K("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:_.onSetupColumn("onLast")}),K("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:_.onSetupColumn("onAny")}),K("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:_.onSetupColumn("onAny")}),K("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:_.onSetupColumn("onAny")}),K("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:_.onSetupPasteableColumn(_e,"onFirst")}),K("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:_.onSetupPasteableColumn(_e,"onLast")})],ao=[K("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:_.onSetupCellOrRow}),K("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:_.onSetupMergeable}),K("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:_.onSetupUnmergeable})];wm(w)?w.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Je}],onSetup:Vl(w)}):w.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:L("mceInsertTableDialog"),onSetup:Vl(w)}),w.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:L("mceInsertTableDialog"),onSetup:Vl(w)}),K("tableprops",{text:"Table properties",onSetup:_.onSetupTable,command:"mceTableProps"}),K("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:_.onSetupTable,command:"mceTableDelete"}),bt(_t,!0)&&w.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Ot("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),bt(tn,!0)&&w.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Ot("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),bt(ao,!0)&&w.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Ot("tablecellprops tablemergecells tablesplitcells")}),w.ui.registry.addContextMenu("table",{update:()=>(_.resetTargets(),_.targets().fold(Ot(""),ks=>xt(ks.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const po=ku(wi(w));po.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Xi(w,po,"tableclass",ks=>w.execCommand("mceTableToggleClass",!1,ks)),onSetup:_.onSetupTable});const vs=ku(Sm(w));vs.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Xi(w,vs,"tablecellclass",ks=>w.execCommand("mceTableCellToggleClass",!1,ks)),onSetup:_.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Xi(w,Es,"tablecellverticalalign",tr(w,"vertical-align")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Xi(w,pu(w),"tablecellborderwidth",tr(w,"border-width")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Xi(w,bu(w),"tablecellborderstyle",tr(w,"border-style")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>ko(w,Cu(w),"background-color"),onSetup:_.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>ko(w,wg(w),"border-color"),onSetup:_.onSetupCellOrRow})),ye("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:_.onSetupTableWithCaption}),ye("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:ud(w),onSetup:_.onSetupTableRowHeaders}),ye("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Am(w),onSetup:_.onSetupTableRowHeaders})},Wr=w=>{const _=Nm(w);ur(w),Ll(w),oc(w,_),Sf(w,_),La(w)};var fy=()=>{Sr.add("table",Wr)};fy()})();(function(){var Sr=tinymce.util.Tools.resolve("tinymce.PluginManager");const ws=(xe=>Re=>xe===Re)(null),us=xe=>xe,Ko=(xe,Re)=>{const Fe=xe.length,ie=new Array(Fe);for(let _n=0;_n<Fe;_n++){const Un=xe[_n];ie[_n]=Re(Un,_n)}return ie},So={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},rt={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},Hn=[new RegExp(So.aletter),new RegExp(So.midnumlet),new RegExp(So.midletter),new RegExp(So.midnum),new RegExp(So.numeric),new RegExp(So.cr),new RegExp(So.lf),new RegExp(So.newline),new RegExp(So.extend),new RegExp(So.format),new RegExp(So.katakana),new RegExp(So.extendnumlet),new RegExp("@")],Ho="",mo=new RegExp("^"+So.punctuation+"$"),Uo=/^\s+$/,Wo=Hn,zn=rt.OTHER,Go=xe=>{let Re=zn;const Fe=Wo.length;for(let ie=0;ie<Fe;++ie){const _n=Wo[ie];if(_n&&_n.test(xe)){Re=ie;break}}return Re},Xn=xe=>{const Re={};return Fe=>{if(Re[Fe])return Re[Fe];{const ie=xe(Fe);return Re[Fe]=ie,ie}}},Ot=xe=>{const Re=Xn(Go);return Ko(xe,Re)},Zn=(xe,Re)=>{const Fe=xe[Re],ie=xe[Re+1];if(Re<0||Re>xe.length-1&&Re!==0||Fe===rt.ALETTER&&ie===rt.ALETTER)return!1;const _n=xe[Re+2];if(Fe===rt.ALETTER&&(ie===rt.MIDLETTER||ie===rt.MIDNUMLET||ie===rt.AT)&&_n===rt.ALETTER)return!1;const Un=xe[Re-1];return(Fe===rt.MIDLETTER||Fe===rt.MIDNUMLET||ie===rt.AT)&&ie===rt.ALETTER&&Un===rt.ALETTER||(Fe===rt.NUMERIC||Fe===rt.ALETTER)&&(ie===rt.NUMERIC||ie===rt.ALETTER)||(Fe===rt.MIDNUM||Fe===rt.MIDNUMLET)&&ie===rt.NUMERIC&&Un===rt.NUMERIC||Fe===rt.NUMERIC&&(ie===rt.MIDNUM||ie===rt.MIDNUMLET)&&_n===rt.NUMERIC||(Fe===rt.EXTEND||Fe===rt.FORMAT)&&(ie===rt.ALETTER||ie===rt.NUMERIC||ie===rt.KATAKANA||ie===rt.EXTEND||ie===rt.FORMAT)||(ie===rt.EXTEND||ie===rt.FORMAT&&(_n===rt.ALETTER||_n===rt.NUMERIC||_n===rt.KATAKANA||_n===rt.EXTEND||_n===rt.FORMAT))&&(Fe===rt.ALETTER||Fe===rt.NUMERIC||Fe===rt.KATAKANA||Fe===rt.EXTEND||Fe===rt.FORMAT)||Fe===rt.CR&&ie===rt.LF?!1:Fe===rt.NEWLINE||Fe===rt.CR||Fe===rt.LF||ie===rt.NEWLINE||ie===rt.CR||ie===rt.LF?!0:!(Fe===rt.KATAKANA&&ie===rt.KATAKANA||ie===rt.EXTENDNUMLET&&(Fe===rt.ALETTER||Fe===rt.NUMERIC||Fe===rt.KATAKANA||Fe===rt.EXTENDNUMLET)||Fe===rt.EXTENDNUMLET&&(ie===rt.ALETTER||ie===rt.NUMERIC||ie===rt.KATAKANA)||Fe===rt.AT)},nt=Ho,oe=Uo,ut=mo,oo=xe=>xe==="http"||xe==="https",dt=(xe,Re)=>{let Fe;for(Fe=Re;Fe<xe.length&&!oe.test(xe[Fe]);Fe++);return Fe},W=(xe,Re)=>{const Fe=dt(xe,Re+1);return xe.slice(Re+1,Fe).join(nt).substr(0,3)==="://"?Fe:Re},Rt=(xe,Re,Fe,ie)=>{const _n=[],Un=[];let Bt=[];for(let rs=0;rs<Fe.length;++rs)if(Bt.push(xe[rs]),Zn(Fe,rs)){const ro=Re[rs];if((ie.includeWhitespace||!oe.test(ro))&&(ie.includePunctuation||!ut.test(ro))){const ir=rs-Bt.length+1,Po=rs+1,Ms=Re.slice(ir,Po).join(nt);if(oo(Ms)){const ra=W(Re,rs),zs=xe.slice(Po,ra);Array.prototype.push.apply(Bt,zs),rs=ra}Re[rs+1]==="."&&/^([a-zA-Z]\.)+$/.test(Ms+".")?(Bt.push(xe[rs+1]),Un.push({start:ir,end:Po+1})):Un.push({start:ir,end:Po}),_n.push(Bt)}Bt=[]}return{words:_n,indices:Un}},sn=()=>({includeWhitespace:!1,includePunctuation:!1}),Xt=(xe,Re,Fe)=>{Fe={...sn(),...Fe};const ie=Ko(xe,Re),_n=Ot(ie);return Rt(xe,ie,_n,Fe)},le=(xe,Re,Fe)=>Xt(xe,Re,Fe).words,Bo=xe=>xe.replace(/\uFEFF/g,"");var gt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const $e=(xe,Re)=>{const Fe=Re.getBlockElements(),ie=Re.getVoidElements(),_n=ir=>Fe[ir.nodeName]||ie[ir.nodeName],Un=[];let Bt="";const rs=new gt(xe,xe);let ro;for(;ro=rs.next();)ro.nodeType===3?Bt+=Bo(ro.data):_n(ro)&&Bt.length&&(Un.push(Bt),Bt="");return Bt.length&&Un.push(Bt),Un},A=xe=>xe.replace(/\u200B/g,""),kn=xe=>xe.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,Ke=(xe,Re)=>{const Fe=A($e(xe,Re).join(`
`));return le(Fe.split(""),us).length},Vn=(xe,Re)=>{const Fe=$e(xe,Re).join("");return kn(Fe)},jt=(xe,Re)=>{const Fe=$e(xe,Re).join("").replace(/\s/g,"");return kn(Fe)},je=(xe,Re)=>()=>Re(xe.getBody(),xe.schema),Jn=(xe,Re)=>()=>Re(xe.selection.getRng().cloneContents(),xe.schema),bs=xe=>je(xe,Ke),bt=xe=>({body:{getWordCount:bs(xe),getCharacterCount:je(xe,Vn),getCharacterCountWithoutSpaces:je(xe,jt)},selection:{getWordCount:Jn(xe,Ke),getCharacterCount:Jn(xe,Vn),getCharacterCountWithoutSpaces:Jn(xe,jt)},getCount:bs(xe)}),mn=(xe,Re)=>{xe.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(Re.body.getWordCount()),String(Re.selection.getWordCount())],["Characters (no spaces)",String(Re.body.getCharacterCountWithoutSpaces()),String(Re.selection.getCharacterCountWithoutSpaces())],["Characters",String(Re.body.getCharacterCount()),String(Re.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},Pe=(xe,Re)=>{xe.addCommand("mceWordCount",()=>mn(xe,Re))},et=(xe,Re)=>{let Fe=null;return{cancel:()=>{ws(Fe)||(clearTimeout(Fe),Fe=null)},throttle:(...Un)=>{ws(Fe)&&(Fe=setTimeout(()=>{Fe=null,xe.apply(null,Un)},Re))}}};var F=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ss=(xe,Re)=>{xe.dispatch("wordCountUpdate",{wordCount:{words:Re.body.getWordCount(),characters:Re.body.getCharacterCount(),charactersWithoutSpaces:Re.body.getCharacterCountWithoutSpaces()}})},io=(xe,Re)=>{Ss(xe,Re)},To=(xe,Re,Fe)=>{const ie=et(()=>io(xe,Re),Fe);xe.on("init",()=>{io(xe,Re),F.setEditorTimeout(xe,()=>{xe.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",ie.throttle)},0),xe.on("remove",ie.cancel)})},it=xe=>{const Re=()=>xe.execCommand("mceWordCount");xe.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:Re}),xe.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:Re})};var Mt=(xe=300)=>{Sr.add("wordcount",Re=>{const Fe=bt(Re);return Pe(Re,Fe),it(Re),To(Re,Fe,xe),Fe})};Mt()})();(function(){var Sr=tinymce.util.Tools.resolve("tinymce.PluginManager");const js=(rt,Hn)=>{rt.focus(),rt.undoManager.transact(()=>{rt.setContent(Hn)}),rt.selection.setCursorLocation(),rt.nodeChanged()},ws=rt=>rt.getContent({source_view:!0}),us=rt=>{const Hn=ws(rt);rt.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Hn},onSubmit:Ho=>{js(rt,Ho.getData().code),Ho.close()}})},Ko=rt=>{rt.addCommand("mceCodeEditor",()=>{us(rt)})},ps=rt=>{const Hn=()=>rt.execCommand("mceCodeEditor");rt.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Hn}),rt.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Hn})};var So=()=>{Sr.add("code",rt=>(Ko(rt),ps(rt),{}))};So()})();(function(){const Sr=de=>{let pe=de;return{get:()=>pe,set:Vt=>{pe=Vt}}};var js=tinymce.util.Tools.resolve("tinymce.PluginManager");const ws=(de,pe,at)=>{var ft;return at(de,pe.prototype)?!0:((ft=de.constructor)===null||ft===void 0?void 0:ft.name)===pe.name},us=de=>{const pe=typeof de;return de===null?"null":pe==="object"&&Array.isArray(de)?"array":pe==="object"&&ws(de,String,(at,ft)=>ft.isPrototypeOf(at))?"string":pe},Ko=de=>pe=>us(pe)===de,ps=de=>pe=>typeof pe===de,So=Ko("string"),rt=Ko("array"),Hn=ps("boolean"),Ho=de=>de==null,mo=de=>!Ho(de),Uo=ps("number"),Wo=()=>{},zn=de=>()=>de,Go=zn(!0),Ot=zn("[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]");class Zn{constructor(pe,at){this.tag=pe,this.value=at}static some(pe){return new Zn(!0,pe)}static none(){return Zn.singletonNone}fold(pe,at){return this.tag?at(this.value):pe()}isSome(){return this.tag}isNone(){return!this.tag}map(pe){return this.tag?Zn.some(pe(this.value)):Zn.none()}bind(pe){return this.tag?pe(this.value):Zn.none()}exists(pe){return this.tag&&pe(this.value)}forall(pe){return!this.tag||pe(this.value)}filter(pe){return!this.tag||pe(this.value)?this:Zn.none()}getOr(pe){return this.tag?this.value:pe}or(pe){return this.tag?this:pe}getOrThunk(pe){return this.tag?this.value:pe()}orThunk(pe){return this.tag?this:pe()}getOrDie(pe){if(this.tag)return this.value;throw new Error(pe??"Called getOrDie on None")}static from(pe){return mo(pe)?Zn.some(pe):Zn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(pe){this.tag&&pe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Zn.singletonNone=new Zn(!1);const nt=Ot;var oe=tinymce.util.Tools.resolve("tinymce.Env"),ut=tinymce.util.Tools.resolve("tinymce.util.Tools");const oo=Array.prototype.slice,dt=Array.prototype.push,W=(de,pe)=>{const at=de.length,ft=new Array(at);for(let Vt=0;Vt<at;Vt++){const nn=de[Vt];ft[Vt]=pe(nn,Vt)}return ft},Rt=(de,pe)=>{for(let at=0,ft=de.length;at<ft;at++){const Vt=de[at];pe(Vt,at)}},sn=(de,pe)=>{for(let at=de.length-1;at>=0;at--){const ft=de[at];pe(ft,at)}},Xt=(de,pe)=>{if(de.length===0)return[];{let at=pe(de[0]);const ft=[];let Vt=[];for(let nn=0,rn=de.length;nn<rn;nn++){const en=de[nn],Cn=pe(en);Cn!==at&&(ft.push(Vt),Vt=[]),at=Cn,Vt.push(en)}return Vt.length!==0&&ft.push(Vt),ft}},Ne=(de,pe,at)=>(Rt(de,(ft,Vt)=>{at=pe(at,ft,Vt)}),at),le=de=>{const pe=[];for(let at=0,ft=de.length;at<ft;++at){if(!rt(de[at]))throw new Error("Arr.flatten item "+at+" was not an array, input: "+de);dt.apply(pe,de[at])}return pe},Bo=(de,pe)=>le(W(de,pe)),gt=(de,pe)=>{const at=oo.call(de,0);return at.sort(pe),at},$e=Object.hasOwnProperty,A=(de,pe)=>$e.call(de,pe);typeof window<"u"||Function("return this;")();const kn=9,Ke=11,Vn=1,jt=3,je=de=>de.dom.nodeType,bs=(de=>pe=>je(pe)===de)(jt),bt=(de,pe,at)=>{if(So(at)||Hn(at)||Uo(at))de.setAttribute(pe,at+"");else throw new Error("Attribute value was not simple")},mn=(de,pe,at)=>{bt(de.dom,pe,at)},Pe=(de,pe)=>{const ft=(pe||document).createElement("div");if(ft.innerHTML=de,!ft.hasChildNodes()||ft.childNodes.length>1){const Vt="HTML does not have a single root node";throw new Error(Vt)}return Ss(ft.childNodes[0])},et=(de,pe)=>{const ft=(pe||document).createElement(de);return Ss(ft)},F=(de,pe)=>{const ft=(pe||document).createTextNode(de);return Ss(ft)},Ss=de=>{if(de==null)throw new Error("Node cannot be null or undefined");return{dom:de}},To={fromHtml:Pe,fromTag:et,fromText:F,fromDom:Ss,fromPoint:(de,pe,at)=>Zn.from(de.dom.elementFromPoint(pe,at)).map(Ss)},it=de=>de.nodeType!==Vn&&de.nodeType!==kn&&de.nodeType!==Ke||de.childElementCount===0,Mt=(de,pe)=>{const at=pe===void 0?document:pe.dom;return it(at)?[]:W(at.querySelectorAll(de),To.fromDom)},xe=de=>Zn.from(de.dom.parentNode).map(To.fromDom),Re=de=>W(de.dom.childNodes,To.fromDom),Fe=(de,pe)=>({element:de,offset:pe}),ie=(de,pe)=>{const at=Re(de);return at.length>0&&pe<at.length?Fe(at[pe],0):Fe(de,pe)},_n=(de,pe)=>{xe(de).each(ft=>{ft.dom.insertBefore(pe.dom,de.dom)})},Un=(de,pe)=>{de.dom.appendChild(pe.dom)},Bt=(de,pe)=>{_n(de,pe),Un(pe,de)},ro=((de,pe)=>{const at=nn=>{if(!de(nn))throw new Error("Can only get "+pe+" value of a "+pe+" node");return ft(nn).getOr("")},ft=nn=>de(nn)?Zn.from(nn.dom.nodeValue):Zn.none();return{get:at,getOption:ft,set:(nn,rn)=>{if(!de(nn))throw new Error("Can only set raw "+pe+" value of a "+pe+" node");nn.dom.nodeValue=rn}}})(bs,"text"),ir=de=>ro.get(de),Po=(de,pe,at)=>(de.compareDocumentPosition(pe)&at)!==0,Ms=(de,pe)=>Po(de,pe,Node.DOCUMENT_POSITION_PRECEDING),ra=(de,pe)=>Mt(pe,de);var zs=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const As=(de,pe)=>de.isBlock(pe)||A(de.schema.getVoidElements(),pe.nodeName),gs=(de,pe)=>!de.isEditable(pe),Hr=(de,pe)=>de.getContentEditable(pe)==="true"&&pe.parentNode&&!de.isEditable(pe.parentNode),xs=(de,pe)=>!de.isBlock(pe)&&A(de.schema.getWhitespaceElements(),pe.nodeName),bo=(de,pe)=>As(de,pe)||gs(de,pe)||xs(de,pe)||Hr(de,pe),xa=de=>de.nodeType===3,vo=()=>({sOffset:0,fOffset:0,elements:[]}),ds=(de,pe)=>ie(To.fromDom(de),pe),xr=(de,pe,at,ft,Vt,nn=!0)=>{let rn=nn?pe(!1):at;for(;rn;){const en=gs(de,rn);if(en||xs(de,rn)){if(en?ft.cef(rn):ft.boundary(rn))break;rn=pe(!0);continue}else if(As(de,rn)){if(ft.boundary(rn))break}else xa(rn)&&ft.text(rn);if(rn===Vt)break;rn=pe(!1)}},ec=(de,pe,at,ft,Vt)=>{var nn;if(bo(de,at))return;const rn=(nn=de.getParent(ft,de.isBlock))!==null&&nn!==void 0?nn:de.getRoot(),en=new zs(at,rn),Cn=Vt?en.next.bind(en):en.prev.bind(en);xr(de,Cn,at,{boundary:Go,cef:Go,text:Nn=>{Vt?pe.fOffset+=Nn.length:pe.sOffset+=Nn.length,pe.elements.push(To.fromDom(Nn))}})},ca=(de,pe,at,ft,Vt,nn=!0)=>{const rn=new zs(at,pe),en=[];let Cn=vo();ec(de,Cn,at,pe,!1);const Nn=()=>(Cn.elements.length>0&&(en.push(Cn),Cn=vo()),!1);return xr(de,rn.next.bind(rn),at,{boundary:Nn,cef:zo=>(Nn(),Vt&&en.push(...Vt.cef(zo)),!1),text:zo=>{Cn.elements.push(To.fromDom(zo)),Vt&&Vt.text(zo,Cn)}},ft,nn),ft&&ec(de,Cn,ft,pe,!0),Nn(),en},yo=(de,pe)=>{const at=ds(pe.startContainer,pe.startOffset),ft=at.element.dom,Vt=ds(pe.endContainer,pe.endOffset),nn=Vt.element.dom;return ca(de,pe.commonAncestorContainer,ft,nn,{text:(rn,en)=>{rn===nn?en.fOffset+=rn.length-Vt.offset:rn===ft&&(en.sOffset+=at.offset)},cef:rn=>{const en=Bo(ra(To.fromDom(rn),"*[contenteditable=true]"),Cn=>{const Nn=Cn.dom;return ca(de,Nn,Nn)});return gt(en,(Cn,Nn)=>Ms(Cn.elements[0].dom,Nn.elements[0].dom)?1:-1)}},!1)},Ta=(de,pe)=>pe.collapsed?[]:yo(de,pe),xt=(de,pe)=>{const at=de.createRng();return at.selectNode(pe),Ta(de,at)},Eo=(de,pe)=>Bo(pe,at=>xt(de,at)),Pr=(de,pe,at=0,ft=de.length)=>{const Vt=pe.regex;Vt.lastIndex=at;const nn=[];let rn;for(;rn=Vt.exec(de);){const en=rn[pe.matchIndex],Cn=rn.index+rn[0].indexOf(en),Nn=Cn+en.length;if(Nn>ft)break;nn.push({start:Cn,finish:Nn}),Vt.lastIndex=Nn}return nn},br=(de,pe)=>{const at=Ne(de,(ft,Vt)=>{const nn=ir(Vt),rn=ft.last,en=rn+nn.length,Cn=Bo(pe,(Nn,zo)=>Nn.start<en&&Nn.finish>rn?[{element:Vt,start:Math.max(rn,Nn.start)-rn,finish:Math.min(en,Nn.finish)-rn,matchId:zo}]:[]);return{results:ft.results.concat(Cn),last:en}},{results:[],last:0}).results;return Xt(at,ft=>ft.matchId)},uc=(de,pe)=>Bo(pe,at=>{const ft=at.elements,Vt=W(ft,ir).join(""),nn=Pr(Vt,de,at.sOffset,Vt.length-at.fOffset);return br(ft,nn)}),vc=(de,pe)=>{sn(de,(at,ft)=>{sn(at,Vt=>{const nn=To.fromDom(pe.cloneNode(!1));mn(nn,"data-mce-index",ft);const rn=Vt.element.dom;if(rn.length===Vt.finish&&Vt.start===0)Bt(Vt.element,nn);else{rn.length!==Vt.finish&&rn.splitText(Vt.finish);const en=rn.splitText(Vt.start);Bt(To.fromDom(en),nn)}})})},Qo=(de,pe,at,ft)=>{const Vt=xt(de,at),nn=uc(pe,Vt);return vc(nn,ft),nn.length},Fc=(de,pe,at,ft)=>{const Vt=at.getBookmark(),nn=de.select("td[data-mce-selected],th[data-mce-selected]"),rn=nn.length>0?Eo(de,nn):Ta(de,at.getRng()),en=uc(pe,rn);return vc(en,ft),at.moveToBookmark(Vt),en.length},dc=de=>de.getAttribute("data-mce-index"),Yo=(de,pe,at,ft)=>{const Vt=de.dom.create("span",{"data-mce-bogus":1});Vt.className="mce-match-marker";const nn=de.getBody();return cr(de,pe,!1),ft?Fc(de.dom,at,de.selection,Vt):Qo(de.dom,at,nn,Vt)},fn=de=>{var pe;const at=de.parentNode;de.firstChild&&at.insertBefore(de.firstChild,de),(pe=de.parentNode)===null||pe===void 0||pe.removeChild(de)},Bs=(de,pe)=>{const at=[],ft=ut.toArray(de.getBody().getElementsByTagName("span"));if(ft.length)for(let Vt=0;Vt<ft.length;Vt++){const nn=dc(ft[Vt]);nn===null||!nn.length||nn===pe.toString()&&at.push(ft[Vt])}return at},qr=(de,pe,at)=>{const ft=pe.get();let Vt=ft.index;const nn=de.dom;at?Vt+1===ft.count?Vt=0:Vt++:Vt-1===-1?Vt=ft.count-1:Vt--,nn.removeClass(Bs(de,ft.index),"mce-match-marker-selected");const rn=Bs(de,Vt);return rn.length?(nn.addClass(Bs(de,Vt),"mce-match-marker-selected"),de.selection.scrollIntoView(rn[0]),Vt):-1},Ga=(de,pe)=>{const at=pe.parentNode;de.remove(pe),at&&de.isEmpty(at)&&de.remove(at)},rl=(de,pe)=>{const ft="("+de.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return pe?`(?:^|\\s|${nt()})`+ft+`(?=$|\\s|${nt()})`:ft},ms=(de,pe,at,ft,Vt,nn)=>{const rn=de.selection,en=rl(at,Vt),Cn=rn.isForward(),Nn={regex:new RegExp(en,ft?"g":"gi"),matchIndex:1},zo=Yo(de,pe,Nn,nn);if(oe.browser.isSafari()&&rn.setRng(rn.getRng(),Cn),zo){const cs=qr(de,pe,!0);pe.set({index:cs,count:zo,text:at,matchCase:ft,wholeWord:Vt,inSelection:nn})}return zo},rr=(de,pe)=>{const at=qr(de,pe,!0);pe.set({...pe.get(),index:at})},Ps=(de,pe)=>{const at=qr(de,pe,!1);pe.set({...pe.get(),index:at})},tc=de=>{const pe=dc(de);return pe!==null&&pe.length>0},Ic=(de,pe,at,ft,Vt)=>{const nn=pe.get(),rn=nn.index;let en,Cn=rn;ft=ft!==!1;const Nn=de.getBody(),zo=ut.grep(ut.toArray(Nn.getElementsByTagName("span")),tc);for(let cs=0;cs<zo.length;cs++){const Os=dc(zo[cs]);let _c=en=parseInt(Os,10);if(Vt||_c===nn.index){for(at.length?(zo[cs].innerText=at,fn(zo[cs])):Ga(de.dom,zo[cs]);zo[++cs];)if(_c=parseInt(dc(zo[cs]),10),_c===en)Ga(de.dom,zo[cs]);else{cs--;break}ft&&Cn--}else en>rn&&zo[cs].setAttribute("data-mce-index",String(en-1))}return pe.set({...nn,count:Vt?0:nn.count-1,index:Cn}),ft?rr(de,pe):Ps(de,pe),!Vt&&pe.get().count>0},cr=(de,pe,at)=>{let ft,Vt;const nn=pe.get(),rn=ut.toArray(de.getBody().getElementsByTagName("span"));for(let en=0;en<rn.length;en++){const Cn=dc(rn[en]);Cn!==null&&Cn.length&&(Cn===nn.index.toString()&&(ft||(ft=rn[en].firstChild),Vt=rn[en].firstChild),fn(rn[en]))}if(pe.set({...nn,index:-1,count:0,text:""}),ft&&Vt){const en=de.dom.createRng();return en.setStart(ft,0),en.setEnd(Vt,Vt.data.length),at!==!1&&de.selection.setRng(en),en}else return},ue=(de,pe)=>pe.get().count>1,se=(de,pe)=>pe.get().count>1,Be=(de,pe)=>({done:en=>cr(de,pe,en),find:(en,Cn,Nn,zo=!1)=>ms(de,pe,en,Cn,Nn,zo),next:()=>rr(de,pe),prev:()=>Ps(de,pe),replace:(en,Cn,Nn)=>Ic(de,pe,en,Cn,Nn)}),Ve=de=>{const pe=Sr(Zn.none()),at=()=>pe.get().each(de);return{clear:()=>{at(),pe.set(Zn.none())},isSet:()=>pe.get().isSome(),get:()=>pe.get(),set:en=>{at(),pe.set(Zn.some(en))}}},un=()=>{const de=Ve(Wo);return{...de,on:at=>de.get().each(at)}},Rn=(de,pe)=>{const at=un();de.undoManager.add();const ft=ut.trim(de.selection.getContent({format:"text"})),Vt=Dn=>{Dn.setEnabled("next",ue(de,pe)),Dn.setEnabled("prev",se(de,pe))},nn=Dn=>{const No=Dn.getData(),$o=pe.get();pe.set({...$o,matchCase:No.matchcase,wholeWord:No.wholewords,inSelection:No.inselection})},rn=(Dn,No)=>{Rt(["replace","replaceall","prev","next"],Yr=>Dn.setEnabled(Yr,!No))},en=(Dn,No)=>{No.redial(Lc(Dn,No.getData()))},Cn=(Dn,No)=>{oe.browser.isSafari()&&oe.deviceType.isTouch()&&(No==="find"||No==="replace"||No==="replaceall")&&Dn.focus(No)},Nn=Dn=>{cr(de,pe,!1),rn(Dn,!0),Vt(Dn)},zo=Dn=>{const No=Dn.getData(),$o=pe.get();if(!No.findtext.length){Nn(Dn);return}if($o.text===No.findtext&&$o.matchCase===No.matchcase&&$o.wholeWord===No.wholewords)rr(de,pe);else{const Kr=ms(de,pe,No.findtext,No.matchcase,No.wholewords,No.inselection);Kr<=0&&en(!0,Dn),rn(Dn,Kr===0)}Vt(Dn)},cs=pe.get(),Os={findtext:ft,replacetext:"",wholewords:cs.wholeWord,matchcase:cs.matchCase,inselection:cs.inSelection},_c=Dn=>{const No=[{type:"label",label:"Find",for:"findtext",items:[{type:"bar",items:[{type:"input",name:"findtext",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]}]},{type:"input",name:"replacetext",label:"Replace with",inputMode:"search"}];return Dn&&No.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),No},Lc=(Dn,No)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:_c(Dn)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:No,onChange:($o,Kr)=>{Dn&&en(!1,$o),Kr.name==="findtext"&&pe.get().count>0&&Nn($o)},onAction:($o,Kr)=>{const Yr=$o.getData();switch(Kr.name){case"find":zo($o);break;case"replace":Ic(de,pe,Yr.replacetext)?Vt($o):Nn($o);break;case"replaceall":Ic(de,pe,Yr.replacetext,!0,!0),Nn($o);break;case"prev":Ps(de,pe),Vt($o);break;case"next":rr(de,pe),Vt($o);break;case"matchcase":case"wholewords":case"inselection":en(!1,$o),nn($o),Nn($o);break}Cn($o,Kr.name)},onSubmit:$o=>{zo($o),Cn($o,"find")},onClose:()=>{de.focus(),cr(de,pe),de.undoManager.add()}});at.set(de.windowManager.open(Lc(!1,Os),{inline:"toolbar"}))},jn=(de,pe)=>{de.addCommand("SearchReplace",()=>{Rn(de,pe)})},qs=(de,pe)=>()=>{Rn(de,pe)},ve=(de,pe)=>{de.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:qs(de,pe),icon:"search"}),de.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:qs(de,pe),icon:"search",shortcut:"Meta+F"}),de.shortcuts.add("Meta+F","",qs(de,pe))};var Gn=()=>{js.add("searchreplace",de=>{const pe=Sr({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return jn(de,pe),ve(de,pe),Be(de,pe)})};Gn()})();export{aq as t};
