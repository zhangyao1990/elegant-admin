
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{_ as A}from"./index-qeCTDZwl.js";import{a as _}from"./element-plus-iUOJk6xm.js";import{d as O,ai as v,a as m,S as j,U as w,c as k,f as s,_ as a,X as z,Y as q,bo as N,bM as H,r as C,F as X,a8 as Y,O as U,V as I,$ as S,q as F,k as g,E as P}from"./@vue-B5ZJ3lyG.js";import{_ as L}from"./vue-esign-CYl9_Ryz.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-IWpKdA7_.js";import{_ as J}from"./index-BDNDDoI0.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-BkLPq0py.js";import"./vite-plugin-fake-server-4rIte7rE.js";import"./mockjs-CyY_Wk_H.js";import"./@imengyu-CEcZjhxx.js";import"./vue-DvVlWPqX.js";import"./floating-vue-AocVffS4.js";import"./@floating-ui-DiM7Jq06.js";import"./vue-m-message-CaZYo5LC.js";import"./overlayscrollbars-DIcyBJd7.js";import"./@iconify-BcJ8VpTk.js";import"./overlayscrollbars-vue-CwvYLriB.js";import"./@headlessui-Cgia3ZxR.js";import"./mitt-DJ65BbbF.js";import"./crypto-js-0jcLrwUI.js";import"./lodash-es-Cgwu3vQX.js";import"./pinia-C6gN_FJk.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-B53joON4.js";import"./hotkeys-js-BfWqkGRU.js";import"./vue-i18n-BoS7Exf_.js";import"./@intlify-CEEhciFb.js";import"./colord-CrBFWQzZ.js";import"./monaco-editor-1i8roCpp.js";import"./path-browserify-CaPOtSVJ.js";import"./axios-CRnBnh7r.js";import"./@vueuse-D9pgrdqz.js";import"./nprogress-CK9xi7fq.js";import"./@element-plus-DlsPF3Ud.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DHZ_rfNz.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";const Q={class:"slot"},W={key:0,class:"el-upload__tip"},Z={style:{display:"inline-block"}},ee=O({name:"FileUpload",__name:"index",props:{action:{},headers:{},data:{},name:{default:"file"},size:{default:2},max:{default:3},files:{default:()=>[]},notip:{type:Boolean,default:!1},ext:{default:()=>["zip","rar"]}},emits:["onSuccess"],setup(y,{emit:d}){const n=y,$=d,t=o=>{const p=o.name.split(".").at(-1)??"",u=n.ext.includes(p),r=o.size/1024/1024<n.size;return u||_.error(`上传文件只支持 ${n.ext.join(" / ")} 格式！`),r||_.error(`上传文件大小不能超过 ${n.size}MB！`),u&&r},i=()=>{_.warning("文件上传超过限制")},V=(o,l,p)=>{$("onSuccess",o,l,p)};return(o,l)=>{const p=A,u=v("ElAlert"),r=v("ElUpload");return m(),j(r,{headers:o.headers,action:o.action,data:o.data,name:o.name,"before-upload":t,"on-exceed":i,"on-success":V,"file-list":o.files,limit:o.max,drag:""},{tip:w(()=>[o.notip?z("",!0):(m(),k("div",W,[s("div",Z,[a(u,{title:`上传文件支持 ${o.ext.join(" / ")} 格式，单个文件大小不超过 ${o.size}MB，且文件数量不超过 ${o.max} 个`,type:"info","show-icon":"",closable:!1},null,8,["title"])])]))]),default:w(()=>[s("div",Q,[a(p,{name:"ep:upload-filled",class:"el-icon--upload"}),l[0]||(l[0]=s("div",{class:"el-upload__text"},[q(" 将文件拖到此处，或"),s("em",null,"点击上传")],-1))])]),_:1},8,["headers","action","data","name","file-list","limit"])}}}),oe=L(ee,[["__scopeId","data-v-29fadd92"]]),te={class:"upload-container"},se={class:"mask"},ae={class:"actions"},ie=["onClick"],le=["onClick"],ne=["onClick"],pe=["onClick"],re={key:0,class:"el-upload__tip"},ce={style:{display:"inline-block"}},me=O({name:"ImagesUpload",__name:"index",props:N({action:{},headers:{},data:{},name:{default:"file"},size:{default:2},max:{default:3},width:{default:150},height:{default:150},placeholder:{default:""},notip:{type:Boolean,default:!1},ext:{default:()=>["jpg","png","gif","bmp"]}},{modelValue:{default:[]},modelModifiers:{}}),emits:N(["onSuccess"],["update:modelValue"]),setup(y,{emit:d}){const n=y,$=d,t=H(y,"modelValue"),i=C({dialogImageIndex:0,imageViewerVisible:!1,progress:{preview:"",percent:0}});function V(e){i.value.dialogImageIndex=e,i.value.imageViewerVisible=!0}function o(){i.value.imageViewerVisible=!1}function l(e){t.value.splice(e,1)}function p(e,f){f==="left"&&e!==0&&(t.value[e]=t.value.splice(e-1,1,t.value[e])[0]),f==="right"&&e!==t.value.length-1&&(t.value[e]=t.value.splice(e+1,1,t.value[e])[0])}const u=e=>{const E=e.name.split(".").at(-1)??"",c=n.ext.includes(E),b=e.size/1024/1024<n.size;return c||_.error(`上传图片只支持 ${n.ext.join(" / ")} 格式！`),b||_.error(`上传图片大小不能超过 ${n.size}MB！`),c&&b&&(i.value.progress.preview=URL.createObjectURL(e)),c&&b},r=e=>{i.value.progress.percent=~~e.percent},M=e=>{i.value.progress.preview="",i.value.progress.percent=0,$("onSuccess",e)};return(e,f)=>{const E=v("ElImage"),c=A,b=v("ElProgress"),R=v("ElUpload"),T=v("ElAlert"),x=v("ElImageViewer");return m(),k("div",te,[(m(!0),k(X,null,Y(t.value,(D,h)=>(m(),k("div",{key:h,class:"images"},[h<e.max?(m(),j(E,{key:0,src:D,style:U(`width:${e.width}px;height:${e.height}px;`),fit:"cover"},null,8,["src","style"])):z("",!0),s("div",se,[s("div",ae,[s("span",{title:"预览",onClick:B=>V(h)},[a(c,{name:"ep:zoom-in",class:"icon"})],8,ie),s("span",{title:"移除",onClick:B=>l(h)},[a(c,{name:"ep:delete",class:"icon"})],8,le),I(s("span",{title:"左移",class:F({disabled:h===0}),onClick:B=>p(h,"left")},[a(c,{name:"ep:back",class:"icon"})],10,ne),[[S,t.value.length>1]]),I(s("span",{title:"右移",class:F({disabled:h===t.value.length-1}),onClick:B=>p(h,"right")},[a(c,{name:"ep:right",class:"icon"})],10,pe),[[S,t.value.length>1]])])])]))),128)),I(a(R,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":u,"on-progress":r,"on-success":M,drag:"",class:"images-upload"},{default:w(()=>[s("div",{class:"image-slot",style:U(`width:${e.width}px;height:${e.height}px;`)},[a(c,{name:"ep:plus",class:"icon"})],4),I(s("div",{class:"progress",style:U(`width:${e.width}px;height:${e.height}px;`)},[a(E,{src:g(i).progress.preview,style:U(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),a(b,{type:"circle",width:Math.min(e.width,e.height)*.8,percentage:g(i).progress.percent},null,8,["width","percentage"])],4),[[S,g(i).progress.percent]])]),_:1},8,["headers","action","data","name"]),[[S,t.value.length<e.max]]),e.notip?z("",!0):(m(),k("div",re,[s("div",ce,[a(T,{title:`上传图片支持 ${e.ext.join(" / ")} 格式，单张图片大小不超过 ${e.size}MB，建议图片尺寸为 ${e.width}*${e.height}，且图片数量不超过 ${e.max} 张`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),g(i).imageViewerVisible?(m(),j(x,{key:1,"url-list":t.value,"initial-index":g(i).dialogImageIndex,teleported:"",onClose:o},null,8,["url-list","initial-index"])):z("",!0)])}}}),de=L(me,[["__scopeId","data-v-cba8f4cb"]]),ue={class:"py-2"},fe={class:"py-2"},he={class:"py-2"},to=O({name:"ComponentExampleUpload",__name:"index",setup(y){const d=C("https://picsum.photos/750/450"),n=C(["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]),$=C([{name:"xxxx文件.zip",url:"http://images.lookbi.com/uploads/apply/96/d8521fc691e472eec91a170201866e7d.zip"}]);function t(o){o.error===""?d.value=o.data.path:_.warning(o.error)}function i(o){o.error===""?n.value.push(o.data.path):_.warning(o.error)}function V(o,l,p){o.error===""?$.value.push({name:l.name,url:o.error===""?o.data.path:""}):(p.pop(),_.warning(o.error))}return(o,l)=>{const p=K,u=J,r=G,M=de,e=oe;return m(),k("div",null,[a(p,{title:"上传"},{content:w(()=>l[2]||(l[2]=[s("p",null,"ImageUpload / ImagesUpload / FileUpload",-1),s("p",{style:{"margin-bottom":"0"}}," 由于线上演示环境开启了 Mock ，会导致上传功能报错，请在本地运行并查看演示 ",-1)])),_:1}),a(r,{title:"单图上传"},{default:w(()=>[s("div",ue,[a(u,{modelValue:g(d),"onUpdate:modelValue":l[0]||(l[0]=f=>P(d)?d.value=f:null),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",width:250,height:150,onOnSuccess:t},null,8,["modelValue"])])]),_:1}),a(r,{title:"多图上传（默认最多3张）"},{default:w(()=>[s("div",fe,[a(M,{modelValue:g(n),"onUpdate:modelValue":l[1]||(l[1]=f=>P(n)?n.value=f:null),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",onOnSuccess:i},null,8,["modelValue"])])]),_:1}),a(r,{title:"文件上传（默认最多3个）"},{default:w(()=>[s("div",he,[a(e,{files:g($),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/file",onOnSuccess:V},null,8,["files"])])]),_:1})])}}});export{to as default};
