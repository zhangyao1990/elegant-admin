
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{_ as q}from"./index-qeCTDZwl.js";import{d as K,bK as L,i as M,r as m,b as w,ai as s,a,c,_ as o,U as i,f as V,k as t,a3 as u,V as k,S as B,Y as X,Z as O,N as b,X as Y,$ as z,F as Z,a8 as G,q as H,n as J}from"./@vue-B5ZJ3lyG.js";import{d as P}from"./@element-plus-DlsPF3Ud.js";import Q from"./Add-C58AJOfu.js";import{C as W}from"./element-plus-iUOJk6xm.js";import{_ as ee}from"./vue-esign-CYl9_Ryz.js";import"./vite-plugin-fake-server-4rIte7rE.js";import"./mockjs-CyY_Wk_H.js";import"./@imengyu-CEcZjhxx.js";import"./vue-DvVlWPqX.js";import"./floating-vue-AocVffS4.js";import"./@floating-ui-DiM7Jq06.js";import"./vue-m-message-CaZYo5LC.js";import"./overlayscrollbars-DIcyBJd7.js";import"./@iconify-BcJ8VpTk.js";import"./overlayscrollbars-vue-CwvYLriB.js";import"./@headlessui-Cgia3ZxR.js";import"./mitt-DJ65BbbF.js";import"./crypto-js-0jcLrwUI.js";import"./lodash-es-Cgwu3vQX.js";import"./pinia-C6gN_FJk.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-B53joON4.js";import"./hotkeys-js-BfWqkGRU.js";import"./vue-i18n-BoS7Exf_.js";import"./@intlify-CEEhciFb.js";import"./colord-CrBFWQzZ.js";import"./monaco-editor-1i8roCpp.js";import"./path-browserify-CaPOtSVJ.js";import"./axios-CRnBnh7r.js";import"./@vueuse-D9pgrdqz.js";import"./nprogress-CK9xi7fq.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DHZ_rfNz.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";const oe={class:"node-box"},te={class:"head"},ne=K({__name:"Node",props:{icon:{},node:{},color:{},readOnly:{type:Boolean,default:!1},close:{type:Boolean,default:!0}},emits:["addNode","delNode","activeNode"],setup($,{emit:S}){L(e=>({aceef56e:e.color}));const l=$,f=S,N=M("flowDesign",{readOnly:m(!1),nodesError:m({})}),_=w(()=>N.nodesError.value[l.node.id]),d=w(()=>{var e;return((e=N.readOnly)==null?void 0:e.value)||l.readOnly}),p=m(!1),C=m();function I(){d.value||(p.value=!0,J(()=>{var e;(e=C.value)==null||e.focus()}))}function y(){p.value&&(p.value=!1)}function D(){d.value||f("activeNode",l.node)}function E(e){f("addNode",e,l.node)}function j(){f("delNode",l.node)}return(e,n)=>{var h;const x=s("el-input"),v=q,g=s("el-icon"),A=s("el-text"),F=s("el-button"),R=s("el-popconfirm"),T=s("el-tooltip"),U=s("el-card");return a(),c("div",oe,[o(U,{class:H(["node",[{"error-node":((h=t(_))==null?void 0:h.length)&&!t(d)}]]),onClick:D},{header:i(()=>[V("div",te,[t(p)?(a(),c("div",{key:0,onClick:n[1]||(n[1]=u(()=>{},["stop"]))},[k(o(x,{ref_key:"inputRef",ref:C,modelValue:e.node.name,"onUpdate:modelValue":n[0]||(n[0]=r=>e.node.name=r),maxlength:"30",onBlur:y},null,8,["modelValue"]),[[t(W),y]])])):(a(),B(A,{key:1,tag:"b",truncated:"",onClick:u(I,["stop"])},{default:i(()=>[X(O(e.node.name)+" ",1),o(g,null,{default:i(()=>[o(v,{size:15,name:"ep:edit-pen"})]),_:1})]),_:1})),b(e.$slots,"icon",{},()=>[e.icon?(a(),B(v,{key:0,size:22,color:"#ffffff",name:e.icon},null,8,["name"])):Y("",!0)],!0)]),V("span",{onClick:n[2]||(n[2]=u(()=>{},["stop"]))},[o(R,{title:"您确定要删除该节点吗？",width:"200","hide-after":0,placement:"right",onConfirm:j},{reference:i(()=>[k(o(F,{class:"node-close",plain:"",circle:"",icon:t(P),size:"small",type:"danger"},null,8,["icon"]),[[z,e.close&&!t(d)]])]),_:1})]),o(T,{placement:"right"},{content:i(()=>[(a(!0),c(Z,null,G(t(_),r=>(a(),c("div",{key:r.id},O(r.message),1))),128))]),default:i(()=>{var r;return[k(o(g,{class:"warn-icon",size:20},{default:i(()=>[o(v,{size:25,name:"ep:warning",onClick:n[3]||(n[3]=u(()=>{},["stop"]))})]),_:1},512),[[z,((r=t(_))==null?void 0:r.length)&&!t(d)]])]}),_:1})]),default:i(()=>[b(e.$slots,"default",{},void 0,!0)]),_:3},8,["class"]),o(Q,{onAddNode:E})])}}}),Ke=ee(ne,[["__scopeId","data-v-fc1ccda5"]]);export{Ke as default};
