
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import{p as w}from"./element-plus-iUOJk6xm.js";import{d as x,i as u,r as d,l as F,p as $,o as j,b as f,a as h,c as v,_ as M,U as N,N as b,F as W,a8 as B,Q as E,k as L,X as O}from"./@vue-B5ZJ3lyG.js";import"./lodash-es-Cgwu3vQX.js";import"./@vueuse-D9pgrdqz.js";import"./nprogress-CK9xi7fq.js";import"./@imengyu-CEcZjhxx.js";import"./vue-DvVlWPqX.js";import"./@element-plus-DlsPF3Ud.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DHZ_rfNz.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DiM7Jq06.js";const V={key:0,class:"form-main",style:{height:"100%"}},ee=x({__name:"form",props:{componentSchema:{type:Object,require:!0,default:()=>({})}},setup(g,{expose:y}){var p,c;const a=g,S=u("pageManager",{}),t=d(null),m=u("forms",{}),_=d(!0),n=F({});S.addFormData(n,(c=(p=a.componentSchema)==null?void 0:p.componentProps)==null?void 0:c.name),$("formData",n);function s(){return n}function l(e){Object.assign(n,e)}function C(){var e;return(e=t.value)==null?void 0:e.validate()}j(async()=>{var e,r,o,i;if(((e=a.componentSchema)==null?void 0:e.type)==="form"&&m.value&&t.value){const k=((o=(r=a.componentSchema)==null?void 0:r.componentProps)==null?void 0:o.name)??((i=a.componentSchema)==null?void 0:i.name)??"default";return m.value[k]=t.value,t.value.getData=s,t.value.setData=l,!1}});const D=f(()=>{const e=a.componentSchema.componentProps;let r=e.labelCol,o=e.wrapperCol;return e.labelLayout==="fixed"&&(r={style:`width:${typeof e.labelWidth=="number"?`${e.labelWidth}px`:e.labelWidth}`},o={style:"width:auto;flex:1"}),{...e,labelCol:r,wrapperCol:o}}),P=f(()=>a.componentSchema.children??[]);return y({form:t,getData:s,setData:l,validate:C}),(e,r)=>_.value?(h(),v("div",V,[M(L(w),E({ref_key:"form",ref:t,model:n},D.value,{style:{height:"100%"}}),{default:N(()=>[b(e.$slots,"edit-node",{},()=>[(h(!0),v(W,null,B(P.value,o=>b(e.$slots,"node",{componentSchema:o})),256))])]),_:3},16,["model"])])):O("",!0)}});export{ee as default};
