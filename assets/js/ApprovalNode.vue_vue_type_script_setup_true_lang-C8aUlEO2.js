
/**
 * 由 MrZhang 提供技术支持
 * Powered by elegant-admin
 * Github https://github.com/zhangyao1990/elegant-admin
 */

import j from"./Node-DguPqMLY.js";import{d as k,i as w,r as f,g as B,ai as C,a as E,S as R,U as $,_ as D,Y as L,Z as P,k as S,Q as T}from"./@vue-B5ZJ3lyG.js";const I=k({__name:"ApprovalNode",props:{node:{}},setup(y){const b=y,{fields:u,nodesError:d}=w("flowDesign",{fields:f([]),nodesError:f({})}),e=f("");return B(()=>{var h,_;const s=[],{id:a,name:o,assigneeType:l,nobody:x,nobodyUsers:c,choice:N,formUser:r,formRole:i,leader:p,orgLeader:m,users:g,roles:v}=b.node;if(l==="user")g.length>0?e.value=g.map(t=>t).join("、"):(s.push({id:a,name:o,message:"未指定人员"}),e.value="未指定人员");else if(l==="choice")e.value=`发起人自选（${N?"多选":"单选"}）`;else if(l==="self")e.value="发起人自己";else if(l==="leader")e.value=p===1?"直属上级":`${p}级上级`;else if(l==="orgLeader")e.value=m===1?"直属主管":`${m}级主管`;else if(l==="formUser"){r||s.push({id:a,name:o,message:"未指定表单内人员"});const t=((h=u.value.find(n=>n.id===r))==null?void 0:h.label)||r||"?";e.value=`表单内（${t}）人员`}else if(l==="formRole"){i||s.push({id:a,name:o,message:"未指定表单内角色"});const t=((_=u.value.find(n=>n.id===i))==null?void 0:_.label)||i||"?";e.value=`表单内（${t}）角色`}else if(l==="role")if(v.length>0){const t=v.map(n=>getById(n));Promise.all(t).then(n=>{e.value=n.map(U=>U.data.name).join("、")})}else s.push({id:a,name:o,message:"未指定角色"}),e.value="未指定角色";else l==="autoRefuse"?e.value="系统自动拒绝":(s.push({id:a,name:o,message:"未知错误"}),e.value=o);x==="assign"&&(!c||c.length===0)&&s.push({id:a,name:o,message:"未指定审批人为空时的处理人"}),s.length>0?d.value[a]=s:delete d.value[a]}),(s,a)=>{const o=C("el-text");return E(),R(j,T(s.$attrs,{icon:"ep:stamp",color:"#ff943e",node:s.node}),{default:$(()=>[D(o,null,{default:$(()=>[L(P(S(e)),1)]),_:1})]),_:1},16,["node"])}}});export{I as _};
